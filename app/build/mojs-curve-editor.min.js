!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("mojs-curve-editor",[],e):"object"==typeof exports?exports["mojs-curve-editor"]=e():t["mojs-curve-editor"]=e()}(this,function(){return function(t){function e(t){var e=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.charset="utf-8",n.src=p.p+""+t+".hot-update.js",e.appendChild(n)}function n(t){if("undefined"==typeof XMLHttpRequest)return t(new Error("No browser support"));try{var e=new XMLHttpRequest,n=p.p+""+b+".hot-update.json";e.open("GET",n,!0),e.timeout=1e4,e.send(null)}catch(r){return t(r)}e.onreadystatechange=function(){if(4===e.readyState)if(0===e.status)t(new Error("Manifest request to "+n+" timed out."));else if(404===e.status)t();else if(200!==e.status&&304!==e.status)t(new Error("Manifest request to "+n+" failed."));else{try{var r=JSON.parse(e.responseText)}catch(i){return void t(i)}t(null,r)}}}function r(t){function e(t,e){"ready"===w&&o("prepare"),S++,p.e(t,function(){function n(){S--,"prepare"===w&&(j[t]||c(t),0===S&&0===O&&f())}try{e.call(null,r)}finally{n()}})}var n=N[t];if(!n)return p;var r=function(e){return n.hot.active?N[e]?(N[e].parents.indexOf(t)<0&&N[e].parents.push(t),n.children.indexOf(e)<0&&n.children.push(e)):T=[t]:(console.warn("[HMR] unexpected require("+e+") from disposed module "+t),T=[]),p(e)};for(var i in p)Object.prototype.hasOwnProperty.call(p,i)&&(h?Object.defineProperty(r,i,function(t){return{configurable:!0,enumerable:!0,get:function(){return p[t]},set:function(e){p[t]=e}}}(i)):r[i]=p[i]);return h?Object.defineProperty(r,"e",{enumerable:!0,value:e}):r.e=e,r}function i(t){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],active:!0,accept:function(t,n){if("undefined"==typeof t)e._selfAccepted=!0;else if("function"==typeof t)e._selfAccepted=t;else if("object"==typeof t)for(var r=0;r<t.length;r++)e._acceptedDependencies[t[r]]=n;else e._acceptedDependencies[t]=n},decline:function(t){if("undefined"==typeof t)e._selfDeclined=!0;else if("number"==typeof t)e._declinedDependencies[t]=!0;else for(var n=0;n<t.length;n++)e._declinedDependencies[t[n]]=!0},dispose:function(t){e._disposeHandlers.push(t)},addDisposeHandler:function(t){e._disposeHandlers.push(t)},removeDisposeHandler:function(t){var n=e._disposeHandlers.indexOf(t);n>=0&&e._disposeHandlers.splice(n,1)},check:a,apply:l,status:function(t){return t?void E.push(t):w},addStatusHandler:function(t){E.push(t)},removeStatusHandler:function(t){var e=E.indexOf(t);e>=0&&E.splice(e,1)},data:x[t]};return e}function o(t){w=t;for(var e=0;e<E.length;e++)E[e].call(null,t)}function u(t){var e=+t+""===t;return e?+t:t}function a(t,e){if("idle"!==w)throw new Error("check() is only allowed in idle status");"function"==typeof t?(_=!1,e=t):(_=t,e=e||function(t){if(t)throw t}),o("check"),n(function(t,n){if(t)return e(t);if(!n)return o("idle"),void e(null,null);A={},P={},j={};for(var r=0;r<n.c.length;r++)P[n.c[r]]=!0;g=n.h,o("prepare"),y=e,m={};var i=0;c(i),"prepare"===w&&0===S&&0===O&&f()})}function s(t,e){if(P[t]&&A[t]){A[t]=!1;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(m[n]=e[n]);0===--O&&0===S&&f()}}function c(t){P[t]?(A[t]=!0,O++,e(t)):j[t]=!0}function f(){o("ready");var t=y;if(y=null,t)if(_)l(_,t);else{var e=[];for(var n in m)Object.prototype.hasOwnProperty.call(m,n)&&e.push(u(n));t(null,e)}}function l(e,n){function r(t){for(var e=[t],n={},r=e.slice();r.length>0;){var o=r.pop(),t=N[o];if(t&&!t.hot._selfAccepted){if(t.hot._selfDeclined)return new Error("Aborted because of self decline: "+o);if(0===o)return;for(var u=0;u<t.parents.length;u++){var a=t.parents[u],s=N[a];if(s.hot._declinedDependencies[o])return new Error("Aborted because of declined dependency: "+o+" in "+a);e.indexOf(a)>=0||(s.hot._acceptedDependencies[o]?(n[a]||(n[a]=[]),i(n[a],[o])):(delete n[a],e.push(a),r.push(a)))}}}return[e,n]}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.indexOf(r)<0&&t.push(r)}}if("ready"!==w)throw new Error("apply() is only allowed in ready status");"function"==typeof e?(n=e,e={}):e&&"object"==typeof e?n=n||function(t){if(t)throw t}:(e={},n=n||function(t){if(t)throw t});var a={},s=[],c={};for(var f in m)if(Object.prototype.hasOwnProperty.call(m,f)){var l=u(f),d=r(l);if(!d){if(e.ignoreUnaccepted)continue;return o("abort"),n(new Error("Aborted because "+l+" is not accepted"))}if(d instanceof Error)return o("abort"),n(d);c[l]=m[l],i(s,d[0]);for(var l in d[1])Object.prototype.hasOwnProperty.call(d[1],l)&&(a[l]||(a[l]=[]),i(a[l],d[1][l]))}for(var h=[],v=0;v<s.length;v++){var l=s[v];N[l]&&N[l].hot._selfAccepted&&h.push({module:l,errorHandler:N[l].hot._selfAccepted})}o("dispose");for(var y=s.slice();y.length>0;){var l=y.pop(),_=N[l];if(_){for(var E={},O=_.hot._disposeHandlers,S=0;S<O.length;S++){var j=O[S];j(E)}x[l]=E,_.hot.active=!1,delete N[l];for(var S=0;S<_.children.length;S++){var A=N[_.children[S]];if(A){var P=A.parents.indexOf(l);P>=0&&A.parents.splice(P,1)}}}}for(var l in a)if(Object.prototype.hasOwnProperty.call(a,l))for(var _=N[l],M=a[l],S=0;S<M.length;S++){var C=M[S],P=_.children.indexOf(C);P>=0&&_.children.splice(P,1)}o("apply"),b=g;for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(t[l]=c[l]);var I=null;for(var l in a)if(Object.prototype.hasOwnProperty.call(a,l)){for(var _=N[l],M=a[l],R=[],v=0;v<M.length;v++){var C=M[v],j=_.hot._acceptedDependencies[C];R.indexOf(j)>=0||R.push(j)}for(var v=0;v<R.length;v++){var j=R[v];try{j(a)}catch(k){I||(I=k)}}}for(var v=0;v<h.length;v++){var D=h[v],l=D.module;T=[l];try{p(l)}catch(k){if("function"==typeof D.errorHandler)try{D.errorHandler(k)}catch(k){I||(I=k)}else I||(I=k)}}return I?(o("fail"),n(I)):(o("idle"),void n(null,s))}function p(e){if(N[e])return N[e].exports;var n=N[e]={exports:{},id:e,loaded:!1,hot:i(e),parents:T,children:[]};return t[e].call(n.exports,n,n.exports,r(e)),n.loaded=!0,n.exports}var d=this.webpackHotUpdatemojs_curve_editor;this.webpackHotUpdatemojs_curve_editor=function(t,e){s(t,e),d&&d(t,e)};var h=!1;try{Object.defineProperty({},"x",{get:function(){}}),h=!0}catch(v){}var y,m,g,_=!0,b="da201b1f9ab819915c67",x={},T=[],E=[],w="idle",O=0,S=0,j={},A={},P={},N={};return p.m=t,p.c=N,p.p="build/",p.h=function(){return b},r(0)(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(2),o=n(5),u=r(o),a=n(92),s=r(a);n(137),document.addEventListener("DOMContentLoaded",function(){(0,i.render)((0,i.h)(u["default"],{state:s["default"].getState()}),document.body)})},function(t,e,n){(function(t){!function(t,n){n(e)}(this,function(t){function e(t,e,n){this.nodeName=t,this.attributes=e,this.children=n,this.key=e&&e.key}function n(t,e){if(e)for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}function r(t){return n({},t)}function i(t,e){for(var n=e.split("."),r=0;r<n.length&&t;r++)t=t[n[r]];return t}function o(t,e){return[].slice.call(t,e)}function u(t){return"function"==typeof t}function a(t){return"string"==typeof t}function s(t){return void 0===t||null===t}function c(t){return t===!1||s(t)}function f(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}function l(t,n,r){var i,o,s,p=arguments.length;if(p>2){var d=typeof r;if(3===p&&"object"!==d&&"function"!==d)c(r)||(i=[String(r)]);else{i=[];for(var h=2;h<p;h++){var v=arguments[h];if(!c(v)){v.join?o=v:(o=Q)[0]=v;for(var y=0;y<o.length;y++){var m=o[y],g=!(c(m)||u(m)||m instanceof e);g&&!a(m)&&(m=String(m)),g&&s?i[i.length-1]+=m:c(m)||(i.push(m),s=g)}}}}}else if(n&&n.children)return l(t,n,n.children);n&&(n.children&&delete n.children,u(t)||("className"in n&&(n["class"]=n.className,delete n.className),s=n["class"],s&&!a(s)&&(n["class"]=f(s))));var _=new e(t,n||void 0,i);return K.vnode&&K.vnode(_),_}function p(t,e){return l(t.nodeName,n(r(t.attributes),e),arguments.length>2?o(arguments,2):t.children)}function d(t,e,n){var r=e.split("."),o=r[0];return function(e){var c,f,l,p=e&&e.currentTarget||this,d=t.state,h=d;if(a(n)?(f=i(e,n),s(f)&&(p=p._component)&&(f=i(p,n))):f=p.nodeName?(p.nodeName+p.type).match(/^input(check|rad)/i)?p.checked:p.value:e,u(f)&&(f=f.call(p)),r.length>1){for(l=0;l<r.length-1;l++)h=h[r[l]]||(h[r[l]]={});h[r[l]]=f,f=d[o]}t.setState((c={},c[o]=f,c))}}function h(t){1===nt.push(t)&&(K.debounceRendering||Z)(v)}function v(){if(nt.length){var t,e=nt;for(nt=rt,rt=e;t=e.pop();)t._dirty&&q(t)}}function y(t){var e=t&&t.nodeName;return e&&u(e)&&!(e.prototype&&e.prototype.render)}function m(t,e){return t.nodeName(j(t),e||$)}function g(t,e){return t[tt]||(t[tt]=e||{})}function _(t){return t instanceof Text?3:t instanceof Element?1:0}function b(t){var e=t.parentNode;e&&e.removeChild(t)}function x(t,e,n,r,i){if(g(t)[e]=n,"key"!==e&&"children"!==e)if("class"!==e||i)if("style"===e){if((!n||a(n)||a(r))&&(t.style.cssText=n||""),n&&"object"==typeof n){if(!a(r))for(var o in r)o in n||(t.style[o]="");for(var o in n)t.style[o]="number"!=typeof n[o]||et[o]?n[o]:n[o]+"px"}}else if("dangerouslySetInnerHTML"===e)n&&(t.innerHTML=n.__html);else if("o"===e[0]&&"n"===e[1]){var f=t._listeners||(t._listeners={});e=G(e.substring(2)),n?f[e]||t.addEventListener(e,E):f[e]&&t.removeEventListener(e,E),f[e]=n}else if("type"!==e&&!i&&e in t)T(t,e,s(n)?"":n),c(n)&&t.removeAttribute(e);else{var l=i&&e.match(/^xlink\:?(.+)/);c(n)?l?t.removeAttributeNS("http://www.w3.org/1999/xlink",G(l[1])):t.removeAttribute(e):"object"==typeof n||u(n)||(l?t.setAttributeNS("http://www.w3.org/1999/xlink",G(l[1]),n):t.setAttribute(e,n))}else t.className=n||""}function T(t,e,n){try{t[e]=n}catch(r){}}function E(t){return this._listeners[t.type](K.event&&K.event(t)||t)}function w(t){for(var e={},n=t.attributes.length;n--;)e[t.attributes[n].name]=t.attributes[n].value;return e}function O(t,e){return a(e)?3===_(t):a(e.nodeName)?S(t,e.nodeName):u(e.nodeName)?t._componentConstructor===e.nodeName||y(e):void 0}function S(t,e){return t.normalizedNodeName===e||G(t.nodeName)===G(e)}function j(t){var e=t.nodeName.defaultProps,i=r(e||t.attributes);return e&&n(i,t.attributes),t.children&&(i.children=t.children),i}function A(t){N(t);var e=G(t.nodeName),n=it[e];n?n.push(t):it[e]=[t]}function P(t,e){var n=G(t),r=it[n]&&it[n].pop()||(e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t));return g(r),r.normalizedNodeName=n,r}function N(t){b(t),1===_(t)&&(g(t,w(t)),t._component=t._componentConstructor=null)}function M(){for(var t;t=ot.pop();)t.componentDidMount&&t.componentDidMount()}function C(t,e,n,r,i){ut++;var o=I(t,e,n,r);return i&&o.parentNode!==i&&i.appendChild(o),--ut||M(),o}function I(t,e,n,r){for(var i=e&&e.attributes;y(e);)e=m(e,n);if(s(e))return document.createComment("");if(a(e)){if(t){if(3===_(t)&&t.parentNode)return t.nodeValue!=e&&(t.nodeValue=e),t;A(t)}return document.createTextNode(e)}var o,c=t,f=e.nodeName;if(u(f))return Y(t,e,n,r);if(a(f)||(f=String(f)),o="svg"===G(f),o&&(at=!0),t){if(!S(t,f)){for(c=P(f,at);t.firstChild;)c.appendChild(t.firstChild);D(t)}}else c=P(f,at);return e.children&&1===e.children.length&&"string"==typeof e.children[0]&&1===c.childNodes.length&&c.firstChild instanceof Text?c.firstChild.nodeValue=e.children[0]:(e.children||c.firstChild)&&R(c,e.children,n,r),U(c,e.attributes),i&&i.ref&&(c[tt].ref=i.ref)(c),o&&(at=!1),c}function R(t,e,n,r){var i,o,u,a,c=t.childNodes,f=[],l={},p=0,d=0,h=c.length,v=0,y=e&&e.length;if(h)for(var m=0;m<h;m++){var g=c[m],_=y?(o=g._component)?o.__key:(o=g[tt])?o.key:null:null;_||0===_?(p++,l[_]=g):f[v++]=g}if(y)for(var m=0;m<y;m++){if(u=e[m],a=null,p&&u.attributes){var _=u.key;!s(_)&&_ in l&&(a=l[_],l[_]=void 0,p--)}if(!a&&d<v)for(i=d;i<v;i++)if(o=f[i],o&&O(o,u)){a=o,f[i]=void 0,i===v-1&&v--,i===d&&d++;break}a=I(a,u,n,r),a!==c[m]&&t.insertBefore(a,c[m]||null)}if(p)for(var m in l)l[m]&&(f[d=v++]=l[m]);d<v&&k(f)}function k(t,e){for(var n=t.length;n--;){var r=t[n];r&&D(r,e)}}function D(t,e){var n=t._component;n?H(n,!e):(t[tt]&&t[tt].ref&&t[tt].ref(null),e||A(t),t.childNodes&&t.childNodes.length&&k(t.childNodes,e))}function U(t,e){var n=t[tt]||w(t);for(var r in n)e&&r in e||x(t,r,null,n[r],at);if(e)for(var i in e)i in n&&e[i]==("value"===i||"selected"===i||"checked"===i?t[i]:n[i])||x(t,i,e[i],n[i],at)}function L(t){var e=t.constructor.name,n=st[e];n?n.push(t):st[e]=[t]}function F(t,e,n){var r=new t(e,n),i=st[t.name];if(i)for(var o=i.length;o--;)if(i[o].constructor===t){r.nextBase=i[o].nextBase,i.splice(o,1);break}return r}function z(t){t._dirty||(t._dirty=!0,h(t))}function X(t,e,n,r,i){var o=t.base;t._disableRendering||(t._disableRendering=!0,(t.__ref=e.ref)&&delete e.ref,(t.__key=e.key)&&delete e.key,s(o)||i?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,r),r&&r!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=r),t.prevProps||(t.prevProps=t.props),t.props=e,t._disableRendering=!1,0!==n&&(1!==n&&K.syncComponentUpdates===!1&&o?z(t):q(t,1,i)),t.__ref&&t.__ref(t))}function q(t,e,i){if(!t._disableRendering){var o,a,s=t.props,c=t.state,f=t.context,l=t.prevProps||s,p=t.prevState||c,d=t.prevContext||f,h=t.base,v=h||t.nextBase,g=v&&v.nextSibling,_=v&&v.parentNode,b=v&&v._component,x=t._component;if(h&&(t.props=l,t.state=p,t.context=d,2!==e&&t.shouldComponentUpdate&&t.shouldComponentUpdate(s,c,f)===!1?o=!0:t.componentWillUpdate&&t.componentWillUpdate(s,c,f),t.props=s,t.state=c,t.context=f),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!o){for(t.render&&(a=t.render(s,c,f)),t.getChildContext&&(f=n(r(f),t.getChildContext()));y(a);)a=m(a,f);var T,E,w=a&&a.nodeName;if(u(w)&&w.prototype.render){var O=x,S=j(a);O&&O.constructor===w?X(O,S,1,f):(T=O,O=F(w,S,f),O._parentComponent=t,t._component=O,X(O,S,0,f),q(O,1)),E=O.base}else{var A=v;T=x,T&&(A=t._component=null),(v||1===e)&&(A&&(A._component=null),E=C(A,a,f,i||!h))}if(v&&E!==v&&(_&&E!==_&&_.insertBefore(E,g||null),T||b!==t||x||!v.parentNode||(v._component=null,D(v))),T&&H(T,!0),t.base=E,E){for(var P=t,N=t;N=N._parentComponent;)P=N;E._component=P,E._componentConstructor=P.constructor}}!h||i?(ot.unshift(t),ut||M()):!o&&t.componentDidUpdate&&t.componentDidUpdate(l,p,d);var I,R=t._renderCallbacks;if(R)for(;I=R.pop();)I.call(t);return a}}function Y(t,e,n,r){for(var i=t&&t._component,o=t,u=i&&t._componentConstructor===e.nodeName,a=u,s=j(e);i&&!a&&(i=i._parentComponent);)a=i.constructor===e.nodeName;return!a||r&&!i._component?(i&&!u&&(H(i,!0),t=o=null),i=F(e.nodeName,s,n),t&&!i.nextBase&&(i.nextBase=t),X(i,s,1,n,r),t=i.base,o&&t!==o&&(o._component=null,D(o))):(X(i,s,3,n,r),t=i.base),t}function H(t,e){var n=t.base;t._disableRendering=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var r=t._component;r?H(r,e):n&&(n[tt]&&n[tt].ref&&n[tt].ref(null),t.nextBase=n,e&&(b(n),L(t)),k(n.childNodes,!e)),t.__ref&&t.__ref(null),t.componentDidUnmount&&t.componentDidUnmount()}function W(t,e){this._dirty=!0,this._disableRendering=!1,this.prevState=this.prevProps=this.prevContext=this.base=this.nextBase=this._parentComponent=this._component=this.__ref=this.__key=this._linkedStates=this._renderCallbacks=null,this.context=e||{},this.props=t,this.state=this.getInitialState&&this.getInitialState()||{}}function V(t,e,n){return C(n,t,{},!1,e)}var B={},G=function(t){return B[t]||(B[t]=t.toLowerCase())},J="undefined"!=typeof Promise&&Promise.resolve(),Z=J?function(t){J.then(t)}:setTimeout,K={vnode:s},Q=[],$={},tt="undefined"!=typeof Symbol?Symbol["for"]("preactattr"):"__preactattr_",et={boxFlex:1,boxFlexGroup:1,columnCount:1,fillOpacity:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,strokeOpacity:1,widows:1,zIndex:1,zoom:1},nt=[],rt=[],it={},ot=[],ut=0,at=!1,st={};n(W.prototype,{linkState:function(t,e){var n=this._linkedStates||(this._linkedStates={}),r=t+"|"+e;return n[r]||(n[r]=d(this,t,e))},setState:function(t,e){var i=this.state;this.prevState||(this.prevState=r(i)),n(i,u(t)?t(i,this.props):t),e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),z(this)},forceUpdate:function(){q(this,2)},render:function(){return null}}),t.h=l,t.cloneElement=p,t.Component=W,t.render=V,t.rerender=v,t.options=K})}).call(e,n(3).setImmediate)},function(t,e,n){(function(t,r){function i(t,e){this._id=t,this._clearFn=e}var o=n(4).nextTick,u=Function.prototype.apply,a=Array.prototype.slice,s={},c=0;e.setTimeout=function(){return new i(u.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(u.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=c++,r=!(arguments.length<2)&&a.call(arguments,1);return s[n]=!0,o(function(){s[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete s[t]}}).call(e,n(3).setImmediate,n(3).clearImmediate)},function(t,e){function n(){l&&c&&(l=!1,c.length?f=c.concat(f):p=-1,f.length&&r())}function r(){if(!l){var t=u.call(null,n);l=!0;for(var e=f.length;e;){for(c=f,f=[];++p<e;)c&&c[p].run();p=-1,e=f.length}c=null,l=!1,a.call(null,t)}}function i(t,e){this.fun=t,this.array=e}function o(){}var u,a,s=t.exports={};!function(){try{u=setTimeout}catch(t){u=function(){throw new Error("setTimeout is not defined")}}try{a=clearTimeout}catch(t){a=function(){throw new Error("clearTimeout is not defined")}}}();var c,f=[],l=!1,p=-1;s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new i(t,e)),1!==f.length||l||u.call(null,r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=o,s.addListener=o,s.once=o,s.off=o,s.removeListener=o,s.removeAllListeners=o,s.emit=o,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),u=n(32),a=r(u),s=n(33),c=r(s),f=n(37),l=r(f),p=n(84),d=r(p),h=n(2),v=n(92),y=r(v),m=n(116),g=r(m),_=n(130),b=r(_),x=n(131),T=r(x),E=n(113),w=n(139),O=r(w);n(132);var S=function(t){function e(){return(0,a["default"])(this,e),(0,l["default"])(this,(0,o["default"])(e).apply(this,arguments))}return(0,d["default"])(e,t),(0,c["default"])(e,[{key:"componentDidMount",value:function(){var t=this;(0,T["default"])(new b["default"](this.base)).on("pan",function(e){t.x=e.deltaX,t.y=e.deltaY,y["default"].dispatch({type:"EDITOR_TRANSLATE",data:{x:e.deltaX,y:e.deltaY}})}).on("panend",function(e){var n=e.deltaX,r=e.deltaY,i=y["default"].getState().resize.translate;t.x=t.y=0,y["default"].dispatch({type:"EDITOR_TRANSLATE",data:{x:i.x+n,y:i.y+r}})}).on("tap",function(t){y["default"].dispatch({type:"POINT_DESELECT_ALL"})});this._addKeyUp(),y["default"].subscribe(function(){t.render()})}},{key:"_addKeyUp",value:function(){document.addEventListener("keyup",this._onKeyUp)}},{key:"_onKeyUp",value:function(t){if(t.altKey)switch(t.which){case 90:return y["default"].dispatch(E.ActionCreators.undo());case 88:return y["default"].dispatch(E.ActionCreators.redo());case 68:return y["default"].dispatch({type:"POINT_DELETE"})}}},{key:"_getStyle",value:function(){var t=this.props.state,e=t.resize,n=e.temp_top,r=e.temp_bottom,i=e.temp_right,o=e.translate;n+=e.top,r+=e.bottom,i+=e.right;var u=g["default"].CURVE_SIZE+53,a=g["default"].CURVE_SIZE+2*g["default"].CURVE_PADDING;a-n<a&&(n=0),a+r<a&&(r=0),u+i<u&&(i=0),n=(0,O["default"])(n,-1),r=(0,O["default"])(r);var s="height: "+(a-n+r)+"px",c="width: "+(u+i)+"px",f=(this.x||0)+o.x,l=(this.y||0)+o.y,p="transform: translate("+f+"px, "+(l+n)+"px)";return""+mojs.h.prefix.css+p+"; "+p+"; "+c+"; "+s+";"}},{key:"render",value:function(){var t=n(136),e=this.props.state,r=(e.resize,this._getStyle());return(0,h.h)("div",{className:t["curve-editor"],style:r},(0,h.h)("div",{className:t["curve-editor__left"]}),(0,h.h)("div",{className:t["curve-editor__right"]}))}}]),e}(h.Component);e["default"]=S},function(t,e,n){t.exports={"default":n(7),__esModule:!0}},function(t,e,n){n(8),t.exports=n(19).Object.getPrototypeOf},function(t,e,n){var r=n(9),i=n(11);n(17)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(10);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(12),i=n(9),o=n(13)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(14)("keys"),i=n(16);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(15),i="__core-js_shared__",o=r[i]||(r[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(18),i=n(19),o=n(28);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],u={};u[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",u)}},function(t,e,n){var r=n(15),i=n(19),o=n(20),u=n(22),a="prototype",s=function(t,e,n){var c,f,l,p=t&s.F,d=t&s.G,h=t&s.S,v=t&s.P,y=t&s.B,m=t&s.W,g=d?i:i[e]||(i[e]={}),_=g[a],b=d?r:h?r[e]:(r[e]||{})[a];d&&(n=e);for(c in n)f=!p&&b&&void 0!==b[c],f&&c in g||(l=f?b[c]:n[c],g[c]=d&&"function"!=typeof b[c]?n[c]:y&&f?o(l,r):m&&b[c]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[a]=t[a],e}(l):v&&"function"==typeof l?o(Function.call,l):l,v&&((g.virtual||(g.virtual={}))[c]=l,t&s.R&&_&&!_[c]&&u(_,c,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(21);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(23),i=n(31);t.exports=n(27)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(24),i=n(26),o=n(30),u=Object.defineProperty;e.f=n(27)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return u(t,e,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(25);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(27)&&!n(28)(function(){return 7!=Object.defineProperty(n(29)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=!n(28)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(25),i=n(15).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(25);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(34),o=r(i);e["default"]=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o["default"])(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){t.exports={"default":n(35),__esModule:!0}},function(t,e,n){n(36);var r=n(19).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(18);r(r.S+r.F*!n(27),"Object",{defineProperty:n(23).f})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(38),o=r(i);e["default"]=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":(0,o["default"])(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(39),o=r(i),u=n(68),a=r(u),s="function"==typeof a["default"]&&"symbol"==typeof o["default"]?function(t){return typeof t}:function(t){return t&&"function"==typeof a["default"]&&t.constructor===a["default"]?"symbol":typeof t};e["default"]="function"==typeof a["default"]&&"symbol"===s(o["default"])?function(t){return"undefined"==typeof t?"undefined":s(t)}:function(t){return t&&"function"==typeof a["default"]&&t.constructor===a["default"]?"symbol":"undefined"==typeof t?"undefined":s(t)}},function(t,e,n){t.exports={"default":n(40),__esModule:!0}},function(t,e,n){n(41),n(63),t.exports=n(67).f("iterator")},function(t,e,n){"use strict";var r=n(42)(!0);n(44)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(43),i=n(10);t.exports=function(t){return function(e,n){var o,u,a=String(i(e)),s=r(n),c=a.length;return s<0||s>=c?t?"":void 0:(o=a.charCodeAt(s),o<55296||o>56319||s+1===c||(u=a.charCodeAt(s+1))<56320||u>57343?t?a.charAt(s):o:t?a.slice(s,s+2):(o-55296<<10)+(u-56320)+65536)}}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){"use strict";var r=n(45),i=n(18),o=n(46),u=n(22),a=n(12),s=n(47),c=n(48),f=n(61),l=n(11),p=n(62)("iterator"),d=!([].keys&&"next"in[].keys()),h="@@iterator",v="keys",y="values",m=function(){return this};t.exports=function(t,e,n,g,_,b,x){c(n,e,g);var T,E,w,O=function(t){if(!d&&t in P)return P[t];switch(t){case v:return function(){return new n(this,t)};case y:return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",j=_==y,A=!1,P=t.prototype,N=P[p]||P[h]||_&&P[_],M=N||O(_),C=_?j?O("entries"):M:void 0,I="Array"==e?P.entries||N:N;if(I&&(w=l(I.call(new t)),w!==Object.prototype&&(f(w,S,!0),r||a(w,p)||u(w,p,m))),j&&N&&N.name!==y&&(A=!0,M=function(){return N.call(this)}),r&&!x||!d&&!A&&P[p]||u(P,p,M),s[e]=M,s[S]=m,_)if(T={values:j?M:O(y),keys:b?M:O(v),entries:C},x)for(E in T)E in P||o(P,E,T[E]);else i(i.P+i.F*(d||A),e,T);return T}},function(t,e){t.exports=!0},function(t,e,n){t.exports=n(22)},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(49),i=n(31),o=n(61),u={};n(22)(u,n(62)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(u,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(24),i=n(50),o=n(59),u=n(13)("IE_PROTO"),a=function(){},s="prototype",c=function(){var t,e=n(29)("iframe"),r=o.length,i="<",u=">";for(e.style.display="none",n(60).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(i+"script"+u+"document.F=Object"+i+"/script"+u),t.close(),c=t.F;r--;)delete c[s][o[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(a[s]=r(t),n=new a,a[s]=null,n[u]=t):n=c(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(23),i=n(24),o=n(51);t.exports=n(27)?Object.defineProperties:function(t,e){i(t);for(var n,u=o(e),a=u.length,s=0;a>s;)r.f(t,n=u[s++],e[n]);return t}},function(t,e,n){var r=n(52),i=n(59);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(12),i=n(53),o=n(56)(!1),u=n(13)("IE_PROTO");t.exports=function(t,e){var n,a=i(t),s=0,c=[];for(n in a)n!=u&&r(a,n)&&c.push(n);for(;e.length>s;)r(a,n=e[s++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(54),i=n(10);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(55);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(53),i=n(57),o=n(58);t.exports=function(t){return function(e,n,u){var a,s=r(e),c=i(s.length),f=o(u,c);if(t&&n!=n){for(;c>f;)if(a=s[f++],a!=a)return!0}else for(;c>f;f++)if((t||f in s)&&s[f]===n)return t||f||0;return!t&&-1}}},function(t,e,n){var r=n(43),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(43),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){t.exports=n(15).document&&document.documentElement},function(t,e,n){var r=n(23).f,i=n(12),o=n(62)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(14)("wks"),i=n(16),o=n(15).Symbol,u="function"==typeof o,a=t.exports=function(t){return r[t]||(r[t]=u&&o[t]||(u?o:i)("Symbol."+t))};a.store=r},function(t,e,n){n(64);for(var r=n(15),i=n(22),o=n(47),u=n(62)("toStringTag"),a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],s=0;s<5;s++){var c=a[s],f=r[c],l=f&&f.prototype;l&&!l[u]&&i(l,u,c),o[c]=o.Array}},function(t,e,n){"use strict";var r=n(65),i=n(66),o=n(47),u=n(53);t.exports=n(44)(Array,"Array",function(t,e){this._t=u(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){e.f=n(62)},function(t,e,n){t.exports={"default":n(69),__esModule:!0}},function(t,e,n){n(70),n(81),n(82),n(83),t.exports=n(19).Symbol},function(t,e,n){"use strict";var r=n(15),i=n(12),o=n(27),u=n(18),a=n(46),s=n(71).KEY,c=n(28),f=n(14),l=n(61),p=n(16),d=n(62),h=n(67),v=n(72),y=n(73),m=n(74),g=n(77),_=n(24),b=n(53),x=n(30),T=n(31),E=n(49),w=n(78),O=n(80),S=n(23),j=n(51),A=O.f,P=S.f,N=w.f,M=r.Symbol,C=r.JSON,I=C&&C.stringify,R="prototype",k=d("_hidden"),D=d("toPrimitive"),U={}.propertyIsEnumerable,L=f("symbol-registry"),F=f("symbols"),z=f("op-symbols"),X=Object[R],q="function"==typeof M,Y=r.QObject,H=!Y||!Y[R]||!Y[R].findChild,W=o&&c(function(){
return 7!=E(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=A(X,e);r&&delete X[e],P(t,e,n),r&&t!==X&&P(X,e,r)}:P,V=function(t){var e=F[t]=E(M[R]);return e._k=t,e},B=q&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof M},G=function(t,e,n){return t===X&&G(z,e,n),_(t),e=x(e,!0),_(n),i(F,e)?(n.enumerable?(i(t,k)&&t[k][e]&&(t[k][e]=!1),n=E(n,{enumerable:T(0,!1)})):(i(t,k)||P(t,k,T(1,{})),t[k][e]=!0),W(t,e,n)):P(t,e,n)},J=function(t,e){_(t);for(var n,r=m(e=b(e)),i=0,o=r.length;o>i;)G(t,n=r[i++],e[n]);return t},Z=function(t,e){return void 0===e?E(t):J(E(t),e)},K=function(t){var e=U.call(this,t=x(t,!0));return!(this===X&&i(F,t)&&!i(z,t))&&(!(e||!i(this,t)||!i(F,t)||i(this,k)&&this[k][t])||e)},Q=function(t,e){if(t=b(t),e=x(e,!0),t!==X||!i(F,e)||i(z,e)){var n=A(t,e);return!n||!i(F,e)||i(t,k)&&t[k][e]||(n.enumerable=!0),n}},$=function(t){for(var e,n=N(b(t)),r=[],o=0;n.length>o;)i(F,e=n[o++])||e==k||e==s||r.push(e);return r},tt=function(t){for(var e,n=t===X,r=N(n?z:b(t)),o=[],u=0;r.length>u;)!i(F,e=r[u++])||n&&!i(X,e)||o.push(F[e]);return o};q||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===X&&e.call(z,n),i(this,k)&&i(this[k],t)&&(this[k][t]=!1),W(this,t,T(1,n))};return o&&H&&W(X,t,{configurable:!0,set:e}),V(t)},a(M[R],"toString",function(){return this._k}),O.f=Q,S.f=G,n(79).f=w.f=$,n(76).f=K,n(75).f=tt,o&&!n(45)&&a(X,"propertyIsEnumerable",K,!0),h.f=function(t){return V(d(t))}),u(u.G+u.W+u.F*!q,{Symbol:M});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)d(et[nt++]);for(var et=j(d.store),nt=0;et.length>nt;)v(et[nt++]);u(u.S+u.F*!q,"Symbol",{"for":function(t){return i(L,t+="")?L[t]:L[t]=M(t)},keyFor:function(t){if(B(t))return y(L,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){H=!0},useSimple:function(){H=!1}}),u(u.S+u.F*!q,"Object",{create:Z,defineProperty:G,defineProperties:J,getOwnPropertyDescriptor:Q,getOwnPropertyNames:$,getOwnPropertySymbols:tt}),C&&u(u.S+u.F*(!q||c(function(){var t=M();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!B(t)){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return e=r[1],"function"==typeof e&&(n=e),!n&&g(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!B(e))return e}),r[1]=e,I.apply(C,r)}}}),M[R][D]||n(22)(M[R],D,M[R].valueOf),l(M,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,e,n){var r=n(16)("meta"),i=n(25),o=n(12),u=n(23).f,a=0,s=Object.isExtensible||function(){return!0},c=!n(28)(function(){return s(Object.preventExtensions({}))}),f=function(t){u(t,r,{value:{i:"O"+ ++a,w:{}}})},l=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!s(t))return"F";if(!e)return"E";f(t)}return t[r].i},p=function(t,e){if(!o(t,r)){if(!s(t))return!0;if(!e)return!1;f(t)}return t[r].w},d=function(t){return c&&h.NEED&&s(t)&&!o(t,r)&&f(t),t},h=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:d}},function(t,e,n){var r=n(15),i=n(19),o=n(45),u=n(67),a=n(23).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:u.f(t)})}},function(t,e,n){var r=n(51),i=n(53);t.exports=function(t,e){for(var n,o=i(t),u=r(o),a=u.length,s=0;a>s;)if(o[n=u[s++]]===e)return n}},function(t,e,n){var r=n(51),i=n(75),o=n(76);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var u,a=n(t),s=o.f,c=0;a.length>c;)s.call(t,u=a[c++])&&e.push(u);return e}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(55);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(53),i=n(79).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return i(t)}catch(e){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?a(t):i(r(t))}},function(t,e,n){var r=n(52),i=n(59).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(76),i=n(31),o=n(53),u=n(30),a=n(12),s=n(26),c=Object.getOwnPropertyDescriptor;e.f=n(27)?c:function(t,e){if(t=o(t),e=u(e,!0),s)try{return c(t,e)}catch(n){}if(a(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e){},function(t,e,n){n(72)("asyncIterator")},function(t,e,n){n(72)("observable")},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(85),o=r(i),u=n(89),a=r(u),s=n(38),c=r(s);e["default"]=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":(0,c["default"])(e)));t.prototype=(0,a["default"])(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o["default"]?(0,o["default"])(t,e):t.__proto__=e)}},function(t,e,n){t.exports={"default":n(86),__esModule:!0}},function(t,e,n){n(87),t.exports=n(19).Object.setPrototypeOf},function(t,e,n){var r=n(18);r(r.S,"Object",{setPrototypeOf:n(88).set})},function(t,e,n){var r=n(25),i=n(24),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(20)(Function.call,n(80).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){t.exports={"default":n(90),__esModule:!0}},function(t,e,n){n(91);var r=n(19).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(18);r(r.S,"Object",{create:n(49)})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(93),o=n(107),u=r(o),a=(0,i.createStore)(u["default"]);e["default"]=a},function(t,e,n){(function(t){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(){}e.__esModule=!0,e.compose=e.applyMiddleware=e.bindActionCreators=e.combineReducers=e.createStore=void 0;var o=n(94),u=r(o),a=n(102),s=r(a),c=n(104),f=r(c),l=n(105),p=r(l),d=n(106),h=r(d),v=n(103),y=r(v);"production"!==t.env.NODE_ENV&&"string"==typeof i.name&&"isCrushed"!==i.name&&(0,y["default"])("You are currently using minified code outside of NODE_ENV === 'production'. This means that you are running a slower development build of Redux. You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) to ensure you have the correct code for your production build."),e.createStore=u["default"],e.combineReducers=s["default"],e.bindActionCreators=f["default"],e.applyMiddleware=p["default"],e.compose=h["default"]}).call(e,n(4))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n){function r(){m===y&&(m=y.slice())}function o(){return v}function a(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var e=!0;return r(),m.push(t),function(){if(e){e=!1,r();var n=m.indexOf(t);m.splice(n,1)}}}function f(t){if(!(0,u["default"])(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(g)throw new Error("Reducers may not dispatch actions.");try{g=!0,v=h(v,t)}finally{g=!1}for(var e=y=m,n=0;n<e.length;n++)e[n]();return t}function l(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");h=t,f({type:c.INIT})}function p(){var t,e=a;return t={subscribe:function(t){function n(){t.next&&t.next(o())}if("object"!=typeof t)throw new TypeError("Expected the observer to be an object.");n();var r=e(n);return{unsubscribe:r}}},t[s["default"]]=function(){return this},t}var d;if("function"==typeof e&&"undefined"==typeof n&&(n=e,e=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(i)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var h=t,v=e,y=[],m=y,g=!1;return f({type:c.INIT}),d={dispatch:f,subscribe:a,getState:o,replaceReducer:l},d[s["default"]]=p,d}e.__esModule=!0,e.ActionTypes=void 0,e["default"]=i;var o=n(95),u=r(o),a=n(100),s=r(a),c=e.ActionTypes={INIT:"@@redux/INIT"}},function(t,e,n){function r(t){if(!u(t)||p.call(t)!=a||o(t))return!1;var e=i(t);if(null===e)return!0;var n=f.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==l}var i=n(96),o=n(98),u=n(99),a="[object Object]",s=Object.prototype,c=Function.prototype.toString,f=s.hasOwnProperty,l=c.call(Object),p=s.toString;t.exports=r},function(t,e,n){var r=n(97),i=Object.getPrototypeOf,o=r(i,Object);t.exports=o},function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},function(t,e){function n(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}t.exports=n},function(t,e){function n(t){return!!t&&"object"==typeof t}t.exports=n},function(t,e,n){(function(e){"use strict";t.exports=n(101)(e||window||this)}).call(e,function(){return this}())},function(t,e){"use strict";t.exports=function(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}},function(t,e,n){(function(t){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){var n=e&&e.type,r=n&&'"'+n.toString()+'"'||"an action";return"Given action "+r+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function o(t,e,n){var r=Object.keys(e),i=n&&n.type===s.ActionTypes.INIT?"initialState argument passed to createStore":"previous state received by the reducer";if(0===r.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!(0,f["default"])(t))return"The "+i+' has unexpected type of "'+{}.toString.call(t).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following '+('keys: "'+r.join('", "')+'"');var o=Object.keys(t).filter(function(t){return!e.hasOwnProperty(t)});return o.length>0?"Unexpected "+(o.length>1?"keys":"key")+" "+('"'+o.join('", "')+'" found in '+i+". ")+"Expected to find one of the known reducer keys instead: "+('"'+r.join('", "')+'". Unexpected keys will be ignored.'):void 0}function u(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:s.ActionTypes.INIT});if("undefined"==typeof r)throw new Error('Reducer "'+e+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var i="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:i}))throw new Error('Reducer "'+e+'" returned undefined when probed with a random type. '+("Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function a(e){for(var n=Object.keys(e),r={},a=0;a<n.length;a++){var s=n[a];"function"==typeof e[s]&&(r[s]=e[s])}var c,f=Object.keys(r);try{u(r)}catch(l){c=l}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments[1];if(c)throw c;if("production"!==t.env.NODE_ENV){var u=o(e,r,n);u&&(0,p["default"])(u)}for(var a=!1,s={},l=0;l<f.length;l++){var d=f[l],h=r[d],v=e[d],y=h(v,n);if("undefined"==typeof y){var m=i(d,n);throw new Error(m)}s[d]=y,a=a||y!==v}return a?s:e}}e.__esModule=!0,e["default"]=a;var s=n(94),c=n(95),f=r(c),l=n(103),p=r(l)}).call(e,n(4))},function(t,e){"use strict";function n(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t);try{throw new Error(t)}catch(e){}}e.__esModule=!0,e["default"]=n},function(t,e){"use strict";function n(t,e){return function(){return e(t.apply(void 0,arguments))}}function r(t,e){if("function"==typeof t)return n(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(t),i={},o=0;o<r.length;o++){var u=r[o],a=t[u];"function"==typeof a&&(i[u]=n(a,e))}return i}e.__esModule=!0,e["default"]=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(n,r,i){var u=t(n,r,i),s=u.dispatch,c=[],f={getState:u.getState,dispatch:function(t){return s(t)}};return c=e.map(function(t){return t(f)}),s=a["default"].apply(void 0,c)(u.dispatch),o({},u,{dispatch:s})}}}e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e["default"]=i;var u=n(106),a=r(u)},function(t,e){"use strict";function n(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0===e.length)return function(t){return t};var r=function(){var t=e[e.length-1],n=e.slice(0,-1);return{v:function(){return n.reduceRight(function(t,e){return e(t)},t.apply(void 0,arguments))}}}();return"object"==typeof r?r.v:void 0}e.__esModule=!0,e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(108),o=r(i),u=n(93),a=n(113),s=r(a),c=n(114),f=r(c),l=n(117),p=r(l),d=n(129),h=r(d),v={limit:10,filter:function(t,e,n){return t.isRecord},debug:!1},y=(0,u.combineReducers)({pointControls:(0,s["default"])(h["default"],(0,o["default"])({},v)),resize:f["default"],points:(0,s["default"])(p["default"],(0,o["default"])({},v))});e["default"]=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(109),o=r(i);e["default"]=o["default"]||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){t.exports={"default":n(110),__esModule:!0}},function(t,e,n){n(111),t.exports=n(19).Object.assign},function(t,e,n){var r=n(18);r(r.S+r.F,"Object",{assign:n(112)})},function(t,e,n){"use strict";var r=n(51),i=n(75),o=n(76),u=n(9),a=n(54),s=Object.assign;t.exports=!s||n(28)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=s({},t)[n]||Object.keys(s({},e)).join("")!=r})?function(t,e){for(var n=u(t),s=arguments.length,c=1,f=i.f,l=o.f;s>c;)for(var p,d=a(arguments[c++]),h=f?r(d).concat(f(d)):r(d),v=h.length,y=0;v>y;)l.call(d,p=h[y++])&&(n[p]=d[p]);return n}:s},function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(){if(T){for(var t,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];console.group||n.unshift("%credux-undo","font-style: italic"),(t=console).log.apply(t,n)}}function i(t,e){if(T){var n=["action",t.type];if(console.group){var i;n.unshift("%credux-undo","font-style: italic"),(i=console).groupCollapsed.apply(i,n),console.log("received",{state:e,action:t})}else r.apply(void 0,n)}}function o(){if(T)return console.groupEnd&&console.groupEnd()}function u(t){var e=t.past,n=t.future;return e.length+1+n.length}function a(t,e,i){r("insert",{state:e,history:t,free:i-u(t)});var o=t.past,a=t.present,s=i&&u(t)>=i;return void 0===a?{past:[],present:e,future:[]}:{past:[].concat(n(o.slice(s?1:0)),[a]),present:e,future:[]}}function s(t){r("undo",{history:t});var e=t.past,i=t.present,o=t.future;return e.length<=0?t:{past:e.slice(0,e.length-1),present:e[e.length-1],future:[i].concat(n(o))}}function c(t){r("redo",{history:t});var e=t.past,i=t.present,o=t.future;return o.length<=0?t:{future:o.slice(1,o.length),present:o[0],past:[].concat(n(e),[i])}}function f(t,e){if(0===e)return c(t);var n=t.past,r=t.present,i=t.future;return{future:i.slice(e+1),present:i[e],past:n.concat([r]).concat(i.slice(0,e))}}function l(t,e){if(e===t.past.length-1)return s(t);var n=t.past,r=t.present,i=t.future;return{future:n.slice(e+1).concat([r]).concat(i),present:n[e],past:n.slice(0,e)}}function p(t){return x({},t,{history:t})}function d(t,e){return p(x({},t,e))}function h(t){return{past:[],present:t,future:[]}}function v(t){var e=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return Array.isArray(t)?t:"string"==typeof t?[t]:e}function y(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];T=e.debug;var n={initialState:e.initialState,initTypes:v(e.initTypes,["@@redux/INIT","@@INIT"]),limit:e.limit,filter:e.filter||function(){return!0},undoType:e.undoType||E.UNDO,redoType:e.redoType||E.REDO,jumpToPastType:e.jumpToPastType||E.JUMP_TO_PAST,jumpToFutureType:e.jumpToFutureType||E.JUMP_TO_FUTURE};return n.history=e.initialHistory||h(n.initialState),0===n.initTypes.length&&console.warn("redux-undo: supply at least one action type in initTypes to ensure initial state"),function(e,v){i(v,e);var y=void 0;switch(v.type){case n.undoType:return y=s(e),r("after undo",y),o(),y?d(e,y):e;case n.redoType:return y=c(e),r("after redo",y),o(),y?d(e,y):e;case n.jumpToPastType:return y=l(e,v.index),r("after jumpToPast",y),o(),y?d(e,y):e;case n.jumpToFutureType:return y=f(e,v.index),r("after jumpToFuture",y),o(),y?d(e,y):e;default:if(y=t(e&&e.present,v),n.initTypes.some(function(t){return t===v.type}))return r("reset history due to init action"),o(),p(x({},e,h(y)));if(n.filter&&"function"==typeof n.filter&&!n.filter(v,y,e&&e.present))return r("filter prevented action, not storing it"),o(),p(x({},e,{present:y}));var m=e&&void 0!==e.present?e:n.history,g=a(m,y,n.limit);return r("after insert",{history:g,free:n.limit-u(g)}),o(),p(x({},e,g))}}}function m(){return function(t,e,n){return e!==n}}function g(t){var e=v(t);return function(t){return e.indexOf(t.type)>=0}}function _(t){return console.error("Deprecation Warning: Please change `ifAction` to `includeAction`"),g(t)}function b(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],e=v(t);return function(t){return e.indexOf(t.type)<0}}Object.defineProperty(e,"__esModule",{value:!0});var x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.parseActions=v,e["default"]=y,e.distinctState=m,e.includeAction=g,e.ifAction=_,e.excludeAction=b;var T=void 0,E=e.ActionTypes={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO",JUMP_TO_FUTURE:"@@redux-undo/JUMP_TO_FUTURE",JUMP_TO_PAST:"@@redux-undo/JUMP_TO_PAST"};e.ActionCreators={undo:function(){return{type:E.UNDO}},redo:function(){return{type:E.REDO}},jumpToFuture:function(t){return{type:E.JUMP_TO_FUTURE,index:t}},jumpToPast:function(t){return{type:E.JUMP_TO_PAST,index:t}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(115),o=r(i),u=n(108),a=r(u),s=n(116),c=r(s),f={translate:{x:150,y:100},top:0,temp_top:0,right:0,temp_right:0,bottom:0,temp_bottom:0,scalerX:c["default"].CURVE_PERCENT},l=function(){var t=arguments.length<=0||void 0===arguments[0]?f:arguments[0],e=arguments[1];switch(e.type){case"EDITOR_RESIZE":var n=e.data,r=n.type,i="top"===r||"bottom"===r?n.y:n.x,u=(0,a["default"])({},t,(0,o["default"])({},"temp_"+r,i));return"right"===r&&(u.scalerX=(c["default"].CURVE_SIZE+Math.max(t.right+i,0))/100),u;case"EDITOR_RESIZE_END":var s,l=e.data,p=l.type,d="top"===p||"bottom"===p?l.y:l.x,h=t[""+e.data.type]+d,v="top"===p?"min":"max",y=(0,a["default"])({},t,(s={},(0,o["default"])(s,""+e.data.type,Math[v](0,h)),(0,o["default"])(s,"temp_"+e.data.type,0),s));return y;case"EDITOR_TRANSLATE":return(0,a["default"])({},t,{translate:e.data})}return t};e["default"]=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(34),o=r(i);e["default"]=function(t,e,n){return e in t?(0,o["default"])(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=350;e["default"]={CURVE_SIZE:n,CURVE_PERCENT:n/100,CURVE_PADDING:10}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(118),o=r(i),u=n(108),a=r(u),s=n(128),c=r(s),f=n(116),l=r(f),p=[(0,c["default"])({x:0,y:l["default"].CURVE_SIZE,isLockedX:!0,type:"straight"}),(0,c["default"])({x:50,y:l["default"].CURVE_SIZE/2,type:"mirrored"}),(0,c["default"])({x:100,y:0,isLockedX:!0})],d=function(t){for(var e=[],n=0;n<t.length;n++)e.push((0,a["default"])({},t[n],{isSelected:!1}));return e},h=function(t){for(var e=[],n=0;n<t.length;n++)t[n].isSelected&&e.push(n);return e},v=function(){var t=arguments.length<=0||void 0===arguments[0]?p:arguments[0],e=arguments[1];switch(e.type){case"POINT_TRANSLATE":var n=e.data,r=n.index,i=t[r],u=[].concat((0,o["default"])(t));return u[n.index]=(0,a["default"])({},i,{tempX:n.x,tempY:n.y}),u;case"POINT_TRANSLATE_END":var s=e.data,f=t[s],v=[].concat((0,o["default"])(t));return v[s]=(0,a["default"])({},f,{x:f.x+f.tempX,y:f.y+f.tempY,tempX:0,tempY:0}),v;case"POINT_SELECT":var y=e.data,m=y.index,g=y.isDeselect,_=g?d(t):[].concat((0,o["default"])(t)),b=_[m],x=m===_.length-1?_[m-1]:_[m+1],T=m===_.length-1?1:2,E="handle"+T,w=1===T?2:1,O="handle"+w,S=(0,a["default"])({},b[E]),j=(0,a["default"])({},b[O]);b[E]=S,b[O]=j;var A=null==S.angle||null==S.radius;b.type;if(A){S.radius=50;var P=(x.y-b.y)/l["default"].CURVE_PERCENT,N=x.x-b.x,M=Math.atan(P/N)*(180/Math.PI)-90;N>0&&(M-=180),S.angle=M,j.radius=S.radius,j.angle=S.angle-180}return b.isSelected=!0,_;case"POINT_ADD":var C=e.data,I=C.x,R=C.y,k=C.index,D=d(t);return[].concat((0,o["default"])(D.slice(0,k)),[(0,c["default"])({x:I,y:R,isSelected:!0})],(0,o["default"])(D.slice(k)));case"POINT_DELETE":for(var U=h(t),L=[],F=0;F<t.length;F++){var z=t[F];(U.indexOf(F)===-1||z.isLockedX)&&L.push(z)}return L;case"POINT_CHANGE_TYPE":for(var X=h(t),q=[],F=0;F<t.length;F++){var Y=t[F],H=e.data;q.push((0,a["default"])({},Y)),X.indexOf(F)!==-1&&(q[F].type=H);var W=F,V=q[W],B=(W===q.length-1?q[W-1]:q[W+1],W===q.length-1?1:2),G=1===B?2:1,J="handle"+B,Z="handle"+G,K=(0,a["default"])({},V[J]),Q=(0,a["default"])({},V[Z]);V[J]=K,V[Z]=Q,"mirrored"!==H&&"asymmetric"!==H||(Q.angle=K.angle-180,"mirrored"===H&&(Q.radius=K.radius))}return q;case"POINT_DESELECT_ALL":return d(t);case"HANDLE_TRANSLATE":var $=e.data,tt=[].concat((0,o["default"])(t)),et=(0,a["default"])({},tt[$.parentIndex]);tt[$.parentIndex]=et;var nt="handle"+$.index,rt=(0,a["default"])({},et[nt]);return et[nt]=rt,rt.angle=$.angle,rt.radius=$.radius,tt}return t};e["default"]=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(119),o=r(i);e["default"]=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,o["default"])(t)}},function(t,e,n){t.exports={"default":n(120),__esModule:!0}},function(t,e,n){n(41),n(121),t.exports=n(19).Array.from},function(t,e,n){"use strict";var r=n(20),i=n(18),o=n(9),u=n(122),a=n(123),s=n(57),c=n(124),f=n(125);i(i.S+i.F*!n(127)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,l,p=o(t),d="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,y=void 0!==v,m=0,g=f(p);if(y&&(v=r(v,h>2?arguments[2]:void 0,2)),void 0==g||d==Array&&a(g))for(e=s(p.length),n=new d(e);e>m;m++)c(n,m,y?v(p[m],m):p[m]);else for(l=g.call(p),n=new d;!(i=l.next()).done;m++)c(n,m,y?u(l,v,[i.value,m],!0):i.value);return n.length=m,n}})},function(t,e,n){var r=n(24);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(o){var u=t["return"];throw void 0!==u&&r(u.call(t)),o}}},function(t,e,n){var r=n(47),i=n(62)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){"use strict";var r=n(23),i=n(31);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(126),i=n(62)("iterator"),o=n(47);t.exports=n(19).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(55),i=n(62)("toStringTag"),o="Arguments"==r(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var r=n(62)("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(u){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],u=o[r]();u.next=function(){return{done:n=!0}},o[r]=function(){return u},t(o)}catch(a){}return n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(108),o=r(i),u=function(t,e){return null!=t?t:e},a=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return{index:u(t.index,0),angle:u(t.angle,null),radius:u(t.radius,null),isTouched:u(t.isTouched,!1),isSelected:u(t.isSelected,!1)}},s=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return{x:u(t.x,0),y:u(t.y,0),tempX:u(t.tempX,0),tempY:u(t.tempY,0),isTouched:u(t.isTouched,!1),isSelected:u(t.isSelected,!1)}},c=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return(0,o["default"])({isLockedX:u(t.isLockedX,!1),isLockedY:u(t.isLockedY,!1),type:u(t.type,"straight")},s(t),{handle1:a(t.handle1||{index:1}),handle2:a(t.handle2||{index:2})})};e["default"]=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(108),o=r(i),u={isShow:!1,type:"straight"},a=function(){var t=arguments.length<=0||void 0===arguments[0]?u:arguments[0],e=arguments[1];switch(e.type){case"POINT_SELECT":return(0,o["default"])({},t,{isShow:!e.isDeselect,type:e.data.type});case"POINT_CHANGE_TYPE":return(0,o["default"])({},t,{type:e.data});case"POINT_DESELECT_ALL":return(0,o["default"])({},t,{isShow:!1})}return t};e["default"]=a},function(t,e,n){var r;/*! Hammer.JS - v2.0.7 - 2016-04-22
	 * http://hammerjs.github.io/
	 *
	 * Copyright (c) 2016 Jorik Tangelder;
	 * Licensed under the MIT license */
!function(i,o,u,a){"use strict";function s(t,e,n){return setTimeout(d(t,n),e)}function c(t,e,n){return!!Array.isArray(t)&&(f(t,n[e],n),!0)}function f(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==a)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function l(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}function p(t,e,n){var r,i=e.prototype;r=t.prototype=Object.create(i),r.constructor=t,r._super=i,n&&vt(r,n)}function d(t,e){return function(){return t.apply(e,arguments)}}function h(t,e){return typeof t==gt?t.apply(e?e[0]||a:a,e):t}function v(t,e){return t===a?e:t}function y(t,e,n){f(b(e),function(e){t.addEventListener(e,n,!1)})}function m(t,e,n){f(b(e),function(e){t.removeEventListener(e,n,!1)})}function g(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function _(t,e){return t.indexOf(e)>-1}function b(t){return t.trim().split(/\s+/g)}function x(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function T(t){return Array.prototype.slice.call(t,0)}function E(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var u=e?t[o][e]:t[o];x(i,u)<0&&r.push(t[o]),i[o]=u,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function w(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<yt.length;){if(n=yt[o],r=n?n+i:e,r in t)return r;o++}return a}function O(){return wt++}function S(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}function j(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){h(t.options.enable,[t])&&n.handler(e)},this.init()}function A(t){var e,n=t.options.inputClass;return new(e=n?n:jt?q:At?W:St?B:X)(t,P)}function P(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&Rt&&r-i===0,u=e&(Dt|Ut)&&r-i===0;n.isFirst=!!o,n.isFinal=!!u,o&&(t.session={}),n.eventType=e,N(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function N(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=I(e)),i>1&&!n.firstMultiple?n.firstMultiple=I(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,u=n.firstMultiple,a=u?u.center:o.center,s=e.center=R(r);e.timeStamp=xt(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=L(a,s),e.distance=U(a,s),M(n,e),e.offsetDirection=D(e.deltaX,e.deltaY);var c=k(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=bt(c.x)>bt(c.y)?c.x:c.y,e.scale=u?z(u.pointers,r):1,e.rotation=u?F(u.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,C(n,e);var f=t.element;g(e.srcEvent.target,f)&&(f=e.srcEvent.target),e.target=f}function M(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==Rt&&o.eventType!==Dt||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}function C(t,e){var n,r,i,o,u=t.lastInterval||e,s=e.timeStamp-u.timeStamp;if(e.eventType!=Ut&&(s>It||u.velocity===a)){var c=e.deltaX-u.deltaX,f=e.deltaY-u.deltaY,l=k(s,c,f);r=l.x,i=l.y,n=bt(l.x)>bt(l.y)?l.x:l.y,o=D(c,f),t.lastInterval=e}else n=u.velocity,r=u.velocityX,i=u.velocityY,o=u.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}function I(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:_t(t.pointers[n].clientX),clientY:_t(t.pointers[n].clientY)},n++;return{timeStamp:xt(),pointers:e,center:R(e),deltaX:t.deltaX,deltaY:t.deltaY}}function R(t){var e=t.length;if(1===e)return{x:_t(t[0].clientX),y:_t(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:_t(n/e),y:_t(r/e)}}function k(t,e,n){return{x:e/t||0,y:n/t||0}}function D(t,e){return t===e?Lt:bt(t)>=bt(e)?t<0?Ft:zt:e<0?Xt:qt}function U(t,e,n){n||(n=Vt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function L(t,e,n){n||(n=Vt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}function F(t,e){return L(e[1],e[0],Bt)+L(t[1],t[0],Bt)}function z(t,e){return U(e[0],e[1],Bt)/U(t[0],t[1],Bt)}function X(){this.evEl=Jt,this.evWin=Zt,this.pressed=!1,j.apply(this,arguments)}function q(){this.evEl=$t,this.evWin=te,j.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function Y(){this.evTarget=ne,this.evWin=re,this.started=!1,j.apply(this,arguments)}function H(t,e){var n=T(t.touches),r=T(t.changedTouches);return e&(Dt|Ut)&&(n=E(n.concat(r),"identifier",!0)),[n,r]}function W(){this.evTarget=oe,this.targetIds={},j.apply(this,arguments)}function V(t,e){var n=T(t.touches),r=this.targetIds;if(e&(Rt|kt)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,u=T(t.changedTouches),a=[],s=this.target;if(o=n.filter(function(t){return g(t.target,s)}),e===Rt)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<u.length;)r[u[i].identifier]&&a.push(u[i]),e&(Dt|Ut)&&delete r[u[i].identifier],i++;return a.length?[E(o.concat(a),"identifier",!0),a]:void 0}function B(){j.apply(this,arguments);var t=d(this.handler,this);this.touch=new W(this.manager,t),this.mouse=new X(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function G(t,e){t&Rt?(this.primaryTouch=e.changedPointers[0].identifier,J.call(this,e)):t&(Dt|Ut)&&J.call(this,e)}function J(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches,i=function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)};setTimeout(i,ue)}}function Z(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),u=Math.abs(n-i.y);if(o<=ae&&u<=ae)return!0}return!1}function K(t,e){this.manager=t,this.set(e)}function Q(t){if(_(t,de))return de;var e=_(t,he),n=_(t,ve);return e&&n?de:e||n?e?he:ve:_(t,pe)?pe:le}function $(){if(!ce)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||i.CSS.supports("touch-action",n)}),t}function tt(t){this.options=vt({},this.defaults,t||{}),this.id=O(),this.manager=null,this.options.enable=v(this.options.enable,!0),this.state=me,this.simultaneous={},this.requireFail=[]}function et(t){return t&Te?"cancel":t&be?"end":t&_e?"move":t&ge?"start":""}function nt(t){return t==qt?"down":t==Xt?"up":t==Ft?"left":t==zt?"right":""}function rt(t,e){var n=e.manager;return n?n.get(t):t}function it(){tt.apply(this,arguments)}function ot(){it.apply(this,arguments),this.pX=null,this.pY=null}function ut(){it.apply(this,arguments)}function at(){tt.apply(this,arguments),this._timer=null,this._input=null}function st(){it.apply(this,arguments)}function ct(){it.apply(this,arguments)}function ft(){tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function lt(t,e){return e=e||{},e.recognizers=v(e.recognizers,lt.defaults.preset),new pt(t,e)}function pt(t,e){this.options=vt({},lt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=A(this),this.touchAction=new K(this,this.options.touchAction),dt(this,!0),f(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function dt(t,e){var n=t.element;if(n.style){var r;f(t.options.cssProps,function(i,o){r=w(n.style,o),e?(t.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=t.oldCssProps[r]||""}),e||(t.oldCssProps={})}}function ht(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var vt,yt=["","webkit","Moz","MS","ms","o"],mt=o.createElement("div"),gt="function",_t=Math.round,bt=Math.abs,xt=Date.now;vt="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==a&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var Tt=l(function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===a)&&(t[r[i]]=e[r[i]]),i++;return t},"extend","Use `assign`."),Et=l(function(t,e){return Tt(t,e,!0)},"merge","Use `assign`."),wt=1,Ot=/mobile|tablet|ip(ad|hone|od)|android/i,St="ontouchstart"in i,jt=w(i,"PointerEvent")!==a,At=St&&Ot.test(navigator.userAgent),Pt="touch",Nt="pen",Mt="mouse",Ct="kinect",It=25,Rt=1,kt=2,Dt=4,Ut=8,Lt=1,Ft=2,zt=4,Xt=8,qt=16,Yt=Ft|zt,Ht=Xt|qt,Wt=Yt|Ht,Vt=["x","y"],Bt=["clientX","clientY"];j.prototype={handler:function(){},init:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(S(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(S(this.element),this.evWin,this.domHandler)}};var Gt={mousedown:Rt,mousemove:kt,mouseup:Dt},Jt="mousedown",Zt="mousemove mouseup";p(X,j,{handler:function(t){var e=Gt[t.type];e&Rt&&0===t.button&&(this.pressed=!0),e&kt&&1!==t.which&&(e=Dt),this.pressed&&(e&Dt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Mt,srcEvent:t}))}});var Kt={pointerdown:Rt,pointermove:kt,pointerup:Dt,pointercancel:Ut,pointerout:Ut},Qt={2:Pt,3:Nt,4:Mt,5:Ct},$t="pointerdown",te="pointermove pointerup pointercancel";i.MSPointerEvent&&!i.PointerEvent&&($t="MSPointerDown",te="MSPointerMove MSPointerUp MSPointerCancel"),p(q,j,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=Kt[r],o=Qt[t.pointerType]||t.pointerType,u=o==Pt,a=x(e,t.pointerId,"pointerId");i&Rt&&(0===t.button||u)?a<0&&(e.push(t),a=e.length-1):i&(Dt|Ut)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var ee={touchstart:Rt,touchmove:kt,touchend:Dt,touchcancel:Ut},ne="touchstart",re="touchstart touchmove touchend touchcancel";p(Y,j,{handler:function(t){var e=ee[t.type];if(e===Rt&&(this.started=!0),this.started){var n=H.call(this,t,e);e&(Dt|Ut)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Pt,srcEvent:t})}}});var ie={touchstart:Rt,touchmove:kt,touchend:Dt,touchcancel:Ut},oe="touchstart touchmove touchend touchcancel";p(W,j,{handler:function(t){var e=ie[t.type],n=V.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Pt,srcEvent:t})}});var ue=2500,ae=25;p(B,j,{handler:function(t,e,n){var r=n.pointerType==Pt,i=n.pointerType==Mt;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)G.call(this,e,n);else if(i&&Z.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var se=w(mt.style,"touchAction"),ce=se!==a,fe="compute",le="auto",pe="manipulation",de="none",he="pan-x",ve="pan-y",ye=$();K.prototype={set:function(t){t==fe&&(t=this.compute()),ce&&this.manager.element.style&&ye[t]&&(this.manager.element.style[se]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return f(this.manager.recognizers,function(e){h(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Q(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var r=this.actions,i=_(r,de)&&!ye[de],o=_(r,ve)&&!ye[ve],u=_(r,he)&&!ye[he];if(i){var a=1===t.pointers.length,s=t.distance<2,c=t.deltaTime<250;if(a&&s&&c)return}return u&&o?void 0:i||o&&n&Yt||u&&n&Ht?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var me=1,ge=2,_e=4,be=8,xe=be,Te=16,Ee=32;tt.prototype={defaults:{},set:function(t){return vt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(c(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=rt(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return c(t,"dropRecognizeWith",this)?this:(t=rt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(c(t,"requireFailure",this))return this;var e=this.requireFail;return t=rt(t,this),x(e,t)===-1&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(c(t,"dropRequireFailure",this))return this;t=rt(t,this);var e=x(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,r=this.state;r<be&&e(n.options.event+et(r)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),r>=be&&e(n.options.event+et(r))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=Ee)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Ee|me)))return!1;t++}return!0},recognize:function(t){var e=vt({},t);return h(this.options.enable,[this,e])?(this.state&(xe|Te|Ee)&&(this.state=me),this.state=this.process(e),void(this.state&(ge|_e|be|Te)&&this.tryEmit(e))):(this.reset(),void(this.state=Ee))},process:function(t){},getTouchAction:function(){},reset:function(){}},p(it,tt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(ge|_e),i=this.attrTest(t);return r&&(n&Ut||!i)?e|Te:r||i?n&Dt?e|be:e&ge?e|_e:ge:Ee}}),p(ot,it,{defaults:{event:"pan",threshold:10,pointers:1,direction:Wt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Yt&&e.push(ve),t&Ht&&e.push(he),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,u=t.deltaY;return i&e.direction||(e.direction&Yt?(i=0===o?Lt:o<0?Ft:zt,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===u?Lt:u<0?Xt:qt,n=u!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return it.prototype.attrTest.call(this,t)&&(this.state&ge||!(this.state&ge)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=nt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),p(ut,it,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[de]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ge)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),p(at,tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[le]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(Dt|Ut)&&!i)this.reset();else if(t.eventType&Rt)this.reset(),this._timer=s(function(){this.state=xe,this.tryEmit()},e.time,this);else if(t.eventType&Dt)return xe;return Ee},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===xe&&(t&&t.eventType&Dt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=xt(),this.manager.emit(this.options.event,this._input)))}}),p(st,it,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[de]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ge)}}),p(ct,it,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Yt|Ht,pointers:1},getTouchAction:function(){return ot.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Yt|Ht)?e=t.overallVelocity:n&Yt?e=t.overallVelocityX:n&Ht&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&bt(e)>this.options.velocity&&t.eventType&Dt},emit:function(t){var e=nt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),p(ft,tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[pe]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&Rt&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=Dt)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,u=!this.pCenter||U(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,u&&o?this.count+=1:this.count=1,this._input=t;var a=this.count%e.taps;if(0===a)return this.hasRequireFailures()?(this._timer=s(function(){this.state=xe,this.tryEmit()},e.interval,this),ge):xe}return Ee},failTimeout:function(){return this._timer=s(function(){this.state=Ee},this.options.interval,this),Ee},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==xe&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),lt.VERSION="2.0.7",lt.defaults={domEvents:!1,touchAction:fe,enable:!0,inputTarget:null,inputClass:null,preset:[[st,{enable:!1}],[ut,{enable:!1},["rotate"]],[ct,{direction:Yt}],[ot,{direction:Yt},["swipe"]],[ft],[ft,{event:"doubletap",taps:2},["tap"]],[at]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var we=1,Oe=2;pt.prototype={set:function(t){return vt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?Oe:we},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&xe)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],e.stopped===Oe||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(ge|_e|be)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof tt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(c(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(c(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=x(e,t);n!==-1&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var n=this.handlers;return f(b(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==a){var n=this.handlers;return f(b(t),function(t){e?n[t]&&n[t].splice(x(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&ht(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&dt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},vt(lt,{INPUT_START:Rt,INPUT_MOVE:kt,INPUT_END:Dt,INPUT_CANCEL:Ut,STATE_POSSIBLE:me,STATE_BEGAN:ge,STATE_CHANGED:_e,STATE_ENDED:be,STATE_RECOGNIZED:xe,STATE_CANCELLED:Te,STATE_FAILED:Ee,DIRECTION_NONE:Lt,DIRECTION_LEFT:Ft,DIRECTION_RIGHT:zt,DIRECTION_UP:Xt,DIRECTION_DOWN:qt,DIRECTION_HORIZONTAL:Yt,DIRECTION_VERTICAL:Ht,DIRECTION_ALL:Wt,Manager:pt,Input:j,TouchAction:K,TouchInput:W,MouseInput:X,PointerEventInput:q,TouchMouseInput:B,SingleTouchInput:Y,Recognizer:tt,AttrRecognizer:it,Tap:ft,Pan:ot,Swipe:ct,Pinch:ut,Rotate:st,Press:at,on:y,off:m,each:f,merge:Et,extend:Tt,assign:vt,inherit:p,bindFn:d,prefixed:w});var Se="undefined"!=typeof i?i:"undefined"!=typeof self?self:{};Se.Hammer=lt,r=function(){return lt}.call(e,n,e,t),!(r!==a&&(t.exports=r))}(window,document,"Hammer")},function(t,e,n){var r,i,o;!function(n){i=[],r=n,o="function"==typeof r?r.apply(e,i):r,!(void 0!==o&&(t.exports=o))}(function(){var t=null;return function e(n,r){function i(t){return t.match(/[^ ]+/g)}function o(e){if("hammer.input"!==e.type){if(e.srcEvent._handled||(e.srcEvent._handled={}),e.srcEvent._handled[e.type])return;e.srcEvent._handled[e.type]=!0}var n=!1;e.stopPropagation=function(){n=!0};var r=e.srcEvent.stopPropagation.bind(e.srcEvent);"function"==typeof r&&(e.srcEvent.stopPropagation=function(){r(),e.stopPropagation()}),e.firstTarget=t;for(var i=t;i&&!n;){var o=i.hammer;if(o)for(var u,a=0;a<o.length;a++)if(u=o[a]._handlers[e.type])for(var s=0;s<u.length&&!n;s++)u[s](e);i=i.parentNode}}var u=r||{preventDefault:!1};if(n.Manager){var a=n,s=function(t,n){var r=Object.create(u);return n&&a.assign(r,n),e(new a(t,r),r)};return a.assign(s,a),s.Manager=function(t,n){var r=Object.create(u);return n&&a.assign(r,n),e(new a.Manager(t,r),r)},s}var c=Object.create(n),f=n.element;return f.hammer||(f.hammer=[]),f.hammer.push(c),n.on("hammer.input",function(e){u.preventDefault!==!0&&u.preventDefault!==e.pointerType||e.preventDefault(),e.isFirst&&(t=e.target)}),c._handlers={},c.on=function(t,e){return i(t).forEach(function(t){var r=c._handlers[t];r||(c._handlers[t]=r=[],n.on(t,o)),r.push(e)}),c},c.off=function(t,e){return i(t).forEach(function(t){var r=c._handlers[t];r&&(r=e?r.filter(function(t){return t!==e}):[],r.length>0?c._handlers[t]=r:(n.off(t,o),delete c._handlers[t]))}),c},c.emit=function(e,r){t=r.target,n.emit(e,r)},c.destroy=function(){var t=n.element.hammer,e=t.indexOf(c);e!==-1&&t.splice(e,1),t.length||delete n.element.hammer,c._handlers={},n.destroy()},c}})},function(t,e,n){var r=n(133);"string"==typeof r&&(r=[[t.id,r,""]]);var i=n(135)(r,{});r.locals&&(t.exports=r.locals),r.locals||t.hot.accept(133,function(){var e=n(133);"string"==typeof e&&(e=[[t.id,e,""]]),i(e)}),t.hot.dispose(function(){i()})},function(t,e,n){e=t.exports=n(134)(),e.push([t.id,"._curve-editor_1vq6l_4{position:fixed;left:0;top:0;width:403px;height:378px;border-radius:12px;background:rgba(58,8,58,.85);z-index:100;box-shadow:2px 2px 2px rgba(0,0,0,.38)}._curve-editor__left_1vq6l_1{position:absolute;width:42px;left:0;top:0;bottom:0;padding:10px}._curve-editor__left_1vq6l_1 icon-divider{margin:10px auto}._curve-editor__right_1vq6l_1{position:absolute;left:43px;top:0;right:0;bottom:0}._curve-editor__right_1vq6l_1 resize-handle{position:absolute}._curve-editor__right_1vq6l_1 resize-handle[type=top]{top:-16px}._curve-editor__right_1vq6l_1 resize-handle[type=bottom]{bottom:0}._curve-editor__right_1vq6l_1 resize-handle[type=bottom],._curve-editor__right_1vq6l_1 resize-handle[type=top]{left:50%;margin-left:-21px}._curve-editor__right_1vq6l_1 resize-handle[type=right]{right:-16px;top:50%;margin-top:-16px}._curve-editor__anchor-buttons_1vq6l_1{margin-top:10px}._curve-editor__anchor-buttons_1vq6l_1 icon-button{margin-bottom:5px}._curve-editor__mojs-logo_1vq6l_1{position:absolute;bottom:17px;left:50%;margin-left:1px;-webkit-transform:translateX(-50%);transform:translateX(-50%)}._curve-editor__mojs-logo_1vq6l_1 icon{fill:#ff512f;width:12px;height:12px}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var u=e[i];"number"==typeof u[0]&&r[u[0]]||(n&&!u[2]?u[2]=n:n&&(u[2]="("+u[2]+") and ("+n+")"),t.push(u))}},t}},function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=d[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(c(r.parts[o],e))}else{for(var u=[],o=0;o<r.parts.length;o++)u.push(c(r.parts[o],e));d[r.id]={id:r.id,refs:1,parts:u}}}}function i(t){for(var e=[],n={},r=0;r<t.length;r++){var i=t[r],o=i[0],u=i[1],a=i[2],s=i[3],c={css:u,media:a,sourceMap:s};n[o]?n[o].parts.push(c):e.push(n[o]={id:o,parts:[c]})}return e}function o(t,e){var n=y(),r=_[_.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),_.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function u(t){t.parentNode.removeChild(t);var e=_.indexOf(t);e>=0&&_.splice(e,1)}function a(t){var e=document.createElement("style");return e.type="text/css",o(t,e),e}function s(t){var e=document.createElement("link");return e.rel="stylesheet",o(t,e),e}function c(t,e){var n,r,i;if(e.singleton){var o=g++;n=m||(m=a(e)),r=f.bind(null,n,o,!1),i=f.bind(null,n,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(e),r=p.bind(null,n),i=function(){u(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(e),r=l.bind(null,n),i=function(){u(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}function f(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=b(e,i);else{var o=document.createTextNode(i),u=t.childNodes;u[e]&&t.removeChild(u[e]),u.length?t.insertBefore(o,u[e]):t.appendChild(o)}}function l(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function p(t,e){var n=e.css,r=e.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var d={},h=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},v=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),y=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,g=0,_=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=v()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var n=i(t);return r(n,e),function(t){for(var o=[],u=0;u<n.length;u++){var a=n[u],s=d[a.id];s.refs--,o.push(s)}if(t){var c=i(t);r(c,e)}for(var u=0;u<o.length;u++){var s=o[u];if(0===s.refs){for(var f=0;f<s.parts.length;f++)s.parts[f]();delete d[s.id]}}}};var b=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports={"curve-editor":"_curve-editor_1vq6l_4","curve-editor__left":"_curve-editor__left_1vq6l_1","curve-editor__right":"_curve-editor__right_1vq6l_1","curve-editor__anchor-buttons":"_curve-editor__anchor-buttons_1vq6l_1","curve-editor__mojs-logo":"_curve-editor__mojs-logo_1vq6l_1"}},function(t,e,n){var r=n(138);"string"==typeof r&&(r=[[t.id,r,""]]);var i=n(135)(r,{});r.locals&&(t.exports=r.locals),r.locals||t.hot.accept(138,function(){var e=n(138);"string"==typeof e&&(e=[[t.id,e,""]]),i(e)}),t.hot.dispose(function(){i()})},function(t,e,n){e=t.exports=n(134)(),e.push([t.id,"body,html{margin:0;padding:0;background:#fff5e4}*{box-sizing:border-box}",""])},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(116),o=r(i),u=o["default"].CURVE_SIZE,a=function(t){var e=arguments.length<=1||void 0===arguments[1]?1:arguments[1],n=Math.abs(t%u),r=parseInt(t/u),i=15;return n<i?t=r*u:n>u-i&&(t=e*(r+1)*u),t};e["default"]=a}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9tb2pzLWN1cnZlLWVkaXRvci5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGRhMjAxYjFmOWFiODE5OTE1YzY3Iiwid2VicGFjazovLy8uL2FwcC9qcy9hcHAuYmFiZWwuanN4Iiwid2VicGFjazovLy8uL34vcHJlYWN0L3NyYy91dGlsLmpzIiwid2VicGFjazovLy8uL34vcHJlYWN0L3NyYy9oLmpzIiwid2VicGFjazovLy8uL34vcHJlYWN0L3NyYy9jbG9uZS1lbGVtZW50LmpzIiwid2VicGFjazovLy8uL34vcHJlYWN0L3NyYy9saW5rZWQtc3RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9wcmVhY3Qvc3JjL3JlbmRlci1xdWV1ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3ByZWFjdC9zcmMvZG9tL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcHJlYWN0L3NyYy92ZG9tL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcHJlYWN0L3NyYy9kb20vcmVjeWNsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9wcmVhY3Qvc3JjL3Zkb20vZGlmZi5qcyIsIndlYnBhY2s6Ly8vLi9+L3ByZWFjdC9zcmMvdmRvbS9jb21wb25lbnQtcmVjeWNsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9wcmVhY3Qvc3JjL3Zkb20vY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL34vcHJlYWN0L3NyYy9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9wcmVhY3Qvc3JjL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly8vLi9+L3ByZWFjdC9zcmMvcmVuZGVyLmpzIiwid2VicGFjazovLy8uL34vdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvanMvdGFncy9jdXJ2ZS1lZGl0b3IuYmFiZWwuanN4Iiwid2VicGFjazovLy8uL34vYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtcHJvdG90eXBlLW9mLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtcHJvdG90eXBlLW9mLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3RvLW9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19kZWZpbmVkLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1ncG8uanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9faGFzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3NoYXJlZC1rZXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fc2hhcmVkLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL191aWQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fb2JqZWN0LXNhcC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19leHBvcnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fY29yZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19jdHguanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fYS1mdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19oaWRlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1kcC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19hbi1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9faXMtb2JqZWN0LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2llOC1kb20tZGVmaW5lLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2Rlc2NyaXB0b3JzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2ZhaWxzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2RvbS1jcmVhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fdG8tcHJpbWl0aXZlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3Byb3BlcnR5LWRlc2MuanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2suanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MuanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC5kZWZpbmUtcHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybi5qcyIsIndlYnBhY2s6Ly8vLi9+L2JhYmVsLXJ1bnRpbWUvaGVscGVycy90eXBlb2YuanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL2NvcmUtanMvc3ltYm9sL2l0ZXJhdG9yLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbC9pdGVyYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fc3RyaW5nLWF0LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3RvLWludGVnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9faXRlci1kZWZpbmUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fbGlicmFyeS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19yZWRlZmluZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19pdGVyYXRvcnMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9faXRlci1jcmVhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fb2JqZWN0LWNyZWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19vYmplY3QtZHBzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1rZXlzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1rZXlzLWludGVybmFsLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3RvLWlvYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9faW9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19jb2YuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fYXJyYXktaW5jbHVkZXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fdG8tbGVuZ3RoLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3RvLWluZGV4LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2VudW0tYnVnLWtleXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9faHRtbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19zZXQtdG8tc3RyaW5nLXRhZy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL193a3MuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2LmFycmF5Lml0ZXJhdG9yLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2FkZC10by11bnNjb3BhYmxlcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19pdGVyLXN0ZXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fd2tzLWV4dC5qcyIsIndlYnBhY2s6Ly8vLi9+L2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9zeW1ib2wuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2LnN5bWJvbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19tZXRhLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3drcy1kZWZpbmUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fa2V5b2YuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fZW51bS1rZXlzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1nb3BzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1waWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9faXMtYXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fb2JqZWN0LWdvcG4tZXh0LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1nb3BuLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1nb3BkLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM3LnN5bWJvbC5hc3luYy1pdGVyYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNy5zeW1ib2wub2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2JhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cy5qcyIsIndlYnBhY2s6Ly8vLi9+L2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5vYmplY3Quc2V0LXByb3RvdHlwZS1vZi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19zZXQtcHJvdG8uanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2NyZWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC5jcmVhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2pzL3N0b3JlLmJhYmVsLmpzIiwid2VicGFjazovLy8uL34vcmVkdXgvbGliL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcmVkdXgvbGliL2NyZWF0ZVN0b3JlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2lzUGxhaW5PYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2dldFByb3RvdHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fb3ZlckFyZy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faXNIb3N0T2JqZWN0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2lzT2JqZWN0TGlrZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3N5bWJvbC1vYnNlcnZhYmxlL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vc3ltYm9sLW9ic2VydmFibGUvcG9ueWZpbGwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWR1eC9saWIvY29tYmluZVJlZHVjZXJzLmpzIiwid2VicGFjazovLy8uL34vcmVkdXgvbGliL3V0aWxzL3dhcm5pbmcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWR1eC9saWIvYmluZEFjdGlvbkNyZWF0b3JzLmpzIiwid2VicGFjazovLy8uL34vcmVkdXgvbGliL2FwcGx5TWlkZGxld2FyZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlZHV4L2xpYi9jb21wb3NlLmpzIiwid2VicGFjazovLy8uL2FwcC9qcy9yZWR1Y2Vycy9pbmRleC1yZWR1Y2VyLmJhYmVsLmpzIiwid2VicGFjazovLy8uL34vYmFiZWwtcnVudGltZS9oZWxwZXJzL2V4dGVuZHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2Fzc2lnbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvYXNzaWduLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC5hc3NpZ24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fb2JqZWN0LWFzc2lnbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlZHV4LXVuZG8vbGliL2luZGV4LmpzIiwid2VicGFjazovLy8uL2FwcC9qcy9yZWR1Y2Vycy9yZXNpemUtcmVkdWNlci5iYWJlbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2JhYmVsLXJ1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvanMvY29uc3RhbnRzLmJhYmVsLmpzIiwid2VicGFjazovLy8uL2FwcC9qcy9yZWR1Y2Vycy9wb2ludHMtcmVkdWNlci5iYWJlbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2JhYmVsLXJ1bnRpbWUvaGVscGVycy90b0NvbnN1bWFibGVBcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9+L2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9hcnJheS9mcm9tLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L2ZuL2FycmF5L2Zyb20uanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9lczYuYXJyYXkuZnJvbS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19pdGVyLWNhbGwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9faXMtYXJyYXktaXRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19jcmVhdGUtcHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fY2xhc3NvZi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19pdGVyLWRldGVjdC5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvanMvaGVscGVycy9tYWtlLXBvaW50LmJhYmVsLmpzIiwid2VicGFjazovLy8uL2FwcC9qcy9yZWR1Y2Vycy9wb2ludC1jb250cm9scy1yZWR1Y2VyLmJhYmVsLmpzIiwid2VicGFjazovLy8uL34vaGFtbWVyanMvaGFtbWVyLmpzIiwid2VicGFjazovLy8uL34vcHJvcGFnYXRpbmctaGFtbWVyanMvcHJvcGFnYXRpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2Nzcy9ibG9ja3MvY3VydmUtZWRpdG9yLnBvc3Rjc3MuY3NzP2U4M2MiLCJ3ZWJwYWNrOi8vLy4vYXBwL2Nzcy9ibG9ja3MvY3VydmUtZWRpdG9yLnBvc3Rjc3MuY3NzIiwid2VicGFjazovLy8uL34vY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy8uL2FwcC9jc3MvYmxvY2tzL2N1cnZlLWVkaXRvci5wb3N0Y3NzLmNzcy5qc29uIiwid2VicGFjazovLy8uL2FwcC9jc3MvbWFpbi5wb3N0Y3NzLmNzcz85YWRkIiwid2VicGFjazovLy8uL2FwcC9jc3MvbWFpbi5wb3N0Y3NzLmNzcyIsIndlYnBhY2s6Ly8vLi9hcHAvanMvaGVscGVycy9yZXNpemUtbW9kLmJhYmVsLmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInRoaXMiLCJtb2R1bGVzIiwiaG90RG93bmxvYWRVcGRhdGVDaHVuayIsImNodW5rSWQiLCJoZWFkIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInNjcmlwdCIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwiY2hhcnNldCIsInNyYyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJwIiwiYXBwZW5kQ2hpbGQiLCJob3REb3dubG9hZE1hbmlmZXN0IiwiY2FsbGJhY2siLCJYTUxIdHRwUmVxdWVzdCIsIkVycm9yIiwicmVxdWVzdCIsInJlcXVlc3RQYXRoIiwiaG90Q3VycmVudEhhc2giLCJvcGVuIiwidGltZW91dCIsInNlbmQiLCJlcnIiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwidXBkYXRlIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwiZSIsImhvdENyZWF0ZVJlcXVpcmUiLCJtb2R1bGVJZCIsImVuc3VyZSIsImhvdFN0YXR1cyIsImhvdFNldFN0YXR1cyIsImhvdENodW5rc0xvYWRpbmciLCJmaW5pc2hDaHVua0xvYWRpbmciLCJob3RXYWl0aW5nRmlsZXNNYXAiLCJob3RFbnN1cmVVcGRhdGVDaHVuayIsImhvdFdhaXRpbmdGaWxlcyIsImhvdFVwZGF0ZURvd25sb2FkZWQiLCJjYWxsIiwiZm4iLCJtZSIsImluc3RhbGxlZE1vZHVsZXMiLCJob3QiLCJhY3RpdmUiLCJwYXJlbnRzIiwiaW5kZXhPZiIsInB1c2giLCJjaGlsZHJlbiIsImhvdEN1cnJlbnRQYXJlbnRzIiwiY29uc29sZSIsIndhcm4iLCJuYW1lIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYW5EZWZpbmVQcm9wZXJ0eSIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInNldCIsInZhbHVlIiwiaG90Q3JlYXRlTW9kdWxlIiwiX2FjY2VwdGVkRGVwZW5kZW5jaWVzIiwiX2RlY2xpbmVkRGVwZW5kZW5jaWVzIiwiX3NlbGZBY2NlcHRlZCIsIl9zZWxmRGVjbGluZWQiLCJfZGlzcG9zZUhhbmRsZXJzIiwiYWNjZXB0IiwiZGVwIiwiaSIsImxlbmd0aCIsImRlY2xpbmUiLCJkaXNwb3NlIiwiYWRkRGlzcG9zZUhhbmRsZXIiLCJyZW1vdmVEaXNwb3NlSGFuZGxlciIsImlkeCIsInNwbGljZSIsImNoZWNrIiwiaG90Q2hlY2siLCJhcHBseSIsImhvdEFwcGx5IiwibCIsImhvdFN0YXR1c0hhbmRsZXJzIiwiYWRkU3RhdHVzSGFuZGxlciIsInJlbW92ZVN0YXR1c0hhbmRsZXIiLCJkYXRhIiwiaG90Q3VycmVudE1vZHVsZURhdGEiLCJuZXdTdGF0dXMiLCJ0b01vZHVsZUlkIiwiaWQiLCJpc051bWJlciIsImhvdEFwcGx5T25VcGRhdGUiLCJob3RSZXF1ZXN0ZWRGaWxlc01hcCIsImhvdEF2YWlsaWJsZUZpbGVzTWFwIiwiYyIsImhvdFVwZGF0ZU5ld0hhc2giLCJoIiwiaG90Q2FsbGJhY2siLCJob3RVcGRhdGUiLCJob3RBZGRVcGRhdGVDaHVuayIsIm1vcmVNb2R1bGVzIiwib3V0ZGF0ZWRNb2R1bGVzIiwib3B0aW9ucyIsImdldEFmZmVjdGVkU3R1ZmYiLCJvdXRkYXRlZERlcGVuZGVuY2llcyIsInF1ZXVlIiwic2xpY2UiLCJwb3AiLCJwYXJlbnRJZCIsInBhcmVudCIsImFkZEFsbFRvU2V0IiwiYSIsImIiLCJpdGVtIiwiYXBwbGllZFVwZGF0ZSIsInJlc3VsdCIsImlnbm9yZVVuYWNjZXB0ZWQiLCJvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMiLCJlcnJvckhhbmRsZXIiLCJkaXNwb3NlSGFuZGxlcnMiLCJqIiwiY2IiLCJjaGlsZCIsIm1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzIiwiZGVwZW5kZW5jeSIsImVycm9yIiwiY2FsbGJhY2tzIiwibG9hZGVkIiwicGFyZW50SG90VXBkYXRlQ2FsbGJhY2siLCJ4IiwibSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9wcmVhY3QiLCJfY3VydmVFZGl0b3IiLCJfY3VydmVFZGl0b3IyIiwiX3N0b3JlIiwiX3N0b3JlMiIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW5kZXIiLCJzdGF0ZSIsImdldFN0YXRlIiwiYm9keSIsInNldEltbWVkaWF0ZSIsImdsb2JhbCIsIlZOb2RlIiwibm9kZU5hbWUiLCJhdHRyaWJ1dGVzIiwia2V5IiwiZXh0ZW5kIiwicHJvcHMiLCJ1bmRlZmluZWQiLCJjbG9uZSIsImRlbHZlIiwic3BsaXQiLCJ0b0FycmF5Iiwib2Zmc2V0IiwiaXNGdW5jdGlvbiIsImlzU3RyaW5nIiwiZW1wdHkiLCJmYWxzZXkiLCJoYXNoVG9DbGFzc05hbWUiLCJzdHIiLCJwcm9wIiwiZmlyc3RDaGlsZCIsImFyciIsImxhc3RTaW1wbGUiLCJsZW4iLCJhcmd1bWVudHMiLCJTdHJpbmciLCJfcCIsImpvaW4iLCJTSEFSRURfVEVNUF9BUlJBWSIsInNpbXBsZSIsImNsYXNzTmFtZSIsInZub2RlIiwiY2xvbmVFbGVtZW50IiwiY3JlYXRlTGlua2VkU3RhdGUiLCJjb21wb25lbnQiLCJldmVudFBhdGgiLCJwYXRoIiwicDAiLCJfY29tcG9uZW50JHNldFN0YXRlIiwidiIsInQiLCJjdXJyZW50VGFyZ2V0IiwicyIsIl9jb21wb25lbnQiLCJtYXRjaCIsImNoZWNrZWQiLCJzZXRTdGF0ZSIsImVucXVldWVSZW5kZXIiLCJpdGVtcyIsInJlcmVuZGVyIiwiY3VycmVudEl0ZW1zIiwiaXRlbXNPZmZsaW5lIiwiaXNGdW5jdGlvbmFsQ29tcG9uZW50IiwiYnVpbGRGdW5jdGlvbmFsQ29tcG9uZW50IiwiY29udGV4dCIsImdldE5vZGVQcm9wcyIsIkVNUFRZIiwiZW5zdXJlTm9kZURhdGEiLCJub2RlIiwiQVRUUl9LRVkiLCJnZXROb2RlVHlwZSIsIlRleHQiLCJFbGVtZW50IiwicmVtb3ZlTm9kZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInNldEFjY2Vzc29yIiwib2xkIiwiaXNTdmciLCJzdHlsZSIsImNzc1RleHQiLCJOT05fRElNRU5TSU9OX1BST1BTIiwiaW5uZXJIVE1MIiwiX19odG1sIiwiX2xpc3RlbmVycyIsInRvTG93ZXJDYXNlIiwic3Vic3RyaW5nIiwiZXZlbnRQcm94eSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRQcm9wZXJ0eSIsInJlbW92ZUF0dHJpYnV0ZSIsIm5zIiwicmVtb3ZlQXR0cmlidXRlTlMiLCJzZXRBdHRyaWJ1dGVOUyIsInNldEF0dHJpYnV0ZSIsImV2ZW50IiwiZ2V0UmF3Tm9kZUF0dHJpYnV0ZXMiLCJhdHRycyIsImlzU2FtZU5vZGVUeXBlIiwiaXNOYW1lZE5vZGUiLCJfY29tcG9uZW50Q29uc3RydWN0b3IiLCJub3JtYWxpemVkTm9kZU5hbWUiLCJkZWZhdWx0UHJvcHMiLCJjb2xsZWN0Tm9kZSIsImNsZWFuTm9kZSIsImxpc3QiLCJub2RlcyIsImNyZWF0ZU5vZGUiLCJjcmVhdGVFbGVtZW50TlMiLCJmbHVzaE1vdW50cyIsIm1vdW50cyIsImRpZmYiLCJkb20iLCJtb3VudEFsbCIsImRpZmZMZXZlbCIsInJldCIsImlkaWZmIiwib3JpZ2luYWxBdHRyaWJ1dGVzIiwibm9kZVZhbHVlIiwiY3JlYXRlVGV4dE5vZGUiLCJzdmdNb2RlIiwib3V0IiwiaXNTdmdNb2RlIiwicmVjb2xsZWN0Tm9kZVRyZWUiLCJjaGlsZE5vZGVzIiwiaW5uZXJEaWZmTm9kZSIsImRpZmZBdHRyaWJ1dGVzIiwicmVmIiwidmNoaWxkcmVuIiwidmNoaWxkIiwia2V5ZWQiLCJvcmlnaW5hbENoaWxkcmVuIiwiY2hpbGRyZW5MZW4iLCJ2bGVuIiwiX2NoaWxkIiwiX19rZXkiLCJrZXllZExlbiIsIm1pbiIsImluc2VydEJlZm9yZSIsInJlbW92ZU9ycGhhbmVkQ2hpbGRyZW4iLCJ1bm1vdW50T25seSIsIl9uYW1lIiwiX25hbWUyIiwiY29sbGVjdENvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwiY29tcG9uZW50cyIsImNyZWF0ZUNvbXBvbmVudCIsIkN0b3IiLCJpbnN0IiwibmV4dEJhc2UiLCJ0cmlnZ2VyQ29tcG9uZW50UmVuZGVyIiwiX2RpcnR5Iiwic2V0Q29tcG9uZW50UHJvcHMiLCJvcHRzIiwiYmFzZSIsIl9kaXNhYmxlUmVuZGVyaW5nIiwiX19yZWYiLCJjb21wb25lbnRXaWxsTW91bnQiLCJjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIiwicHJldkNvbnRleHQiLCJwcmV2UHJvcHMiLCJzeW5jQ29tcG9uZW50VXBkYXRlcyIsInJlbmRlckNvbXBvbmVudCIsInNraXAiLCJyZW5kZXJlZCIsInByZXZpb3VzU3RhdGUiLCJwcmV2U3RhdGUiLCJwcmV2aW91c0NvbnRleHQiLCJpc1VwZGF0ZSIsImluaXRpYWxCYXNlIiwibmV4dFNpYmxpbmciLCJiYXNlUGFyZW50IiwiaW5pdGlhbENvbXBvbmVudCIsImluaXRpYWxDaGlsZENvbXBvbmVudCIsInByZXZpb3VzUHJvcHMiLCJzaG91bGRDb21wb25lbnRVcGRhdGUiLCJjb21wb25lbnRXaWxsVXBkYXRlIiwiZ2V0Q2hpbGRDb250ZXh0IiwidG9Vbm1vdW50IiwiY2hpbGRDb21wb25lbnQiLCJjaGlsZFByb3BzIiwiX3BhcmVudENvbXBvbmVudCIsImNiYXNlIiwidW5tb3VudENvbXBvbmVudCIsImNvbXBvbmVudFJlZiIsInVuc2hpZnQiLCJjb21wb25lbnREaWRVcGRhdGUiLCJfcmVuZGVyQ2FsbGJhY2tzIiwiYnVpbGRDb21wb25lbnRGcm9tVk5vZGUiLCJvbGREb20iLCJpc0RpcmVjdE93bmVyIiwiaXNPd25lciIsInJlbW92ZSIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiaW5uZXIiLCJjb21wb25lbnREaWRVbm1vdW50IiwiQ29tcG9uZW50IiwiX2xpbmtlZFN0YXRlcyIsImdldEluaXRpYWxTdGF0ZSIsIm1lcmdlIiwibGNDYWNoZSIsInJlc29sdmVkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJmIiwidGhlbiIsInNldFRpbWVvdXQiLCJTeW1ib2wiLCJib3hGbGV4IiwiYm94RmxleEdyb3VwIiwiY29sdW1uQ291bnQiLCJmaWxsT3BhY2l0eSIsImZsZXgiLCJmbGV4R3JvdyIsImZsZXhQb3NpdGl2ZSIsImZsZXhTaHJpbmsiLCJmbGV4TmVnYXRpdmUiLCJmb250V2VpZ2h0IiwibGluZUNsYW1wIiwibGluZUhlaWdodCIsIm9wYWNpdHkiLCJvcmRlciIsIm9ycGhhbnMiLCJzdHJva2VPcGFjaXR5Iiwid2lkb3dzIiwiekluZGV4Iiwiem9vbSIsImxpbmtTdGF0ZSIsImNhY2hlS2V5IiwiZm9yY2VVcGRhdGUiLCJjbGVhckltbWVkaWF0ZSIsIlRpbWVvdXQiLCJjbGVhckZuIiwiX2lkIiwiX2NsZWFyRm4iLCJuZXh0VGljayIsIkZ1bmN0aW9uIiwiQXJyYXkiLCJpbW1lZGlhdGVJZHMiLCJuZXh0SW1tZWRpYXRlSWQiLCJ3aW5kb3ciLCJjbGVhclRpbWVvdXQiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJjbG9zZSIsInVucmVmIiwiZW5yb2xsIiwibXNlY3MiLCJfaWRsZVRpbWVvdXRJZCIsIl9pZGxlVGltZW91dCIsInVuZW5yb2xsIiwiX3VucmVmQWN0aXZlIiwiX29uVGltZW91dCIsImFyZ3MiLCJjbGVhblVwTmV4dFRpY2siLCJkcmFpbmluZyIsImN1cnJlbnRRdWV1ZSIsImNvbmNhdCIsInF1ZXVlSW5kZXgiLCJkcmFpblF1ZXVlIiwiY2FjaGVkU2V0VGltZW91dCIsInJ1biIsImNhY2hlZENsZWFyVGltZW91dCIsIkl0ZW0iLCJmdW4iLCJhcnJheSIsIm5vb3AiLCJwcm9jZXNzIiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9uIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJfZ2V0UHJvdG90eXBlT2YiLCJfZ2V0UHJvdG90eXBlT2YyIiwiX2NsYXNzQ2FsbENoZWNrMiIsIl9jbGFzc0NhbGxDaGVjazMiLCJfY3JlYXRlQ2xhc3MyIiwiX2NyZWF0ZUNsYXNzMyIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyIsIl9pbmhlcml0czIiLCJfaW5oZXJpdHMzIiwiX2NvbnN0YW50cyIsIl9jb25zdGFudHMyIiwiX2hhbW1lcmpzIiwiX2hhbW1lcmpzMiIsIl9wcm9wYWdhdGluZ0hhbW1lcmpzIiwiX3Byb3BhZ2F0aW5nSGFtbWVyanMyIiwiX3JlZHV4VW5kbyIsIl9yZXNpemVNb2QiLCJfcmVzaXplTW9kMiIsIkN1cnZlRWRpdG9yIiwiX0NvbXBvbmVudCIsIl90aGlzMiIsImV2IiwiZGVsdGFYIiwieSIsImRlbHRhWSIsImRpc3BhdGNoIiwidHJhbnNsYXRlIiwicmVzaXplIiwiX2FkZEtleVVwIiwic3Vic2NyaWJlIiwiX29uS2V5VXAiLCJhbHRLZXkiLCJ3aGljaCIsIkFjdGlvbkNyZWF0b3JzIiwidW5kbyIsInJlZG8iLCJ0ZW1wX3RvcCIsInRlbXBfYm90dG9tIiwidGVtcF9yaWdodCIsInRvcCIsImJvdHRvbSIsInJpZ2h0IiwiWF9TSVpFIiwiQ1VSVkVfU0laRSIsIllfU0laRSIsIkNVUlZFX1BBRERJTkciLCJoZWlnaHQiLCJ3aWR0aCIsInRyYW5zZm9ybSIsIm1vanMiLCJwcmVmaXgiLCJjc3MiLCJDTEFTU0VTIiwiX2dldFN0eWxlIiwiZ2V0UHJvdG90eXBlT2YiLCJ0b09iamVjdCIsIiRnZXRQcm90b3R5cGVPZiIsIml0IiwiZGVmaW5lZCIsIlR5cGVFcnJvciIsImhhcyIsIklFX1BST1RPIiwiT2JqZWN0UHJvdG8iLCJPIiwic2hhcmVkIiwidWlkIiwiU0hBUkVEIiwic3RvcmUiLCJNYXRoIiwic2VsZiIsIl9fZyIsInB4IiwicmFuZG9tIiwidG9TdHJpbmciLCIkZXhwb3J0IiwiY29yZSIsImZhaWxzIiwiS0VZIiwiZXhlYyIsImV4cCIsIlMiLCJGIiwiY3R4IiwiaGlkZSIsIlBST1RPVFlQRSIsInNvdXJjZSIsIm93biIsIklTX0ZPUkNFRCIsIklTX0dMT0JBTCIsIkciLCJJU19TVEFUSUMiLCJJU19QUk9UTyIsIlAiLCJJU19CSU5EIiwiQiIsIklTX1dSQVAiLCJXIiwiZXhwUHJvdG8iLCJ0YXJnZXQiLCJDIiwidmlydHVhbCIsIlIiLCJVIiwiX19lIiwiYUZ1bmN0aW9uIiwidGhhdCIsImRQIiwiY3JlYXRlRGVzYyIsIm9iamVjdCIsImFuT2JqZWN0IiwiSUU4X0RPTV9ERUZJTkUiLCJ0b1ByaW1pdGl2ZSIsIkF0dHJpYnV0ZXMiLCJpc09iamVjdCIsImlzIiwidmFsIiwidmFsdWVPZiIsImJpdG1hcCIsIndyaXRhYmxlIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIl9kZWZpbmVQcm9wZXJ0eSIsIl9kZWZpbmVQcm9wZXJ0eTIiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVzY3JpcHRvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIiRPYmplY3QiLCJkZXNjIiwiX3R5cGVvZjIiLCJfdHlwZW9mMyIsIlJlZmVyZW5jZUVycm9yIiwiX2l0ZXJhdG9yIiwiX2l0ZXJhdG9yMiIsIl9zeW1ib2wiLCJfc3ltYm9sMiIsIl90eXBlb2YiLCIkYXQiLCJpdGVyYXRlZCIsIl90IiwiX2kiLCJwb2ludCIsImluZGV4IiwiZG9uZSIsInRvSW50ZWdlciIsIlRPX1NUUklORyIsInBvcyIsImNoYXJDb2RlQXQiLCJjaGFyQXQiLCJjZWlsIiwiZmxvb3IiLCJpc05hTiIsIkxJQlJBUlkiLCJyZWRlZmluZSIsIkl0ZXJhdG9ycyIsIiRpdGVyQ3JlYXRlIiwic2V0VG9TdHJpbmdUYWciLCJJVEVSQVRPUiIsIkJVR0dZIiwia2V5cyIsIkZGX0lURVJBVE9SIiwiS0VZUyIsIlZBTFVFUyIsInJldHVyblRoaXMiLCJCYXNlIiwiTkFNRSIsIm5leHQiLCJERUZBVUxUIiwiSVNfU0VUIiwiRk9SQ0VEIiwibWV0aG9kcyIsIkl0ZXJhdG9yUHJvdG90eXBlIiwiZ2V0TWV0aG9kIiwia2luZCIsInByb3RvIiwiVEFHIiwiREVGX1ZBTFVFUyIsIlZBTFVFU19CVUciLCIkbmF0aXZlIiwiJGRlZmF1bHQiLCIkZW50cmllcyIsIiRhbnlOYXRpdmUiLCJlbnRyaWVzIiwidmFsdWVzIiwiY3JlYXRlIiwiZFBzIiwiZW51bUJ1Z0tleXMiLCJFbXB0eSIsImNyZWF0ZURpY3QiLCJpZnJhbWVEb2N1bWVudCIsImlmcmFtZSIsImx0IiwiZ3QiLCJkaXNwbGF5IiwiY29udGVudFdpbmRvdyIsIndyaXRlIiwiUHJvcGVydGllcyIsImdldEtleXMiLCIka2V5cyIsInRvSU9iamVjdCIsImFycmF5SW5kZXhPZiIsIm5hbWVzIiwiSU9iamVjdCIsImNvZiIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwidG9MZW5ndGgiLCJ0b0luZGV4IiwiSVNfSU5DTFVERVMiLCIkdGhpcyIsImVsIiwiZnJvbUluZGV4IiwibWF4IiwiZG9jdW1lbnRFbGVtZW50IiwiZGVmIiwidGFnIiwic3RhdCIsIlVTRV9TWU1CT0wiLCIkZXhwb3J0cyIsIlRPX1NUUklOR19UQUciLCJjb2xsZWN0aW9ucyIsIkNvbGxlY3Rpb24iLCJhZGRUb1Vuc2NvcGFibGVzIiwic3RlcCIsIl9rIiwiQXJndW1lbnRzIiwiREVTQ1JJUFRPUlMiLCJNRVRBIiwiJGZhaWxzIiwid2tzIiwid2tzRXh0Iiwid2tzRGVmaW5lIiwia2V5T2YiLCJlbnVtS2V5cyIsImlzQXJyYXkiLCJfY3JlYXRlIiwiZ09QTkV4dCIsIiRHT1BEIiwiJERQIiwiZ09QRCIsImdPUE4iLCIkU3ltYm9sIiwiJEpTT04iLCJfc3RyaW5naWZ5Iiwic3RyaW5naWZ5IiwiSElEREVOIiwiVE9fUFJJTUlUSVZFIiwiaXNFbnVtIiwiU3ltYm9sUmVnaXN0cnkiLCJBbGxTeW1ib2xzIiwiT1BTeW1ib2xzIiwiVVNFX05BVElWRSIsIlFPYmplY3QiLCJzZXR0ZXIiLCJmaW5kQ2hpbGQiLCJzZXRTeW1ib2xEZXNjIiwiRCIsInByb3RvRGVzYyIsIndyYXAiLCJzeW0iLCJpc1N5bWJvbCIsIml0ZXJhdG9yIiwiJGRlZmluZVByb3BlcnR5IiwiJGRlZmluZVByb3BlcnRpZXMiLCIkY3JlYXRlIiwiJHByb3BlcnR5SXNFbnVtZXJhYmxlIiwiRSIsIiRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCIkZ2V0T3duUHJvcGVydHlOYW1lcyIsIiRnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJJU19PUCIsIiRzZXQiLCJzeW1ib2xzIiwiZm9yIiwia2V5Rm9yIiwidXNlU2V0dGVyIiwidXNlU2ltcGxlIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImdldE93blByb3BlcnR5U3ltYm9scyIsInJlcGxhY2VyIiwiJHJlcGxhY2VyIiwic2V0RGVzYyIsImlzRXh0ZW5zaWJsZSIsIkZSRUVaRSIsInByZXZlbnRFeHRlbnNpb25zIiwic2V0TWV0YSIsInciLCJmYXN0S2V5IiwiZ2V0V2VhayIsIm9uRnJlZXplIiwibWV0YSIsIk5FRUQiLCJnT1BTIiwicElFIiwiZ2V0U3ltYm9scyIsImFyZyIsIndpbmRvd05hbWVzIiwiZ2V0V2luZG93TmFtZXMiLCJoaWRkZW5LZXlzIiwiX3NldFByb3RvdHlwZU9mIiwiX3NldFByb3RvdHlwZU9mMiIsIl9jcmVhdGUyIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiX19wcm90b19fIiwic2V0UHJvdG90eXBlT2YiLCJ0ZXN0IiwiYnVnZ3kiLCJfcmVkdXgiLCJfaW5kZXhSZWR1Y2VyIiwiX2luZGV4UmVkdWNlcjIiLCJjcmVhdGVTdG9yZSIsImlzQ3J1c2hlZCIsImNvbXBvc2UiLCJhcHBseU1pZGRsZXdhcmUiLCJiaW5kQWN0aW9uQ3JlYXRvcnMiLCJjb21iaW5lUmVkdWNlcnMiLCJfY3JlYXRlU3RvcmUiLCJfY3JlYXRlU3RvcmUyIiwiX2NvbWJpbmVSZWR1Y2VycyIsIl9jb21iaW5lUmVkdWNlcnMyIiwiX2JpbmRBY3Rpb25DcmVhdG9ycyIsIl9iaW5kQWN0aW9uQ3JlYXRvcnMyIiwiX2FwcGx5TWlkZGxld2FyZSIsIl9hcHBseU1pZGRsZXdhcmUyIiwiX2NvbXBvc2UiLCJfY29tcG9zZTIiLCJfd2FybmluZyIsIl93YXJuaW5nMiIsIk5PREVfRU5WIiwicmVkdWNlciIsImluaXRpYWxTdGF0ZSIsImVuaGFuY2VyIiwiZW5zdXJlQ2FuTXV0YXRlTmV4dExpc3RlbmVycyIsIm5leHRMaXN0ZW5lcnMiLCJjdXJyZW50TGlzdGVuZXJzIiwiY3VycmVudFN0YXRlIiwibGlzdGVuZXIiLCJpc1N1YnNjcmliZWQiLCJhY3Rpb24iLCJfaXNQbGFpbk9iamVjdDIiLCJpc0Rpc3BhdGNoaW5nIiwiY3VycmVudFJlZHVjZXIiLCJsaXN0ZW5lcnMiLCJyZXBsYWNlUmVkdWNlciIsIm5leHRSZWR1Y2VyIiwiQWN0aW9uVHlwZXMiLCJJTklUIiwib2JzZXJ2YWJsZSIsIl9yZWYiLCJvdXRlclN1YnNjcmliZSIsIm9ic2VydmVyIiwib2JzZXJ2ZVN0YXRlIiwidW5zdWJzY3JpYmUiLCJfc3ltYm9sT2JzZXJ2YWJsZTIiLCJfcmVmMiIsIl9pc1BsYWluT2JqZWN0IiwiX3N5bWJvbE9ic2VydmFibGUiLCJpc1BsYWluT2JqZWN0IiwiaXNPYmplY3RMaWtlIiwib2JqZWN0VG9TdHJpbmciLCJvYmplY3RUYWciLCJpc0hvc3RPYmplY3QiLCJnZXRQcm90b3R5cGUiLCJmdW5jVG9TdHJpbmciLCJvYmplY3RDdG9yU3RyaW5nIiwib2JqZWN0UHJvdG8iLCJvdmVyQXJnIiwibmF0aXZlR2V0UHJvdG90eXBlIiwiZnVuYyIsImdldFVuZGVmaW5lZFN0YXRlRXJyb3JNZXNzYWdlIiwiYWN0aW9uVHlwZSIsImFjdGlvbk5hbWUiLCJnZXRVbmV4cGVjdGVkU3RhdGVTaGFwZVdhcm5pbmdNZXNzYWdlIiwiaW5wdXRTdGF0ZSIsInJlZHVjZXJzIiwicmVkdWNlcktleXMiLCJhcmd1bWVudE5hbWUiLCJ1bmV4cGVjdGVkS2V5cyIsImZpbHRlciIsImFzc2VydFJlZHVjZXJTYW5pdHkiLCJmb3JFYWNoIiwiZmluYWxSZWR1Y2VycyIsInNhbml0eUVycm9yIiwiZmluYWxSZWR1Y2VyS2V5cyIsIndhcm5pbmdNZXNzYWdlIiwiaGFzQ2hhbmdlZCIsIm5leHRTdGF0ZSIsInByZXZpb3VzU3RhdGVGb3JLZXkiLCJuZXh0U3RhdGVGb3JLZXkiLCJlcnJvck1lc3NhZ2UiLCJ3YXJuaW5nIiwibWVzc2FnZSIsImJpbmRBY3Rpb25DcmVhdG9yIiwiYWN0aW9uQ3JlYXRvciIsImFjdGlvbkNyZWF0b3JzIiwiYm91bmRBY3Rpb25DcmVhdG9ycyIsIl9sZW4iLCJtaWRkbGV3YXJlcyIsIl9rZXkiLCJfZGlzcGF0Y2giLCJjaGFpbiIsIm1pZGRsZXdhcmVBUEkiLCJtYXAiLCJtaWRkbGV3YXJlIiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJmdW5jcyIsIl9yZXQiLCJsYXN0IiwicmVzdCIsInJlZHVjZVJpZ2h0IiwiY29tcG9zZWQiLCJfZXh0ZW5kczIiLCJfZXh0ZW5kczMiLCJfcmVkdXhVbmRvMiIsIl9yZXNpemVSZWR1Y2VyIiwiX3Jlc2l6ZVJlZHVjZXIyIiwiX3BvaW50c1JlZHVjZXIiLCJfcG9pbnRzUmVkdWNlcjIiLCJfcG9pbnRDb250cm9sc1JlZHVjZXIiLCJfcG9pbnRDb250cm9sc1JlZHVjZXIyIiwiVU5ET0FCTEVfT1BUUyIsImxpbWl0IiwiY3VyclN0YXRlIiwiaGlzdG9yeSIsImlzUmVjb3JkIiwiZGVidWciLCJwb2ludENvbnRyb2xzIiwicG9pbnRzIiwiX2Fzc2lnbiIsIl9hc3NpZ24yIiwiJGFzc2lnbiIsIkEiLCJLIiwiayIsIlQiLCJhTGVuIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyMiIsImZyb20iLCJfX0RFQlVHX18iLCJfY29uc29sZSIsImdyb3VwIiwibG9nIiwiZGVidWdTdGFydCIsIl9jb25zb2xlMiIsImdyb3VwQ29sbGFwc2VkIiwiZGVidWdFbmQiLCJncm91cEVuZCIsInBhc3QiLCJmdXR1cmUiLCJpbnNlcnQiLCJmcmVlIiwicHJlc2VudCIsImhpc3RvcnlPdmVyZmxvdyIsImp1bXBUb0Z1dHVyZSIsImp1bXBUb1Bhc3QiLCJ3cmFwU3RhdGUiLCJ1cGRhdGVTdGF0ZSIsImNyZWF0ZUhpc3RvcnkiLCJwYXJzZUFjdGlvbnMiLCJyYXdBY3Rpb25zIiwiZGVmYXVsdFZhbHVlIiwidW5kb2FibGUiLCJyYXdDb25maWciLCJjb25maWciLCJpbml0VHlwZXMiLCJ1bmRvVHlwZSIsIlVORE8iLCJyZWRvVHlwZSIsIlJFRE8iLCJqdW1wVG9QYXN0VHlwZSIsIkpVTVBfVE9fUEFTVCIsImp1bXBUb0Z1dHVyZVR5cGUiLCJKVU1QX1RPX0ZVVFVSRSIsImluaXRpYWxIaXN0b3J5IiwicmVzIiwic29tZSIsInVwZGF0ZWRIaXN0b3J5IiwiZGlzdGluY3RTdGF0ZSIsImluY2x1ZGVBY3Rpb24iLCJhY3Rpb25zIiwiaWZBY3Rpb24iLCJleGNsdWRlQWN0aW9uIiwiX2RlZmluZVByb3BlcnR5MyIsIl9leHRlbmRzNCIsIl9leHRlbmRzNSIsIklOSVRJQUxfU1RBVEUiLCJzY2FsZXJYIiwiQ1VSVkVfUEVSQ0VOVCIsInJlc2l6ZVJlZHVjZXIiLCJkZWx0YSIsIm5ld1N0YXRlIiwiX2RhdGEiLCJfdHlwZSIsIl9kZWx0YSIsIm1hdGhNZXRob2QiLCJfbmV3U3RhdGUiLCJfdG9Db25zdW1hYmxlQXJyYXkyIiwiX3RvQ29uc3VtYWJsZUFycmF5MyIsIl9tYWtlUG9pbnQiLCJfbWFrZVBvaW50MiIsImlzTG9ja2VkWCIsImRlc2xlY3RBbGwiLCJpc1NlbGVjdGVkIiwiZmluZFNlbGVjdGVkSW5kZWNpZXMiLCJpbmRlY2llcyIsInBvaW50c1JlZHVjZXIiLCJvbGRQb2ludCIsInRlbXBYIiwidGVtcFkiLCJfaW5kZXgiLCJfb2xkUG9pbnQiLCJfaW5kZXgyIiwiaXNEZXNlbGVjdCIsIl9uZXdTdGF0ZTIiLCJzaWJQb2ludCIsImhhbmRsZUluZGV4IiwiaGFuZGxlTmFtZSIsInNpYkhhbmRsZUluZGV4Iiwic2liSGFuZGxlTmFtZSIsImhhbmRsZSIsInNpYkhhbmRsZSIsIndhc250U2V0IiwiYW5nbGUiLCJyYWRpdXMiLCJkeSIsImR4IiwiYXRhbiIsIlBJIiwiX2RhdGEyIiwiX2luZGV4MyIsImRlc2VsZWN0ZWQiLCJzZWxlY3RlZCIsIl9uZXdTdGF0ZTMiLCJfc2VsZWN0ZWQiLCJfbmV3U3RhdGU0IiwiX2l0ZW0iLCJfaW5kZXg0IiwiX3BvaW50IiwiX2hhbmRsZUluZGV4IiwiX3NpYkhhbmRsZUluZGV4IiwiX2hhbmRsZU5hbWUiLCJfc2liSGFuZGxlTmFtZSIsIl9oYW5kbGUiLCJfc2liSGFuZGxlIiwiX2RhdGEzIiwiX25ld1N0YXRlNSIsIm5ld1BvaW50IiwicGFyZW50SW5kZXgiLCJfaGFuZGxlTmFtZTIiLCJuZXdIYW5kbGUiLCJfZnJvbSIsIl9mcm9tMiIsImlzQXJyYXlJdGVyIiwiY3JlYXRlUHJvcGVydHkiLCJnZXRJdGVyRm4iLCJpdGVyIiwiYXJyYXlMaWtlIiwibWFwZm4iLCJtYXBwaW5nIiwiaXRlckZuIiwiQXJyYXlQcm90byIsImNsYXNzb2YiLCJnZXRJdGVyYXRvck1ldGhvZCIsIkFSRyIsInRyeUdldCIsImNhbGxlZSIsIlNBRkVfQ0xPU0lORyIsInJpdGVyIiwic2tpcENsb3NpbmciLCJzYWZlIiwiZmFsbGJhY2siLCJfZmFsbGJhY2siLCJtYWtlSGFuZGxlUG9pbnQiLCJvIiwiaXNUb3VjaGVkIiwibWFrZVBvc2l0aW9uUG9pbnQiLCJtYWtlUG9pbnQiLCJpc0xvY2tlZFkiLCJoYW5kbGUxIiwiaGFuZGxlMiIsImlzU2hvdyIsIl9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fIiwiZXhwb3J0TmFtZSIsInNldFRpbWVvdXRDb250ZXh0IiwiYmluZEZuIiwiaW52b2tlQXJyYXlBcmciLCJlYWNoIiwiZGVwcmVjYXRlIiwibWV0aG9kIiwiZGVwcmVjYXRpb25NZXNzYWdlIiwic3RhY2siLCJyZXBsYWNlIiwiaW5oZXJpdCIsInByb3BlcnRpZXMiLCJjaGlsZFAiLCJiYXNlUCIsIl9zdXBlciIsImJvb2xPckZuIiwiVFlQRV9GVU5DVElPTiIsImlmVW5kZWZpbmVkIiwidmFsMSIsInZhbDIiLCJhZGRFdmVudExpc3RlbmVycyIsInR5cGVzIiwiaGFuZGxlciIsInNwbGl0U3RyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJoYXNQYXJlbnQiLCJpblN0ciIsImZpbmQiLCJ0cmltIiwiaW5BcnJheSIsImZpbmRCeUtleSIsInVuaXF1ZUFycmF5Iiwic29ydCIsInJlc3VsdHMiLCJwcmVmaXhlZCIsInByb3BlcnR5IiwiY2FtZWxQcm9wIiwidG9VcHBlckNhc2UiLCJWRU5ET1JfUFJFRklYRVMiLCJ1bmlxdWVJZCIsIl91bmlxdWVJZCIsImdldFdpbmRvd0ZvckVsZW1lbnQiLCJlbGVtZW50IiwiZG9jIiwib3duZXJEb2N1bWVudCIsImRlZmF1bHRWaWV3IiwicGFyZW50V2luZG93IiwiSW5wdXQiLCJtYW5hZ2VyIiwiaW5wdXRUYXJnZXQiLCJkb21IYW5kbGVyIiwiZW5hYmxlIiwiaW5pdCIsImNyZWF0ZUlucHV0SW5zdGFuY2UiLCJUeXBlIiwiaW5wdXRDbGFzcyIsIlNVUFBPUlRfUE9JTlRFUl9FVkVOVFMiLCJQb2ludGVyRXZlbnRJbnB1dCIsIlNVUFBPUlRfT05MWV9UT1VDSCIsIlRvdWNoSW5wdXQiLCJTVVBQT1JUX1RPVUNIIiwiVG91Y2hNb3VzZUlucHV0IiwiTW91c2VJbnB1dCIsImlucHV0SGFuZGxlciIsImV2ZW50VHlwZSIsImlucHV0IiwicG9pbnRlcnNMZW4iLCJwb2ludGVycyIsImNoYW5nZWRQb2ludGVyc0xlbiIsImNoYW5nZWRQb2ludGVycyIsImlzRmlyc3QiLCJJTlBVVF9TVEFSVCIsImlzRmluYWwiLCJJTlBVVF9FTkQiLCJJTlBVVF9DQU5DRUwiLCJzZXNzaW9uIiwiY29tcHV0ZUlucHV0RGF0YSIsInJlY29nbml6ZSIsInByZXZJbnB1dCIsInBvaW50ZXJzTGVuZ3RoIiwiZmlyc3RJbnB1dCIsInNpbXBsZUNsb25lSW5wdXREYXRhIiwiZmlyc3RNdWx0aXBsZSIsIm9mZnNldENlbnRlciIsImNlbnRlciIsImdldENlbnRlciIsInRpbWVTdGFtcCIsIm5vdyIsImRlbHRhVGltZSIsImdldEFuZ2xlIiwiZGlzdGFuY2UiLCJnZXREaXN0YW5jZSIsImNvbXB1dGVEZWx0YVhZIiwib2Zmc2V0RGlyZWN0aW9uIiwiZ2V0RGlyZWN0aW9uIiwib3ZlcmFsbFZlbG9jaXR5IiwiZ2V0VmVsb2NpdHkiLCJvdmVyYWxsVmVsb2NpdHlYIiwib3ZlcmFsbFZlbG9jaXR5WSIsImFicyIsInNjYWxlIiwiZ2V0U2NhbGUiLCJyb3RhdGlvbiIsImdldFJvdGF0aW9uIiwibWF4UG9pbnRlcnMiLCJjb21wdXRlSW50ZXJ2YWxJbnB1dERhdGEiLCJzcmNFdmVudCIsIm9mZnNldERlbHRhIiwicHJldkRlbHRhIiwidmVsb2NpdHkiLCJ2ZWxvY2l0eVgiLCJ2ZWxvY2l0eVkiLCJkaXJlY3Rpb24iLCJsYXN0SW50ZXJ2YWwiLCJDT01QVVRFX0lOVEVSVkFMIiwiY2xpZW50WCIsInJvdW5kIiwiY2xpZW50WSIsIkRJUkVDVElPTl9OT05FIiwiRElSRUNUSU9OX0xFRlQiLCJESVJFQ1RJT05fUklHSFQiLCJESVJFQ1RJT05fVVAiLCJESVJFQ1RJT05fRE9XTiIsInAxIiwicDIiLCJQUk9QU19YWSIsInNxcnQiLCJhdGFuMiIsInN0YXJ0IiwiZW5kIiwiUFJPUFNfQ0xJRU5UX1hZIiwiZXZFbCIsIk1PVVNFX0VMRU1FTlRfRVZFTlRTIiwiZXZXaW4iLCJNT1VTRV9XSU5ET1dfRVZFTlRTIiwicHJlc3NlZCIsIlBPSU5URVJfRUxFTUVOVF9FVkVOVFMiLCJQT0lOVEVSX1dJTkRPV19FVkVOVFMiLCJwb2ludGVyRXZlbnRzIiwiU2luZ2xlVG91Y2hJbnB1dCIsImV2VGFyZ2V0IiwiU0lOR0xFX1RPVUNIX1RBUkdFVF9FVkVOVFMiLCJTSU5HTEVfVE9VQ0hfV0lORE9XX0VWRU5UUyIsInN0YXJ0ZWQiLCJub3JtYWxpemVTaW5nbGVUb3VjaGVzIiwiYWxsIiwidG91Y2hlcyIsImNoYW5nZWQiLCJjaGFuZ2VkVG91Y2hlcyIsIlRPVUNIX1RBUkdFVF9FVkVOVFMiLCJ0YXJnZXRJZHMiLCJnZXRUb3VjaGVzIiwiYWxsVG91Y2hlcyIsIklOUFVUX01PVkUiLCJpZGVudGlmaWVyIiwidGFyZ2V0VG91Y2hlcyIsImNoYW5nZWRUYXJnZXRUb3VjaGVzIiwidG91Y2giLCJtb3VzZSIsInByaW1hcnlUb3VjaCIsImxhc3RUb3VjaGVzIiwicmVjb3JkVG91Y2hlcyIsImV2ZW50RGF0YSIsInNldExhc3RUb3VjaCIsImxhc3RUb3VjaCIsImx0cyIsInJlbW92ZUxhc3RUb3VjaCIsIkRFRFVQX1RJTUVPVVQiLCJpc1N5bnRoZXRpY0V2ZW50IiwiREVEVVBfRElTVEFOQ0UiLCJUb3VjaEFjdGlvbiIsImNsZWFuVG91Y2hBY3Rpb25zIiwiVE9VQ0hfQUNUSU9OX05PTkUiLCJoYXNQYW5YIiwiVE9VQ0hfQUNUSU9OX1BBTl9YIiwiaGFzUGFuWSIsIlRPVUNIX0FDVElPTl9QQU5fWSIsIlRPVUNIX0FDVElPTl9NQU5JUFVMQVRJT04iLCJUT1VDSF9BQ1RJT05fQVVUTyIsImdldFRvdWNoQWN0aW9uUHJvcHMiLCJOQVRJVkVfVE9VQ0hfQUNUSU9OIiwidG91Y2hNYXAiLCJjc3NTdXBwb3J0cyIsIkNTUyIsInN1cHBvcnRzIiwiUmVjb2duaXplciIsImRlZmF1bHRzIiwiU1RBVEVfUE9TU0lCTEUiLCJzaW11bHRhbmVvdXMiLCJyZXF1aXJlRmFpbCIsInN0YXRlU3RyIiwiU1RBVEVfQ0FOQ0VMTEVEIiwiU1RBVEVfRU5ERUQiLCJTVEFURV9DSEFOR0VEIiwiU1RBVEVfQkVHQU4iLCJkaXJlY3Rpb25TdHIiLCJnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyIiwib3RoZXJSZWNvZ25pemVyIiwicmVjb2duaXplciIsIkF0dHJSZWNvZ25pemVyIiwiUGFuUmVjb2duaXplciIsInBYIiwicFkiLCJQaW5jaFJlY29nbml6ZXIiLCJQcmVzc1JlY29nbml6ZXIiLCJfdGltZXIiLCJfaW5wdXQiLCJSb3RhdGVSZWNvZ25pemVyIiwiU3dpcGVSZWNvZ25pemVyIiwiVGFwUmVjb2duaXplciIsInBUaW1lIiwicENlbnRlciIsImNvdW50IiwiSGFtbWVyIiwicmVjb2duaXplcnMiLCJwcmVzZXQiLCJNYW5hZ2VyIiwiaGFuZGxlcnMiLCJvbGRDc3NQcm9wcyIsInRvdWNoQWN0aW9uIiwidG9nZ2xlQ3NzUHJvcHMiLCJhZGQiLCJyZWNvZ25pemVXaXRoIiwicmVxdWlyZUZhaWx1cmUiLCJjc3NQcm9wcyIsInRyaWdnZXJEb21FdmVudCIsImdlc3R1cmVFdmVudCIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiZ2VzdHVyZSIsImRpc3BhdGNoRXZlbnQiLCJURVNUX0VMRU1FTlQiLCJEYXRlIiwib3V0cHV0IiwibmV4dEtleSIsImRlc3QiLCJNT0JJTEVfUkVHRVgiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJJTlBVVF9UWVBFX1RPVUNIIiwiSU5QVVRfVFlQRV9QRU4iLCJJTlBVVF9UWVBFX01PVVNFIiwiSU5QVVRfVFlQRV9LSU5FQ1QiLCJESVJFQ1RJT05fSE9SSVpPTlRBTCIsIkRJUkVDVElPTl9WRVJUSUNBTCIsIkRJUkVDVElPTl9BTEwiLCJkZXN0cm95IiwiTU9VU0VfSU5QVVRfTUFQIiwibW91c2Vkb3duIiwibW91c2Vtb3ZlIiwibW91c2V1cCIsImJ1dHRvbiIsInBvaW50ZXJUeXBlIiwiUE9JTlRFUl9JTlBVVF9NQVAiLCJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCIsInBvaW50ZXJvdXQiLCJJRTEwX1BPSU5URVJfVFlQRV9FTlVNIiwiMiIsIjMiLCI0IiwiNSIsIk1TUG9pbnRlckV2ZW50IiwiUG9pbnRlckV2ZW50IiwicmVtb3ZlUG9pbnRlciIsImV2ZW50VHlwZU5vcm1hbGl6ZWQiLCJpc1RvdWNoIiwic3RvcmVJbmRleCIsInBvaW50ZXJJZCIsIlNJTkdMRV9UT1VDSF9JTlBVVF9NQVAiLCJ0b3VjaHN0YXJ0IiwidG91Y2htb3ZlIiwidG91Y2hlbmQiLCJ0b3VjaGNhbmNlbCIsIlRPVUNIX0lOUFVUX01BUCIsImlucHV0RXZlbnQiLCJpbnB1dERhdGEiLCJpc01vdXNlIiwic291cmNlQ2FwYWJpbGl0aWVzIiwiZmlyZXNUb3VjaEV2ZW50cyIsIlBSRUZJWEVEX1RPVUNIX0FDVElPTiIsIlRPVUNIX0FDVElPTl9DT01QVVRFIiwiVE9VQ0hfQUNUSU9OX01BUCIsImNvbXB1dGUiLCJnZXRUb3VjaEFjdGlvbiIsInByZXZlbnREZWZhdWx0cyIsInByZXZlbnRlZCIsInByZXZlbnREZWZhdWx0IiwiaGFzTm9uZSIsImlzVGFwUG9pbnRlciIsImlzVGFwTW92ZW1lbnQiLCJpc1RhcFRvdWNoVGltZSIsInByZXZlbnRTcmMiLCJTVEFURV9SRUNPR05JWkVEIiwiU1RBVEVfRkFJTEVEIiwiZHJvcFJlY29nbml6ZVdpdGgiLCJkcm9wUmVxdWlyZUZhaWx1cmUiLCJoYXNSZXF1aXJlRmFpbHVyZXMiLCJjYW5SZWNvZ25pemVXaXRoIiwiYWRkaXRpb25hbEV2ZW50IiwidHJ5RW1pdCIsImNhbkVtaXQiLCJpbnB1dERhdGFDbG9uZSIsInJlc2V0IiwiYXR0clRlc3QiLCJvcHRpb25Qb2ludGVycyIsImlzUmVjb2duaXplZCIsImlzVmFsaWQiLCJ0aHJlc2hvbGQiLCJkaXJlY3Rpb25UZXN0IiwiaGFzTW92ZWQiLCJpbk91dCIsInRpbWUiLCJ2YWxpZFBvaW50ZXJzIiwidmFsaWRNb3ZlbWVudCIsInZhbGlkVGltZSIsInRhcHMiLCJpbnRlcnZhbCIsInBvc1RocmVzaG9sZCIsInZhbGlkVG91Y2hUaW1lIiwiZmFpbFRpbWVvdXQiLCJ2YWxpZEludGVydmFsIiwidmFsaWRNdWx0aVRhcCIsInRhcENvdW50IiwiVkVSU0lPTiIsImRvbUV2ZW50cyIsInVzZXJTZWxlY3QiLCJ0b3VjaFNlbGVjdCIsInRvdWNoQ2FsbG91dCIsImNvbnRlbnRab29taW5nIiwidXNlckRyYWciLCJ0YXBIaWdobGlnaHRDb2xvciIsIlNUT1AiLCJGT1JDRURfU1RPUCIsInN0b3AiLCJmb3JjZSIsInN0b3BwZWQiLCJjdXJSZWNvZ25pemVyIiwiZXhpc3RpbmciLCJldmVudHMiLCJUYXAiLCJQYW4iLCJTd2lwZSIsIlBpbmNoIiwiUm90YXRlIiwiUHJlc3MiLCJmcmVlR2xvYmFsIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyIsIl9maXJzdFRhcmdldCIsInByb3BhZ2F0aW5nIiwiaGFtbWVyIiwicHJvcGFnYXRlZEhhbmRsZXIiLCJfaGFuZGxlZCIsInN0b3BQcm9wYWdhdGlvbiIsInNyY1N0b3AiLCJiaW5kIiwiZmlyc3RUYXJnZXQiLCJlbGVtIiwiZWxlbUhhbW1lciIsIl9oYW5kbGVycyIsIl9vcHRpb25zIiwiUHJvcGFnYXRpbmdIYW1tZXIiLCJ3cmFwcGVyIiwiaGFtbWVycyIsImNvbnRlbnQiLCJsb2NhbHMiLCJuZXdDb250ZW50IiwibWVkaWFRdWVyeSIsImFscmVhZHlJbXBvcnRlZE1vZHVsZXMiLCJhZGRTdHlsZXNUb0RvbSIsInN0eWxlcyIsImRvbVN0eWxlIiwic3R5bGVzSW5Eb20iLCJyZWZzIiwicGFydHMiLCJhZGRTdHlsZSIsImxpc3RUb1N0eWxlcyIsIm5ld1N0eWxlcyIsIm1lZGlhIiwic291cmNlTWFwIiwicGFydCIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlRWxlbWVudCIsImdldEhlYWRFbGVtZW50IiwibGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AiLCJzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcCIsImluc2VydEF0IiwicmVtb3ZlU3R5bGVFbGVtZW50IiwiY3JlYXRlU3R5bGVFbGVtZW50IiwiY3JlYXRlTGlua0VsZW1lbnQiLCJsaW5rRWxlbWVudCIsInJlbCIsInNpbmdsZXRvbiIsInN0eWxlSW5kZXgiLCJzaW5nbGV0b25Db3VudGVyIiwic2luZ2xldG9uRWxlbWVudCIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJyZXZva2VPYmplY3RVUkwiLCJCbG9iIiwiYnRvYSIsInVwZGF0ZUxpbmsiLCJocmVmIiwiYXBwbHlUb1RhZyIsIm5ld09iaiIsInN0eWxlU2hlZXQiLCJyZXBsYWNlVGV4dCIsImNzc05vZGUiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsImJsb2IiLCJvbGRTcmMiLCJtZW1vaXplIiwibWVtbyIsImlzT2xkSUUiLCJuZXdMaXN0IiwibWF5UmVtb3ZlIiwidGV4dFN0b3JlIiwicmVwbGFjZW1lbnQiLCJCb29sZWFuIiwiY3VydmUtZWRpdG9yIiwiY3VydmUtZWRpdG9yX19sZWZ0IiwiY3VydmUtZWRpdG9yX19yaWdodCIsImN1cnZlLWVkaXRvcl9fYW5jaG9yLWJ1dHRvbnMiLCJjdXJ2ZS1lZGl0b3JfX21vanMtbG9nbyIsIm1vZCIsInRlbXBSZXNpemVfdG9wIiwiY29lZiIsIk1PRCIsIkRJViIsInBhcnNlSW50IiwiR0FQIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGdCQUFBQyxVQUFBLGdCQUFBQyxRQUNBQSxPQUFBRCxRQUFBRCxJQUNBLGtCQUFBRyxnQkFBQUMsSUFDQUQsT0FBQSx1QkFBQUgsR0FDQSxnQkFBQUMsU0FDQUEsUUFBQSxxQkFBQUQsSUFFQUQsRUFBQSxxQkFBQUMsS0FDQ0ssS0FBQSxXQUNELE1DQWdCLFVBQVVDLEdDSDFCLFFBQUFDLEdBQUFDLEdBQ0EsR0FBQUMsR0FBQUMsU0FBQUMscUJBQUEsV0FDQUMsRUFBQUYsU0FBQUcsY0FBQSxTQUNBRCxHQUFBRSxLQUFBLGtCQUNBRixFQUFBRyxRQUFBLFFBQ0FILEVBQUFJLElBQUFDLEVBQUFDLEVBQUEsR0FBQVYsRUFBQSxpQkFDQUMsRUFBQVUsWUFBQVAsR0FHQSxRQUFBUSxHQUFBQyxHQUNBLHNCQUFBQyxnQkFDQSxNQUFBRCxHQUFBLEdBQUFFLE9BQUEsc0JBQ0EsS0FDQSxHQUFBQyxHQUFBLEdBQUFGLGdCQUNBRyxFQUFBUixFQUFBQyxFQUFBLEdBQUFRLEVBQUEsa0JBQ0FGLEdBQUFHLEtBQUEsTUFBQUYsR0FBQSxHQUNBRCxFQUFB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QUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxVQUFTRixHQVJ2RmpGLE9BQU9JLGVBQWVuRSxFQUFTLGNBQ3pCd0UsT0FBTyxHd0pyc1FkLElBQUFvWCxHQUFBNWEsRUFBQSxLeEowc1FLNmEsRUFBYzlTLEVBQXVCNlMsR3dKeHNRcENtQyxFQUFTbEMsYUFBRWlDLFdBQ1gyOEIsRUFBTSxTQUFFQyxHQUE4QixHQUFkQyxHQUFjcnZDLFVBQUFwRyxRQUFBLEdBQUFtRixTQUFBaUIsVUFBQSxHQUFQLEVBQU9BLFVBQUEsR0FDcENzdkMsRUFBTXI3QixLQUFLd21CLElBQUkyVSxFQUFpQjM4QixHQUNoQzg4QixFQUFNQyxTQUFTSixFQUFpQjM4QixHQUNoQ2c5QixFQUFNLEVBS1osT0FISUgsR0FBTUcsRUFBUUwsRUFBaUJHLEVBQUk5OEIsRUFDN0I2OEIsRUFBTTc4QixFQUFTZzlCLElBQVFMLEVBQWlCQyxHQUFNRSxFQUFJLEdBQUc5OEIsR0FFeEQyOEIsRXhKb3RRUjE2Qyxjd0pqdFFjeTZDIiwiZmlsZSI6Im1vanMtY3VydmUtZWRpdG9yLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwibW9qcy1jdXJ2ZS1lZGl0b3JcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wibW9qcy1jdXJ2ZS1lZGl0b3JcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wibW9qcy1jdXJ2ZS1lZGl0b3JcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiBcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb25cbiAqKi8iLCIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcIm1vanMtY3VydmUtZWRpdG9yXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIm1vanMtY3VydmUtZWRpdG9yXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIm1vanMtY3VydmUtZWRpdG9yXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHR2YXIgcGFyZW50SG90VXBkYXRlQ2FsbGJhY2sgPSB0aGlzW1wid2VicGFja0hvdFVwZGF0ZW1vanNfY3VydmVfZWRpdG9yXCJdO1xuLyoqKioqKi8gXHR0aGlzW1wid2VicGFja0hvdFVwZGF0ZW1vanNfY3VydmVfZWRpdG9yXCJdID0gXHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gd2VicGFja0hvdFVwZGF0ZUNhbGxiYWNrKGNodW5rSWQsIG1vcmVNb2R1bGVzKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuLyoqKioqKi8gXHRcdGhvdEFkZFVwZGF0ZUNodW5rKGNodW5rSWQsIG1vcmVNb2R1bGVzKTtcclxuLyoqKioqKi8gXHRcdGlmKHBhcmVudEhvdFVwZGF0ZUNhbGxiYWNrKSBwYXJlbnRIb3RVcGRhdGVDYWxsYmFjayhjaHVua0lkLCBtb3JlTW9kdWxlcyk7XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdERvd25sb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbi8qKioqKiovIFx0XHR2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcclxuLyoqKioqKi8gXHRcdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xyXG4vKioqKioqLyBcdFx0c2NyaXB0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xyXG4vKioqKioqLyBcdFx0c2NyaXB0LmNoYXJzZXQgPSBcInV0Zi04XCI7XHJcbi8qKioqKiovIFx0XHRzY3JpcHQuc3JjID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIGNodW5rSWQgKyBcIi5ob3QtdXBkYXRlLmpzXCI7XHJcbi8qKioqKiovIFx0XHRoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdERvd25sb2FkTWFuaWZlc3QoY2FsbGJhY2spIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4vKioqKioqLyBcdFx0aWYodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ID09PSBcInVuZGVmaW5lZFwiKVxyXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKFwiTm8gYnJvd3NlciBzdXBwb3J0XCIpKTtcclxuLyoqKioqKi8gXHRcdHRyeSB7XHJcbi8qKioqKiovIFx0XHRcdHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbi8qKioqKiovIFx0XHRcdHZhciByZXF1ZXN0UGF0aCA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyBob3RDdXJyZW50SGFzaCArIFwiLmhvdC11cGRhdGUuanNvblwiO1xyXG4vKioqKioqLyBcdFx0XHRyZXF1ZXN0Lm9wZW4oXCJHRVRcIiwgcmVxdWVzdFBhdGgsIHRydWUpO1xyXG4vKioqKioqLyBcdFx0XHRyZXF1ZXN0LnRpbWVvdXQgPSAxMDAwMDtcclxuLyoqKioqKi8gXHRcdFx0cmVxdWVzdC5zZW5kKG51bGwpO1xyXG4vKioqKioqLyBcdFx0fSBjYXRjaChlcnIpIHtcclxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGNhbGxiYWNrKGVycik7XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHRyZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4vKioqKioqLyBcdFx0XHRpZihyZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQpIHJldHVybjtcclxuLyoqKioqKi8gXHRcdFx0aWYocmVxdWVzdC5zdGF0dXMgPT09IDApIHtcclxuLyoqKioqKi8gXHRcdFx0XHQvLyB0aW1lb3V0XHJcbi8qKioqKiovIFx0XHRcdFx0Y2FsbGJhY2sobmV3IEVycm9yKFwiTWFuaWZlc3QgcmVxdWVzdCB0byBcIiArIHJlcXVlc3RQYXRoICsgXCIgdGltZWQgb3V0LlwiKSk7XHJcbi8qKioqKiovIFx0XHRcdH0gZWxzZSBpZihyZXF1ZXN0LnN0YXR1cyA9PT0gNDA0KSB7XHJcbi8qKioqKiovIFx0XHRcdFx0Ly8gbm8gdXBkYXRlIGF2YWlsYWJsZVxyXG4vKioqKioqLyBcdFx0XHRcdGNhbGxiYWNrKCk7XHJcbi8qKioqKiovIFx0XHRcdH0gZWxzZSBpZihyZXF1ZXN0LnN0YXR1cyAhPT0gMjAwICYmIHJlcXVlc3Quc3RhdHVzICE9PSAzMDQpIHtcclxuLyoqKioqKi8gXHRcdFx0XHQvLyBvdGhlciBmYWlsdXJlXHJcbi8qKioqKiovIFx0XHRcdFx0Y2FsbGJhY2sobmV3IEVycm9yKFwiTWFuaWZlc3QgcmVxdWVzdCB0byBcIiArIHJlcXVlc3RQYXRoICsgXCIgZmFpbGVkLlwiKSk7XHJcbi8qKioqKiovIFx0XHRcdH0gZWxzZSB7XHJcbi8qKioqKiovIFx0XHRcdFx0Ly8gc3VjY2Vzc1xyXG4vKioqKioqLyBcdFx0XHRcdHRyeSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR2YXIgdXBkYXRlID0gSlNPTi5wYXJzZShyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XHJcbi8qKioqKiovIFx0XHRcdFx0fSBjYXRjaChlKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRjYWxsYmFjayhlKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHJldHVybjtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0Y2FsbGJhY2sobnVsbCwgdXBkYXRlKTtcclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0fTtcclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdC8vIENvcGllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9ibG9iL2JlZjQ1YjAvc3JjL3NoYXJlZC91dGlscy9jYW5EZWZpbmVQcm9wZXJ0eS5qc1xyXG4vKioqKioqLyBcdHZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IGZhbHNlO1xyXG4vKioqKioqLyBcdHRyeSB7XHJcbi8qKioqKiovIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sIFwieFwiLCB7XHJcbi8qKioqKiovIFx0XHRcdGdldDogZnVuY3Rpb24oKSB7fVxyXG4vKioqKioqLyBcdFx0fSk7XHJcbi8qKioqKiovIFx0XHRjYW5EZWZpbmVQcm9wZXJ0eSA9IHRydWU7XHJcbi8qKioqKiovIFx0fSBjYXRjaCh4KSB7XHJcbi8qKioqKiovIFx0XHQvLyBJRSB3aWxsIGZhaWwgb24gZGVmaW5lUHJvcGVydHlcclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0dmFyIGhvdEFwcGx5T25VcGRhdGUgPSB0cnVlO1xyXG4vKioqKioqLyBcdHZhciBob3RDdXJyZW50SGFzaCA9IFwiZGEyMDFiMWY5YWI4MTk5MTVjNjdcIjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4vKioqKioqLyBcdHZhciBob3RDdXJyZW50TW9kdWxlRGF0YSA9IHt9O1xyXG4vKioqKioqLyBcdHZhciBob3RDdXJyZW50UGFyZW50cyA9IFtdOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90Q3JlYXRlUmVxdWlyZShtb2R1bGVJZCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbi8qKioqKiovIFx0XHR2YXIgbWUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdGlmKCFtZSkgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX187XHJcbi8qKioqKiovIFx0XHR2YXIgZm4gPSBmdW5jdGlvbihyZXF1ZXN0KSB7XHJcbi8qKioqKiovIFx0XHRcdGlmKG1lLmhvdC5hY3RpdmUpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdLnBhcmVudHMuaW5kZXhPZihtb2R1bGVJZCkgPCAwKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdLnBhcmVudHMucHVzaChtb2R1bGVJZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZihtZS5jaGlsZHJlbi5pbmRleE9mKHJlcXVlc3QpIDwgMClcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0bWUuY2hpbGRyZW4ucHVzaChyZXF1ZXN0KTtcclxuLyoqKioqKi8gXHRcdFx0XHR9IGVsc2UgaG90Q3VycmVudFBhcmVudHMgPSBbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFx0XHR9IGVsc2Uge1xyXG4vKioqKioqLyBcdFx0XHRcdGNvbnNvbGUud2FybihcIltITVJdIHVuZXhwZWN0ZWQgcmVxdWlyZShcIiArIHJlcXVlc3QgKyBcIikgZnJvbSBkaXNwb3NlZCBtb2R1bGUgXCIgKyBtb2R1bGVJZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0aG90Q3VycmVudFBhcmVudHMgPSBbXTtcclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhyZXF1ZXN0KTtcclxuLyoqKioqKi8gXHRcdH07XHJcbi8qKioqKiovIFx0XHRmb3IodmFyIG5hbWUgaW4gX193ZWJwYWNrX3JlcXVpcmVfXykge1xyXG4vKioqKioqLyBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoX193ZWJwYWNrX3JlcXVpcmVfXywgbmFtZSkpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihjYW5EZWZpbmVQcm9wZXJ0eSkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCBuYW1lLCAoZnVuY3Rpb24obmFtZSkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRyZXR1cm4ge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdGdldDogZnVuY3Rpb24oKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfX1tuYW1lXTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHR9LFxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX19bbmFtZV0gPSB2YWx1ZTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdH07XHJcbi8qKioqKiovIFx0XHRcdFx0XHR9KG5hbWUpKSk7XHJcbi8qKioqKiovIFx0XHRcdFx0fSBlbHNlIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGZuW25hbWVdID0gX193ZWJwYWNrX3JlcXVpcmVfX1tuYW1lXTtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdGZ1bmN0aW9uIGVuc3VyZShjaHVua0lkLCBjYWxsYmFjaykge1xyXG4vKioqKioqLyBcdFx0XHRpZihob3RTdGF0dXMgPT09IFwicmVhZHlcIilcclxuLyoqKioqKi8gXHRcdFx0XHRob3RTZXRTdGF0dXMoXCJwcmVwYXJlXCIpO1xyXG4vKioqKioqLyBcdFx0XHRob3RDaHVua3NMb2FkaW5nKys7XHJcbi8qKioqKiovIFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18uZShjaHVua0lkLCBmdW5jdGlvbigpIHtcclxuLyoqKioqKi8gXHRcdFx0XHR0cnkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0Y2FsbGJhY2suY2FsbChudWxsLCBmbik7XHJcbi8qKioqKiovIFx0XHRcdFx0fSBmaW5hbGx5IHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGZpbmlzaENodW5rTG9hZGluZygpO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdFx0XHRmdW5jdGlvbiBmaW5pc2hDaHVua0xvYWRpbmcoKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRob3RDaHVua3NMb2FkaW5nLS07XHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZihob3RTdGF0dXMgPT09IFwicHJlcGFyZVwiKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmKCFob3RXYWl0aW5nRmlsZXNNYXBbY2h1bmtJZF0pIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRob3RFbnN1cmVVcGRhdGVDaHVuayhjaHVua0lkKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZihob3RDaHVua3NMb2FkaW5nID09PSAwICYmIGhvdFdhaXRpbmdGaWxlcyA9PT0gMCkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0fSk7XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHRpZihjYW5EZWZpbmVQcm9wZXJ0eSkge1xyXG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZm4sIFwiZVwiLCB7XHJcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcclxuLyoqKioqKi8gXHRcdFx0XHR2YWx1ZTogZW5zdXJlXHJcbi8qKioqKiovIFx0XHRcdH0pO1xyXG4vKioqKioqLyBcdFx0fSBlbHNlIHtcclxuLyoqKioqKi8gXHRcdFx0Zm4uZSA9IGVuc3VyZTtcclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcdHJldHVybiBmbjtcclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90Q3JlYXRlTW9kdWxlKG1vZHVsZUlkKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuLyoqKioqKi8gXHRcdHZhciBob3QgPSB7XHJcbi8qKioqKiovIFx0XHRcdC8vIHByaXZhdGUgc3R1ZmZcclxuLyoqKioqKi8gXHRcdFx0X2FjY2VwdGVkRGVwZW5kZW5jaWVzOiB7fSxcclxuLyoqKioqKi8gXHRcdFx0X2RlY2xpbmVkRGVwZW5kZW5jaWVzOiB7fSxcclxuLyoqKioqKi8gXHRcdFx0X3NlbGZBY2NlcHRlZDogZmFsc2UsXHJcbi8qKioqKiovIFx0XHRcdF9zZWxmRGVjbGluZWQ6IGZhbHNlLFxyXG4vKioqKioqLyBcdFx0XHRfZGlzcG9zZUhhbmRsZXJzOiBbXSxcclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdFx0Ly8gTW9kdWxlIEFQSVxyXG4vKioqKioqLyBcdFx0XHRhY3RpdmU6IHRydWUsXHJcbi8qKioqKiovIFx0XHRcdGFjY2VwdDogZnVuY3Rpb24oZGVwLCBjYWxsYmFjaykge1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKHR5cGVvZiBkZXAgPT09IFwidW5kZWZpbmVkXCIpXHJcbi8qKioqKiovIFx0XHRcdFx0XHRob3QuX3NlbGZBY2NlcHRlZCA9IHRydWU7XHJcbi8qKioqKiovIFx0XHRcdFx0ZWxzZSBpZih0eXBlb2YgZGVwID09PSBcImZ1bmN0aW9uXCIpXHJcbi8qKioqKiovIFx0XHRcdFx0XHRob3QuX3NlbGZBY2NlcHRlZCA9IGRlcDtcclxuLyoqKioqKi8gXHRcdFx0XHRlbHNlIGlmKHR5cGVvZiBkZXAgPT09IFwib2JqZWN0XCIpXHJcbi8qKioqKiovIFx0XHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcFtpXV0gPSBjYWxsYmFjaztcclxuLyoqKioqKi8gXHRcdFx0XHRlbHNlXHJcbi8qKioqKiovIFx0XHRcdFx0XHRob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcF0gPSBjYWxsYmFjaztcclxuLyoqKioqKi8gXHRcdFx0fSxcclxuLyoqKioqKi8gXHRcdFx0ZGVjbGluZTogZnVuY3Rpb24oZGVwKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYodHlwZW9mIGRlcCA9PT0gXCJ1bmRlZmluZWRcIilcclxuLyoqKioqKi8gXHRcdFx0XHRcdGhvdC5fc2VsZkRlY2xpbmVkID0gdHJ1ZTtcclxuLyoqKioqKi8gXHRcdFx0XHRlbHNlIGlmKHR5cGVvZiBkZXAgPT09IFwibnVtYmVyXCIpXHJcbi8qKioqKiovIFx0XHRcdFx0XHRob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW2RlcF0gPSB0cnVlO1xyXG4vKioqKioqLyBcdFx0XHRcdGVsc2VcclxuLyoqKioqKi8gXHRcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBkZXAubGVuZ3RoOyBpKyspXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbZGVwW2ldXSA9IHRydWU7XHJcbi8qKioqKiovIFx0XHRcdH0sXHJcbi8qKioqKiovIFx0XHRcdGRpc3Bvc2U6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aG90Ll9kaXNwb3NlSGFuZGxlcnMucHVzaChjYWxsYmFjayk7XHJcbi8qKioqKiovIFx0XHRcdH0sXHJcbi8qKioqKiovIFx0XHRcdGFkZERpc3Bvc2VIYW5kbGVyOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdC5fZGlzcG9zZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xyXG4vKioqKioqLyBcdFx0XHR9LFxyXG4vKioqKioqLyBcdFx0XHRyZW1vdmVEaXNwb3NlSGFuZGxlcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgaWR4ID0gaG90Ll9kaXNwb3NlSGFuZGxlcnMuaW5kZXhPZihjYWxsYmFjayk7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoaWR4ID49IDApIGhvdC5fZGlzcG9zZUhhbmRsZXJzLnNwbGljZShpZHgsIDEpO1xyXG4vKioqKioqLyBcdFx0XHR9LFxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHQvLyBNYW5hZ2VtZW50IEFQSVxyXG4vKioqKioqLyBcdFx0XHRjaGVjazogaG90Q2hlY2ssXHJcbi8qKioqKiovIFx0XHRcdGFwcGx5OiBob3RBcHBseSxcclxuLyoqKioqKi8gXHRcdFx0c3RhdHVzOiBmdW5jdGlvbihsKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoIWwpIHJldHVybiBob3RTdGF0dXM7XHJcbi8qKioqKiovIFx0XHRcdFx0aG90U3RhdHVzSGFuZGxlcnMucHVzaChsKTtcclxuLyoqKioqKi8gXHRcdFx0fSxcclxuLyoqKioqKi8gXHRcdFx0YWRkU3RhdHVzSGFuZGxlcjogZnVuY3Rpb24obCkge1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdFN0YXR1c0hhbmRsZXJzLnB1c2gobCk7XHJcbi8qKioqKiovIFx0XHRcdH0sXHJcbi8qKioqKiovIFx0XHRcdHJlbW92ZVN0YXR1c0hhbmRsZXI6IGZ1bmN0aW9uKGwpIHtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgaWR4ID0gaG90U3RhdHVzSGFuZGxlcnMuaW5kZXhPZihsKTtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihpZHggPj0gMCkgaG90U3RhdHVzSGFuZGxlcnMuc3BsaWNlKGlkeCwgMSk7XHJcbi8qKioqKiovIFx0XHRcdH0sXHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdC8vaW5oZXJpdCBmcm9tIHByZXZpb3VzIGRpc3Bvc2UgY2FsbFxyXG4vKioqKioqLyBcdFx0XHRkYXRhOiBob3RDdXJyZW50TW9kdWxlRGF0YVttb2R1bGVJZF1cclxuLyoqKioqKi8gXHRcdH07XHJcbi8qKioqKiovIFx0XHRyZXR1cm4gaG90O1xyXG4vKioqKioqLyBcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHR2YXIgaG90U3RhdHVzSGFuZGxlcnMgPSBbXTtcclxuLyoqKioqKi8gXHR2YXIgaG90U3RhdHVzID0gXCJpZGxlXCI7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90U2V0U3RhdHVzKG5ld1N0YXR1cykge1xyXG4vKioqKioqLyBcdFx0aG90U3RhdHVzID0gbmV3U3RhdHVzO1xyXG4vKioqKioqLyBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGhvdFN0YXR1c0hhbmRsZXJzLmxlbmd0aDsgaSsrKVxyXG4vKioqKioqLyBcdFx0XHRob3RTdGF0dXNIYW5kbGVyc1tpXS5jYWxsKG51bGwsIG5ld1N0YXR1cyk7XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdC8vIHdoaWxlIGRvd25sb2FkaW5nXHJcbi8qKioqKiovIFx0dmFyIGhvdFdhaXRpbmdGaWxlcyA9IDA7XHJcbi8qKioqKiovIFx0dmFyIGhvdENodW5rc0xvYWRpbmcgPSAwO1xyXG4vKioqKioqLyBcdHZhciBob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcclxuLyoqKioqKi8gXHR2YXIgaG90UmVxdWVzdGVkRmlsZXNNYXAgPSB7fTtcclxuLyoqKioqKi8gXHR2YXIgaG90QXZhaWxpYmxlRmlsZXNNYXAgPSB7fTtcclxuLyoqKioqKi8gXHR2YXIgaG90Q2FsbGJhY2s7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0Ly8gVGhlIHVwZGF0ZSBpbmZvXHJcbi8qKioqKiovIFx0dmFyIGhvdFVwZGF0ZSwgaG90VXBkYXRlTmV3SGFzaDtcclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRmdW5jdGlvbiB0b01vZHVsZUlkKGlkKSB7XHJcbi8qKioqKiovIFx0XHR2YXIgaXNOdW1iZXIgPSAoK2lkKSArIFwiXCIgPT09IGlkO1xyXG4vKioqKioqLyBcdFx0cmV0dXJuIGlzTnVtYmVyID8gK2lkIDogaWQ7XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdENoZWNrKGFwcGx5LCBjYWxsYmFjaykge1xyXG4vKioqKioqLyBcdFx0aWYoaG90U3RhdHVzICE9PSBcImlkbGVcIikgdGhyb3cgbmV3IEVycm9yKFwiY2hlY2soKSBpcyBvbmx5IGFsbG93ZWQgaW4gaWRsZSBzdGF0dXNcIik7XHJcbi8qKioqKiovIFx0XHRpZih0eXBlb2YgYXBwbHkgPT09IFwiZnVuY3Rpb25cIikge1xyXG4vKioqKioqLyBcdFx0XHRob3RBcHBseU9uVXBkYXRlID0gZmFsc2U7XHJcbi8qKioqKiovIFx0XHRcdGNhbGxiYWNrID0gYXBwbHk7XHJcbi8qKioqKiovIFx0XHR9IGVsc2Uge1xyXG4vKioqKioqLyBcdFx0XHRob3RBcHBseU9uVXBkYXRlID0gYXBwbHk7XHJcbi8qKioqKiovIFx0XHRcdGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oZXJyKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoZXJyKSB0aHJvdyBlcnI7XHJcbi8qKioqKiovIFx0XHRcdH07XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHRob3RTZXRTdGF0dXMoXCJjaGVja1wiKTtcclxuLyoqKioqKi8gXHRcdGhvdERvd25sb2FkTWFuaWZlc3QoZnVuY3Rpb24oZXJyLCB1cGRhdGUpIHtcclxuLyoqKioqKi8gXHRcdFx0aWYoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKTtcclxuLyoqKioqKi8gXHRcdFx0aWYoIXVwZGF0ZSkge1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdFNldFN0YXR1cyhcImlkbGVcIik7XHJcbi8qKioqKiovIFx0XHRcdFx0Y2FsbGJhY2sobnVsbCwgbnVsbCk7XHJcbi8qKioqKiovIFx0XHRcdFx0cmV0dXJuO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdGhvdFJlcXVlc3RlZEZpbGVzTWFwID0ge307XHJcbi8qKioqKiovIFx0XHRcdGhvdEF2YWlsaWJsZUZpbGVzTWFwID0ge307XHJcbi8qKioqKiovIFx0XHRcdGhvdFdhaXRpbmdGaWxlc01hcCA9IHt9O1xyXG4vKioqKioqLyBcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdXBkYXRlLmMubGVuZ3RoOyBpKyspXHJcbi8qKioqKiovIFx0XHRcdFx0aG90QXZhaWxpYmxlRmlsZXNNYXBbdXBkYXRlLmNbaV1dID0gdHJ1ZTtcclxuLyoqKioqKi8gXHRcdFx0aG90VXBkYXRlTmV3SGFzaCA9IHVwZGF0ZS5oO1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHRob3RTZXRTdGF0dXMoXCJwcmVwYXJlXCIpO1xyXG4vKioqKioqLyBcdFx0XHRob3RDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4vKioqKioqLyBcdFx0XHRob3RVcGRhdGUgPSB7fTtcclxuLyoqKioqKi8gXHRcdFx0dmFyIGNodW5rSWQgPSAwO1xyXG4vKioqKioqLyBcdFx0XHR7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbG9uZS1ibG9ja3NcclxuLyoqKioqKi8gXHRcdFx0XHQvKmdsb2JhbHMgY2h1bmtJZCAqL1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdGlmKGhvdFN0YXR1cyA9PT0gXCJwcmVwYXJlXCIgJiYgaG90Q2h1bmtzTG9hZGluZyA9PT0gMCAmJiBob3RXYWl0aW5nRmlsZXMgPT09IDApIHtcclxuLyoqKioqKi8gXHRcdFx0XHRob3RVcGRhdGVEb3dubG9hZGVkKCk7XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH0pO1xyXG4vKioqKioqLyBcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRmdW5jdGlvbiBob3RBZGRVcGRhdGVDaHVuayhjaHVua0lkLCBtb3JlTW9kdWxlcykgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbi8qKioqKiovIFx0XHRpZighaG90QXZhaWxpYmxlRmlsZXNNYXBbY2h1bmtJZF0gfHwgIWhvdFJlcXVlc3RlZEZpbGVzTWFwW2NodW5rSWRdKVxyXG4vKioqKioqLyBcdFx0XHRyZXR1cm47XHJcbi8qKioqKiovIFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcFtjaHVua0lkXSA9IGZhbHNlO1xyXG4vKioqKioqLyBcdFx0Zm9yKHZhciBtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xyXG4vKioqKioqLyBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdFVwZGF0ZVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcdGlmKC0taG90V2FpdGluZ0ZpbGVzID09PSAwICYmIGhvdENodW5rc0xvYWRpbmcgPT09IDApIHtcclxuLyoqKioqKi8gXHRcdFx0aG90VXBkYXRlRG93bmxvYWRlZCgpO1xyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRmdW5jdGlvbiBob3RFbnN1cmVVcGRhdGVDaHVuayhjaHVua0lkKSB7XHJcbi8qKioqKiovIFx0XHRpZighaG90QXZhaWxpYmxlRmlsZXNNYXBbY2h1bmtJZF0pIHtcclxuLyoqKioqKi8gXHRcdFx0aG90V2FpdGluZ0ZpbGVzTWFwW2NodW5rSWRdID0gdHJ1ZTtcclxuLyoqKioqKi8gXHRcdH0gZWxzZSB7XHJcbi8qKioqKiovIFx0XHRcdGhvdFJlcXVlc3RlZEZpbGVzTWFwW2NodW5rSWRdID0gdHJ1ZTtcclxuLyoqKioqKi8gXHRcdFx0aG90V2FpdGluZ0ZpbGVzKys7XHJcbi8qKioqKiovIFx0XHRcdGhvdERvd25sb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCk7XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdFVwZGF0ZURvd25sb2FkZWQoKSB7XHJcbi8qKioqKiovIFx0XHRob3RTZXRTdGF0dXMoXCJyZWFkeVwiKTtcclxuLyoqKioqKi8gXHRcdHZhciBjYWxsYmFjayA9IGhvdENhbGxiYWNrO1xyXG4vKioqKioqLyBcdFx0aG90Q2FsbGJhY2sgPSBudWxsO1xyXG4vKioqKioqLyBcdFx0aWYoIWNhbGxiYWNrKSByZXR1cm47XHJcbi8qKioqKiovIFx0XHRpZihob3RBcHBseU9uVXBkYXRlKSB7XHJcbi8qKioqKiovIFx0XHRcdGhvdEFwcGx5KGhvdEFwcGx5T25VcGRhdGUsIGNhbGxiYWNrKTtcclxuLyoqKioqKi8gXHRcdH0gZWxzZSB7XHJcbi8qKioqKiovIFx0XHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbXTtcclxuLyoqKioqKi8gXHRcdFx0Zm9yKHZhciBpZCBpbiBob3RVcGRhdGUpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaG90VXBkYXRlLCBpZCkpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKHRvTW9kdWxlSWQoaWQpKTtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0Y2FsbGJhY2sobnVsbCwgb3V0ZGF0ZWRNb2R1bGVzKTtcclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90QXBwbHkob3B0aW9ucywgY2FsbGJhY2spIHtcclxuLyoqKioqKi8gXHRcdGlmKGhvdFN0YXR1cyAhPT0gXCJyZWFkeVwiKSB0aHJvdyBuZXcgRXJyb3IoXCJhcHBseSgpIGlzIG9ubHkgYWxsb3dlZCBpbiByZWFkeSBzdGF0dXNcIik7XHJcbi8qKioqKiovIFx0XHRpZih0eXBlb2Ygb3B0aW9ucyA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbi8qKioqKiovIFx0XHRcdGNhbGxiYWNrID0gb3B0aW9ucztcclxuLyoqKioqKi8gXHRcdFx0b3B0aW9ucyA9IHt9O1xyXG4vKioqKioqLyBcdFx0fSBlbHNlIGlmKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMgPT09IFwib2JqZWN0XCIpIHtcclxuLyoqKioqKi8gXHRcdFx0Y2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbihlcnIpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihlcnIpIHRocm93IGVycjtcclxuLyoqKioqKi8gXHRcdFx0fTtcclxuLyoqKioqKi8gXHRcdH0gZWxzZSB7XHJcbi8qKioqKiovIFx0XHRcdG9wdGlvbnMgPSB7fTtcclxuLyoqKioqKi8gXHRcdFx0Y2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbihlcnIpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihlcnIpIHRocm93IGVycjtcclxuLyoqKioqKi8gXHRcdFx0fTtcclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdGZ1bmN0aW9uIGdldEFmZmVjdGVkU3R1ZmYobW9kdWxlKSB7XHJcbi8qKioqKiovIFx0XHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbbW9kdWxlXTtcclxuLyoqKioqKi8gXHRcdFx0dmFyIG91dGRhdGVkRGVwZW5kZW5jaWVzID0ge307XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdHZhciBxdWV1ZSA9IG91dGRhdGVkTW9kdWxlcy5zbGljZSgpO1xyXG4vKioqKioqLyBcdFx0XHR3aGlsZShxdWV1ZS5sZW5ndGggPiAwKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIG1vZHVsZUlkID0gcXVldWUucG9wKCk7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKCFtb2R1bGUgfHwgbW9kdWxlLmhvdC5fc2VsZkFjY2VwdGVkKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0Y29udGludWU7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYobW9kdWxlLmhvdC5fc2VsZkRlY2xpbmVkKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRyZXR1cm4gbmV3IEVycm9yKFwiQWJvcnRlZCBiZWNhdXNlIG9mIHNlbGYgZGVjbGluZTogXCIgKyBtb2R1bGVJZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdGlmKG1vZHVsZUlkID09PSAwKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRyZXR1cm47XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtb2R1bGUucGFyZW50cy5sZW5ndGg7IGkrKykge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0dmFyIHBhcmVudElkID0gbW9kdWxlLnBhcmVudHNbaV07XHJcbi8qKioqKiovIFx0XHRcdFx0XHR2YXIgcGFyZW50ID0gaW5zdGFsbGVkTW9kdWxlc1twYXJlbnRJZF07XHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZihwYXJlbnQuaG90Ll9kZWNsaW5lZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBFcnJvcihcIkFib3J0ZWQgYmVjYXVzZSBvZiBkZWNsaW5lZCBkZXBlbmRlbmN5OiBcIiArIG1vZHVsZUlkICsgXCIgaW4gXCIgKyBwYXJlbnRJZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZihvdXRkYXRlZE1vZHVsZXMuaW5kZXhPZihwYXJlbnRJZCkgPj0gMCkgY29udGludWU7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZihwYXJlbnQuaG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aWYoIW91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSlcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF0gPSBbXTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdLCBbbW9kdWxlSWRdKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0Y29udGludWU7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0XHRkZWxldGUgb3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0b3V0ZGF0ZWRNb2R1bGVzLnB1c2gocGFyZW50SWQpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0cXVldWUucHVzaChwYXJlbnRJZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdHJldHVybiBbb3V0ZGF0ZWRNb2R1bGVzLCBvdXRkYXRlZERlcGVuZGVuY2llc107XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRmdW5jdGlvbiBhZGRBbGxUb1NldChhLCBiKSB7XHJcbi8qKioqKiovIFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIGl0ZW0gPSBiW2ldO1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKGEuaW5kZXhPZihpdGVtKSA8IDApXHJcbi8qKioqKiovIFx0XHRcdFx0XHRhLnB1c2goaXRlbSk7XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdC8vIGF0IGJlZ2luIGFsbCB1cGRhdGVzIG1vZHVsZXMgYXJlIG91dGRhdGVkXHJcbi8qKioqKiovIFx0XHQvLyB0aGUgXCJvdXRkYXRlZFwiIHN0YXR1cyBjYW4gcHJvcGFnYXRlIHRvIHBhcmVudHMgaWYgdGhleSBkb24ndCBhY2NlcHQgdGhlIGNoaWxkcmVuXHJcbi8qKioqKiovIFx0XHR2YXIgb3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSB7fTtcclxuLyoqKioqKi8gXHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbXTtcclxuLyoqKioqKi8gXHRcdHZhciBhcHBsaWVkVXBkYXRlID0ge307XHJcbi8qKioqKiovIFx0XHRmb3IodmFyIGlkIGluIGhvdFVwZGF0ZSkge1xyXG4vKioqKioqLyBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaG90VXBkYXRlLCBpZCkpIHtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgbW9kdWxlSWQgPSB0b01vZHVsZUlkKGlkKTtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgcmVzdWx0ID0gZ2V0QWZmZWN0ZWRTdHVmZihtb2R1bGVJZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoIXJlc3VsdCkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYob3B0aW9ucy5pZ25vcmVVbmFjY2VwdGVkKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRjb250aW51ZTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGhvdFNldFN0YXR1cyhcImFib3J0XCIpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0cmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcihcIkFib3J0ZWQgYmVjYXVzZSBcIiArIG1vZHVsZUlkICsgXCIgaXMgbm90IGFjY2VwdGVkXCIpKTtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0aWYocmVzdWx0IGluc3RhbmNlb2YgRXJyb3IpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGhvdFNldFN0YXR1cyhcImFib3J0XCIpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0cmV0dXJuIGNhbGxiYWNrKHJlc3VsdCk7XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdGFwcGxpZWRVcGRhdGVbbW9kdWxlSWRdID0gaG90VXBkYXRlW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0XHRhZGRBbGxUb1NldChvdXRkYXRlZE1vZHVsZXMsIHJlc3VsdFswXSk7XHJcbi8qKioqKiovIFx0XHRcdFx0Zm9yKHZhciBtb2R1bGVJZCBpbiByZXN1bHRbMV0pIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZXN1bHRbMV0sIG1vZHVsZUlkKSkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZighb3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSA9IFtdO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRhZGRBbGxUb1NldChvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0sIHJlc3VsdFsxXVttb2R1bGVJZF0pO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0Ly8gU3RvcmUgc2VsZiBhY2NlcHRlZCBvdXRkYXRlZCBtb2R1bGVzIHRvIHJlcXVpcmUgdGhlbSBsYXRlciBieSB0aGUgbW9kdWxlIHN5c3RlbVxyXG4vKioqKioqLyBcdFx0dmFyIG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcyA9IFtdO1xyXG4vKioqKioqLyBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG91dGRhdGVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xyXG4vKioqKioqLyBcdFx0XHR2YXIgbW9kdWxlSWQgPSBvdXRkYXRlZE1vZHVsZXNbaV07XHJcbi8qKioqKiovIFx0XHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdICYmIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkKVxyXG4vKioqKioqLyBcdFx0XHRcdG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcy5wdXNoKHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdG1vZHVsZTogbW9kdWxlSWQsXHJcbi8qKioqKiovIFx0XHRcdFx0XHRlcnJvckhhbmRsZXI6IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkXHJcbi8qKioqKiovIFx0XHRcdFx0fSk7XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHQvLyBOb3cgaW4gXCJkaXNwb3NlXCIgcGhhc2VcclxuLyoqKioqKi8gXHRcdGhvdFNldFN0YXR1cyhcImRpc3Bvc2VcIik7XHJcbi8qKioqKiovIFx0XHR2YXIgcXVldWUgPSBvdXRkYXRlZE1vZHVsZXMuc2xpY2UoKTtcclxuLyoqKioqKi8gXHRcdHdoaWxlKHF1ZXVlLmxlbmd0aCA+IDApIHtcclxuLyoqKioqKi8gXHRcdFx0dmFyIG1vZHVsZUlkID0gcXVldWUucG9wKCk7XHJcbi8qKioqKiovIFx0XHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0aWYoIW1vZHVsZSkgY29udGludWU7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdHZhciBkYXRhID0ge307XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdC8vIENhbGwgZGlzcG9zZSBoYW5kbGVyc1xyXG4vKioqKioqLyBcdFx0XHR2YXIgZGlzcG9zZUhhbmRsZXJzID0gbW9kdWxlLmhvdC5fZGlzcG9zZUhhbmRsZXJzO1xyXG4vKioqKioqLyBcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZGlzcG9zZUhhbmRsZXJzLmxlbmd0aDsgaisrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIGNiID0gZGlzcG9zZUhhbmRsZXJzW2pdO1xyXG4vKioqKioqLyBcdFx0XHRcdGNiKGRhdGEpO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdGhvdEN1cnJlbnRNb2R1bGVEYXRhW21vZHVsZUlkXSA9IGRhdGE7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdC8vIGRpc2FibGUgbW9kdWxlICh0aGlzIGRpc2FibGVzIHJlcXVpcmVzIGZyb20gdGhpcyBtb2R1bGUpXHJcbi8qKioqKiovIFx0XHRcdG1vZHVsZS5ob3QuYWN0aXZlID0gZmFsc2U7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdC8vIHJlbW92ZSBtb2R1bGUgZnJvbSBjYWNoZVxyXG4vKioqKioqLyBcdFx0XHRkZWxldGUgaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdC8vIHJlbW92ZSBcInBhcmVudHNcIiByZWZlcmVuY2VzIGZyb20gYWxsIGNoaWxkcmVuXHJcbi8qKioqKiovIFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBtb2R1bGUuY2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgY2hpbGQgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZS5jaGlsZHJlbltqXV07XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoIWNoaWxkKSBjb250aW51ZTtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgaWR4ID0gY2hpbGQucGFyZW50cy5pbmRleE9mKG1vZHVsZUlkKTtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihpZHggPj0gMCkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0Y2hpbGQucGFyZW50cy5zcGxpY2UoaWR4LCAxKTtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdC8vIHJlbW92ZSBvdXRkYXRlZCBkZXBlbmRlbmN5IGZyb20gbW9kdWxlIGNoaWxkcmVuXHJcbi8qKioqKiovIFx0XHRmb3IodmFyIG1vZHVsZUlkIGluIG91dGRhdGVkRGVwZW5kZW5jaWVzKSB7XHJcbi8qKioqKiovIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvdXRkYXRlZERlcGVuZGVuY2llcywgbW9kdWxlSWQpKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyA9IG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMubGVuZ3RoOyBqKyspIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHZhciBkZXBlbmRlbmN5ID0gbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXNbal07XHJcbi8qKioqKiovIFx0XHRcdFx0XHR2YXIgaWR4ID0gbW9kdWxlLmNoaWxkcmVuLmluZGV4T2YoZGVwZW5kZW5jeSk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZihpZHggPj0gMCkgbW9kdWxlLmNoaWxkcmVuLnNwbGljZShpZHgsIDEpO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0Ly8gTm90IGluIFwiYXBwbHlcIiBwaGFzZVxyXG4vKioqKioqLyBcdFx0aG90U2V0U3RhdHVzKFwiYXBwbHlcIik7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRob3RDdXJyZW50SGFzaCA9IGhvdFVwZGF0ZU5ld0hhc2g7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHQvLyBpbnNlcnQgbmV3IGNvZGVcclxuLyoqKioqKi8gXHRcdGZvcih2YXIgbW9kdWxlSWQgaW4gYXBwbGllZFVwZGF0ZSkge1xyXG4vKioqKioqLyBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYXBwbGllZFVwZGF0ZSwgbW9kdWxlSWQpKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBhcHBsaWVkVXBkYXRlW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0Ly8gY2FsbCBhY2NlcHQgaGFuZGxlcnNcclxuLyoqKioqKi8gXHRcdHZhciBlcnJvciA9IG51bGw7XHJcbi8qKioqKiovIFx0XHRmb3IodmFyIG1vZHVsZUlkIGluIG91dGRhdGVkRGVwZW5kZW5jaWVzKSB7XHJcbi8qKioqKiovIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvdXRkYXRlZERlcGVuZGVuY2llcywgbW9kdWxlSWQpKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyA9IG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgY2FsbGJhY2tzID0gW107XHJcbi8qKioqKiovIFx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzLmxlbmd0aDsgaSsrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR2YXIgZGVwZW5kZW5jeSA9IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzW2ldO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0dmFyIGNiID0gbW9kdWxlLmhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbZGVwZW5kZW5jeV07XHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZihjYWxsYmFja3MuaW5kZXhPZihjYikgPj0gMCkgY29udGludWU7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRjYWxsYmFja3MucHVzaChjYik7XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHZhciBjYiA9IGNhbGxiYWNrc1tpXTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHRyeSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGNiKG91dGRhdGVkRGVwZW5kZW5jaWVzKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdH0gY2F0Y2goZXJyKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmKCFlcnJvcilcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRlcnJvciA9IGVycjtcclxuLyoqKioqKi8gXHRcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdC8vIExvYWQgc2VsZiBhY2NlcHRlZCBtb2R1bGVzXHJcbi8qKioqKiovIFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XHJcbi8qKioqKiovIFx0XHRcdHZhciBpdGVtID0gb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzW2ldO1xyXG4vKioqKioqLyBcdFx0XHR2YXIgbW9kdWxlSWQgPSBpdGVtLm1vZHVsZTtcclxuLyoqKioqKi8gXHRcdFx0aG90Q3VycmVudFBhcmVudHMgPSBbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFx0XHR0cnkge1xyXG4vKioqKioqLyBcdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpO1xyXG4vKioqKioqLyBcdFx0XHR9IGNhdGNoKGVycikge1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKHR5cGVvZiBpdGVtLmVycm9ySGFuZGxlciA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR0cnkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpdGVtLmVycm9ySGFuZGxlcihlcnIpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0fSBjYXRjaChlcnIpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aWYoIWVycm9yKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdGVycm9yID0gZXJyO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdH0gZWxzZSBpZighZXJyb3IpXHJcbi8qKioqKiovIFx0XHRcdFx0XHRlcnJvciA9IGVycjtcclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0Ly8gaGFuZGxlIGVycm9ycyBpbiBhY2NlcHQgaGFuZGxlcnMgYW5kIHNlbGYgYWNjZXB0ZWQgbW9kdWxlIGxvYWRcclxuLyoqKioqKi8gXHRcdGlmKGVycm9yKSB7XHJcbi8qKioqKiovIFx0XHRcdGhvdFNldFN0YXR1cyhcImZhaWxcIik7XHJcbi8qKioqKiovIFx0XHRcdHJldHVybiBjYWxsYmFjayhlcnJvcik7XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRob3RTZXRTdGF0dXMoXCJpZGxlXCIpO1xyXG4vKioqKioqLyBcdFx0Y2FsbGJhY2sobnVsbCwgb3V0ZGF0ZWRNb2R1bGVzKTtcclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRob3Q6IGhvdENyZWF0ZU1vZHVsZShtb2R1bGVJZCksXG4vKioqKioqLyBcdFx0XHRwYXJlbnRzOiBob3RDdXJyZW50UGFyZW50cyxcbi8qKioqKiovIFx0XHRcdGNoaWxkcmVuOiBbXVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIGhvdENyZWF0ZVJlcXVpcmUobW9kdWxlSWQpKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJidWlsZC9cIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19oYXNoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5oID0gZnVuY3Rpb24oKSB7IHJldHVybiBob3RDdXJyZW50SGFzaDsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gaG90Q3JlYXRlUmVxdWlyZSgwKSgwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9wcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9jdXJ2ZUVkaXRvciA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX2N1cnZlRWRpdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2N1cnZlRWRpdG9yKTtcblx0XG5cdHZhciBfc3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKTtcblx0XG5cdHZhciBfc3RvcmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RvcmUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdC8vIGltcG9ydCAnLi90YWdzL2N1cnZlLWVkaXRvci50YWcnO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNyk7XG5cdFxuXHRcblx0Ly8gVE9ET1xuXHQvLyAgIC0gaW5pdCBwb2ludHMgd2l0aCBmdW5jdGlvblxuXHQvLyAgIC0gbW92ZSBidW5jaCBvZiBwb2ludHMgYXQgb25jZVxuXHQvLyAgIC0gYWRkIGdyaWQgYmFja2dyb3VuZFxuXHRcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAoMCwgX3ByZWFjdC5yZW5kZXIpKCgwLCBfcHJlYWN0LmgpKF9jdXJ2ZUVkaXRvcjIuZGVmYXVsdCwgeyBzdGF0ZTogX3N0b3JlMi5kZWZhdWx0LmdldFN0YXRlKCkgfSksIGRvY3VtZW50LmJvZHkpO1xuXHQgIC8vIHN0b3JlLnN1YnNjcmliZShyZW5kZXJSb290KTtcblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oc2V0SW1tZWRpYXRlKSB7IWZ1bmN0aW9uKGdsb2JhbCwgZmFjdG9yeSkge1xuXHQgICAgIHRydWUgPyBmYWN0b3J5KGV4cG9ydHMpIDogJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWyAnZXhwb3J0cycgXSwgZmFjdG9yeSkgOiBmYWN0b3J5KGdsb2JhbC5wcmVhY3QgPSBnbG9iYWwucHJlYWN0IHx8IHt9KTtcblx0fSh0aGlzLCBmdW5jdGlvbihleHBvcnRzKSB7XG5cdCAgICBmdW5jdGlvbiBWTm9kZShub2RlTmFtZSwgYXR0cmlidXRlcywgY2hpbGRyZW4pIHtcblx0ICAgICAgICB0aGlzLm5vZGVOYW1lID0gbm9kZU5hbWU7XG5cdCAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcblx0ICAgICAgICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47XG5cdCAgICAgICAgdGhpcy5rZXkgPSBhdHRyaWJ1dGVzICYmIGF0dHJpYnV0ZXMua2V5O1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gZXh0ZW5kKG9iaiwgcHJvcHMpIHtcblx0ICAgICAgICBpZiAocHJvcHMpIGZvciAodmFyIGkgaW4gcHJvcHMpIGlmICh2b2lkIDAgIT09IHByb3BzW2ldKSBvYmpbaV0gPSBwcm9wc1tpXTtcblx0ICAgICAgICByZXR1cm4gb2JqO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gY2xvbmUob2JqKSB7XG5cdCAgICAgICAgcmV0dXJuIGV4dGVuZCh7fSwgb2JqKTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGRlbHZlKG9iaiwga2V5KSB7XG5cdCAgICAgICAgZm9yICh2YXIgcCA9IGtleS5zcGxpdCgnLicpLCBpID0gMDsgaSA8IHAubGVuZ3RoICYmIG9iajsgaSsrKSBvYmogPSBvYmpbcFtpXV07XG5cdCAgICAgICAgcmV0dXJuIG9iajtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIHRvQXJyYXkob2JqLCBvZmZzZXQpIHtcblx0ICAgICAgICByZXR1cm4gW10uc2xpY2UuY2FsbChvYmosIG9mZnNldCk7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBpc0Z1bmN0aW9uKG9iaikge1xuXHQgICAgICAgIHJldHVybiAnZnVuY3Rpb24nID09IHR5cGVvZiBvYmo7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBpc1N0cmluZyhvYmopIHtcblx0ICAgICAgICByZXR1cm4gJ3N0cmluZycgPT0gdHlwZW9mIG9iajtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGVtcHR5KHgpIHtcblx0ICAgICAgICByZXR1cm4gdm9pZCAwID09PSB4IHx8IG51bGwgPT09IHg7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBmYWxzZXkodmFsdWUpIHtcblx0ICAgICAgICByZXR1cm4gdmFsdWUgPT09ICExIHx8IGVtcHR5KHZhbHVlKTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGhhc2hUb0NsYXNzTmFtZShjKSB7XG5cdCAgICAgICAgdmFyIHN0ciA9ICcnO1xuXHQgICAgICAgIGZvciAodmFyIHByb3AgaW4gYykgaWYgKGNbcHJvcF0pIHtcblx0ICAgICAgICAgICAgaWYgKHN0cikgc3RyICs9ICcgJztcblx0ICAgICAgICAgICAgc3RyICs9IHByb3A7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBzdHI7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBoKG5vZGVOYW1lLCBhdHRyaWJ1dGVzLCBmaXJzdENoaWxkKSB7XG5cdCAgICAgICAgdmFyIGNoaWxkcmVuLCBhcnIsIGxhc3RTaW1wbGUsIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdCAgICAgICAgaWYgKGxlbiA+IDIpIHtcblx0ICAgICAgICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgZmlyc3RDaGlsZDtcblx0ICAgICAgICAgICAgaWYgKDMgPT09IGxlbiAmJiAnb2JqZWN0JyAhPT0gdHlwZSAmJiAnZnVuY3Rpb24nICE9PSB0eXBlKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoIWZhbHNleShmaXJzdENoaWxkKSkgY2hpbGRyZW4gPSBbIFN0cmluZyhmaXJzdENoaWxkKSBdO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgY2hpbGRyZW4gPSBbXTtcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAyOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgX3AgPSBhcmd1bWVudHNbaV07XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCFmYWxzZXkoX3ApKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfcC5qb2luKSBhcnIgPSBfcDsgZWxzZSAoYXJyID0gU0hBUkVEX1RFTVBfQVJSQVkpWzBdID0gX3A7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgYXJyLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBhcnJbal0sIHNpbXBsZSA9ICEoZmFsc2V5KGNoaWxkKSB8fCBpc0Z1bmN0aW9uKGNoaWxkKSB8fCBjaGlsZCBpbnN0YW5jZW9mIFZOb2RlKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaW1wbGUgJiYgIWlzU3RyaW5nKGNoaWxkKSkgY2hpbGQgPSBTdHJpbmcoY2hpbGQpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpbXBsZSAmJiBsYXN0U2ltcGxlKSBjaGlsZHJlbltjaGlsZHJlbi5sZW5ndGggLSAxXSArPSBjaGlsZDsgZWxzZSBpZiAoIWZhbHNleShjaGlsZCkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbi5wdXNoKGNoaWxkKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0U2ltcGxlID0gc2ltcGxlO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgfSBlbHNlIDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlcyAmJiBhdHRyaWJ1dGVzLmNoaWxkcmVuKSByZXR1cm4gaChub2RlTmFtZSwgYXR0cmlidXRlcywgYXR0cmlidXRlcy5jaGlsZHJlbik7XG5cdCAgICAgICAgaWYgKGF0dHJpYnV0ZXMpIHtcblx0ICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXMuY2hpbGRyZW4pIGRlbGV0ZSBhdHRyaWJ1dGVzLmNoaWxkcmVuO1xuXHQgICAgICAgICAgICBpZiAoIWlzRnVuY3Rpb24obm9kZU5hbWUpKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoJ2NsYXNzTmFtZScgaW4gYXR0cmlidXRlcykge1xuXHQgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMuY2xhc3MgPSBhdHRyaWJ1dGVzLmNsYXNzTmFtZTtcblx0ICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXR0cmlidXRlcy5jbGFzc05hbWU7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBsYXN0U2ltcGxlID0gYXR0cmlidXRlcy5jbGFzcztcblx0ICAgICAgICAgICAgICAgIGlmIChsYXN0U2ltcGxlICYmICFpc1N0cmluZyhsYXN0U2ltcGxlKSkgYXR0cmlidXRlcy5jbGFzcyA9IGhhc2hUb0NsYXNzTmFtZShsYXN0U2ltcGxlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgcCA9IG5ldyBWTm9kZShub2RlTmFtZSwgYXR0cmlidXRlcyB8fCB2b2lkIDAsIGNoaWxkcmVuKTtcblx0ICAgICAgICBpZiAob3B0aW9ucy52bm9kZSkgb3B0aW9ucy52bm9kZShwKTtcblx0ICAgICAgICByZXR1cm4gcDtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGNsb25lRWxlbWVudCh2bm9kZSwgcHJvcHMpIHtcblx0ICAgICAgICByZXR1cm4gaCh2bm9kZS5ub2RlTmFtZSwgZXh0ZW5kKGNsb25lKHZub2RlLmF0dHJpYnV0ZXMpLCBwcm9wcyksIGFyZ3VtZW50cy5sZW5ndGggPiAyID8gdG9BcnJheShhcmd1bWVudHMsIDIpIDogdm5vZGUuY2hpbGRyZW4pO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gY3JlYXRlTGlua2VkU3RhdGUoY29tcG9uZW50LCBrZXksIGV2ZW50UGF0aCkge1xuXHQgICAgICAgIHZhciBwYXRoID0ga2V5LnNwbGl0KCcuJyksIHAwID0gcGF0aFswXTtcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuXHQgICAgICAgICAgICB2YXIgX2NvbXBvbmVudCRzZXRTdGF0ZTtcblx0ICAgICAgICAgICAgdmFyIHYsIGksIHQgPSBlICYmIGUuY3VycmVudFRhcmdldCB8fCB0aGlzLCBzID0gY29tcG9uZW50LnN0YXRlLCBvYmogPSBzO1xuXHQgICAgICAgICAgICBpZiAoaXNTdHJpbmcoZXZlbnRQYXRoKSkge1xuXHQgICAgICAgICAgICAgICAgdiA9IGRlbHZlKGUsIGV2ZW50UGF0aCk7XG5cdCAgICAgICAgICAgICAgICBpZiAoZW1wdHkodikgJiYgKHQgPSB0Ll9jb21wb25lbnQpKSB2ID0gZGVsdmUodCwgZXZlbnRQYXRoKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHYgPSB0Lm5vZGVOYW1lID8gKHQubm9kZU5hbWUgKyB0LnR5cGUpLm1hdGNoKC9eaW5wdXQoY2hlY2t8cmFkKS9pKSA/IHQuY2hlY2tlZCA6IHQudmFsdWUgOiBlO1xuXHQgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbih2KSkgdiA9IHYuY2FsbCh0KTtcblx0ICAgICAgICAgICAgaWYgKHBhdGgubGVuZ3RoID4gMSkge1xuXHQgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHBhdGgubGVuZ3RoIC0gMTsgaSsrKSBvYmogPSBvYmpbcGF0aFtpXV0gfHwgKG9ialtwYXRoW2ldXSA9IHt9KTtcblx0ICAgICAgICAgICAgICAgIG9ialtwYXRoW2ldXSA9IHY7XG5cdCAgICAgICAgICAgICAgICB2ID0gc1twMF07XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY29tcG9uZW50LnNldFN0YXRlKChfY29tcG9uZW50JHNldFN0YXRlID0ge30sIF9jb21wb25lbnQkc2V0U3RhdGVbcDBdID0gdiwgX2NvbXBvbmVudCRzZXRTdGF0ZSkpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBlbnF1ZXVlUmVuZGVyKGNvbXBvbmVudCkge1xuXHQgICAgICAgIGlmICgxID09PSBpdGVtcy5wdXNoKGNvbXBvbmVudCkpIChvcHRpb25zLmRlYm91bmNlUmVuZGVyaW5nIHx8IHNldEltbWVkaWF0ZSkocmVyZW5kZXIpO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gcmVyZW5kZXIoKSB7XG5cdCAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCkge1xuXHQgICAgICAgICAgICB2YXIgcCwgY3VycmVudEl0ZW1zID0gaXRlbXM7XG5cdCAgICAgICAgICAgIGl0ZW1zID0gaXRlbXNPZmZsaW5lO1xuXHQgICAgICAgICAgICBpdGVtc09mZmxpbmUgPSBjdXJyZW50SXRlbXM7XG5cdCAgICAgICAgICAgIHdoaWxlIChwID0gY3VycmVudEl0ZW1zLnBvcCgpKSBpZiAocC5fZGlydHkpIHJlbmRlckNvbXBvbmVudChwKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBpc0Z1bmN0aW9uYWxDb21wb25lbnQodm5vZGUpIHtcblx0ICAgICAgICB2YXIgbm9kZU5hbWUgPSB2bm9kZSAmJiB2bm9kZS5ub2RlTmFtZTtcblx0ICAgICAgICByZXR1cm4gbm9kZU5hbWUgJiYgaXNGdW5jdGlvbihub2RlTmFtZSkgJiYgIShub2RlTmFtZS5wcm90b3R5cGUgJiYgbm9kZU5hbWUucHJvdG90eXBlLnJlbmRlcik7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBidWlsZEZ1bmN0aW9uYWxDb21wb25lbnQodm5vZGUsIGNvbnRleHQpIHtcblx0ICAgICAgICByZXR1cm4gdm5vZGUubm9kZU5hbWUoZ2V0Tm9kZVByb3BzKHZub2RlKSwgY29udGV4dCB8fCBFTVBUWSk7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBlbnN1cmVOb2RlRGF0YShub2RlLCBkYXRhKSB7XG5cdCAgICAgICAgcmV0dXJuIG5vZGVbQVRUUl9LRVldIHx8IChub2RlW0FUVFJfS0VZXSA9IGRhdGEgfHwge30pO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gZ2V0Tm9kZVR5cGUobm9kZSkge1xuXHQgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgVGV4dCkgcmV0dXJuIDM7XG5cdCAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBFbGVtZW50KSByZXR1cm4gMTsgZWxzZSByZXR1cm4gMDtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSkge1xuXHQgICAgICAgIHZhciBwID0gbm9kZS5wYXJlbnROb2RlO1xuXHQgICAgICAgIGlmIChwKSBwLnJlbW92ZUNoaWxkKG5vZGUpO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gc2V0QWNjZXNzb3Iobm9kZSwgbmFtZSwgdmFsdWUsIG9sZCwgaXNTdmcpIHtcblx0ICAgICAgICBlbnN1cmVOb2RlRGF0YShub2RlKVtuYW1lXSA9IHZhbHVlO1xuXHQgICAgICAgIGlmICgna2V5JyAhPT0gbmFtZSAmJiAnY2hpbGRyZW4nICE9PSBuYW1lKSBpZiAoJ2NsYXNzJyA9PT0gbmFtZSAmJiAhaXNTdmcpIG5vZGUuY2xhc3NOYW1lID0gdmFsdWUgfHwgJyc7IGVsc2UgaWYgKCdzdHlsZScgPT09IG5hbWUpIHtcblx0ICAgICAgICAgICAgaWYgKCF2YWx1ZSB8fCBpc1N0cmluZyh2YWx1ZSkgfHwgaXNTdHJpbmcob2xkKSkgbm9kZS5zdHlsZS5jc3NUZXh0ID0gdmFsdWUgfHwgJyc7XG5cdCAgICAgICAgICAgIGlmICh2YWx1ZSAmJiAnb2JqZWN0JyA9PSB0eXBlb2YgdmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgIGlmICghaXNTdHJpbmcob2xkKSkgZm9yICh2YXIgaSBpbiBvbGQpIGlmICghKGkgaW4gdmFsdWUpKSBub2RlLnN0eWxlW2ldID0gJyc7XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIHZhbHVlKSBub2RlLnN0eWxlW2ldID0gJ251bWJlcicgPT0gdHlwZW9mIHZhbHVlW2ldICYmICFOT05fRElNRU5TSU9OX1BST1BTW2ldID8gdmFsdWVbaV0gKyAncHgnIDogdmFsdWVbaV07XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgaWYgKCdkYW5nZXJvdXNseVNldElubmVySFRNTCcgPT09IG5hbWUpIHtcblx0ICAgICAgICAgICAgaWYgKHZhbHVlKSBub2RlLmlubmVySFRNTCA9IHZhbHVlLl9faHRtbDtcblx0ICAgICAgICB9IGVsc2UgaWYgKCdvJyA9PT0gbmFtZVswXSAmJiAnbicgPT09IG5hbWVbMV0pIHtcblx0ICAgICAgICAgICAgdmFyIGwgPSBub2RlLl9saXN0ZW5lcnMgfHwgKG5vZGUuX2xpc3RlbmVycyA9IHt9KTtcblx0ICAgICAgICAgICAgbmFtZSA9IHRvTG93ZXJDYXNlKG5hbWUuc3Vic3RyaW5nKDIpKTtcblx0ICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoIWxbbmFtZV0pIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBldmVudFByb3h5KTtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChsW25hbWVdKSBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgZXZlbnRQcm94eSk7XG5cdCAgICAgICAgICAgIGxbbmFtZV0gPSB2YWx1ZTtcblx0ICAgICAgICB9IGVsc2UgaWYgKCd0eXBlJyAhPT0gbmFtZSAmJiAhaXNTdmcgJiYgbmFtZSBpbiBub2RlKSB7XG5cdCAgICAgICAgICAgIHNldFByb3BlcnR5KG5vZGUsIG5hbWUsIGVtcHR5KHZhbHVlKSA/ICcnIDogdmFsdWUpO1xuXHQgICAgICAgICAgICBpZiAoZmFsc2V5KHZhbHVlKSkgbm9kZS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdmFyIG5zID0gaXNTdmcgJiYgbmFtZS5tYXRjaCgvXnhsaW5rXFw6PyguKykvKTtcblx0ICAgICAgICAgICAgaWYgKGZhbHNleSh2YWx1ZSkpIGlmIChucykgbm9kZS5yZW1vdmVBdHRyaWJ1dGVOUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsIHRvTG93ZXJDYXNlKG5zWzFdKSk7IGVsc2Ugbm9kZS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7IGVsc2UgaWYgKCdvYmplY3QnICE9IHR5cGVvZiB2YWx1ZSAmJiAhaXNGdW5jdGlvbih2YWx1ZSkpIGlmIChucykgbm9kZS5zZXRBdHRyaWJ1dGVOUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsIHRvTG93ZXJDYXNlKG5zWzFdKSwgdmFsdWUpOyBlbHNlIG5vZGUuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBzZXRQcm9wZXJ0eShub2RlLCBuYW1lLCB2YWx1ZSkge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIG5vZGVbbmFtZV0gPSB2YWx1ZTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gZXZlbnRQcm94eShlKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX2xpc3RlbmVyc1tlLnR5cGVdKG9wdGlvbnMuZXZlbnQgJiYgb3B0aW9ucy5ldmVudChlKSB8fCBlKTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGdldFJhd05vZGVBdHRyaWJ1dGVzKG5vZGUpIHtcblx0ICAgICAgICB2YXIgYXR0cnMgPSB7fTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gbm9kZS5hdHRyaWJ1dGVzLmxlbmd0aDsgaS0tOyApIGF0dHJzW25vZGUuYXR0cmlidXRlc1tpXS5uYW1lXSA9IG5vZGUuYXR0cmlidXRlc1tpXS52YWx1ZTtcblx0ICAgICAgICByZXR1cm4gYXR0cnM7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBpc1NhbWVOb2RlVHlwZShub2RlLCB2bm9kZSkge1xuXHQgICAgICAgIGlmIChpc1N0cmluZyh2bm9kZSkpIHJldHVybiAzID09PSBnZXROb2RlVHlwZShub2RlKTtcblx0ICAgICAgICBpZiAoaXNTdHJpbmcodm5vZGUubm9kZU5hbWUpKSByZXR1cm4gaXNOYW1lZE5vZGUobm9kZSwgdm5vZGUubm9kZU5hbWUpO1xuXHQgICAgICAgIGlmIChpc0Z1bmN0aW9uKHZub2RlLm5vZGVOYW1lKSkgcmV0dXJuIG5vZGUuX2NvbXBvbmVudENvbnN0cnVjdG9yID09PSB2bm9kZS5ub2RlTmFtZSB8fCBpc0Z1bmN0aW9uYWxDb21wb25lbnQodm5vZGUpOyBlbHNlIDtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGlzTmFtZWROb2RlKG5vZGUsIG5vZGVOYW1lKSB7XG5cdCAgICAgICAgcmV0dXJuIG5vZGUubm9ybWFsaXplZE5vZGVOYW1lID09PSBub2RlTmFtZSB8fCB0b0xvd2VyQ2FzZShub2RlLm5vZGVOYW1lKSA9PT0gdG9Mb3dlckNhc2Uobm9kZU5hbWUpO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gZ2V0Tm9kZVByb3BzKHZub2RlKSB7XG5cdCAgICAgICAgdmFyIGRlZmF1bHRQcm9wcyA9IHZub2RlLm5vZGVOYW1lLmRlZmF1bHRQcm9wcywgcHJvcHMgPSBjbG9uZShkZWZhdWx0UHJvcHMgfHwgdm5vZGUuYXR0cmlidXRlcyk7XG5cdCAgICAgICAgaWYgKGRlZmF1bHRQcm9wcykgZXh0ZW5kKHByb3BzLCB2bm9kZS5hdHRyaWJ1dGVzKTtcblx0ICAgICAgICBpZiAodm5vZGUuY2hpbGRyZW4pIHByb3BzLmNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47XG5cdCAgICAgICAgcmV0dXJuIHByb3BzO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gY29sbGVjdE5vZGUobm9kZSkge1xuXHQgICAgICAgIGNsZWFuTm9kZShub2RlKTtcblx0ICAgICAgICB2YXIgbmFtZSA9IHRvTG93ZXJDYXNlKG5vZGUubm9kZU5hbWUpLCBsaXN0ID0gbm9kZXNbbmFtZV07XG5cdCAgICAgICAgaWYgKGxpc3QpIGxpc3QucHVzaChub2RlKTsgZWxzZSBub2Rlc1tuYW1lXSA9IFsgbm9kZSBdO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gY3JlYXRlTm9kZShub2RlTmFtZSwgaXNTdmcpIHtcblx0ICAgICAgICB2YXIgbmFtZSA9IHRvTG93ZXJDYXNlKG5vZGVOYW1lKSwgbm9kZSA9IG5vZGVzW25hbWVdICYmIG5vZGVzW25hbWVdLnBvcCgpIHx8IChpc1N2ZyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCBub2RlTmFtZSkgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGVOYW1lKSk7XG5cdCAgICAgICAgZW5zdXJlTm9kZURhdGEobm9kZSk7XG5cdCAgICAgICAgbm9kZS5ub3JtYWxpemVkTm9kZU5hbWUgPSBuYW1lO1xuXHQgICAgICAgIHJldHVybiBub2RlO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gY2xlYW5Ob2RlKG5vZGUpIHtcblx0ICAgICAgICByZW1vdmVOb2RlKG5vZGUpO1xuXHQgICAgICAgIGlmICgxID09PSBnZXROb2RlVHlwZShub2RlKSkge1xuXHQgICAgICAgICAgICBlbnN1cmVOb2RlRGF0YShub2RlLCBnZXRSYXdOb2RlQXR0cmlidXRlcyhub2RlKSk7XG5cdCAgICAgICAgICAgIG5vZGUuX2NvbXBvbmVudCA9IG5vZGUuX2NvbXBvbmVudENvbnN0cnVjdG9yID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBmbHVzaE1vdW50cygpIHtcblx0ICAgICAgICB2YXIgYztcblx0ICAgICAgICB3aGlsZSAoYyA9IG1vdW50cy5wb3AoKSkgaWYgKGMuY29tcG9uZW50RGlkTW91bnQpIGMuY29tcG9uZW50RGlkTW91bnQoKTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGRpZmYoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwsIHBhcmVudCkge1xuXHQgICAgICAgIGRpZmZMZXZlbCsrO1xuXHQgICAgICAgIHZhciByZXQgPSBpZGlmZihkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCk7XG5cdCAgICAgICAgaWYgKHBhcmVudCAmJiByZXQucGFyZW50Tm9kZSAhPT0gcGFyZW50KSBwYXJlbnQuYXBwZW5kQ2hpbGQocmV0KTtcblx0ICAgICAgICBpZiAoIS0tZGlmZkxldmVsKSBmbHVzaE1vdW50cygpO1xuXHQgICAgICAgIHJldHVybiByZXQ7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBpZGlmZihkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCkge1xuXHQgICAgICAgIHZhciBvcmlnaW5hbEF0dHJpYnV0ZXMgPSB2bm9kZSAmJiB2bm9kZS5hdHRyaWJ1dGVzO1xuXHQgICAgICAgIHdoaWxlIChpc0Z1bmN0aW9uYWxDb21wb25lbnQodm5vZGUpKSB2bm9kZSA9IGJ1aWxkRnVuY3Rpb25hbENvbXBvbmVudCh2bm9kZSwgY29udGV4dCk7XG5cdCAgICAgICAgaWYgKGVtcHR5KHZub2RlKSkgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJycpO1xuXHQgICAgICAgIGlmIChpc1N0cmluZyh2bm9kZSkpIHtcblx0ICAgICAgICAgICAgaWYgKGRvbSkge1xuXHQgICAgICAgICAgICAgICAgaWYgKDMgPT09IGdldE5vZGVUeXBlKGRvbSkgJiYgZG9tLnBhcmVudE5vZGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoZG9tLm5vZGVWYWx1ZSAhPSB2bm9kZSkgZG9tLm5vZGVWYWx1ZSA9IHZub2RlO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb207XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBjb2xsZWN0Tm9kZShkb20pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh2bm9kZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBzdmdNb2RlLCBvdXQgPSBkb20sIG5vZGVOYW1lID0gdm5vZGUubm9kZU5hbWU7XG5cdCAgICAgICAgaWYgKGlzRnVuY3Rpb24obm9kZU5hbWUpKSByZXR1cm4gYnVpbGRDb21wb25lbnRGcm9tVk5vZGUoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwpO1xuXHQgICAgICAgIGlmICghaXNTdHJpbmcobm9kZU5hbWUpKSBub2RlTmFtZSA9IFN0cmluZyhub2RlTmFtZSk7XG5cdCAgICAgICAgc3ZnTW9kZSA9ICdzdmcnID09PSB0b0xvd2VyQ2FzZShub2RlTmFtZSk7XG5cdCAgICAgICAgaWYgKHN2Z01vZGUpIGlzU3ZnTW9kZSA9ICEwO1xuXHQgICAgICAgIGlmICghZG9tKSBvdXQgPSBjcmVhdGVOb2RlKG5vZGVOYW1lLCBpc1N2Z01vZGUpOyBlbHNlIGlmICghaXNOYW1lZE5vZGUoZG9tLCBub2RlTmFtZSkpIHtcblx0ICAgICAgICAgICAgb3V0ID0gY3JlYXRlTm9kZShub2RlTmFtZSwgaXNTdmdNb2RlKTtcblx0ICAgICAgICAgICAgd2hpbGUgKGRvbS5maXJzdENoaWxkKSBvdXQuYXBwZW5kQ2hpbGQoZG9tLmZpcnN0Q2hpbGQpO1xuXHQgICAgICAgICAgICByZWNvbGxlY3ROb2RlVHJlZShkb20pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAodm5vZGUuY2hpbGRyZW4gJiYgMSA9PT0gdm5vZGUuY2hpbGRyZW4ubGVuZ3RoICYmICdzdHJpbmcnID09IHR5cGVvZiB2bm9kZS5jaGlsZHJlblswXSAmJiAxID09PSBvdXQuY2hpbGROb2Rlcy5sZW5ndGggJiYgb3V0LmZpcnN0Q2hpbGQgaW5zdGFuY2VvZiBUZXh0KSBvdXQuZmlyc3RDaGlsZC5ub2RlVmFsdWUgPSB2bm9kZS5jaGlsZHJlblswXTsgZWxzZSBpZiAodm5vZGUuY2hpbGRyZW4gfHwgb3V0LmZpcnN0Q2hpbGQpIGlubmVyRGlmZk5vZGUob3V0LCB2bm9kZS5jaGlsZHJlbiwgY29udGV4dCwgbW91bnRBbGwpO1xuXHQgICAgICAgIGRpZmZBdHRyaWJ1dGVzKG91dCwgdm5vZGUuYXR0cmlidXRlcyk7XG5cdCAgICAgICAgaWYgKG9yaWdpbmFsQXR0cmlidXRlcyAmJiBvcmlnaW5hbEF0dHJpYnV0ZXMucmVmKSAob3V0W0FUVFJfS0VZXS5yZWYgPSBvcmlnaW5hbEF0dHJpYnV0ZXMucmVmKShvdXQpO1xuXHQgICAgICAgIGlmIChzdmdNb2RlKSBpc1N2Z01vZGUgPSAhMTtcblx0ICAgICAgICByZXR1cm4gb3V0O1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gaW5uZXJEaWZmTm9kZShkb20sIHZjaGlsZHJlbiwgY29udGV4dCwgbW91bnRBbGwpIHtcblx0ICAgICAgICB2YXIgaiwgYywgdmNoaWxkLCBjaGlsZCwgb3JpZ2luYWxDaGlsZHJlbiA9IGRvbS5jaGlsZE5vZGVzLCBjaGlsZHJlbiA9IFtdLCBrZXllZCA9IHt9LCBrZXllZExlbiA9IDAsIG1pbiA9IDAsIGxlbiA9IG9yaWdpbmFsQ2hpbGRyZW4ubGVuZ3RoLCBjaGlsZHJlbkxlbiA9IDAsIHZsZW4gPSB2Y2hpbGRyZW4gJiYgdmNoaWxkcmVuLmxlbmd0aDtcblx0ICAgICAgICBpZiAobGVuKSBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgICAgIHZhciBfY2hpbGQgPSBvcmlnaW5hbENoaWxkcmVuW2ldLCBrZXkgPSB2bGVuID8gKGMgPSBfY2hpbGQuX2NvbXBvbmVudCkgPyBjLl9fa2V5IDogKGMgPSBfY2hpbGRbQVRUUl9LRVldKSA/IGMua2V5IDogbnVsbCA6IG51bGw7XG5cdCAgICAgICAgICAgIGlmIChrZXkgfHwgMCA9PT0ga2V5KSB7XG5cdCAgICAgICAgICAgICAgICBrZXllZExlbisrO1xuXHQgICAgICAgICAgICAgICAga2V5ZWRba2V5XSA9IF9jaGlsZDtcblx0ICAgICAgICAgICAgfSBlbHNlIGNoaWxkcmVuW2NoaWxkcmVuTGVuKytdID0gX2NoaWxkO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAodmxlbikgZm9yICh2YXIgaSA9IDA7IGkgPCB2bGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgdmNoaWxkID0gdmNoaWxkcmVuW2ldO1xuXHQgICAgICAgICAgICBjaGlsZCA9IG51bGw7XG5cdCAgICAgICAgICAgIGlmIChrZXllZExlbiAmJiB2Y2hpbGQuYXR0cmlidXRlcykge1xuXHQgICAgICAgICAgICAgICAgdmFyIGtleSA9IHZjaGlsZC5rZXk7XG5cdCAgICAgICAgICAgICAgICBpZiAoIWVtcHR5KGtleSkgJiYga2V5IGluIGtleWVkKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBrZXllZFtrZXldO1xuXHQgICAgICAgICAgICAgICAgICAgIGtleWVkW2tleV0gPSB2b2lkIDA7XG5cdCAgICAgICAgICAgICAgICAgICAga2V5ZWRMZW4tLTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoIWNoaWxkICYmIG1pbiA8IGNoaWxkcmVuTGVuKSBmb3IgKGogPSBtaW47IGogPCBjaGlsZHJlbkxlbjsgaisrKSB7XG5cdCAgICAgICAgICAgICAgICBjID0gY2hpbGRyZW5bal07XG5cdCAgICAgICAgICAgICAgICBpZiAoYyAmJiBpc1NhbWVOb2RlVHlwZShjLCB2Y2hpbGQpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBjO1xuXHQgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuW2pdID0gdm9pZCAwO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChqID09PSBjaGlsZHJlbkxlbiAtIDEpIGNoaWxkcmVuTGVuLS07XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGogPT09IG1pbikgbWluKys7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY2hpbGQgPSBpZGlmZihjaGlsZCwgdmNoaWxkLCBjb250ZXh0LCBtb3VudEFsbCk7XG5cdCAgICAgICAgICAgIGlmIChjaGlsZCAhPT0gb3JpZ2luYWxDaGlsZHJlbltpXSkgZG9tLmluc2VydEJlZm9yZShjaGlsZCwgb3JpZ2luYWxDaGlsZHJlbltpXSB8fCBudWxsKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGtleWVkTGVuKSBmb3IgKHZhciBpIGluIGtleWVkKSBpZiAoa2V5ZWRbaV0pIGNoaWxkcmVuW21pbiA9IGNoaWxkcmVuTGVuKytdID0ga2V5ZWRbaV07XG5cdCAgICAgICAgaWYgKG1pbiA8IGNoaWxkcmVuTGVuKSByZW1vdmVPcnBoYW5lZENoaWxkcmVuKGNoaWxkcmVuKTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIHJlbW92ZU9ycGhhbmVkQ2hpbGRyZW4oY2hpbGRyZW4sIHVubW91bnRPbmx5KSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IGNoaWxkcmVuLmxlbmd0aDsgaS0tOyApIHtcblx0ICAgICAgICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV07XG5cdCAgICAgICAgICAgIGlmIChjaGlsZCkgcmVjb2xsZWN0Tm9kZVRyZWUoY2hpbGQsIHVubW91bnRPbmx5KTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiByZWNvbGxlY3ROb2RlVHJlZShub2RlLCB1bm1vdW50T25seSkge1xuXHQgICAgICAgIHZhciBjb21wb25lbnQgPSBub2RlLl9jb21wb25lbnQ7XG5cdCAgICAgICAgaWYgKGNvbXBvbmVudCkgdW5tb3VudENvbXBvbmVudChjb21wb25lbnQsICF1bm1vdW50T25seSk7IGVsc2Uge1xuXHQgICAgICAgICAgICBpZiAobm9kZVtBVFRSX0tFWV0gJiYgbm9kZVtBVFRSX0tFWV0ucmVmKSBub2RlW0FUVFJfS0VZXS5yZWYobnVsbCk7XG5cdCAgICAgICAgICAgIGlmICghdW5tb3VudE9ubHkpIGNvbGxlY3ROb2RlKG5vZGUpO1xuXHQgICAgICAgICAgICBpZiAobm9kZS5jaGlsZE5vZGVzICYmIG5vZGUuY2hpbGROb2Rlcy5sZW5ndGgpIHJlbW92ZU9ycGhhbmVkQ2hpbGRyZW4obm9kZS5jaGlsZE5vZGVzLCB1bm1vdW50T25seSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gZGlmZkF0dHJpYnV0ZXMoZG9tLCBhdHRycykge1xuXHQgICAgICAgIHZhciBvbGQgPSBkb21bQVRUUl9LRVldIHx8IGdldFJhd05vZGVBdHRyaWJ1dGVzKGRvbSk7XG5cdCAgICAgICAgZm9yICh2YXIgX25hbWUgaW4gb2xkKSBpZiAoIShhdHRycyAmJiBfbmFtZSBpbiBhdHRycykpIHNldEFjY2Vzc29yKGRvbSwgX25hbWUsIG51bGwsIG9sZFtfbmFtZV0sIGlzU3ZnTW9kZSk7XG5cdCAgICAgICAgaWYgKGF0dHJzKSBmb3IgKHZhciBfbmFtZTIgaW4gYXR0cnMpIGlmICghKF9uYW1lMiBpbiBvbGQpIHx8IGF0dHJzW19uYW1lMl0gIT0gKCd2YWx1ZScgPT09IF9uYW1lMiB8fCAnc2VsZWN0ZWQnID09PSBfbmFtZTIgfHwgJ2NoZWNrZWQnID09PSBfbmFtZTIgPyBkb21bX25hbWUyXSA6IG9sZFtfbmFtZTJdKSkgc2V0QWNjZXNzb3IoZG9tLCBfbmFtZTIsIGF0dHJzW19uYW1lMl0sIG9sZFtfbmFtZTJdLCBpc1N2Z01vZGUpO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gY29sbGVjdENvbXBvbmVudChjb21wb25lbnQpIHtcblx0ICAgICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5jb25zdHJ1Y3Rvci5uYW1lLCBsaXN0ID0gY29tcG9uZW50c1tuYW1lXTtcblx0ICAgICAgICBpZiAobGlzdCkgbGlzdC5wdXNoKGNvbXBvbmVudCk7IGVsc2UgY29tcG9uZW50c1tuYW1lXSA9IFsgY29tcG9uZW50IF07XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBjcmVhdGVDb21wb25lbnQoQ3RvciwgcHJvcHMsIGNvbnRleHQpIHtcblx0ICAgICAgICB2YXIgaW5zdCA9IG5ldyBDdG9yKHByb3BzLCBjb250ZXh0KSwgbGlzdCA9IGNvbXBvbmVudHNbQ3Rvci5uYW1lXTtcblx0ICAgICAgICBpZiAobGlzdCkgZm9yICh2YXIgaSA9IGxpc3QubGVuZ3RoOyBpLS07ICkgaWYgKGxpc3RbaV0uY29uc3RydWN0b3IgPT09IEN0b3IpIHtcblx0ICAgICAgICAgICAgaW5zdC5uZXh0QmFzZSA9IGxpc3RbaV0ubmV4dEJhc2U7XG5cdCAgICAgICAgICAgIGxpc3Quc3BsaWNlKGksIDEpO1xuXHQgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIGluc3Q7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiB0cmlnZ2VyQ29tcG9uZW50UmVuZGVyKGNvbXBvbmVudCkge1xuXHQgICAgICAgIGlmICghY29tcG9uZW50Ll9kaXJ0eSkge1xuXHQgICAgICAgICAgICBjb21wb25lbnQuX2RpcnR5ID0gITA7XG5cdCAgICAgICAgICAgIGVucXVldWVSZW5kZXIoY29tcG9uZW50KTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBzZXRDb21wb25lbnRQcm9wcyhjb21wb25lbnQsIHByb3BzLCBvcHRzLCBjb250ZXh0LCBtb3VudEFsbCkge1xuXHQgICAgICAgIHZhciBiID0gY29tcG9uZW50LmJhc2U7XG5cdCAgICAgICAgaWYgKCFjb21wb25lbnQuX2Rpc2FibGVSZW5kZXJpbmcpIHtcblx0ICAgICAgICAgICAgY29tcG9uZW50Ll9kaXNhYmxlUmVuZGVyaW5nID0gITA7XG5cdCAgICAgICAgICAgIGlmIChjb21wb25lbnQuX19yZWYgPSBwcm9wcy5yZWYpIGRlbGV0ZSBwcm9wcy5yZWY7XG5cdCAgICAgICAgICAgIGlmIChjb21wb25lbnQuX19rZXkgPSBwcm9wcy5rZXkpIGRlbGV0ZSBwcm9wcy5rZXk7XG5cdCAgICAgICAgICAgIGlmIChlbXB0eShiKSB8fCBtb3VudEFsbCkge1xuXHQgICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsTW91bnQpIGNvbXBvbmVudC5jb21wb25lbnRXaWxsTW91bnQoKTtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcykgY29tcG9uZW50LmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMocHJvcHMsIGNvbnRleHQpO1xuXHQgICAgICAgICAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0ICE9PSBjb21wb25lbnQuY29udGV4dCkge1xuXHQgICAgICAgICAgICAgICAgaWYgKCFjb21wb25lbnQucHJldkNvbnRleHQpIGNvbXBvbmVudC5wcmV2Q29udGV4dCA9IGNvbXBvbmVudC5jb250ZXh0O1xuXHQgICAgICAgICAgICAgICAgY29tcG9uZW50LmNvbnRleHQgPSBjb250ZXh0O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmICghY29tcG9uZW50LnByZXZQcm9wcykgY29tcG9uZW50LnByZXZQcm9wcyA9IGNvbXBvbmVudC5wcm9wcztcblx0ICAgICAgICAgICAgY29tcG9uZW50LnByb3BzID0gcHJvcHM7XG5cdCAgICAgICAgICAgIGNvbXBvbmVudC5fZGlzYWJsZVJlbmRlcmluZyA9ICExO1xuXHQgICAgICAgICAgICBpZiAoMCAhPT0gb3B0cykgaWYgKDEgPT09IG9wdHMgfHwgb3B0aW9ucy5zeW5jQ29tcG9uZW50VXBkYXRlcyAhPT0gITEgfHwgIWIpIHJlbmRlckNvbXBvbmVudChjb21wb25lbnQsIDEsIG1vdW50QWxsKTsgZWxzZSB0cmlnZ2VyQ29tcG9uZW50UmVuZGVyKGNvbXBvbmVudCk7XG5cdCAgICAgICAgICAgIGlmIChjb21wb25lbnQuX19yZWYpIGNvbXBvbmVudC5fX3JlZihjb21wb25lbnQpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIHJlbmRlckNvbXBvbmVudChjb21wb25lbnQsIG9wdHMsIG1vdW50QWxsKSB7XG5cdCAgICAgICAgaWYgKCFjb21wb25lbnQuX2Rpc2FibGVSZW5kZXJpbmcpIHtcblx0ICAgICAgICAgICAgdmFyIHNraXAsIHJlbmRlcmVkLCBwcm9wcyA9IGNvbXBvbmVudC5wcm9wcywgc3RhdGUgPSBjb21wb25lbnQuc3RhdGUsIGNvbnRleHQgPSBjb21wb25lbnQuY29udGV4dCwgcHJldmlvdXNQcm9wcyA9IGNvbXBvbmVudC5wcmV2UHJvcHMgfHwgcHJvcHMsIHByZXZpb3VzU3RhdGUgPSBjb21wb25lbnQucHJldlN0YXRlIHx8IHN0YXRlLCBwcmV2aW91c0NvbnRleHQgPSBjb21wb25lbnQucHJldkNvbnRleHQgfHwgY29udGV4dCwgaXNVcGRhdGUgPSBjb21wb25lbnQuYmFzZSwgaW5pdGlhbEJhc2UgPSBpc1VwZGF0ZSB8fCBjb21wb25lbnQubmV4dEJhc2UsIG5leHRTaWJsaW5nID0gaW5pdGlhbEJhc2UgJiYgaW5pdGlhbEJhc2UubmV4dFNpYmxpbmcsIGJhc2VQYXJlbnQgPSBpbml0aWFsQmFzZSAmJiBpbml0aWFsQmFzZS5wYXJlbnROb2RlLCBpbml0aWFsQ29tcG9uZW50ID0gaW5pdGlhbEJhc2UgJiYgaW5pdGlhbEJhc2UuX2NvbXBvbmVudCwgaW5pdGlhbENoaWxkQ29tcG9uZW50ID0gY29tcG9uZW50Ll9jb21wb25lbnQ7XG5cdCAgICAgICAgICAgIGlmIChpc1VwZGF0ZSkge1xuXHQgICAgICAgICAgICAgICAgY29tcG9uZW50LnByb3BzID0gcHJldmlvdXNQcm9wcztcblx0ICAgICAgICAgICAgICAgIGNvbXBvbmVudC5zdGF0ZSA9IHByZXZpb3VzU3RhdGU7XG5cdCAgICAgICAgICAgICAgICBjb21wb25lbnQuY29udGV4dCA9IHByZXZpb3VzQ29udGV4dDtcblx0ICAgICAgICAgICAgICAgIGlmICgyICE9PSBvcHRzICYmIGNvbXBvbmVudC5zaG91bGRDb21wb25lbnRVcGRhdGUgJiYgY29tcG9uZW50LnNob3VsZENvbXBvbmVudFVwZGF0ZShwcm9wcywgc3RhdGUsIGNvbnRleHQpID09PSAhMSkgc2tpcCA9ICEwOyBlbHNlIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbFVwZGF0ZSkgY29tcG9uZW50LmNvbXBvbmVudFdpbGxVcGRhdGUocHJvcHMsIHN0YXRlLCBjb250ZXh0KTtcblx0ICAgICAgICAgICAgICAgIGNvbXBvbmVudC5wcm9wcyA9IHByb3BzO1xuXHQgICAgICAgICAgICAgICAgY29tcG9uZW50LnN0YXRlID0gc3RhdGU7XG5cdCAgICAgICAgICAgICAgICBjb21wb25lbnQuY29udGV4dCA9IGNvbnRleHQ7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY29tcG9uZW50LnByZXZQcm9wcyA9IGNvbXBvbmVudC5wcmV2U3RhdGUgPSBjb21wb25lbnQucHJldkNvbnRleHQgPSBjb21wb25lbnQubmV4dEJhc2UgPSBudWxsO1xuXHQgICAgICAgICAgICBjb21wb25lbnQuX2RpcnR5ID0gITE7XG5cdCAgICAgICAgICAgIGlmICghc2tpcCkge1xuXHQgICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5yZW5kZXIpIHJlbmRlcmVkID0gY29tcG9uZW50LnJlbmRlcihwcm9wcywgc3RhdGUsIGNvbnRleHQpO1xuXHQgICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5nZXRDaGlsZENvbnRleHQpIGNvbnRleHQgPSBleHRlbmQoY2xvbmUoY29udGV4dCksIGNvbXBvbmVudC5nZXRDaGlsZENvbnRleHQoKSk7XG5cdCAgICAgICAgICAgICAgICB3aGlsZSAoaXNGdW5jdGlvbmFsQ29tcG9uZW50KHJlbmRlcmVkKSkgcmVuZGVyZWQgPSBidWlsZEZ1bmN0aW9uYWxDb21wb25lbnQocmVuZGVyZWQsIGNvbnRleHQpO1xuXHQgICAgICAgICAgICAgICAgdmFyIHRvVW5tb3VudCwgYmFzZSwgY2hpbGRDb21wb25lbnQgPSByZW5kZXJlZCAmJiByZW5kZXJlZC5ub2RlTmFtZTtcblx0ICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNoaWxkQ29tcG9uZW50KSAmJiBjaGlsZENvbXBvbmVudC5wcm90b3R5cGUucmVuZGVyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGluc3QgPSBpbml0aWFsQ2hpbGRDb21wb25lbnQsIGNoaWxkUHJvcHMgPSBnZXROb2RlUHJvcHMocmVuZGVyZWQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChpbnN0ICYmIGluc3QuY29uc3RydWN0b3IgPT09IGNoaWxkQ29tcG9uZW50KSBzZXRDb21wb25lbnRQcm9wcyhpbnN0LCBjaGlsZFByb3BzLCAxLCBjb250ZXh0KTsgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5tb3VudCA9IGluc3Q7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGluc3QgPSBjcmVhdGVDb21wb25lbnQoY2hpbGRDb21wb25lbnQsIGNoaWxkUHJvcHMsIGNvbnRleHQpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpbnN0Ll9wYXJlbnRDb21wb25lbnQgPSBjb21wb25lbnQ7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5fY29tcG9uZW50ID0gaW5zdDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q29tcG9uZW50UHJvcHMoaW5zdCwgY2hpbGRQcm9wcywgMCwgY29udGV4dCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckNvbXBvbmVudChpbnN0LCAxKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgYmFzZSA9IGluc3QuYmFzZTtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGNiYXNlID0gaW5pdGlhbEJhc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdG9Vbm1vdW50ID0gaW5pdGlhbENoaWxkQ29tcG9uZW50O1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0b1VubW91bnQpIGNiYXNlID0gY29tcG9uZW50Ll9jb21wb25lbnQgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChpbml0aWFsQmFzZSB8fCAxID09PSBvcHRzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYmFzZSkgY2Jhc2UuX2NvbXBvbmVudCA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGJhc2UgPSBkaWZmKGNiYXNlLCByZW5kZXJlZCwgY29udGV4dCwgbW91bnRBbGwgfHwgIWlzVXBkYXRlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbEJhc2UgJiYgYmFzZSAhPT0gaW5pdGlhbEJhc2UpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoYmFzZVBhcmVudCAmJiBiYXNlICE9PSBiYXNlUGFyZW50KSBiYXNlUGFyZW50Lmluc2VydEJlZm9yZShiYXNlLCBuZXh0U2libGluZyB8fCBudWxsKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIXRvVW5tb3VudCAmJiBpbml0aWFsQ29tcG9uZW50ID09PSBjb21wb25lbnQgJiYgIWluaXRpYWxDaGlsZENvbXBvbmVudCAmJiBpbml0aWFsQmFzZS5wYXJlbnROb2RlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxCYXNlLl9jb21wb25lbnQgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZWNvbGxlY3ROb2RlVHJlZShpbml0aWFsQmFzZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgaWYgKHRvVW5tb3VudCkgdW5tb3VudENvbXBvbmVudCh0b1VubW91bnQsICEwKTtcblx0ICAgICAgICAgICAgICAgIGNvbXBvbmVudC5iYXNlID0gYmFzZTtcblx0ICAgICAgICAgICAgICAgIGlmIChiYXNlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudFJlZiA9IGNvbXBvbmVudCwgdCA9IGNvbXBvbmVudDtcblx0ICAgICAgICAgICAgICAgICAgICB3aGlsZSAodCA9IHQuX3BhcmVudENvbXBvbmVudCkgY29tcG9uZW50UmVmID0gdDtcblx0ICAgICAgICAgICAgICAgICAgICBiYXNlLl9jb21wb25lbnQgPSBjb21wb25lbnRSZWY7XG5cdCAgICAgICAgICAgICAgICAgICAgYmFzZS5fY29tcG9uZW50Q29uc3RydWN0b3IgPSBjb21wb25lbnRSZWYuY29uc3RydWN0b3I7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKCFpc1VwZGF0ZSB8fCBtb3VudEFsbCkge1xuXHQgICAgICAgICAgICAgICAgbW91bnRzLnVuc2hpZnQoY29tcG9uZW50KTtcblx0ICAgICAgICAgICAgICAgIGlmICghZGlmZkxldmVsKSBmbHVzaE1vdW50cygpO1xuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKCFza2lwICYmIGNvbXBvbmVudC5jb21wb25lbnREaWRVcGRhdGUpIGNvbXBvbmVudC5jb21wb25lbnREaWRVcGRhdGUocHJldmlvdXNQcm9wcywgcHJldmlvdXNTdGF0ZSwgcHJldmlvdXNDb250ZXh0KTtcblx0ICAgICAgICAgICAgdmFyIGZuLCBjYiA9IGNvbXBvbmVudC5fcmVuZGVyQ2FsbGJhY2tzO1xuXHQgICAgICAgICAgICBpZiAoY2IpIHdoaWxlIChmbiA9IGNiLnBvcCgpKSBmbi5jYWxsKGNvbXBvbmVudCk7XG5cdCAgICAgICAgICAgIHJldHVybiByZW5kZXJlZDtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBidWlsZENvbXBvbmVudEZyb21WTm9kZShkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCkge1xuXHQgICAgICAgIHZhciBjID0gZG9tICYmIGRvbS5fY29tcG9uZW50LCBvbGREb20gPSBkb20sIGlzRGlyZWN0T3duZXIgPSBjICYmIGRvbS5fY29tcG9uZW50Q29uc3RydWN0b3IgPT09IHZub2RlLm5vZGVOYW1lLCBpc093bmVyID0gaXNEaXJlY3RPd25lciwgcHJvcHMgPSBnZXROb2RlUHJvcHModm5vZGUpO1xuXHQgICAgICAgIHdoaWxlIChjICYmICFpc093bmVyICYmIChjID0gYy5fcGFyZW50Q29tcG9uZW50KSkgaXNPd25lciA9IGMuY29uc3RydWN0b3IgPT09IHZub2RlLm5vZGVOYW1lO1xuXHQgICAgICAgIGlmIChpc093bmVyICYmICghbW91bnRBbGwgfHwgYy5fY29tcG9uZW50KSkge1xuXHQgICAgICAgICAgICBzZXRDb21wb25lbnRQcm9wcyhjLCBwcm9wcywgMywgY29udGV4dCwgbW91bnRBbGwpO1xuXHQgICAgICAgICAgICBkb20gPSBjLmJhc2U7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgaWYgKGMgJiYgIWlzRGlyZWN0T3duZXIpIHtcblx0ICAgICAgICAgICAgICAgIHVubW91bnRDb21wb25lbnQoYywgITApO1xuXHQgICAgICAgICAgICAgICAgZG9tID0gb2xkRG9tID0gbnVsbDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBjID0gY3JlYXRlQ29tcG9uZW50KHZub2RlLm5vZGVOYW1lLCBwcm9wcywgY29udGV4dCk7XG5cdCAgICAgICAgICAgIGlmIChkb20gJiYgIWMubmV4dEJhc2UpIGMubmV4dEJhc2UgPSBkb207XG5cdCAgICAgICAgICAgIHNldENvbXBvbmVudFByb3BzKGMsIHByb3BzLCAxLCBjb250ZXh0LCBtb3VudEFsbCk7XG5cdCAgICAgICAgICAgIGRvbSA9IGMuYmFzZTtcblx0ICAgICAgICAgICAgaWYgKG9sZERvbSAmJiBkb20gIT09IG9sZERvbSkge1xuXHQgICAgICAgICAgICAgICAgb2xkRG9tLl9jb21wb25lbnQgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgcmVjb2xsZWN0Tm9kZVRyZWUob2xkRG9tKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gZG9tO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gdW5tb3VudENvbXBvbmVudChjb21wb25lbnQsIHJlbW92ZSkge1xuXHQgICAgICAgIHZhciBiYXNlID0gY29tcG9uZW50LmJhc2U7XG5cdCAgICAgICAgY29tcG9uZW50Ll9kaXNhYmxlUmVuZGVyaW5nID0gITA7XG5cdCAgICAgICAgaWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsVW5tb3VudCkgY29tcG9uZW50LmNvbXBvbmVudFdpbGxVbm1vdW50KCk7XG5cdCAgICAgICAgY29tcG9uZW50LmJhc2UgPSBudWxsO1xuXHQgICAgICAgIHZhciBpbm5lciA9IGNvbXBvbmVudC5fY29tcG9uZW50O1xuXHQgICAgICAgIGlmIChpbm5lcikgdW5tb3VudENvbXBvbmVudChpbm5lciwgcmVtb3ZlKTsgZWxzZSBpZiAoYmFzZSkge1xuXHQgICAgICAgICAgICBpZiAoYmFzZVtBVFRSX0tFWV0gJiYgYmFzZVtBVFRSX0tFWV0ucmVmKSBiYXNlW0FUVFJfS0VZXS5yZWYobnVsbCk7XG5cdCAgICAgICAgICAgIGNvbXBvbmVudC5uZXh0QmFzZSA9IGJhc2U7XG5cdCAgICAgICAgICAgIGlmIChyZW1vdmUpIHtcblx0ICAgICAgICAgICAgICAgIHJlbW92ZU5vZGUoYmFzZSk7XG5cdCAgICAgICAgICAgICAgICBjb2xsZWN0Q29tcG9uZW50KGNvbXBvbmVudCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmVtb3ZlT3JwaGFuZWRDaGlsZHJlbihiYXNlLmNoaWxkTm9kZXMsICFyZW1vdmUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoY29tcG9uZW50Ll9fcmVmKSBjb21wb25lbnQuX19yZWYobnVsbCk7XG5cdCAgICAgICAgaWYgKGNvbXBvbmVudC5jb21wb25lbnREaWRVbm1vdW50KSBjb21wb25lbnQuY29tcG9uZW50RGlkVW5tb3VudCgpO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gQ29tcG9uZW50KHByb3BzLCBjb250ZXh0KSB7XG5cdCAgICAgICAgdGhpcy5fZGlydHkgPSAhMDtcblx0ICAgICAgICB0aGlzLl9kaXNhYmxlUmVuZGVyaW5nID0gITE7XG5cdCAgICAgICAgdGhpcy5wcmV2U3RhdGUgPSB0aGlzLnByZXZQcm9wcyA9IHRoaXMucHJldkNvbnRleHQgPSB0aGlzLmJhc2UgPSB0aGlzLm5leHRCYXNlID0gdGhpcy5fcGFyZW50Q29tcG9uZW50ID0gdGhpcy5fY29tcG9uZW50ID0gdGhpcy5fX3JlZiA9IHRoaXMuX19rZXkgPSB0aGlzLl9saW5rZWRTdGF0ZXMgPSB0aGlzLl9yZW5kZXJDYWxsYmFja3MgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQgfHwge307XG5cdCAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuXHQgICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLmdldEluaXRpYWxTdGF0ZSAmJiB0aGlzLmdldEluaXRpYWxTdGF0ZSgpIHx8IHt9O1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gcmVuZGVyKHZub2RlLCBwYXJlbnQsIG1lcmdlKSB7XG5cdCAgICAgICAgcmV0dXJuIGRpZmYobWVyZ2UsIHZub2RlLCB7fSwgITEsIHBhcmVudCk7XG5cdCAgICB9XG5cdCAgICB2YXIgbGNDYWNoZSA9IHt9O1xuXHQgICAgdmFyIHRvTG93ZXJDYXNlID0gZnVuY3Rpb24ocykge1xuXHQgICAgICAgIHJldHVybiBsY0NhY2hlW3NdIHx8IChsY0NhY2hlW3NdID0gcy50b0xvd2VyQ2FzZSgpKTtcblx0ICAgIH07XG5cdCAgICB2YXIgcmVzb2x2ZWQgPSAndW5kZWZpbmVkJyAhPSB0eXBlb2YgUHJvbWlzZSAmJiBQcm9taXNlLnJlc29sdmUoKTtcblx0ICAgIHZhciBzZXRJbW1lZGlhdGUgPSByZXNvbHZlZCA/IGZ1bmN0aW9uKGYpIHtcblx0ICAgICAgICByZXNvbHZlZC50aGVuKGYpO1xuXHQgICAgfSA6IHNldFRpbWVvdXQ7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHtcblx0ICAgICAgICB2bm9kZTogZW1wdHlcblx0ICAgIH07XG5cdCAgICB2YXIgU0hBUkVEX1RFTVBfQVJSQVkgPSBbXTtcblx0ICAgIHZhciBFTVBUWSA9IHt9O1xuXHQgICAgdmFyIEFUVFJfS0VZID0gJ3VuZGVmaW5lZCcgIT0gdHlwZW9mIFN5bWJvbCA/IFN5bWJvbC5mb3IoJ3ByZWFjdGF0dHInKSA6ICdfX3ByZWFjdGF0dHJfJztcblx0ICAgIHZhciBOT05fRElNRU5TSU9OX1BST1BTID0ge1xuXHQgICAgICAgIGJveEZsZXg6IDEsXG5cdCAgICAgICAgYm94RmxleEdyb3VwOiAxLFxuXHQgICAgICAgIGNvbHVtbkNvdW50OiAxLFxuXHQgICAgICAgIGZpbGxPcGFjaXR5OiAxLFxuXHQgICAgICAgIGZsZXg6IDEsXG5cdCAgICAgICAgZmxleEdyb3c6IDEsXG5cdCAgICAgICAgZmxleFBvc2l0aXZlOiAxLFxuXHQgICAgICAgIGZsZXhTaHJpbms6IDEsXG5cdCAgICAgICAgZmxleE5lZ2F0aXZlOiAxLFxuXHQgICAgICAgIGZvbnRXZWlnaHQ6IDEsXG5cdCAgICAgICAgbGluZUNsYW1wOiAxLFxuXHQgICAgICAgIGxpbmVIZWlnaHQ6IDEsXG5cdCAgICAgICAgb3BhY2l0eTogMSxcblx0ICAgICAgICBvcmRlcjogMSxcblx0ICAgICAgICBvcnBoYW5zOiAxLFxuXHQgICAgICAgIHN0cm9rZU9wYWNpdHk6IDEsXG5cdCAgICAgICAgd2lkb3dzOiAxLFxuXHQgICAgICAgIHpJbmRleDogMSxcblx0ICAgICAgICB6b29tOiAxXG5cdCAgICB9O1xuXHQgICAgdmFyIGl0ZW1zID0gW107XG5cdCAgICB2YXIgaXRlbXNPZmZsaW5lID0gW107XG5cdCAgICB2YXIgbm9kZXMgPSB7fTtcblx0ICAgIHZhciBtb3VudHMgPSBbXTtcblx0ICAgIHZhciBkaWZmTGV2ZWwgPSAwO1xuXHQgICAgdmFyIGlzU3ZnTW9kZSA9ICExO1xuXHQgICAgdmFyIGNvbXBvbmVudHMgPSB7fTtcblx0ICAgIGV4dGVuZChDb21wb25lbnQucHJvdG90eXBlLCB7XG5cdCAgICAgICAgbGlua1N0YXRlOiBmdW5jdGlvbihrZXksIGV2ZW50UGF0aCkge1xuXHQgICAgICAgICAgICB2YXIgYyA9IHRoaXMuX2xpbmtlZFN0YXRlcyB8fCAodGhpcy5fbGlua2VkU3RhdGVzID0ge30pLCBjYWNoZUtleSA9IGtleSArICd8JyArIGV2ZW50UGF0aDtcblx0ICAgICAgICAgICAgcmV0dXJuIGNbY2FjaGVLZXldIHx8IChjW2NhY2hlS2V5XSA9IGNyZWF0ZUxpbmtlZFN0YXRlKHRoaXMsIGtleSwgZXZlbnRQYXRoKSk7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBzZXRTdGF0ZTogZnVuY3Rpb24oc3RhdGUsIGNhbGxiYWNrKSB7XG5cdCAgICAgICAgICAgIHZhciBzID0gdGhpcy5zdGF0ZTtcblx0ICAgICAgICAgICAgaWYgKCF0aGlzLnByZXZTdGF0ZSkgdGhpcy5wcmV2U3RhdGUgPSBjbG9uZShzKTtcblx0ICAgICAgICAgICAgZXh0ZW5kKHMsIGlzRnVuY3Rpb24oc3RhdGUpID8gc3RhdGUocywgdGhpcy5wcm9wcykgOiBzdGF0ZSk7XG5cdCAgICAgICAgICAgIGlmIChjYWxsYmFjaykgKHRoaXMuX3JlbmRlckNhbGxiYWNrcyA9IHRoaXMuX3JlbmRlckNhbGxiYWNrcyB8fCBbXSkucHVzaChjYWxsYmFjayk7XG5cdCAgICAgICAgICAgIHRyaWdnZXJDb21wb25lbnRSZW5kZXIodGhpcyk7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBmb3JjZVVwZGF0ZTogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHJlbmRlckNvbXBvbmVudCh0aGlzLCAyKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHQgICAgZXhwb3J0cy5oID0gaDtcblx0ICAgIGV4cG9ydHMuY2xvbmVFbGVtZW50ID0gY2xvbmVFbGVtZW50O1xuXHQgICAgZXhwb3J0cy5Db21wb25lbnQgPSBDb21wb25lbnQ7XG5cdCAgICBleHBvcnRzLnJlbmRlciA9IHJlbmRlcjtcblx0ICAgIGV4cG9ydHMucmVyZW5kZXIgPSByZXJlbmRlcjtcblx0ICAgIGV4cG9ydHMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdH0pO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMykuc2V0SW1tZWRpYXRlKSlcblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihzZXRJbW1lZGlhdGUsIGNsZWFySW1tZWRpYXRlKSB7dmFyIG5leHRUaWNrID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KS5uZXh0VGljaztcblx0dmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXHR2YXIgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5cdHZhciBpbW1lZGlhdGVJZHMgPSB7fTtcblx0dmFyIG5leHRJbW1lZGlhdGVJZCA9IDA7XG5cdFxuXHQvLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXHRcblx0ZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpO1xuXHR9O1xuXHRleHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG5cdH07XG5cdGV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cblx0ZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24odGltZW91dCkgeyB0aW1lb3V0LmNsb3NlKCk7IH07XG5cdFxuXHRmdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG5cdCAgdGhpcy5faWQgPSBpZDtcblx0ICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcblx0fVxuXHRUaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5cdFRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG5cdCAgdGhpcy5fY2xlYXJGbi5jYWxsKHdpbmRvdywgdGhpcy5faWQpO1xuXHR9O1xuXHRcblx0Ly8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5cdGV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSwgbXNlY3MpIHtcblx0ICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cdCAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcblx0fTtcblx0XG5cdGV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG5cdCAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXHQgIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG5cdH07XG5cdFxuXHRleHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuXHQgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblx0XG5cdCAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG5cdCAgaWYgKG1zZWNzID49IDApIHtcblx0ICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcblx0ICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcblx0ICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcblx0ICAgIH0sIG1zZWNzKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyBUaGF0J3Mgbm90IGhvdyBub2RlLmpzIGltcGxlbWVudHMgaXQgYnV0IHRoZSBleHBvc2VkIGFwaSBpcyB0aGUgc2FtZS5cblx0ZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSB0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSBcImZ1bmN0aW9uXCIgPyBzZXRJbW1lZGlhdGUgOiBmdW5jdGlvbihmbikge1xuXHQgIHZhciBpZCA9IG5leHRJbW1lZGlhdGVJZCsrO1xuXHQgIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA8IDIgPyBmYWxzZSA6IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblx0XG5cdCAgaW1tZWRpYXRlSWRzW2lkXSA9IHRydWU7XG5cdFxuXHQgIG5leHRUaWNrKGZ1bmN0aW9uIG9uTmV4dFRpY2soKSB7XG5cdCAgICBpZiAoaW1tZWRpYXRlSWRzW2lkXSkge1xuXHQgICAgICAvLyBmbi5jYWxsKCkgaXMgZmFzdGVyIHNvIHdlIG9wdGltaXplIGZvciB0aGUgY29tbW9uIHVzZS1jYXNlXG5cdCAgICAgIC8vIEBzZWUgaHR0cDovL2pzcGVyZi5jb20vY2FsbC1hcHBseS1zZWd1XG5cdCAgICAgIGlmIChhcmdzKSB7XG5cdCAgICAgICAgZm4uYXBwbHkobnVsbCwgYXJncyk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZm4uY2FsbChudWxsKTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBQcmV2ZW50IGlkcyBmcm9tIGxlYWtpbmdcblx0ICAgICAgZXhwb3J0cy5jbGVhckltbWVkaWF0ZShpZCk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIHJldHVybiBpZDtcblx0fTtcblx0XG5cdGV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSB0eXBlb2YgY2xlYXJJbW1lZGlhdGUgPT09IFwiZnVuY3Rpb25cIiA/IGNsZWFySW1tZWRpYXRlIDogZnVuY3Rpb24oaWQpIHtcblx0ICBkZWxldGUgaW1tZWRpYXRlSWRzW2lkXTtcblx0fTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMykuc2V0SW1tZWRpYXRlLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpLmNsZWFySW1tZWRpYXRlKSlcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXHRcblx0dmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXHRcblx0Ly8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG5cdC8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuXHQvLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG5cdC8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cdFxuXHR2YXIgY2FjaGVkU2V0VGltZW91dDtcblx0dmFyIGNhY2hlZENsZWFyVGltZW91dDtcblx0XG5cdChmdW5jdGlvbiAoKSB7XG5cdCAgdHJ5IHtcblx0ICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGNhY2hlZFNldFRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBpcyBub3QgZGVmaW5lZCcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICB0cnkge1xuXHQgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaXMgbm90IGRlZmluZWQnKTtcblx0ICAgIH1cblx0ICB9XG5cdH0gKCkpXG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgZHJhaW5pbmcgPSBmYWxzZTtcblx0dmFyIGN1cnJlbnRRdWV1ZTtcblx0dmFyIHF1ZXVlSW5kZXggPSAtMTtcblx0XG5cdGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcblx0ICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgIH1cblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBkcmFpblF1ZXVlKCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG5cdCAgICBpZiAoZHJhaW5pbmcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgdGltZW91dCA9IGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBjbGVhblVwTmV4dFRpY2spO1xuXHQgICAgZHJhaW5pbmcgPSB0cnVlO1xuXHRcblx0ICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB3aGlsZShsZW4pIHtcblx0ICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcblx0ICAgICAgICBxdWV1ZSA9IFtdO1xuXHQgICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcblx0ICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB9XG5cdCAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIHRpbWVvdXQpO1xuXHR9XG5cdFxuXHRwcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcblx0ICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGRyYWluUXVldWUsIDApO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0Ly8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuXHRmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcblx0ICAgIHRoaXMuZnVuID0gZnVuO1xuXHQgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuXHR9XG5cdEl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xuXHR9O1xuXHRwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xuXHRwcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xuXHRwcm9jZXNzLmVudiA9IHt9O1xuXHRwcm9jZXNzLmFyZ3YgPSBbXTtcblx0cHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5cdHByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcblx0cHJvY2Vzcy5vbiA9IG5vb3A7XG5cdHByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLm9uY2UgPSBub29wO1xuXHRwcm9jZXNzLm9mZiA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5cdHByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cdFxuXHRwcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRcblx0cHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcblx0cHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdHByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9nZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTtcblx0XG5cdHZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdFxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpO1xuXHRcblx0dmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpO1xuXHRcblx0dmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblx0XG5cdHZhciBfaW5oZXJpdHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NCk7XG5cdFxuXHR2YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cdFxuXHR2YXIgX3ByZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX3N0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Mik7XG5cdFxuXHR2YXIgX3N0b3JlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0b3JlKTtcblx0XG5cdHZhciBfY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTYpO1xuXHRcblx0dmFyIF9jb25zdGFudHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29uc3RhbnRzKTtcblx0XG5cdHZhciBfaGFtbWVyanMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMCk7XG5cdFxuXHR2YXIgX2hhbW1lcmpzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hhbW1lcmpzKTtcblx0XG5cdHZhciBfcHJvcGFnYXRpbmdIYW1tZXJqcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTMxKTtcblx0XG5cdHZhciBfcHJvcGFnYXRpbmdIYW1tZXJqczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wYWdhdGluZ0hhbW1lcmpzKTtcblx0XG5cdHZhciBfcmVkdXhVbmRvID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTMpO1xuXHRcblx0dmFyIF9yZXNpemVNb2QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOSk7XG5cdFxuXHR2YXIgX3Jlc2l6ZU1vZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZXNpemVNb2QpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTMyKTtcblx0XG5cdHZhciBDdXJ2ZUVkaXRvciA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG5cdCAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoQ3VydmVFZGl0b3IsIF9Db21wb25lbnQpO1xuXHRcblx0ICBmdW5jdGlvbiBDdXJ2ZUVkaXRvcigpIHtcblx0ICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIEN1cnZlRWRpdG9yKTtcblx0ICAgIHJldHVybiAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKEN1cnZlRWRpdG9yKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKEN1cnZlRWRpdG9yLCBbe1xuXHQgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuXHQgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblx0XG5cdCAgICAgIHZhciBoYW1tZXJ0aW1lID0gKDAsIF9wcm9wYWdhdGluZ0hhbW1lcmpzMi5kZWZhdWx0KShuZXcgX2hhbW1lcmpzMi5kZWZhdWx0KHRoaXMuYmFzZSkpLm9uKCdwYW4nLCBmdW5jdGlvbiAoZXYpIHtcblx0ICAgICAgICBfdGhpczIueCA9IGV2LmRlbHRhWDtfdGhpczIueSA9IGV2LmRlbHRhWTtcblx0ICAgICAgICBfc3RvcmUyLmRlZmF1bHQuZGlzcGF0Y2goeyB0eXBlOiAnRURJVE9SX1RSQU5TTEFURScsIGRhdGE6IHsgeDogZXYuZGVsdGFYLCB5OiBldi5kZWx0YVkgfSB9KTtcblx0ICAgICAgICAvLyB0aGlzLnJlbmRlcigpO1xuXHQgICAgICB9KS5vbigncGFuZW5kJywgZnVuY3Rpb24gKGV2KSB7XG5cdCAgICAgICAgdmFyIHggPSBldi5kZWx0YVg7XG5cdCAgICAgICAgdmFyIHkgPSBldi5kZWx0YVk7XG5cdFxuXHQgICAgICAgIHZhciB0cmFuc2xhdGUgPSBfc3RvcmUyLmRlZmF1bHQuZ2V0U3RhdGUoKS5yZXNpemUudHJhbnNsYXRlO1xuXHRcblx0ICAgICAgICBfdGhpczIueCA9IF90aGlzMi55ID0gMDtcblx0ICAgICAgICBfc3RvcmUyLmRlZmF1bHQuZGlzcGF0Y2goeyB0eXBlOiAnRURJVE9SX1RSQU5TTEFURScsIGRhdGE6IHsgeDogdHJhbnNsYXRlLnggKyB4LCB5OiB0cmFuc2xhdGUueSArIHkgfSB9KTtcblx0ICAgICAgfSkub24oJ3RhcCcsIGZ1bmN0aW9uIChldikge1xuXHQgICAgICAgIF9zdG9yZTIuZGVmYXVsdC5kaXNwYXRjaCh7IHR5cGU6ICdQT0lOVF9ERVNFTEVDVF9BTEwnIH0pO1xuXHQgICAgICB9KTtcblx0ICAgICAgdGhpcy5fYWRkS2V5VXAoKTtcblx0ICAgICAgX3N0b3JlMi5kZWZhdWx0LnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgX3RoaXMyLnJlbmRlcigpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdfYWRkS2V5VXAnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIF9hZGRLZXlVcCgpIHtcblx0ICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9vbktleVVwKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdfb25LZXlVcCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gX29uS2V5VXAoZSkge1xuXHQgICAgICBpZiAoIWUuYWx0S2V5KSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIHN3aXRjaCAoZS53aGljaCkge1xuXHQgICAgICAgIGNhc2UgOTA6XG5cdCAgICAgICAgICB7XG5cdCAgICAgICAgICAgIHJldHVybiBfc3RvcmUyLmRlZmF1bHQuZGlzcGF0Y2goX3JlZHV4VW5kby5BY3Rpb25DcmVhdG9ycy51bmRvKCkpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIGNhc2UgODg6XG5cdCAgICAgICAgICB7XG5cdCAgICAgICAgICAgIHJldHVybiBfc3RvcmUyLmRlZmF1bHQuZGlzcGF0Y2goX3JlZHV4VW5kby5BY3Rpb25DcmVhdG9ycy5yZWRvKCkpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIGNhc2UgNjg6XG5cdCAgICAgICAgICB7XG5cdCAgICAgICAgICAgIHJldHVybiBfc3RvcmUyLmRlZmF1bHQuZGlzcGF0Y2goeyB0eXBlOiAnUE9JTlRfREVMRVRFJyB9KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ19nZXRTdHlsZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gX2dldFN0eWxlKCkge1xuXHQgICAgICB2YXIgc3RhdGUgPSB0aGlzLnByb3BzLnN0YXRlO1xuXHQgICAgICB2YXIgcmVzaXplID0gc3RhdGUucmVzaXplO1xuXHQgICAgICB2YXIgdGVtcF90b3AgPSByZXNpemUudGVtcF90b3A7XG5cdCAgICAgIHZhciB0ZW1wX2JvdHRvbSA9IHJlc2l6ZS50ZW1wX2JvdHRvbTtcblx0ICAgICAgdmFyIHRlbXBfcmlnaHQgPSByZXNpemUudGVtcF9yaWdodDtcblx0ICAgICAgdmFyIHRyYW5zbGF0ZSA9IHJlc2l6ZS50cmFuc2xhdGU7XG5cdFxuXHRcblx0ICAgICAgdGVtcF90b3AgKz0gcmVzaXplLnRvcDtcblx0ICAgICAgdGVtcF9ib3R0b20gKz0gcmVzaXplLmJvdHRvbTtcblx0ICAgICAgdGVtcF9yaWdodCArPSByZXNpemUucmlnaHQ7XG5cdFxuXHQgICAgICB2YXIgWF9TSVpFID0gX2NvbnN0YW50czIuZGVmYXVsdC5DVVJWRV9TSVpFICsgNTMsXG5cdCAgICAgICAgICBZX1NJWkUgPSBfY29uc3RhbnRzMi5kZWZhdWx0LkNVUlZFX1NJWkUgKyAyICogX2NvbnN0YW50czIuZGVmYXVsdC5DVVJWRV9QQURESU5HO1xuXHRcblx0ICAgICAgLy8gY29uc3RyYWluIG1pbiBoZWlnaHRcblx0ICAgICAgaWYgKFlfU0laRSAtIHRlbXBfdG9wIDwgWV9TSVpFKSB7XG5cdCAgICAgICAgdGVtcF90b3AgPSAwO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChZX1NJWkUgKyB0ZW1wX2JvdHRvbSA8IFlfU0laRSkge1xuXHQgICAgICAgIHRlbXBfYm90dG9tID0gMDtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoWF9TSVpFICsgdGVtcF9yaWdodCA8IFhfU0laRSkge1xuXHQgICAgICAgIHRlbXBfcmlnaHQgPSAwO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0ZW1wX3RvcCA9ICgwLCBfcmVzaXplTW9kMi5kZWZhdWx0KSh0ZW1wX3RvcCwgLTEpO1xuXHQgICAgICB0ZW1wX2JvdHRvbSA9ICgwLCBfcmVzaXplTW9kMi5kZWZhdWx0KSh0ZW1wX2JvdHRvbSk7XG5cdFxuXHQgICAgICB2YXIgaGVpZ2h0ID0gJ2hlaWdodDogJyArIChZX1NJWkUgLSB0ZW1wX3RvcCArIHRlbXBfYm90dG9tKSArICdweCcsXG5cdCAgICAgICAgICB3aWR0aCA9ICd3aWR0aDogJyArIChYX1NJWkUgKyB0ZW1wX3JpZ2h0KSArICdweCcsXG5cdCAgICAgICAgICB4ID0gKHRoaXMueCB8fCAwKSArIHRyYW5zbGF0ZS54LFxuXHQgICAgICAgICAgeSA9ICh0aGlzLnkgfHwgMCkgKyB0cmFuc2xhdGUueSxcblx0ICAgICAgICAgIHRyYW5zZm9ybSA9ICd0cmFuc2Zvcm06IHRyYW5zbGF0ZSgnICsgeCArICdweCwgJyArICh5ICsgdGVtcF90b3ApICsgJ3B4KSc7XG5cdFxuXHQgICAgICByZXR1cm4gJycgKyBtb2pzLmgucHJlZml4LmNzcyArIHRyYW5zZm9ybSArICc7ICcgKyB0cmFuc2Zvcm0gKyAnOyAnICsgd2lkdGggKyAnOyAnICsgaGVpZ2h0ICsgJzsnO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3JlbmRlcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICB2YXIgQ0xBU1NFUyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM2KTtcblx0ICAgICAgdmFyIHN0YXRlID0gdGhpcy5wcm9wcy5zdGF0ZTtcblx0ICAgICAgdmFyIHJlc2l6ZSA9IHN0YXRlLnJlc2l6ZTtcblx0XG5cdFxuXHQgICAgICB2YXIgc3R5bGUgPSB0aGlzLl9nZXRTdHlsZSgpO1xuXHQgICAgICByZXR1cm4gKDAsIF9wcmVhY3QuaCkoXG5cdCAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgeyBjbGFzc05hbWU6IENMQVNTRVNbJ2N1cnZlLWVkaXRvciddLCBzdHlsZTogc3R5bGUgfSxcblx0ICAgICAgICAoMCwgX3ByZWFjdC5oKSgnZGl2JywgeyBjbGFzc05hbWU6IENMQVNTRVNbJ2N1cnZlLWVkaXRvcl9fbGVmdCddIH0pLFxuXHQgICAgICAgICgwLCBfcHJlYWN0LmgpKCdkaXYnLCB7IGNsYXNzTmFtZTogQ0xBU1NFU1snY3VydmUtZWRpdG9yX19yaWdodCddIH0pXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHQgIHJldHVybiBDdXJ2ZUVkaXRvcjtcblx0fShfcHJlYWN0LkNvbXBvbmVudCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBDdXJ2ZUVkaXRvcjtcblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg3KSwgX19lc01vZHVsZTogdHJ1ZSB9O1xuXG4vKioqLyB9LFxuLyogNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0X193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KS5PYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG5cbi8qKiovIH0sXG4vKiA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAxOS4xLjIuOSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTylcblx0dmFyIHRvT2JqZWN0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOSlcblx0ICAsICRnZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxNykoJ2dldFByb3RvdHlwZU9mJywgZnVuY3Rpb24oKXtcblx0ICByZXR1cm4gZnVuY3Rpb24gZ2V0UHJvdG90eXBlT2YoaXQpe1xuXHQgICAgcmV0dXJuICRnZXRQcm90b3R5cGVPZih0b09iamVjdChpdCkpO1xuXHQgIH07XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gNy4xLjEzIFRvT2JqZWN0KGFyZ3VtZW50KVxuXHR2YXIgZGVmaW5lZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcblx0ICByZXR1cm4gT2JqZWN0KGRlZmluZWQoaXQpKTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KVxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcblx0ICBpZihpdCA9PSB1bmRlZmluZWQpdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gIFwiICsgaXQpO1xuXHQgIHJldHVybiBpdDtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAxOS4xLjIuOSAvIDE1LjIuMy4yIE9iamVjdC5nZXRQcm90b3R5cGVPZihPKVxuXHR2YXIgaGFzICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKVxuXHQgICwgdG9PYmplY3QgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpXG5cdCAgLCBJRV9QUk9UTyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpKCdJRV9QUk9UTycpXG5cdCAgLCBPYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbihPKXtcblx0ICBPID0gdG9PYmplY3QoTyk7XG5cdCAgaWYoaGFzKE8sIElFX1BST1RPKSlyZXR1cm4gT1tJRV9QUk9UT107XG5cdCAgaWYodHlwZW9mIE8uY29uc3RydWN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBPIGluc3RhbmNlb2YgTy5jb25zdHJ1Y3Rvcil7XG5cdCAgICByZXR1cm4gTy5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG5cdCAgfSByZXR1cm4gTyBpbnN0YW5jZW9mIE9iamVjdCA/IE9iamVjdFByb3RvIDogbnVsbDtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHR2YXIgaGFzT3duUHJvcGVydHkgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwga2V5KXtcblx0ICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChpdCwga2V5KTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDEzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgc2hhcmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkoJ2tleXMnKVxuXHQgICwgdWlkICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oa2V5KXtcblx0ICByZXR1cm4gc2hhcmVkW2tleV0gfHwgKHNoYXJlZFtrZXldID0gdWlkKGtleSkpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KVxuXHQgICwgU0hBUkVEID0gJ19fY29yZS1qc19zaGFyZWRfXydcblx0ICAsIHN0b3JlICA9IGdsb2JhbFtTSEFSRURdIHx8IChnbG9iYWxbU0hBUkVEXSA9IHt9KTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpe1xuXHQgIHJldHVybiBzdG9yZVtrZXldIHx8IChzdG9yZVtrZXldID0ge30pO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy84NiNpc3N1ZWNvbW1lbnQtMTE1NzU5MDI4XG5cdHZhciBnbG9iYWwgPSBtb2R1bGUuZXhwb3J0cyA9IHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lk1hdGggPT0gTWF0aFxuXHQgID8gd2luZG93IDogdHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09IE1hdGggPyBzZWxmIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0aWYodHlwZW9mIF9fZyA9PSAnbnVtYmVyJylfX2cgPSBnbG9iYWw7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcblxuLyoqKi8gfSxcbi8qIDE2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHR2YXIgaWQgPSAwXG5cdCAgLCBweCA9IE1hdGgucmFuZG9tKCk7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oa2V5KXtcblx0ICByZXR1cm4gJ1N5bWJvbCgnLmNvbmNhdChrZXkgPT09IHVuZGVmaW5lZCA/ICcnIDoga2V5LCAnKV8nLCAoKytpZCArIHB4KS50b1N0cmluZygzNikpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIG1vc3QgT2JqZWN0IG1ldGhvZHMgYnkgRVM2IHNob3VsZCBhY2NlcHQgcHJpbWl0aXZlc1xuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpXG5cdCAgLCBjb3JlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSlcblx0ICAsIGZhaWxzICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihLRVksIGV4ZWMpe1xuXHQgIHZhciBmbiAgPSAoY29yZS5PYmplY3QgfHwge30pW0tFWV0gfHwgT2JqZWN0W0tFWV1cblx0ICAgICwgZXhwID0ge307XG5cdCAgZXhwW0tFWV0gPSBleGVjKGZuKTtcblx0ICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIGZhaWxzKGZ1bmN0aW9uKCl7IGZuKDEpOyB9KSwgJ09iamVjdCcsIGV4cCk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdsb2JhbCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpXG5cdCAgLCBjb3JlICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KVxuXHQgICwgY3R4ICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMClcblx0ICAsIGhpZGUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpXG5cdCAgLCBQUk9UT1RZUEUgPSAncHJvdG90eXBlJztcblx0XG5cdHZhciAkZXhwb3J0ID0gZnVuY3Rpb24odHlwZSwgbmFtZSwgc291cmNlKXtcblx0ICB2YXIgSVNfRk9SQ0VEID0gdHlwZSAmICRleHBvcnQuRlxuXHQgICAgLCBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HXG5cdCAgICAsIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlNcblx0ICAgICwgSVNfUFJPVE8gID0gdHlwZSAmICRleHBvcnQuUFxuXHQgICAgLCBJU19CSU5EICAgPSB0eXBlICYgJGV4cG9ydC5CXG5cdCAgICAsIElTX1dSQVAgICA9IHR5cGUgJiAkZXhwb3J0Lldcblx0ICAgICwgZXhwb3J0cyAgID0gSVNfR0xPQkFMID8gY29yZSA6IGNvcmVbbmFtZV0gfHwgKGNvcmVbbmFtZV0gPSB7fSlcblx0ICAgICwgZXhwUHJvdG8gID0gZXhwb3J0c1tQUk9UT1RZUEVdXG5cdCAgICAsIHRhcmdldCAgICA9IElTX0dMT0JBTCA/IGdsb2JhbCA6IElTX1NUQVRJQyA/IGdsb2JhbFtuYW1lXSA6IChnbG9iYWxbbmFtZV0gfHwge30pW1BST1RPVFlQRV1cblx0ICAgICwga2V5LCBvd24sIG91dDtcblx0ICBpZihJU19HTE9CQUwpc291cmNlID0gbmFtZTtcblx0ICBmb3Ioa2V5IGluIHNvdXJjZSl7XG5cdCAgICAvLyBjb250YWlucyBpbiBuYXRpdmVcblx0ICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIHRhcmdldFtrZXldICE9PSB1bmRlZmluZWQ7XG5cdCAgICBpZihvd24gJiYga2V5IGluIGV4cG9ydHMpY29udGludWU7XG5cdCAgICAvLyBleHBvcnQgbmF0aXZlIG9yIHBhc3NlZFxuXHQgICAgb3V0ID0gb3duID8gdGFyZ2V0W2tleV0gOiBzb3VyY2Vba2V5XTtcblx0ICAgIC8vIHByZXZlbnQgZ2xvYmFsIHBvbGx1dGlvbiBmb3IgbmFtZXNwYWNlc1xuXHQgICAgZXhwb3J0c1trZXldID0gSVNfR0xPQkFMICYmIHR5cGVvZiB0YXJnZXRba2V5XSAhPSAnZnVuY3Rpb24nID8gc291cmNlW2tleV1cblx0ICAgIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0XG5cdCAgICA6IElTX0JJTkQgJiYgb3duID8gY3R4KG91dCwgZ2xvYmFsKVxuXHQgICAgLy8gd3JhcCBnbG9iYWwgY29uc3RydWN0b3JzIGZvciBwcmV2ZW50IGNoYW5nZSB0aGVtIGluIGxpYnJhcnlcblx0ICAgIDogSVNfV1JBUCAmJiB0YXJnZXRba2V5XSA9PSBvdXQgPyAoZnVuY3Rpb24oQyl7XG5cdCAgICAgIHZhciBGID0gZnVuY3Rpb24oYSwgYiwgYyl7XG5cdCAgICAgICAgaWYodGhpcyBpbnN0YW5jZW9mIEMpe1xuXHQgICAgICAgICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe1xuXHQgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBuZXcgQztcblx0ICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gbmV3IEMoYSk7XG5cdCAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIG5ldyBDKGEsIGIpO1xuXHQgICAgICAgICAgfSByZXR1cm4gbmV3IEMoYSwgYiwgYyk7XG5cdCAgICAgICAgfSByZXR1cm4gQy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICB9O1xuXHQgICAgICBGW1BST1RPVFlQRV0gPSBDW1BST1RPVFlQRV07XG5cdCAgICAgIHJldHVybiBGO1xuXHQgICAgLy8gbWFrZSBzdGF0aWMgdmVyc2lvbnMgZm9yIHByb3RvdHlwZSBtZXRob2RzXG5cdCAgICB9KShvdXQpIDogSVNfUFJPVE8gJiYgdHlwZW9mIG91dCA9PSAnZnVuY3Rpb24nID8gY3R4KEZ1bmN0aW9uLmNhbGwsIG91dCkgOiBvdXQ7XG5cdCAgICAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUubWV0aG9kcy4lTkFNRSVcblx0ICAgIGlmKElTX1BST1RPKXtcblx0ICAgICAgKGV4cG9ydHMudmlydHVhbCB8fCAoZXhwb3J0cy52aXJ0dWFsID0ge30pKVtrZXldID0gb3V0O1xuXHQgICAgICAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUucHJvdG90eXBlLiVOQU1FJVxuXHQgICAgICBpZih0eXBlICYgJGV4cG9ydC5SICYmIGV4cFByb3RvICYmICFleHBQcm90b1trZXldKWhpZGUoZXhwUHJvdG8sIGtleSwgb3V0KTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdC8vIHR5cGUgYml0bWFwXG5cdCRleHBvcnQuRiA9IDE7ICAgLy8gZm9yY2VkXG5cdCRleHBvcnQuRyA9IDI7ICAgLy8gZ2xvYmFsXG5cdCRleHBvcnQuUyA9IDQ7ICAgLy8gc3RhdGljXG5cdCRleHBvcnQuUCA9IDg7ICAgLy8gcHJvdG9cblx0JGV4cG9ydC5CID0gMTY7ICAvLyBiaW5kXG5cdCRleHBvcnQuVyA9IDMyOyAgLy8gd3JhcFxuXHQkZXhwb3J0LlUgPSA2NDsgIC8vIHNhZmVcblx0JGV4cG9ydC5SID0gMTI4OyAvLyByZWFsIHByb3RvIG1ldGhvZCBmb3IgYGxpYnJhcnlgIFxuXHRtb2R1bGUuZXhwb3J0cyA9ICRleHBvcnQ7XG5cbi8qKiovIH0sXG4vKiAxOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIGNvcmUgPSBtb2R1bGUuZXhwb3J0cyA9IHt2ZXJzaW9uOiAnMi40LjAnfTtcblx0aWYodHlwZW9mIF9fZSA9PSAnbnVtYmVyJylfX2UgPSBjb3JlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cbi8qKiovIH0sXG4vKiAyMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nXG5cdHZhciBhRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmbiwgdGhhdCwgbGVuZ3RoKXtcblx0ICBhRnVuY3Rpb24oZm4pO1xuXHQgIGlmKHRoYXQgPT09IHVuZGVmaW5lZClyZXR1cm4gZm47XG5cdCAgc3dpdGNoKGxlbmd0aCl7XG5cdCAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbihhKXtcblx0ICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSk7XG5cdCAgICB9O1xuXHQgICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24oYSwgYil7XG5cdCAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIpO1xuXHQgICAgfTtcblx0ICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKGEsIGIsIGMpe1xuXHQgICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiLCBjKTtcblx0ICAgIH07XG5cdCAgfVxuXHQgIHJldHVybiBmdW5jdGlvbigvKiAuLi5hcmdzICovKXtcblx0ICAgIHJldHVybiBmbi5hcHBseSh0aGF0LCBhcmd1bWVudHMpO1xuXHQgIH07XG5cdH07XG5cbi8qKiovIH0sXG4vKiAyMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG5cdCAgaWYodHlwZW9mIGl0ICE9ICdmdW5jdGlvbicpdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYSBmdW5jdGlvbiEnKTtcblx0ICByZXR1cm4gaXQ7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAyMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGRQICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKVxuXHQgICwgY3JlYXRlRGVzYyA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpID8gZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKXtcblx0ICByZXR1cm4gZFAuZihvYmplY3QsIGtleSwgY3JlYXRlRGVzYygxLCB2YWx1ZSkpO1xuXHR9IDogZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKXtcblx0ICBvYmplY3Rba2V5XSA9IHZhbHVlO1xuXHQgIHJldHVybiBvYmplY3Q7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAyMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGFuT2JqZWN0ICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNClcblx0ICAsIElFOF9ET01fREVGSU5FID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNilcblx0ICAsIHRvUHJpbWl0aXZlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMClcblx0ICAsIGRQICAgICAgICAgICAgID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xuXHRcblx0ZXhwb3J0cy5mID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNykgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkgOiBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKXtcblx0ICBhbk9iamVjdChPKTtcblx0ICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7XG5cdCAgYW5PYmplY3QoQXR0cmlidXRlcyk7XG5cdCAgaWYoSUU4X0RPTV9ERUZJTkUpdHJ5IHtcblx0ICAgIHJldHVybiBkUChPLCBQLCBBdHRyaWJ1dGVzKTtcblx0ICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9XG5cdCAgaWYoJ2dldCcgaW4gQXR0cmlidXRlcyB8fCAnc2V0JyBpbiBBdHRyaWJ1dGVzKXRocm93IFR5cGVFcnJvcignQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQhJyk7XG5cdCAgaWYoJ3ZhbHVlJyBpbiBBdHRyaWJ1dGVzKU9bUF0gPSBBdHRyaWJ1dGVzLnZhbHVlO1xuXHQgIHJldHVybiBPO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcblx0ICBpZighaXNPYmplY3QoaXQpKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGFuIG9iamVjdCEnKTtcblx0ICByZXR1cm4gaXQ7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAyNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG5cdCAgcmV0dXJuIHR5cGVvZiBpdCA9PT0gJ29iamVjdCcgPyBpdCAhPT0gbnVsbCA6IHR5cGVvZiBpdCA9PT0gJ2Z1bmN0aW9uJztcblx0fTtcblxuLyoqKi8gfSxcbi8qIDI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9ICFfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXygyOCkoZnVuY3Rpb24oKXtcblx0ICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KF9fd2VicGFja19yZXF1aXJlX18oMjkpKCdkaXYnKSwgJ2EnLCB7Z2V0OiBmdW5jdGlvbigpeyByZXR1cm4gNzsgfX0pLmEgIT0gNztcblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gVGhhbmsncyBJRTggZm9yIGhpcyBmdW5ueSBkZWZpbmVQcm9wZXJ0eVxuXHRtb2R1bGUuZXhwb3J0cyA9ICFfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KShmdW5jdGlvbigpe1xuXHQgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdhJywge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIDc7IH19KS5hICE9IDc7XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMjggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZXhlYyl7XG5cdCAgdHJ5IHtcblx0ICAgIHJldHVybiAhIWV4ZWMoKTtcblx0ICB9IGNhdGNoKGUpe1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9LFxuLyogMjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpXG5cdCAgLCBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpLmRvY3VtZW50XG5cdCAgLy8gaW4gb2xkIElFIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50IGlzICdvYmplY3QnXG5cdCAgLCBpcyA9IGlzT2JqZWN0KGRvY3VtZW50KSAmJiBpc09iamVjdChkb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG5cdCAgcmV0dXJuIGlzID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpdCkgOiB7fTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDMwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyA3LjEuMSBUb1ByaW1pdGl2ZShpbnB1dCBbLCBQcmVmZXJyZWRUeXBlXSlcblx0dmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdC8vIGluc3RlYWQgb2YgdGhlIEVTNiBzcGVjIHZlcnNpb24sIHdlIGRpZG4ndCBpbXBsZW1lbnQgQEB0b1ByaW1pdGl2ZSBjYXNlXG5cdC8vIGFuZCB0aGUgc2Vjb25kIGFyZ3VtZW50IC0gZmxhZyAtIHByZWZlcnJlZCB0eXBlIGlzIGEgc3RyaW5nXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIFMpe1xuXHQgIGlmKCFpc09iamVjdChpdCkpcmV0dXJuIGl0O1xuXHQgIHZhciBmbiwgdmFsO1xuXHQgIGlmKFMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDtcblx0ICBpZih0eXBlb2YgKGZuID0gaXQudmFsdWVPZikgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKXJldHVybiB2YWw7XG5cdCAgaWYoIVMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDtcblx0ICB0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWVcIik7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAzMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihiaXRtYXAsIHZhbHVlKXtcblx0ICByZXR1cm4ge1xuXHQgICAgZW51bWVyYWJsZSAgOiAhKGJpdG1hcCAmIDEpLFxuXHQgICAgY29uZmlndXJhYmxlOiAhKGJpdG1hcCAmIDIpLFxuXHQgICAgd3JpdGFibGUgICAgOiAhKGJpdG1hcCAmIDQpLFxuXHQgICAgdmFsdWUgICAgICAgOiB2YWx1ZVxuXHQgIH07XG5cdH07XG5cbi8qKiovIH0sXG4vKiAzMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fTtcblxuLyoqKi8gfSxcbi8qIDMzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cdFxuXHR2YXIgX2RlZmluZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cdFxuXHR2YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluZVByb3BlcnR5KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG5cdCAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcblx0ICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuXHQgICAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuXHQgICAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuXHQgICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG5cdCAgICByZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXG4vKioqLyB9LFxuLyogMzQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogX193ZWJwYWNrX3JlcXVpcmVfXygzNSksIF9fZXNNb2R1bGU6IHRydWUgfTtcblxuLyoqKi8gfSxcbi8qIDM1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblx0dmFyICRPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KS5PYmplY3Q7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgZGVzYyl7XG5cdCAgcmV0dXJuICRPYmplY3QuZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgZGVzYyk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAzNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0Ly8gMTkuMS4yLjQgLyAxNS4yLjMuNiBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcylcblx0JGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhX193ZWJwYWNrX3JlcXVpcmVfXygyNyksICdPYmplY3QnLCB7ZGVmaW5lUHJvcGVydHk6IF9fd2VicGFja19yZXF1aXJlX18oMjMpLmZ9KTtcblxuLyoqKi8gfSxcbi8qIDM3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cdFxuXHR2YXIgX3R5cGVvZjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblx0XG5cdHZhciBfdHlwZW9mMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3R5cGVvZjIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChzZWxmLCBjYWxsKSB7XG5cdCAgaWYgKCFzZWxmKSB7XG5cdCAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6ICgwLCBfdHlwZW9mMy5kZWZhdWx0KShjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDM4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cdFxuXHR2YXIgX2l0ZXJhdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdFxuXHR2YXIgX2l0ZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2l0ZXJhdG9yKTtcblx0XG5cdHZhciBfc3ltYm9sID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OCk7XG5cdFxuXHR2YXIgX3N5bWJvbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zeW1ib2wpO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBfaXRlcmF0b3IyLmRlZmF1bHQgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBfc3ltYm9sMi5kZWZhdWx0ID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBfc3ltYm9sMi5kZWZhdWx0ID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gdHlwZW9mIF9zeW1ib2wyLmRlZmF1bHQgPT09IFwiZnVuY3Rpb25cIiAmJiBfdHlwZW9mKF9pdGVyYXRvcjIuZGVmYXVsdCkgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihvYmopO1xuXHR9IDogZnVuY3Rpb24gKG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgdHlwZW9mIF9zeW1ib2wyLmRlZmF1bHQgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IF9zeW1ib2wyLmRlZmF1bHQgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKG9iaik7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAzOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKSwgX19lc01vZHVsZTogdHJ1ZSB9O1xuXG4vKioqLyB9LFxuLyogNDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KS5mKCdpdGVyYXRvcicpO1xuXG4vKioqLyB9LFxuLyogNDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyICRhdCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKSh0cnVlKTtcblx0XG5cdC8vIDIxLjEuMy4yNyBTdHJpbmcucHJvdG90eXBlW0BAaXRlcmF0b3JdKClcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NCkoU3RyaW5nLCAnU3RyaW5nJywgZnVuY3Rpb24oaXRlcmF0ZWQpe1xuXHQgIHRoaXMuX3QgPSBTdHJpbmcoaXRlcmF0ZWQpOyAvLyB0YXJnZXRcblx0ICB0aGlzLl9pID0gMDsgICAgICAgICAgICAgICAgLy8gbmV4dCBpbmRleFxuXHQvLyAyMS4xLjUuMi4xICVTdHJpbmdJdGVyYXRvclByb3RvdHlwZSUubmV4dCgpXG5cdH0sIGZ1bmN0aW9uKCl7XG5cdCAgdmFyIE8gICAgID0gdGhpcy5fdFxuXHQgICAgLCBpbmRleCA9IHRoaXMuX2lcblx0ICAgICwgcG9pbnQ7XG5cdCAgaWYoaW5kZXggPj0gTy5sZW5ndGgpcmV0dXJuIHt2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlfTtcblx0ICBwb2ludCA9ICRhdChPLCBpbmRleCk7XG5cdCAgdGhpcy5faSArPSBwb2ludC5sZW5ndGg7XG5cdCAgcmV0dXJuIHt2YWx1ZTogcG9pbnQsIGRvbmU6IGZhbHNlfTtcblx0fSk7XG5cbi8qKiovIH0sXG4vKiA0MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oNDMpXG5cdCAgLCBkZWZpbmVkICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0Ly8gdHJ1ZSAgLT4gU3RyaW5nI2F0XG5cdC8vIGZhbHNlIC0+IFN0cmluZyNjb2RlUG9pbnRBdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFRPX1NUUklORyl7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKHRoYXQsIHBvcyl7XG5cdCAgICB2YXIgcyA9IFN0cmluZyhkZWZpbmVkKHRoYXQpKVxuXHQgICAgICAsIGkgPSB0b0ludGVnZXIocG9zKVxuXHQgICAgICAsIGwgPSBzLmxlbmd0aFxuXHQgICAgICAsIGEsIGI7XG5cdCAgICBpZihpIDwgMCB8fCBpID49IGwpcmV0dXJuIFRPX1NUUklORyA/ICcnIDogdW5kZWZpbmVkO1xuXHQgICAgYSA9IHMuY2hhckNvZGVBdChpKTtcblx0ICAgIHJldHVybiBhIDwgMHhkODAwIHx8IGEgPiAweGRiZmYgfHwgaSArIDEgPT09IGwgfHwgKGIgPSBzLmNoYXJDb2RlQXQoaSArIDEpKSA8IDB4ZGMwMCB8fCBiID4gMHhkZmZmXG5cdCAgICAgID8gVE9fU1RSSU5HID8gcy5jaGFyQXQoaSkgOiBhXG5cdCAgICAgIDogVE9fU1RSSU5HID8gcy5zbGljZShpLCBpICsgMikgOiAoYSAtIDB4ZDgwMCA8PCAxMCkgKyAoYiAtIDB4ZGMwMCkgKyAweDEwMDAwO1xuXHQgIH07XG5cdH07XG5cbi8qKiovIH0sXG4vKiA0MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gNy4xLjQgVG9JbnRlZ2VyXG5cdHZhciBjZWlsICA9IE1hdGguY2VpbFxuXHQgICwgZmxvb3IgPSBNYXRoLmZsb29yO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcblx0ICByZXR1cm4gaXNOYU4oaXQgPSAraXQpID8gMCA6IChpdCA+IDAgPyBmbG9vciA6IGNlaWwpKGl0KTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDQ0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciBMSUJSQVJZICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpXG5cdCAgLCAkZXhwb3J0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpXG5cdCAgLCByZWRlZmluZSAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpXG5cdCAgLCBoaWRlICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpXG5cdCAgLCBoYXMgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpXG5cdCAgLCBJdGVyYXRvcnMgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpXG5cdCAgLCAkaXRlckNyZWF0ZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpXG5cdCAgLCBzZXRUb1N0cmluZ1RhZyA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpXG5cdCAgLCBnZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpXG5cdCAgLCBJVEVSQVRPUiAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpKCdpdGVyYXRvcicpXG5cdCAgLCBCVUdHWSAgICAgICAgICA9ICEoW10ua2V5cyAmJiAnbmV4dCcgaW4gW10ua2V5cygpKSAvLyBTYWZhcmkgaGFzIGJ1Z2d5IGl0ZXJhdG9ycyB3L28gYG5leHRgXG5cdCAgLCBGRl9JVEVSQVRPUiAgICA9ICdAQGl0ZXJhdG9yJ1xuXHQgICwgS0VZUyAgICAgICAgICAgPSAna2V5cydcblx0ICAsIFZBTFVFUyAgICAgICAgID0gJ3ZhbHVlcyc7XG5cdFxuXHR2YXIgcmV0dXJuVGhpcyA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzOyB9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihCYXNlLCBOQU1FLCBDb25zdHJ1Y3RvciwgbmV4dCwgREVGQVVMVCwgSVNfU0VULCBGT1JDRUQpe1xuXHQgICRpdGVyQ3JlYXRlKENvbnN0cnVjdG9yLCBOQU1FLCBuZXh0KTtcblx0ICB2YXIgZ2V0TWV0aG9kID0gZnVuY3Rpb24oa2luZCl7XG5cdCAgICBpZighQlVHR1kgJiYga2luZCBpbiBwcm90bylyZXR1cm4gcHJvdG9ba2luZF07XG5cdCAgICBzd2l0Y2goa2luZCl7XG5cdCAgICAgIGNhc2UgS0VZUzogcmV0dXJuIGZ1bmN0aW9uIGtleXMoKXsgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsgfTtcblx0ICAgICAgY2FzZSBWQUxVRVM6IHJldHVybiBmdW5jdGlvbiB2YWx1ZXMoKXsgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsgfTtcblx0ICAgIH0gcmV0dXJuIGZ1bmN0aW9uIGVudHJpZXMoKXsgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsgfTtcblx0ICB9O1xuXHQgIHZhciBUQUcgICAgICAgID0gTkFNRSArICcgSXRlcmF0b3InXG5cdCAgICAsIERFRl9WQUxVRVMgPSBERUZBVUxUID09IFZBTFVFU1xuXHQgICAgLCBWQUxVRVNfQlVHID0gZmFsc2Vcblx0ICAgICwgcHJvdG8gICAgICA9IEJhc2UucHJvdG90eXBlXG5cdCAgICAsICRuYXRpdmUgICAgPSBwcm90b1tJVEVSQVRPUl0gfHwgcHJvdG9bRkZfSVRFUkFUT1JdIHx8IERFRkFVTFQgJiYgcHJvdG9bREVGQVVMVF1cblx0ICAgICwgJGRlZmF1bHQgICA9ICRuYXRpdmUgfHwgZ2V0TWV0aG9kKERFRkFVTFQpXG5cdCAgICAsICRlbnRyaWVzICAgPSBERUZBVUxUID8gIURFRl9WQUxVRVMgPyAkZGVmYXVsdCA6IGdldE1ldGhvZCgnZW50cmllcycpIDogdW5kZWZpbmVkXG5cdCAgICAsICRhbnlOYXRpdmUgPSBOQU1FID09ICdBcnJheScgPyBwcm90by5lbnRyaWVzIHx8ICRuYXRpdmUgOiAkbmF0aXZlXG5cdCAgICAsIG1ldGhvZHMsIGtleSwgSXRlcmF0b3JQcm90b3R5cGU7XG5cdCAgLy8gRml4IG5hdGl2ZVxuXHQgIGlmKCRhbnlOYXRpdmUpe1xuXHQgICAgSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90b3R5cGVPZigkYW55TmF0aXZlLmNhbGwobmV3IEJhc2UpKTtcblx0ICAgIGlmKEl0ZXJhdG9yUHJvdG90eXBlICE9PSBPYmplY3QucHJvdG90eXBlKXtcblx0ICAgICAgLy8gU2V0IEBAdG9TdHJpbmdUYWcgdG8gbmF0aXZlIGl0ZXJhdG9yc1xuXHQgICAgICBzZXRUb1N0cmluZ1RhZyhJdGVyYXRvclByb3RvdHlwZSwgVEFHLCB0cnVlKTtcblx0ICAgICAgLy8gZml4IGZvciBzb21lIG9sZCBlbmdpbmVzXG5cdCAgICAgIGlmKCFMSUJSQVJZICYmICFoYXMoSXRlcmF0b3JQcm90b3R5cGUsIElURVJBVE9SKSloaWRlKEl0ZXJhdG9yUHJvdG90eXBlLCBJVEVSQVRPUiwgcmV0dXJuVGhpcyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIGZpeCBBcnJheSN7dmFsdWVzLCBAQGl0ZXJhdG9yfS5uYW1lIGluIFY4IC8gRkZcblx0ICBpZihERUZfVkFMVUVTICYmICRuYXRpdmUgJiYgJG5hdGl2ZS5uYW1lICE9PSBWQUxVRVMpe1xuXHQgICAgVkFMVUVTX0JVRyA9IHRydWU7XG5cdCAgICAkZGVmYXVsdCA9IGZ1bmN0aW9uIHZhbHVlcygpeyByZXR1cm4gJG5hdGl2ZS5jYWxsKHRoaXMpOyB9O1xuXHQgIH1cblx0ICAvLyBEZWZpbmUgaXRlcmF0b3Jcblx0ICBpZigoIUxJQlJBUlkgfHwgRk9SQ0VEKSAmJiAoQlVHR1kgfHwgVkFMVUVTX0JVRyB8fCAhcHJvdG9bSVRFUkFUT1JdKSl7XG5cdCAgICBoaWRlKHByb3RvLCBJVEVSQVRPUiwgJGRlZmF1bHQpO1xuXHQgIH1cblx0ICAvLyBQbHVnIGZvciBsaWJyYXJ5XG5cdCAgSXRlcmF0b3JzW05BTUVdID0gJGRlZmF1bHQ7XG5cdCAgSXRlcmF0b3JzW1RBR10gID0gcmV0dXJuVGhpcztcblx0ICBpZihERUZBVUxUKXtcblx0ICAgIG1ldGhvZHMgPSB7XG5cdCAgICAgIHZhbHVlczogIERFRl9WQUxVRVMgPyAkZGVmYXVsdCA6IGdldE1ldGhvZChWQUxVRVMpLFxuXHQgICAgICBrZXlzOiAgICBJU19TRVQgICAgID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoS0VZUyksXG5cdCAgICAgIGVudHJpZXM6ICRlbnRyaWVzXG5cdCAgICB9O1xuXHQgICAgaWYoRk9SQ0VEKWZvcihrZXkgaW4gbWV0aG9kcyl7XG5cdCAgICAgIGlmKCEoa2V5IGluIHByb3RvKSlyZWRlZmluZShwcm90bywga2V5LCBtZXRob2RzW2tleV0pO1xuXHQgICAgfSBlbHNlICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKEJVR0dZIHx8IFZBTFVFU19CVUcpLCBOQU1FLCBtZXRob2RzKTtcblx0ICB9XG5cdCAgcmV0dXJuIG1ldGhvZHM7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA0NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSB0cnVlO1xuXG4vKioqLyB9LFxuLyogNDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cbi8qKiovIH0sXG4vKiA0NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLyoqKi8gfSxcbi8qIDQ4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciBjcmVhdGUgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpXG5cdCAgLCBkZXNjcmlwdG9yICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpXG5cdCAgLCBzZXRUb1N0cmluZ1RhZyA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpXG5cdCAgLCBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuXHRcblx0Ly8gMjUuMS4yLjEuMSAlSXRlcmF0b3JQcm90b3R5cGUlW0BAaXRlcmF0b3JdKClcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMikoSXRlcmF0b3JQcm90b3R5cGUsIF9fd2VicGFja19yZXF1aXJlX18oNjIpKCdpdGVyYXRvcicpLCBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKENvbnN0cnVjdG9yLCBOQU1FLCBuZXh0KXtcblx0ICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBjcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUsIHtuZXh0OiBkZXNjcmlwdG9yKDEsIG5leHQpfSk7XG5cdCAgc2V0VG9TdHJpbmdUYWcoQ29uc3RydWN0b3IsIE5BTUUgKyAnIEl0ZXJhdG9yJyk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA0OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pXG5cdHZhciBhbk9iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpXG5cdCAgLCBkUHMgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCBlbnVtQnVnS2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpXG5cdCAgLCBJRV9QUk9UTyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpKCdJRV9QUk9UTycpXG5cdCAgLCBFbXB0eSAgICAgICA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH1cblx0ICAsIFBST1RPVFlQRSAgID0gJ3Byb3RvdHlwZSc7XG5cdFxuXHQvLyBDcmVhdGUgb2JqZWN0IHdpdGggZmFrZSBgbnVsbGAgcHJvdG90eXBlOiB1c2UgaWZyYW1lIE9iamVjdCB3aXRoIGNsZWFyZWQgcHJvdG90eXBlXG5cdHZhciBjcmVhdGVEaWN0ID0gZnVuY3Rpb24oKXtcblx0ICAvLyBUaHJhc2gsIHdhc3RlIGFuZCBzb2RvbXk6IElFIEdDIGJ1Z1xuXHQgIHZhciBpZnJhbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KSgnaWZyYW1lJylcblx0ICAgICwgaSAgICAgID0gZW51bUJ1Z0tleXMubGVuZ3RoXG5cdCAgICAsIGx0ICAgICA9ICc8J1xuXHQgICAgLCBndCAgICAgPSAnPidcblx0ICAgICwgaWZyYW1lRG9jdW1lbnQ7XG5cdCAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdCAgX193ZWJwYWNrX3JlcXVpcmVfXyg2MCkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblx0ICBpZnJhbWUuc3JjID0gJ2phdmFzY3JpcHQ6JzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zY3JpcHQtdXJsXG5cdCAgLy8gY3JlYXRlRGljdCA9IGlmcmFtZS5jb250ZW50V2luZG93Lk9iamVjdDtcblx0ICAvLyBodG1sLnJlbW92ZUNoaWxkKGlmcmFtZSk7XG5cdCAgaWZyYW1lRG9jdW1lbnQgPSBpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDtcblx0ICBpZnJhbWVEb2N1bWVudC5vcGVuKCk7XG5cdCAgaWZyYW1lRG9jdW1lbnQud3JpdGUobHQgKyAnc2NyaXB0JyArIGd0ICsgJ2RvY3VtZW50LkY9T2JqZWN0JyArIGx0ICsgJy9zY3JpcHQnICsgZ3QpO1xuXHQgIGlmcmFtZURvY3VtZW50LmNsb3NlKCk7XG5cdCAgY3JlYXRlRGljdCA9IGlmcmFtZURvY3VtZW50LkY7XG5cdCAgd2hpbGUoaS0tKWRlbGV0ZSBjcmVhdGVEaWN0W1BST1RPVFlQRV1bZW51bUJ1Z0tleXNbaV1dO1xuXHQgIHJldHVybiBjcmVhdGVEaWN0KCk7XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24gY3JlYXRlKE8sIFByb3BlcnRpZXMpe1xuXHQgIHZhciByZXN1bHQ7XG5cdCAgaWYoTyAhPT0gbnVsbCl7XG5cdCAgICBFbXB0eVtQUk9UT1RZUEVdID0gYW5PYmplY3QoTyk7XG5cdCAgICByZXN1bHQgPSBuZXcgRW1wdHk7XG5cdCAgICBFbXB0eVtQUk9UT1RZUEVdID0gbnVsbDtcblx0ICAgIC8vIGFkZCBcIl9fcHJvdG9fX1wiIGZvciBPYmplY3QuZ2V0UHJvdG90eXBlT2YgcG9seWZpbGxcblx0ICAgIHJlc3VsdFtJRV9QUk9UT10gPSBPO1xuXHQgIH0gZWxzZSByZXN1bHQgPSBjcmVhdGVEaWN0KCk7XG5cdCAgcmV0dXJuIFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IGRQcyhyZXN1bHQsIFByb3BlcnRpZXMpO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA1MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGRQICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMylcblx0ICAsIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNClcblx0ICAsIGdldEtleXMgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMgOiBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpe1xuXHQgIGFuT2JqZWN0KE8pO1xuXHQgIHZhciBrZXlzICAgPSBnZXRLZXlzKFByb3BlcnRpZXMpXG5cdCAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoXG5cdCAgICAsIGkgPSAwXG5cdCAgICAsIFA7XG5cdCAgd2hpbGUobGVuZ3RoID4gaSlkUC5mKE8sIFAgPSBrZXlzW2krK10sIFByb3BlcnRpZXNbUF0pO1xuXHQgIHJldHVybiBPO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogNTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDE5LjEuMi4xNCAvIDE1LjIuMy4xNCBPYmplY3Qua2V5cyhPKVxuXHR2YXIgJGtleXMgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKVxuXHQgICwgZW51bUJ1Z0tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24ga2V5cyhPKXtcblx0ICByZXR1cm4gJGtleXMoTywgZW51bUJ1Z0tleXMpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogNTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBoYXMgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKVxuXHQgICwgdG9JT2JqZWN0ICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mylcblx0ICAsIGFycmF5SW5kZXhPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpKGZhbHNlKVxuXHQgICwgSUVfUFJPVE8gICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykoJ0lFX1BST1RPJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iamVjdCwgbmFtZXMpe1xuXHQgIHZhciBPICAgICAgPSB0b0lPYmplY3Qob2JqZWN0KVxuXHQgICAgLCBpICAgICAgPSAwXG5cdCAgICAsIHJlc3VsdCA9IFtdXG5cdCAgICAsIGtleTtcblx0ICBmb3Ioa2V5IGluIE8paWYoa2V5ICE9IElFX1BST1RPKWhhcyhPLCBrZXkpICYmIHJlc3VsdC5wdXNoKGtleSk7XG5cdCAgLy8gRG9uJ3QgZW51bSBidWcgJiBoaWRkZW4ga2V5c1xuXHQgIHdoaWxlKG5hbWVzLmxlbmd0aCA+IGkpaWYoaGFzKE8sIGtleSA9IG5hbWVzW2krK10pKXtcblx0ICAgIH5hcnJheUluZGV4T2YocmVzdWx0LCBrZXkpIHx8IHJlc3VsdC5wdXNoKGtleSk7XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA1MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gdG8gaW5kZXhlZCBvYmplY3QsIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzXG5cdHZhciBJT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NClcblx0ICAsIGRlZmluZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG5cdCAgcmV0dXJuIElPYmplY3QoZGVmaW5lZChpdCkpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogNTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzXG5cdHZhciBjb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcblx0bW9kdWxlLmV4cG9ydHMgPSBPYmplY3QoJ3onKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKSA/IE9iamVjdCA6IGZ1bmN0aW9uKGl0KXtcblx0ICByZXR1cm4gY29mKGl0KSA9PSAnU3RyaW5nJyA/IGl0LnNwbGl0KCcnKSA6IE9iamVjdChpdCk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA1NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcblx0ICByZXR1cm4gdG9TdHJpbmcuY2FsbChpdCkuc2xpY2UoOCwgLTEpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogNTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIGZhbHNlIC0+IEFycmF5I2luZGV4T2Zcblx0Ly8gdHJ1ZSAgLT4gQXJyYXkjaW5jbHVkZXNcblx0dmFyIHRvSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpXG5cdCAgLCB0b0xlbmd0aCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KVxuXHQgICwgdG9JbmRleCAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCk7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oSVNfSU5DTFVERVMpe1xuXHQgIHJldHVybiBmdW5jdGlvbigkdGhpcywgZWwsIGZyb21JbmRleCl7XG5cdCAgICB2YXIgTyAgICAgID0gdG9JT2JqZWN0KCR0aGlzKVxuXHQgICAgICAsIGxlbmd0aCA9IHRvTGVuZ3RoKE8ubGVuZ3RoKVxuXHQgICAgICAsIGluZGV4ICA9IHRvSW5kZXgoZnJvbUluZGV4LCBsZW5ndGgpXG5cdCAgICAgICwgdmFsdWU7XG5cdCAgICAvLyBBcnJheSNpbmNsdWRlcyB1c2VzIFNhbWVWYWx1ZVplcm8gZXF1YWxpdHkgYWxnb3JpdGhtXG5cdCAgICBpZihJU19JTkNMVURFUyAmJiBlbCAhPSBlbCl3aGlsZShsZW5ndGggPiBpbmRleCl7XG5cdCAgICAgIHZhbHVlID0gT1tpbmRleCsrXTtcblx0ICAgICAgaWYodmFsdWUgIT0gdmFsdWUpcmV0dXJuIHRydWU7XG5cdCAgICAvLyBBcnJheSN0b0luZGV4IGlnbm9yZXMgaG9sZXMsIEFycmF5I2luY2x1ZGVzIC0gbm90XG5cdCAgICB9IGVsc2UgZm9yKDtsZW5ndGggPiBpbmRleDsgaW5kZXgrKylpZihJU19JTkNMVURFUyB8fCBpbmRleCBpbiBPKXtcblx0ICAgICAgaWYoT1tpbmRleF0gPT09IGVsKXJldHVybiBJU19JTkNMVURFUyB8fCBpbmRleCB8fCAwO1xuXHQgICAgfSByZXR1cm4gIUlTX0lOQ0xVREVTICYmIC0xO1xuXHQgIH07XG5cdH07XG5cbi8qKiovIH0sXG4vKiA1NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gNy4xLjE1IFRvTGVuZ3RoXG5cdHZhciB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKVxuXHQgICwgbWluICAgICAgID0gTWF0aC5taW47XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuXHQgIHJldHVybiBpdCA+IDAgPyBtaW4odG9JbnRlZ2VyKGl0KSwgMHgxZmZmZmZmZmZmZmZmZikgOiAwOyAvLyBwb3coMiwgNTMpIC0gMSA9PSA5MDA3MTk5MjU0NzQwOTkxXG5cdH07XG5cbi8qKiovIH0sXG4vKiA1OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oNDMpXG5cdCAgLCBtYXggICAgICAgPSBNYXRoLm1heFxuXHQgICwgbWluICAgICAgID0gTWF0aC5taW47XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaW5kZXgsIGxlbmd0aCl7XG5cdCAgaW5kZXggPSB0b0ludGVnZXIoaW5kZXgpO1xuXHQgIHJldHVybiBpbmRleCA8IDAgPyBtYXgoaW5kZXggKyBsZW5ndGgsIDApIDogbWluKGluZGV4LCBsZW5ndGgpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogNTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIElFIDgtIGRvbid0IGVudW0gYnVnIGtleXNcblx0bW9kdWxlLmV4cG9ydHMgPSAoXG5cdCAgJ2NvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZidcblx0KS5zcGxpdCgnLCcpO1xuXG4vKioqLyB9LFxuLyogNjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkuZG9jdW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG4vKioqLyB9LFxuLyogNjEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBkZWYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKS5mXG5cdCAgLCBoYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKVxuXHQgICwgVEFHID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MikoJ3RvU3RyaW5nVGFnJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCB0YWcsIHN0YXQpe1xuXHQgIGlmKGl0ICYmICFoYXMoaXQgPSBzdGF0ID8gaXQgOiBpdC5wcm90b3R5cGUsIFRBRykpZGVmKGl0LCBUQUcsIHtjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiB0YWd9KTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDYyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgc3RvcmUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpKCd3a3MnKVxuXHQgICwgdWlkICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpXG5cdCAgLCBTeW1ib2wgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkuU3ltYm9sXG5cdCAgLCBVU0VfU1lNQk9MID0gdHlwZW9mIFN5bWJvbCA9PSAnZnVuY3Rpb24nO1xuXHRcblx0dmFyICRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuYW1lKXtcblx0ICByZXR1cm4gc3RvcmVbbmFtZV0gfHwgKHN0b3JlW25hbWVdID1cblx0ICAgIFVTRV9TWU1CT0wgJiYgU3ltYm9sW25hbWVdIHx8IChVU0VfU1lNQk9MID8gU3ltYm9sIDogdWlkKSgnU3ltYm9sLicgKyBuYW1lKSk7XG5cdH07XG5cdFxuXHQkZXhwb3J0cy5zdG9yZSA9IHN0b3JlO1xuXG4vKioqLyB9LFxuLyogNjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdF9fd2VicGFja19yZXF1aXJlX18oNjQpO1xuXHR2YXIgZ2xvYmFsICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpXG5cdCAgLCBoaWRlICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMilcblx0ICAsIEl0ZXJhdG9ycyAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KVxuXHQgICwgVE9fU1RSSU5HX1RBRyA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpKCd0b1N0cmluZ1RhZycpO1xuXHRcblx0Zm9yKHZhciBjb2xsZWN0aW9ucyA9IFsnTm9kZUxpc3QnLCAnRE9NVG9rZW5MaXN0JywgJ01lZGlhTGlzdCcsICdTdHlsZVNoZWV0TGlzdCcsICdDU1NSdWxlTGlzdCddLCBpID0gMDsgaSA8IDU7IGkrKyl7XG5cdCAgdmFyIE5BTUUgICAgICAgPSBjb2xsZWN0aW9uc1tpXVxuXHQgICAgLCBDb2xsZWN0aW9uID0gZ2xvYmFsW05BTUVdXG5cdCAgICAsIHByb3RvICAgICAgPSBDb2xsZWN0aW9uICYmIENvbGxlY3Rpb24ucHJvdG90eXBlO1xuXHQgIGlmKHByb3RvICYmICFwcm90b1tUT19TVFJJTkdfVEFHXSloaWRlKHByb3RvLCBUT19TVFJJTkdfVEFHLCBOQU1FKTtcblx0ICBJdGVyYXRvcnNbTkFNRV0gPSBJdGVyYXRvcnMuQXJyYXk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDY0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciBhZGRUb1Vuc2NvcGFibGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NSlcblx0ICAsIHN0ZXAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY2KVxuXHQgICwgSXRlcmF0b3JzICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpXG5cdCAgLCB0b0lPYmplY3QgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Myk7XG5cdFxuXHQvLyAyMi4xLjMuNCBBcnJheS5wcm90b3R5cGUuZW50cmllcygpXG5cdC8vIDIyLjEuMy4xMyBBcnJheS5wcm90b3R5cGUua2V5cygpXG5cdC8vIDIyLjEuMy4yOSBBcnJheS5wcm90b3R5cGUudmFsdWVzKClcblx0Ly8gMjIuMS4zLjMwIEFycmF5LnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NCkoQXJyYXksICdBcnJheScsIGZ1bmN0aW9uKGl0ZXJhdGVkLCBraW5kKXtcblx0ICB0aGlzLl90ID0gdG9JT2JqZWN0KGl0ZXJhdGVkKTsgLy8gdGFyZ2V0XG5cdCAgdGhpcy5faSA9IDA7ICAgICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXhcblx0ICB0aGlzLl9rID0ga2luZDsgICAgICAgICAgICAgICAgLy8ga2luZFxuXHQvLyAyMi4xLjUuMi4xICVBcnJheUl0ZXJhdG9yUHJvdG90eXBlJS5uZXh0KClcblx0fSwgZnVuY3Rpb24oKXtcblx0ICB2YXIgTyAgICAgPSB0aGlzLl90XG5cdCAgICAsIGtpbmQgID0gdGhpcy5fa1xuXHQgICAgLCBpbmRleCA9IHRoaXMuX2krKztcblx0ICBpZighTyB8fCBpbmRleCA+PSBPLmxlbmd0aCl7XG5cdCAgICB0aGlzLl90ID0gdW5kZWZpbmVkO1xuXHQgICAgcmV0dXJuIHN0ZXAoMSk7XG5cdCAgfVxuXHQgIGlmKGtpbmQgPT0gJ2tleXMnICApcmV0dXJuIHN0ZXAoMCwgaW5kZXgpO1xuXHQgIGlmKGtpbmQgPT0gJ3ZhbHVlcycpcmV0dXJuIHN0ZXAoMCwgT1tpbmRleF0pO1xuXHQgIHJldHVybiBzdGVwKDAsIFtpbmRleCwgT1tpbmRleF1dKTtcblx0fSwgJ3ZhbHVlcycpO1xuXHRcblx0Ly8gYXJndW1lbnRzTGlzdFtAQGl0ZXJhdG9yXSBpcyAlQXJyYXlQcm90b192YWx1ZXMlICg5LjQuNC42LCA5LjQuNC43KVxuXHRJdGVyYXRvcnMuQXJndW1lbnRzID0gSXRlcmF0b3JzLkFycmF5O1xuXHRcblx0YWRkVG9VbnNjb3BhYmxlcygna2V5cycpO1xuXHRhZGRUb1Vuc2NvcGFibGVzKCd2YWx1ZXMnKTtcblx0YWRkVG9VbnNjb3BhYmxlcygnZW50cmllcycpO1xuXG4vKioqLyB9LFxuLyogNjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXsgLyogZW1wdHkgKi8gfTtcblxuLyoqKi8gfSxcbi8qIDY2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRvbmUsIHZhbHVlKXtcblx0ICByZXR1cm4ge3ZhbHVlOiB2YWx1ZSwgZG9uZTogISFkb25lfTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDY3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzLmYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKTtcblxuLyoqKi8gfSxcbi8qIDY4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHsgXCJkZWZhdWx0XCI6IF9fd2VicGFja19yZXF1aXJlX18oNjkpLCBfX2VzTW9kdWxlOiB0cnVlIH07XG5cbi8qKiovIH0sXG4vKiA2OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0X193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oODEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDgyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg4Myk7XG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSkuU3ltYm9sO1xuXG4vKioqLyB9LFxuLyogNzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0Ly8gRUNNQVNjcmlwdCA2IHN5bWJvbHMgc2hpbVxuXHR2YXIgZ2xvYmFsICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KVxuXHQgICwgaGFzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKVxuXHQgICwgREVTQ1JJUFRPUlMgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KVxuXHQgICwgJGV4cG9ydCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KVxuXHQgICwgcmVkZWZpbmUgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KVxuXHQgICwgTUVUQSAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKS5LRVlcblx0ICAsICRmYWlscyAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOClcblx0ICAsIHNoYXJlZCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNClcblx0ICAsIHNldFRvU3RyaW5nVGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MSlcblx0ICAsIHVpZCAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNilcblx0ICAsIHdrcyAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Milcblx0ICAsIHdrc0V4dCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nylcblx0ICAsIHdrc0RlZmluZSAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Milcblx0ICAsIGtleU9mICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mylcblx0ICAsIGVudW1LZXlzICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NClcblx0ICAsIGlzQXJyYXkgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nylcblx0ICAsIGFuT2JqZWN0ICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNClcblx0ICAsIHRvSU9iamVjdCAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mylcblx0ICAsIHRvUHJpbWl0aXZlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMClcblx0ICAsIGNyZWF0ZURlc2MgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSlcblx0ICAsIF9jcmVhdGUgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSlcblx0ICAsIGdPUE5FeHQgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OClcblx0ICAsICRHT1BEICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MClcblx0ICAsICREUCAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMylcblx0ICAsICRrZXlzICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSlcblx0ICAsIGdPUEQgICAgICAgICAgID0gJEdPUEQuZlxuXHQgICwgZFAgICAgICAgICAgICAgPSAkRFAuZlxuXHQgICwgZ09QTiAgICAgICAgICAgPSBnT1BORXh0LmZcblx0ICAsICRTeW1ib2wgICAgICAgID0gZ2xvYmFsLlN5bWJvbFxuXHQgICwgJEpTT04gICAgICAgICAgPSBnbG9iYWwuSlNPTlxuXHQgICwgX3N0cmluZ2lmeSAgICAgPSAkSlNPTiAmJiAkSlNPTi5zdHJpbmdpZnlcblx0ICAsIFBST1RPVFlQRSAgICAgID0gJ3Byb3RvdHlwZSdcblx0ICAsIEhJRERFTiAgICAgICAgID0gd2tzKCdfaGlkZGVuJylcblx0ICAsIFRPX1BSSU1JVElWRSAgID0gd2tzKCd0b1ByaW1pdGl2ZScpXG5cdCAgLCBpc0VudW0gICAgICAgICA9IHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlXG5cdCAgLCBTeW1ib2xSZWdpc3RyeSA9IHNoYXJlZCgnc3ltYm9sLXJlZ2lzdHJ5Jylcblx0ICAsIEFsbFN5bWJvbHMgICAgID0gc2hhcmVkKCdzeW1ib2xzJylcblx0ICAsIE9QU3ltYm9scyAgICAgID0gc2hhcmVkKCdvcC1zeW1ib2xzJylcblx0ICAsIE9iamVjdFByb3RvICAgID0gT2JqZWN0W1BST1RPVFlQRV1cblx0ICAsIFVTRV9OQVRJVkUgICAgID0gdHlwZW9mICRTeW1ib2wgPT0gJ2Z1bmN0aW9uJ1xuXHQgICwgUU9iamVjdCAgICAgICAgPSBnbG9iYWwuUU9iamVjdDtcblx0Ly8gRG9uJ3QgdXNlIHNldHRlcnMgaW4gUXQgU2NyaXB0LCBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvMTczXG5cdHZhciBzZXR0ZXIgPSAhUU9iamVjdCB8fCAhUU9iamVjdFtQUk9UT1RZUEVdIHx8ICFRT2JqZWN0W1BST1RPVFlQRV0uZmluZENoaWxkO1xuXHRcblx0Ly8gZmFsbGJhY2sgZm9yIG9sZCBBbmRyb2lkLCBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9Njg3XG5cdHZhciBzZXRTeW1ib2xEZXNjID0gREVTQ1JJUFRPUlMgJiYgJGZhaWxzKGZ1bmN0aW9uKCl7XG5cdCAgcmV0dXJuIF9jcmVhdGUoZFAoe30sICdhJywge1xuXHQgICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gZFAodGhpcywgJ2EnLCB7dmFsdWU6IDd9KS5hOyB9XG5cdCAgfSkpLmEgIT0gNztcblx0fSkgPyBmdW5jdGlvbihpdCwga2V5LCBEKXtcblx0ICB2YXIgcHJvdG9EZXNjID0gZ09QRChPYmplY3RQcm90bywga2V5KTtcblx0ICBpZihwcm90b0Rlc2MpZGVsZXRlIE9iamVjdFByb3RvW2tleV07XG5cdCAgZFAoaXQsIGtleSwgRCk7XG5cdCAgaWYocHJvdG9EZXNjICYmIGl0ICE9PSBPYmplY3RQcm90bylkUChPYmplY3RQcm90bywga2V5LCBwcm90b0Rlc2MpO1xuXHR9IDogZFA7XG5cdFxuXHR2YXIgd3JhcCA9IGZ1bmN0aW9uKHRhZyl7XG5cdCAgdmFyIHN5bSA9IEFsbFN5bWJvbHNbdGFnXSA9IF9jcmVhdGUoJFN5bWJvbFtQUk9UT1RZUEVdKTtcblx0ICBzeW0uX2sgPSB0YWc7XG5cdCAgcmV0dXJuIHN5bTtcblx0fTtcblx0XG5cdHZhciBpc1N5bWJvbCA9IFVTRV9OQVRJVkUgJiYgdHlwZW9mICRTeW1ib2wuaXRlcmF0b3IgPT0gJ3N5bWJvbCcgPyBmdW5jdGlvbihpdCl7XG5cdCAgcmV0dXJuIHR5cGVvZiBpdCA9PSAnc3ltYm9sJztcblx0fSA6IGZ1bmN0aW9uKGl0KXtcblx0ICByZXR1cm4gaXQgaW5zdGFuY2VvZiAkU3ltYm9sO1xuXHR9O1xuXHRcblx0dmFyICRkZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KGl0LCBrZXksIEQpe1xuXHQgIGlmKGl0ID09PSBPYmplY3RQcm90bykkZGVmaW5lUHJvcGVydHkoT1BTeW1ib2xzLCBrZXksIEQpO1xuXHQgIGFuT2JqZWN0KGl0KTtcblx0ICBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpO1xuXHQgIGFuT2JqZWN0KEQpO1xuXHQgIGlmKGhhcyhBbGxTeW1ib2xzLCBrZXkpKXtcblx0ICAgIGlmKCFELmVudW1lcmFibGUpe1xuXHQgICAgICBpZighaGFzKGl0LCBISURERU4pKWRQKGl0LCBISURERU4sIGNyZWF0ZURlc2MoMSwge30pKTtcblx0ICAgICAgaXRbSElEREVOXVtrZXldID0gdHJ1ZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmKGhhcyhpdCwgSElEREVOKSAmJiBpdFtISURERU5dW2tleV0paXRbSElEREVOXVtrZXldID0gZmFsc2U7XG5cdCAgICAgIEQgPSBfY3JlYXRlKEQsIHtlbnVtZXJhYmxlOiBjcmVhdGVEZXNjKDAsIGZhbHNlKX0pO1xuXHQgICAgfSByZXR1cm4gc2V0U3ltYm9sRGVzYyhpdCwga2V5LCBEKTtcblx0ICB9IHJldHVybiBkUChpdCwga2V5LCBEKTtcblx0fTtcblx0dmFyICRkZWZpbmVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhpdCwgUCl7XG5cdCAgYW5PYmplY3QoaXQpO1xuXHQgIHZhciBrZXlzID0gZW51bUtleXMoUCA9IHRvSU9iamVjdChQKSlcblx0ICAgICwgaSAgICA9IDBcblx0ICAgICwgbCA9IGtleXMubGVuZ3RoXG5cdCAgICAsIGtleTtcblx0ICB3aGlsZShsID4gaSkkZGVmaW5lUHJvcGVydHkoaXQsIGtleSA9IGtleXNbaSsrXSwgUFtrZXldKTtcblx0ICByZXR1cm4gaXQ7XG5cdH07XG5cdHZhciAkY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGl0LCBQKXtcblx0ICByZXR1cm4gUCA9PT0gdW5kZWZpbmVkID8gX2NyZWF0ZShpdCkgOiAkZGVmaW5lUHJvcGVydGllcyhfY3JlYXRlKGl0KSwgUCk7XG5cdH07XG5cdHZhciAkcHJvcGVydHlJc0VudW1lcmFibGUgPSBmdW5jdGlvbiBwcm9wZXJ0eUlzRW51bWVyYWJsZShrZXkpe1xuXHQgIHZhciBFID0gaXNFbnVtLmNhbGwodGhpcywga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKSk7XG5cdCAgaWYodGhpcyA9PT0gT2JqZWN0UHJvdG8gJiYgaGFzKEFsbFN5bWJvbHMsIGtleSkgJiYgIWhhcyhPUFN5bWJvbHMsIGtleSkpcmV0dXJuIGZhbHNlO1xuXHQgIHJldHVybiBFIHx8ICFoYXModGhpcywga2V5KSB8fCAhaGFzKEFsbFN5bWJvbHMsIGtleSkgfHwgaGFzKHRoaXMsIEhJRERFTikgJiYgdGhpc1tISURERU5dW2tleV0gPyBFIDogdHJ1ZTtcblx0fTtcblx0dmFyICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXQsIGtleSl7XG5cdCAgaXQgID0gdG9JT2JqZWN0KGl0KTtcblx0ICBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpO1xuXHQgIGlmKGl0ID09PSBPYmplY3RQcm90byAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhaGFzKE9QU3ltYm9scywga2V5KSlyZXR1cm47XG5cdCAgdmFyIEQgPSBnT1BEKGl0LCBrZXkpO1xuXHQgIGlmKEQgJiYgaGFzKEFsbFN5bWJvbHMsIGtleSkgJiYgIShoYXMoaXQsIEhJRERFTikgJiYgaXRbSElEREVOXVtrZXldKSlELmVudW1lcmFibGUgPSB0cnVlO1xuXHQgIHJldHVybiBEO1xuXHR9O1xuXHR2YXIgJGdldE93blByb3BlcnR5TmFtZXMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKGl0KXtcblx0ICB2YXIgbmFtZXMgID0gZ09QTih0b0lPYmplY3QoaXQpKVxuXHQgICAgLCByZXN1bHQgPSBbXVxuXHQgICAgLCBpICAgICAgPSAwXG5cdCAgICAsIGtleTtcblx0ICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKXtcblx0ICAgIGlmKCFoYXMoQWxsU3ltYm9scywga2V5ID0gbmFtZXNbaSsrXSkgJiYga2V5ICE9IEhJRERFTiAmJiBrZXkgIT0gTUVUQSlyZXN1bHQucHVzaChrZXkpO1xuXHQgIH0gcmV0dXJuIHJlc3VsdDtcblx0fTtcblx0dmFyICRnZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMoaXQpe1xuXHQgIHZhciBJU19PUCAgPSBpdCA9PT0gT2JqZWN0UHJvdG9cblx0ICAgICwgbmFtZXMgID0gZ09QTihJU19PUCA/IE9QU3ltYm9scyA6IHRvSU9iamVjdChpdCkpXG5cdCAgICAsIHJlc3VsdCA9IFtdXG5cdCAgICAsIGkgICAgICA9IDBcblx0ICAgICwga2V5O1xuXHQgIHdoaWxlKG5hbWVzLmxlbmd0aCA+IGkpe1xuXHQgICAgaWYoaGFzKEFsbFN5bWJvbHMsIGtleSA9IG5hbWVzW2krK10pICYmIChJU19PUCA/IGhhcyhPYmplY3RQcm90bywga2V5KSA6IHRydWUpKXJlc3VsdC5wdXNoKEFsbFN5bWJvbHNba2V5XSk7XG5cdCAgfSByZXR1cm4gcmVzdWx0O1xuXHR9O1xuXHRcblx0Ly8gMTkuNC4xLjEgU3ltYm9sKFtkZXNjcmlwdGlvbl0pXG5cdGlmKCFVU0VfTkFUSVZFKXtcblx0ICAkU3ltYm9sID0gZnVuY3Rpb24gU3ltYm9sKCl7XG5cdCAgICBpZih0aGlzIGluc3RhbmNlb2YgJFN5bWJvbCl0aHJvdyBUeXBlRXJyb3IoJ1N5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciEnKTtcblx0ICAgIHZhciB0YWcgPSB1aWQoYXJndW1lbnRzLmxlbmd0aCA+IDAgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQpO1xuXHQgICAgdmFyICRzZXQgPSBmdW5jdGlvbih2YWx1ZSl7XG5cdCAgICAgIGlmKHRoaXMgPT09IE9iamVjdFByb3RvKSRzZXQuY2FsbChPUFN5bWJvbHMsIHZhbHVlKTtcblx0ICAgICAgaWYoaGFzKHRoaXMsIEhJRERFTikgJiYgaGFzKHRoaXNbSElEREVOXSwgdGFnKSl0aGlzW0hJRERFTl1bdGFnXSA9IGZhbHNlO1xuXHQgICAgICBzZXRTeW1ib2xEZXNjKHRoaXMsIHRhZywgY3JlYXRlRGVzYygxLCB2YWx1ZSkpO1xuXHQgICAgfTtcblx0ICAgIGlmKERFU0NSSVBUT1JTICYmIHNldHRlcilzZXRTeW1ib2xEZXNjKE9iamVjdFByb3RvLCB0YWcsIHtjb25maWd1cmFibGU6IHRydWUsIHNldDogJHNldH0pO1xuXHQgICAgcmV0dXJuIHdyYXAodGFnKTtcblx0ICB9O1xuXHQgIHJlZGVmaW5lKCRTeW1ib2xbUFJPVE9UWVBFXSwgJ3RvU3RyaW5nJywgZnVuY3Rpb24gdG9TdHJpbmcoKXtcblx0ICAgIHJldHVybiB0aGlzLl9rO1xuXHQgIH0pO1xuXHRcblx0ICAkR09QRC5mID0gJGdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcblx0ICAkRFAuZiAgID0gJGRlZmluZVByb3BlcnR5O1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oNzkpLmYgPSBnT1BORXh0LmYgPSAkZ2V0T3duUHJvcGVydHlOYW1lcztcblx0ICBfX3dlYnBhY2tfcmVxdWlyZV9fKDc2KS5mICA9ICRwcm9wZXJ0eUlzRW51bWVyYWJsZTtcblx0ICBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KS5mID0gJGdldE93blByb3BlcnR5U3ltYm9scztcblx0XG5cdCAgaWYoREVTQ1JJUFRPUlMgJiYgIV9fd2VicGFja19yZXF1aXJlX18oNDUpKXtcblx0ICAgIHJlZGVmaW5lKE9iamVjdFByb3RvLCAncHJvcGVydHlJc0VudW1lcmFibGUnLCAkcHJvcGVydHlJc0VudW1lcmFibGUsIHRydWUpO1xuXHQgIH1cblx0XG5cdCAgd2tzRXh0LmYgPSBmdW5jdGlvbihuYW1lKXtcblx0ICAgIHJldHVybiB3cmFwKHdrcyhuYW1lKSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuRyArICRleHBvcnQuVyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCB7U3ltYm9sOiAkU3ltYm9sfSk7XG5cdFxuXHRmb3IodmFyIHN5bWJvbHMgPSAoXG5cdCAgLy8gMTkuNC4yLjIsIDE5LjQuMi4zLCAxOS40LjIuNCwgMTkuNC4yLjYsIDE5LjQuMi44LCAxOS40LjIuOSwgMTkuNC4yLjEwLCAxOS40LjIuMTEsIDE5LjQuMi4xMiwgMTkuNC4yLjEzLCAxOS40LjIuMTRcblx0ICAnaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXMnXG5cdCkuc3BsaXQoJywnKSwgaSA9IDA7IHN5bWJvbHMubGVuZ3RoID4gaTsgKXdrcyhzeW1ib2xzW2krK10pO1xuXHRcblx0Zm9yKHZhciBzeW1ib2xzID0gJGtleXMod2tzLnN0b3JlKSwgaSA9IDA7IHN5bWJvbHMubGVuZ3RoID4gaTsgKXdrc0RlZmluZShzeW1ib2xzW2krK10pO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgJ1N5bWJvbCcsIHtcblx0ICAvLyAxOS40LjIuMSBTeW1ib2wuZm9yKGtleSlcblx0ICAnZm9yJzogZnVuY3Rpb24oa2V5KXtcblx0ICAgIHJldHVybiBoYXMoU3ltYm9sUmVnaXN0cnksIGtleSArPSAnJylcblx0ICAgICAgPyBTeW1ib2xSZWdpc3RyeVtrZXldXG5cdCAgICAgIDogU3ltYm9sUmVnaXN0cnlba2V5XSA9ICRTeW1ib2woa2V5KTtcblx0ICB9LFxuXHQgIC8vIDE5LjQuMi41IFN5bWJvbC5rZXlGb3Ioc3ltKVxuXHQgIGtleUZvcjogZnVuY3Rpb24ga2V5Rm9yKGtleSl7XG5cdCAgICBpZihpc1N5bWJvbChrZXkpKXJldHVybiBrZXlPZihTeW1ib2xSZWdpc3RyeSwga2V5KTtcblx0ICAgIHRocm93IFR5cGVFcnJvcihrZXkgKyAnIGlzIG5vdCBhIHN5bWJvbCEnKTtcblx0ICB9LFxuXHQgIHVzZVNldHRlcjogZnVuY3Rpb24oKXsgc2V0dGVyID0gdHJ1ZTsgfSxcblx0ICB1c2VTaW1wbGU6IGZ1bmN0aW9uKCl7IHNldHRlciA9IGZhbHNlOyB9XG5cdH0pO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgJ09iamVjdCcsIHtcblx0ICAvLyAxOS4xLjIuMiBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pXG5cdCAgY3JlYXRlOiAkY3JlYXRlLFxuXHQgIC8vIDE5LjEuMi40IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKVxuXHQgIGRlZmluZVByb3BlcnR5OiAkZGVmaW5lUHJvcGVydHksXG5cdCAgLy8gMTkuMS4yLjMgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcylcblx0ICBkZWZpbmVQcm9wZXJ0aWVzOiAkZGVmaW5lUHJvcGVydGllcyxcblx0ICAvLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApXG5cdCAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLFxuXHQgIC8vIDE5LjEuMi43IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pXG5cdCAgZ2V0T3duUHJvcGVydHlOYW1lczogJGdldE93blByb3BlcnR5TmFtZXMsXG5cdCAgLy8gMTkuMS4yLjggT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhPKVxuXHQgIGdldE93blByb3BlcnR5U3ltYm9sczogJGdldE93blByb3BlcnR5U3ltYm9sc1xuXHR9KTtcblx0XG5cdC8vIDI0LjMuMiBKU09OLnN0cmluZ2lmeSh2YWx1ZSBbLCByZXBsYWNlciBbLCBzcGFjZV1dKVxuXHQkSlNPTiAmJiAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICghVVNFX05BVElWRSB8fCAkZmFpbHMoZnVuY3Rpb24oKXtcblx0ICB2YXIgUyA9ICRTeW1ib2woKTtcblx0ICAvLyBNUyBFZGdlIGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyB7fVxuXHQgIC8vIFdlYktpdCBjb252ZXJ0cyBzeW1ib2wgdmFsdWVzIHRvIEpTT04gYXMgbnVsbFxuXHQgIC8vIFY4IHRocm93cyBvbiBib3hlZCBzeW1ib2xzXG5cdCAgcmV0dXJuIF9zdHJpbmdpZnkoW1NdKSAhPSAnW251bGxdJyB8fCBfc3RyaW5naWZ5KHthOiBTfSkgIT0gJ3t9JyB8fCBfc3RyaW5naWZ5KE9iamVjdChTKSkgIT0gJ3t9Jztcblx0fSkpLCAnSlNPTicsIHtcblx0ICBzdHJpbmdpZnk6IGZ1bmN0aW9uIHN0cmluZ2lmeShpdCl7XG5cdCAgICBpZihpdCA9PT0gdW5kZWZpbmVkIHx8IGlzU3ltYm9sKGl0KSlyZXR1cm47IC8vIElFOCByZXR1cm5zIHN0cmluZyBvbiB1bmRlZmluZWRcblx0ICAgIHZhciBhcmdzID0gW2l0XVxuXHQgICAgICAsIGkgICAgPSAxXG5cdCAgICAgICwgcmVwbGFjZXIsICRyZXBsYWNlcjtcblx0ICAgIHdoaWxlKGFyZ3VtZW50cy5sZW5ndGggPiBpKWFyZ3MucHVzaChhcmd1bWVudHNbaSsrXSk7XG5cdCAgICByZXBsYWNlciA9IGFyZ3NbMV07XG5cdCAgICBpZih0eXBlb2YgcmVwbGFjZXIgPT0gJ2Z1bmN0aW9uJykkcmVwbGFjZXIgPSByZXBsYWNlcjtcblx0ICAgIGlmKCRyZXBsYWNlciB8fCAhaXNBcnJheShyZXBsYWNlcikpcmVwbGFjZXIgPSBmdW5jdGlvbihrZXksIHZhbHVlKXtcblx0ICAgICAgaWYoJHJlcGxhY2VyKXZhbHVlID0gJHJlcGxhY2VyLmNhbGwodGhpcywga2V5LCB2YWx1ZSk7XG5cdCAgICAgIGlmKCFpc1N5bWJvbCh2YWx1ZSkpcmV0dXJuIHZhbHVlO1xuXHQgICAgfTtcblx0ICAgIGFyZ3NbMV0gPSByZXBsYWNlcjtcblx0ICAgIHJldHVybiBfc3RyaW5naWZ5LmFwcGx5KCRKU09OLCBhcmdzKTtcblx0ICB9XG5cdH0pO1xuXHRcblx0Ly8gMTkuNC4zLjQgU3ltYm9sLnByb3RvdHlwZVtAQHRvUHJpbWl0aXZlXShoaW50KVxuXHQkU3ltYm9sW1BST1RPVFlQRV1bVE9fUFJJTUlUSVZFXSB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKSgkU3ltYm9sW1BST1RPVFlQRV0sIFRPX1BSSU1JVElWRSwgJFN5bWJvbFtQUk9UT1RZUEVdLnZhbHVlT2YpO1xuXHQvLyAxOS40LjMuNSBTeW1ib2wucHJvdG90eXBlW0BAdG9TdHJpbmdUYWddXG5cdHNldFRvU3RyaW5nVGFnKCRTeW1ib2wsICdTeW1ib2wnKTtcblx0Ly8gMjAuMi4xLjkgTWF0aFtAQHRvU3RyaW5nVGFnXVxuXHRzZXRUb1N0cmluZ1RhZyhNYXRoLCAnTWF0aCcsIHRydWUpO1xuXHQvLyAyNC4zLjMgSlNPTltAQHRvU3RyaW5nVGFnXVxuXHRzZXRUb1N0cmluZ1RhZyhnbG9iYWwuSlNPTiwgJ0pTT04nLCB0cnVlKTtcblxuLyoqKi8gfSxcbi8qIDcxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgTUVUQSAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KSgnbWV0YScpXG5cdCAgLCBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpXG5cdCAgLCBoYXMgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpXG5cdCAgLCBzZXREZXNjICA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpLmZcblx0ICAsIGlkICAgICAgID0gMDtcblx0dmFyIGlzRXh0ZW5zaWJsZSA9IE9iamVjdC5pc0V4dGVuc2libGUgfHwgZnVuY3Rpb24oKXtcblx0ICByZXR1cm4gdHJ1ZTtcblx0fTtcblx0dmFyIEZSRUVaRSA9ICFfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KShmdW5jdGlvbigpe1xuXHQgIHJldHVybiBpc0V4dGVuc2libGUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSk7XG5cdH0pO1xuXHR2YXIgc2V0TWV0YSA9IGZ1bmN0aW9uKGl0KXtcblx0ICBzZXREZXNjKGl0LCBNRVRBLCB7dmFsdWU6IHtcblx0ICAgIGk6ICdPJyArICsraWQsIC8vIG9iamVjdCBJRFxuXHQgICAgdzoge30gICAgICAgICAgLy8gd2VhayBjb2xsZWN0aW9ucyBJRHNcblx0ICB9fSk7XG5cdH07XG5cdHZhciBmYXN0S2V5ID0gZnVuY3Rpb24oaXQsIGNyZWF0ZSl7XG5cdCAgLy8gcmV0dXJuIHByaW1pdGl2ZSB3aXRoIHByZWZpeFxuXHQgIGlmKCFpc09iamVjdChpdCkpcmV0dXJuIHR5cGVvZiBpdCA9PSAnc3ltYm9sJyA/IGl0IDogKHR5cGVvZiBpdCA9PSAnc3RyaW5nJyA/ICdTJyA6ICdQJykgKyBpdDtcblx0ICBpZighaGFzKGl0LCBNRVRBKSl7XG5cdCAgICAvLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdFxuXHQgICAgaWYoIWlzRXh0ZW5zaWJsZShpdCkpcmV0dXJuICdGJztcblx0ICAgIC8vIG5vdCBuZWNlc3NhcnkgdG8gYWRkIG1ldGFkYXRhXG5cdCAgICBpZighY3JlYXRlKXJldHVybiAnRSc7XG5cdCAgICAvLyBhZGQgbWlzc2luZyBtZXRhZGF0YVxuXHQgICAgc2V0TWV0YShpdCk7XG5cdCAgLy8gcmV0dXJuIG9iamVjdCBJRFxuXHQgIH0gcmV0dXJuIGl0W01FVEFdLmk7XG5cdH07XG5cdHZhciBnZXRXZWFrID0gZnVuY3Rpb24oaXQsIGNyZWF0ZSl7XG5cdCAgaWYoIWhhcyhpdCwgTUVUQSkpe1xuXHQgICAgLy8gY2FuJ3Qgc2V0IG1ldGFkYXRhIHRvIHVuY2F1Z2h0IGZyb3plbiBvYmplY3Rcblx0ICAgIGlmKCFpc0V4dGVuc2libGUoaXQpKXJldHVybiB0cnVlO1xuXHQgICAgLy8gbm90IG5lY2Vzc2FyeSB0byBhZGQgbWV0YWRhdGFcblx0ICAgIGlmKCFjcmVhdGUpcmV0dXJuIGZhbHNlO1xuXHQgICAgLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGFcblx0ICAgIHNldE1ldGEoaXQpO1xuXHQgIC8vIHJldHVybiBoYXNoIHdlYWsgY29sbGVjdGlvbnMgSURzXG5cdCAgfSByZXR1cm4gaXRbTUVUQV0udztcblx0fTtcblx0Ly8gYWRkIG1ldGFkYXRhIG9uIGZyZWV6ZS1mYW1pbHkgbWV0aG9kcyBjYWxsaW5nXG5cdHZhciBvbkZyZWV6ZSA9IGZ1bmN0aW9uKGl0KXtcblx0ICBpZihGUkVFWkUgJiYgbWV0YS5ORUVEICYmIGlzRXh0ZW5zaWJsZShpdCkgJiYgIWhhcyhpdCwgTUVUQSkpc2V0TWV0YShpdCk7XG5cdCAgcmV0dXJuIGl0O1xuXHR9O1xuXHR2YXIgbWV0YSA9IG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIEtFWTogICAgICBNRVRBLFxuXHQgIE5FRUQ6ICAgICBmYWxzZSxcblx0ICBmYXN0S2V5OiAgZmFzdEtleSxcblx0ICBnZXRXZWFrOiAgZ2V0V2Vhayxcblx0ICBvbkZyZWV6ZTogb25GcmVlemVcblx0fTtcblxuLyoqKi8gfSxcbi8qIDcyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2xvYmFsICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KVxuXHQgICwgY29yZSAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KVxuXHQgICwgTElCUkFSWSAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KVxuXHQgICwgd2tzRXh0ICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KVxuXHQgICwgZGVmaW5lUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKS5mO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG5hbWUpe1xuXHQgIHZhciAkU3ltYm9sID0gY29yZS5TeW1ib2wgfHwgKGNvcmUuU3ltYm9sID0gTElCUkFSWSA/IHt9IDogZ2xvYmFsLlN5bWJvbCB8fCB7fSk7XG5cdCAgaWYobmFtZS5jaGFyQXQoMCkgIT0gJ18nICYmICEobmFtZSBpbiAkU3ltYm9sKSlkZWZpbmVQcm9wZXJ0eSgkU3ltYm9sLCBuYW1lLCB7dmFsdWU6IHdrc0V4dC5mKG5hbWUpfSk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA3MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldEtleXMgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpXG5cdCAgLCB0b0lPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmplY3QsIGVsKXtcblx0ICB2YXIgTyAgICAgID0gdG9JT2JqZWN0KG9iamVjdClcblx0ICAgICwga2V5cyAgID0gZ2V0S2V5cyhPKVxuXHQgICAgLCBsZW5ndGggPSBrZXlzLmxlbmd0aFxuXHQgICAgLCBpbmRleCAgPSAwXG5cdCAgICAsIGtleTtcblx0ICB3aGlsZShsZW5ndGggPiBpbmRleClpZihPW2tleSA9IGtleXNbaW5kZXgrK11dID09PSBlbClyZXR1cm4ga2V5O1xuXHR9O1xuXG4vKioqLyB9LFxuLyogNzQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIGFsbCBlbnVtZXJhYmxlIG9iamVjdCBrZXlzLCBpbmNsdWRlcyBzeW1ib2xzXG5cdHZhciBnZXRLZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSlcblx0ICAsIGdPUFMgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KVxuXHQgICwgcElFICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzYpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcblx0ICB2YXIgcmVzdWx0ICAgICA9IGdldEtleXMoaXQpXG5cdCAgICAsIGdldFN5bWJvbHMgPSBnT1BTLmY7XG5cdCAgaWYoZ2V0U3ltYm9scyl7XG5cdCAgICB2YXIgc3ltYm9scyA9IGdldFN5bWJvbHMoaXQpXG5cdCAgICAgICwgaXNFbnVtICA9IHBJRS5mXG5cdCAgICAgICwgaSAgICAgICA9IDBcblx0ICAgICAgLCBrZXk7XG5cdCAgICB3aGlsZShzeW1ib2xzLmxlbmd0aCA+IGkpaWYoaXNFbnVtLmNhbGwoaXQsIGtleSA9IHN5bWJvbHNbaSsrXSkpcmVzdWx0LnB1c2goa2V5KTtcblx0ICB9IHJldHVybiByZXN1bHQ7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA3NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0ZXhwb3J0cy5mID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcblxuLyoqKi8gfSxcbi8qIDc2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRleHBvcnRzLmYgPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblxuLyoqKi8gfSxcbi8qIDc3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyA3LjIuMiBJc0FycmF5KGFyZ3VtZW50KVxuXHR2YXIgY29mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSk7XG5cdG1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiBpc0FycmF5KGFyZyl7XG5cdCAgcmV0dXJuIGNvZihhcmcpID09ICdBcnJheSc7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA3OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gZmFsbGJhY2sgZm9yIElFMTEgYnVnZ3kgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgd2l0aCBpZnJhbWUgYW5kIHdpbmRvd1xuXHR2YXIgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mylcblx0ICAsIGdPUE4gICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpLmZcblx0ICAsIHRvU3RyaW5nICA9IHt9LnRvU3RyaW5nO1xuXHRcblx0dmFyIHdpbmRvd05hbWVzID0gdHlwZW9mIHdpbmRvdyA9PSAnb2JqZWN0JyAmJiB3aW5kb3cgJiYgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXNcblx0ICA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdykgOiBbXTtcblx0XG5cdHZhciBnZXRXaW5kb3dOYW1lcyA9IGZ1bmN0aW9uKGl0KXtcblx0ICB0cnkge1xuXHQgICAgcmV0dXJuIGdPUE4oaXQpO1xuXHQgIH0gY2F0Y2goZSl7XG5cdCAgICByZXR1cm4gd2luZG93TmFtZXMuc2xpY2UoKTtcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cy5mID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhpdCl7XG5cdCAgcmV0dXJuIHdpbmRvd05hbWVzICYmIHRvU3RyaW5nLmNhbGwoaXQpID09ICdbb2JqZWN0IFdpbmRvd10nID8gZ2V0V2luZG93TmFtZXMoaXQpIDogZ09QTih0b0lPYmplY3QoaXQpKTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogNzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDE5LjEuMi43IC8gMTUuMi4zLjQgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTylcblx0dmFyICRrZXlzICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKVxuXHQgICwgaGlkZGVuS2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpLmNvbmNhdCgnbGVuZ3RoJywgJ3Byb3RvdHlwZScpO1xuXHRcblx0ZXhwb3J0cy5mID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgfHwgZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhPKXtcblx0ICByZXR1cm4gJGtleXMoTywgaGlkZGVuS2V5cyk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA4MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHBJRSAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nilcblx0ICAsIGNyZWF0ZURlc2MgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSlcblx0ICAsIHRvSU9iamVjdCAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mylcblx0ICAsIHRvUHJpbWl0aXZlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMClcblx0ICAsIGhhcyAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMilcblx0ICAsIElFOF9ET01fREVGSU5FID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNilcblx0ICAsIGdPUEQgICAgICAgICAgID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcblx0XG5cdGV4cG9ydHMuZiA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpID8gZ09QRCA6IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKXtcblx0ICBPID0gdG9JT2JqZWN0KE8pO1xuXHQgIFAgPSB0b1ByaW1pdGl2ZShQLCB0cnVlKTtcblx0ICBpZihJRThfRE9NX0RFRklORSl0cnkge1xuXHQgICAgcmV0dXJuIGdPUEQoTywgUCk7XG5cdCAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfVxuXHQgIGlmKGhhcyhPLCBQKSlyZXR1cm4gY3JlYXRlRGVzYyghcElFLmYuY2FsbChPLCBQKSwgT1tQXSk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA4MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblxuXG4vKioqLyB9LFxuLyogODIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdF9fd2VicGFja19yZXF1aXJlX18oNzIpKCdhc3luY0l0ZXJhdG9yJyk7XG5cbi8qKiovIH0sXG4vKiA4MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0X193ZWJwYWNrX3JlcXVpcmVfXyg3MikoJ29ic2VydmFibGUnKTtcblxuLyoqKi8gfSxcbi8qIDg0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cdFxuXHR2YXIgX3NldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NSk7XG5cdFxuXHR2YXIgX3NldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NldFByb3RvdHlwZU9mKTtcblx0XG5cdHZhciBfY3JlYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OSk7XG5cdFxuXHR2YXIgX2NyZWF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGUpO1xuXHRcblx0dmFyIF90eXBlb2YyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCk7XG5cdFxuXHR2YXIgX3R5cGVvZjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90eXBlb2YyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcblx0ICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArICh0eXBlb2Ygc3VwZXJDbGFzcyA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiAoMCwgX3R5cGVvZjMuZGVmYXVsdCkoc3VwZXJDbGFzcykpKTtcblx0ICB9XG5cdFxuXHQgIHN1YkNsYXNzLnByb3RvdHlwZSA9ICgwLCBfY3JlYXRlMi5kZWZhdWx0KShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7XG5cdCAgICBjb25zdHJ1Y3Rvcjoge1xuXHQgICAgICB2YWx1ZTogc3ViQ2xhc3MsXG5cdCAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuXHQgICAgICB3cml0YWJsZTogdHJ1ZSxcblx0ICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZjIuZGVmYXVsdCA/ICgwLCBfc2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA4NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg2KSwgX19lc01vZHVsZTogdHJ1ZSB9O1xuXG4vKioqLyB9LFxuLyogODYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdF9fd2VicGFja19yZXF1aXJlX18oODcpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpLk9iamVjdC5zZXRQcm90b3R5cGVPZjtcblxuLyoqKi8gfSxcbi8qIDg3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAxOS4xLjMuMTkgT2JqZWN0LnNldFByb3RvdHlwZU9mKE8sIHByb3RvKVxuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHQkZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHtzZXRQcm90b3R5cGVPZjogX193ZWJwYWNrX3JlcXVpcmVfXyg4OCkuc2V0fSk7XG5cbi8qKiovIH0sXG4vKiA4OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gV29ya3Mgd2l0aCBfX3Byb3RvX18gb25seS4gT2xkIHY4IGNhbid0IHdvcmsgd2l0aCBudWxsIHByb3RvIG9iamVjdHMuXG5cdC8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cdHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpXG5cdCAgLCBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHR2YXIgY2hlY2sgPSBmdW5jdGlvbihPLCBwcm90byl7XG5cdCAgYW5PYmplY3QoTyk7XG5cdCAgaWYoIWlzT2JqZWN0KHByb3RvKSAmJiBwcm90byAhPT0gbnVsbCl0aHJvdyBUeXBlRXJyb3IocHJvdG8gKyBcIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSFcIik7XG5cdH07XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIHNldDogT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8ICgnX19wcm90b19fJyBpbiB7fSA/IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblx0ICAgIGZ1bmN0aW9uKHRlc3QsIGJ1Z2d5LCBzZXQpe1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHNldCA9IF9fd2VicGFja19yZXF1aXJlX18oMjApKEZ1bmN0aW9uLmNhbGwsIF9fd2VicGFja19yZXF1aXJlX18oODApLmYoT2JqZWN0LnByb3RvdHlwZSwgJ19fcHJvdG9fXycpLnNldCwgMik7XG5cdCAgICAgICAgc2V0KHRlc3QsIFtdKTtcblx0ICAgICAgICBidWdneSA9ICEodGVzdCBpbnN0YW5jZW9mIEFycmF5KTtcblx0ICAgICAgfSBjYXRjaChlKXsgYnVnZ3kgPSB0cnVlOyB9XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihPLCBwcm90byl7XG5cdCAgICAgICAgY2hlY2soTywgcHJvdG8pO1xuXHQgICAgICAgIGlmKGJ1Z2d5KU8uX19wcm90b19fID0gcHJvdG87XG5cdCAgICAgICAgZWxzZSBzZXQoTywgcHJvdG8pO1xuXHQgICAgICAgIHJldHVybiBPO1xuXHQgICAgICB9O1xuXHQgICAgfSh7fSwgZmFsc2UpIDogdW5kZWZpbmVkKSxcblx0ICBjaGVjazogY2hlY2tcblx0fTtcblxuLyoqKi8gfSxcbi8qIDg5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHsgXCJkZWZhdWx0XCI6IF9fd2VicGFja19yZXF1aXJlX18oOTApLCBfX2VzTW9kdWxlOiB0cnVlIH07XG5cbi8qKiovIH0sXG4vKiA5MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0X193ZWJwYWNrX3JlcXVpcmVfXyg5MSk7XG5cdHZhciAkT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSkuT2JqZWN0O1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZShQLCBEKXtcblx0ICByZXR1cm4gJE9iamVjdC5jcmVhdGUoUCwgRCk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA5MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KVxuXHQvLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSlcblx0JGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7Y3JlYXRlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KX0pO1xuXG4vKioqLyB9LFxuLyogOTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9yZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oOTMpO1xuXHRcblx0dmFyIF9pbmRleFJlZHVjZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNyk7XG5cdFxuXHR2YXIgX2luZGV4UmVkdWNlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleFJlZHVjZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBzdG9yZSA9ICgwLCBfcmVkdXguY3JlYXRlU3RvcmUpKF9pbmRleFJlZHVjZXIyLmRlZmF1bHQpO1xuXHQvLyBpbXBvcnQgcmVkdWNlclxuXHRleHBvcnRzLmRlZmF1bHQgPSBzdG9yZTtcblxuLyoqKi8gfSxcbi8qIDkzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cdGV4cG9ydHMuY29tcG9zZSA9IGV4cG9ydHMuYXBwbHlNaWRkbGV3YXJlID0gZXhwb3J0cy5iaW5kQWN0aW9uQ3JlYXRvcnMgPSBleHBvcnRzLmNvbWJpbmVSZWR1Y2VycyA9IGV4cG9ydHMuY3JlYXRlU3RvcmUgPSB1bmRlZmluZWQ7XG5cdFxuXHR2YXIgX2NyZWF0ZVN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NCk7XG5cdFxuXHR2YXIgX2NyZWF0ZVN0b3JlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZVN0b3JlKTtcblx0XG5cdHZhciBfY29tYmluZVJlZHVjZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDIpO1xuXHRcblx0dmFyIF9jb21iaW5lUmVkdWNlcnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tYmluZVJlZHVjZXJzKTtcblx0XG5cdHZhciBfYmluZEFjdGlvbkNyZWF0b3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDQpO1xuXHRcblx0dmFyIF9iaW5kQWN0aW9uQ3JlYXRvcnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmluZEFjdGlvbkNyZWF0b3JzKTtcblx0XG5cdHZhciBfYXBwbHlNaWRkbGV3YXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDUpO1xuXHRcblx0dmFyIF9hcHBseU1pZGRsZXdhcmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXBwbHlNaWRkbGV3YXJlKTtcblx0XG5cdHZhciBfY29tcG9zZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTA2KTtcblx0XG5cdHZhciBfY29tcG9zZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb21wb3NlKTtcblx0XG5cdHZhciBfd2FybmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTAzKTtcblx0XG5cdHZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXHRcblx0Lypcblx0KiBUaGlzIGlzIGEgZHVtbXkgZnVuY3Rpb24gdG8gY2hlY2sgaWYgdGhlIGZ1bmN0aW9uIG5hbWUgaGFzIGJlZW4gYWx0ZXJlZCBieSBtaW5pZmljYXRpb24uXG5cdCogSWYgdGhlIGZ1bmN0aW9uIGhhcyBiZWVuIG1pbmlmaWVkIGFuZCBOT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nLCB3YXJuIHRoZSB1c2VyLlxuXHQqL1xuXHRmdW5jdGlvbiBpc0NydXNoZWQoKSB7fVxuXHRcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdHlwZW9mIGlzQ3J1c2hlZC5uYW1lID09PSAnc3RyaW5nJyAmJiBpc0NydXNoZWQubmFtZSAhPT0gJ2lzQ3J1c2hlZCcpIHtcblx0ICAoMCwgX3dhcm5pbmcyW1wiZGVmYXVsdFwiXSkoJ1lvdSBhcmUgY3VycmVudGx5IHVzaW5nIG1pbmlmaWVkIGNvZGUgb3V0c2lkZSBvZiBOT0RFX0VOViA9PT0gXFwncHJvZHVjdGlvblxcJy4gJyArICdUaGlzIG1lYW5zIHRoYXQgeW91IGFyZSBydW5uaW5nIGEgc2xvd2VyIGRldmVsb3BtZW50IGJ1aWxkIG9mIFJlZHV4LiAnICsgJ1lvdSBjYW4gdXNlIGxvb3NlLWVudmlmeSAoaHR0cHM6Ly9naXRodWIuY29tL3plcnRvc2gvbG9vc2UtZW52aWZ5KSBmb3IgYnJvd3NlcmlmeSAnICsgJ29yIERlZmluZVBsdWdpbiBmb3Igd2VicGFjayAoaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zMDAzMDAzMSkgJyArICd0byBlbnN1cmUgeW91IGhhdmUgdGhlIGNvcnJlY3QgY29kZSBmb3IgeW91ciBwcm9kdWN0aW9uIGJ1aWxkLicpO1xuXHR9XG5cdFxuXHRleHBvcnRzLmNyZWF0ZVN0b3JlID0gX2NyZWF0ZVN0b3JlMltcImRlZmF1bHRcIl07XG5cdGV4cG9ydHMuY29tYmluZVJlZHVjZXJzID0gX2NvbWJpbmVSZWR1Y2VyczJbXCJkZWZhdWx0XCJdO1xuXHRleHBvcnRzLmJpbmRBY3Rpb25DcmVhdG9ycyA9IF9iaW5kQWN0aW9uQ3JlYXRvcnMyW1wiZGVmYXVsdFwiXTtcblx0ZXhwb3J0cy5hcHBseU1pZGRsZXdhcmUgPSBfYXBwbHlNaWRkbGV3YXJlMltcImRlZmF1bHRcIl07XG5cdGV4cG9ydHMuY29tcG9zZSA9IF9jb21wb3NlMltcImRlZmF1bHRcIl07XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKSlcblxuLyoqKi8gfSxcbi8qIDk0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRleHBvcnRzLkFjdGlvblR5cGVzID0gdW5kZWZpbmVkO1xuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IGNyZWF0ZVN0b3JlO1xuXHRcblx0dmFyIF9pc1BsYWluT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NSk7XG5cdFxuXHR2YXIgX2lzUGxhaW5PYmplY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaXNQbGFpbk9iamVjdCk7XG5cdFxuXHR2YXIgX3N5bWJvbE9ic2VydmFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMCk7XG5cdFxuXHR2YXIgX3N5bWJvbE9ic2VydmFibGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3ltYm9sT2JzZXJ2YWJsZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBcImRlZmF1bHRcIjogb2JqIH07IH1cblx0XG5cdC8qKlxuXHQgKiBUaGVzZSBhcmUgcHJpdmF0ZSBhY3Rpb24gdHlwZXMgcmVzZXJ2ZWQgYnkgUmVkdXguXG5cdCAqIEZvciBhbnkgdW5rbm93biBhY3Rpb25zLCB5b3UgbXVzdCByZXR1cm4gdGhlIGN1cnJlbnQgc3RhdGUuXG5cdCAqIElmIHRoZSBjdXJyZW50IHN0YXRlIGlzIHVuZGVmaW5lZCwgeW91IG11c3QgcmV0dXJuIHRoZSBpbml0aWFsIHN0YXRlLlxuXHQgKiBEbyBub3QgcmVmZXJlbmNlIHRoZXNlIGFjdGlvbiB0eXBlcyBkaXJlY3RseSBpbiB5b3VyIGNvZGUuXG5cdCAqL1xuXHR2YXIgQWN0aW9uVHlwZXMgPSBleHBvcnRzLkFjdGlvblR5cGVzID0ge1xuXHQgIElOSVQ6ICdAQHJlZHV4L0lOSVQnXG5cdH07XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIFJlZHV4IHN0b3JlIHRoYXQgaG9sZHMgdGhlIHN0YXRlIHRyZWUuXG5cdCAqIFRoZSBvbmx5IHdheSB0byBjaGFuZ2UgdGhlIGRhdGEgaW4gdGhlIHN0b3JlIGlzIHRvIGNhbGwgYGRpc3BhdGNoKClgIG9uIGl0LlxuXHQgKlxuXHQgKiBUaGVyZSBzaG91bGQgb25seSBiZSBhIHNpbmdsZSBzdG9yZSBpbiB5b3VyIGFwcC4gVG8gc3BlY2lmeSBob3cgZGlmZmVyZW50XG5cdCAqIHBhcnRzIG9mIHRoZSBzdGF0ZSB0cmVlIHJlc3BvbmQgdG8gYWN0aW9ucywgeW91IG1heSBjb21iaW5lIHNldmVyYWwgcmVkdWNlcnNcblx0ICogaW50byBhIHNpbmdsZSByZWR1Y2VyIGZ1bmN0aW9uIGJ5IHVzaW5nIGBjb21iaW5lUmVkdWNlcnNgLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWR1Y2VyIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBuZXh0IHN0YXRlIHRyZWUsIGdpdmVuXG5cdCAqIHRoZSBjdXJyZW50IHN0YXRlIHRyZWUgYW5kIHRoZSBhY3Rpb24gdG8gaGFuZGxlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge2FueX0gW2luaXRpYWxTdGF0ZV0gVGhlIGluaXRpYWwgc3RhdGUuIFlvdSBtYXkgb3B0aW9uYWxseSBzcGVjaWZ5IGl0XG5cdCAqIHRvIGh5ZHJhdGUgdGhlIHN0YXRlIGZyb20gdGhlIHNlcnZlciBpbiB1bml2ZXJzYWwgYXBwcywgb3IgdG8gcmVzdG9yZSBhXG5cdCAqIHByZXZpb3VzbHkgc2VyaWFsaXplZCB1c2VyIHNlc3Npb24uXG5cdCAqIElmIHlvdSB1c2UgYGNvbWJpbmVSZWR1Y2Vyc2AgdG8gcHJvZHVjZSB0aGUgcm9vdCByZWR1Y2VyIGZ1bmN0aW9uLCB0aGlzIG11c3QgYmVcblx0ICogYW4gb2JqZWN0IHdpdGggdGhlIHNhbWUgc2hhcGUgYXMgYGNvbWJpbmVSZWR1Y2Vyc2Aga2V5cy5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZW5oYW5jZXIgVGhlIHN0b3JlIGVuaGFuY2VyLiBZb3UgbWF5IG9wdGlvbmFsbHkgc3BlY2lmeSBpdFxuXHQgKiB0byBlbmhhbmNlIHRoZSBzdG9yZSB3aXRoIHRoaXJkLXBhcnR5IGNhcGFiaWxpdGllcyBzdWNoIGFzIG1pZGRsZXdhcmUsXG5cdCAqIHRpbWUgdHJhdmVsLCBwZXJzaXN0ZW5jZSwgZXRjLiBUaGUgb25seSBzdG9yZSBlbmhhbmNlciB0aGF0IHNoaXBzIHdpdGggUmVkdXhcblx0ICogaXMgYGFwcGx5TWlkZGxld2FyZSgpYC5cblx0ICpcblx0ICogQHJldHVybnMge1N0b3JlfSBBIFJlZHV4IHN0b3JlIHRoYXQgbGV0cyB5b3UgcmVhZCB0aGUgc3RhdGUsIGRpc3BhdGNoIGFjdGlvbnNcblx0ICogYW5kIHN1YnNjcmliZSB0byBjaGFuZ2VzLlxuXHQgKi9cblx0ZnVuY3Rpb24gY3JlYXRlU3RvcmUocmVkdWNlciwgaW5pdGlhbFN0YXRlLCBlbmhhbmNlcikge1xuXHQgIHZhciBfcmVmMjtcblx0XG5cdCAgaWYgKHR5cGVvZiBpbml0aWFsU3RhdGUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGVuaGFuY2VyID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgZW5oYW5jZXIgPSBpbml0aWFsU3RhdGU7XG5cdCAgICBpbml0aWFsU3RhdGUgPSB1bmRlZmluZWQ7XG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIGVuaGFuY2VyICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgaWYgKHR5cGVvZiBlbmhhbmNlciAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHRoZSBlbmhhbmNlciB0byBiZSBhIGZ1bmN0aW9uLicpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBlbmhhbmNlcihjcmVhdGVTdG9yZSkocmVkdWNlciwgaW5pdGlhbFN0YXRlKTtcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2YgcmVkdWNlciAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB0aGUgcmVkdWNlciB0byBiZSBhIGZ1bmN0aW9uLicpO1xuXHQgIH1cblx0XG5cdCAgdmFyIGN1cnJlbnRSZWR1Y2VyID0gcmVkdWNlcjtcblx0ICB2YXIgY3VycmVudFN0YXRlID0gaW5pdGlhbFN0YXRlO1xuXHQgIHZhciBjdXJyZW50TGlzdGVuZXJzID0gW107XG5cdCAgdmFyIG5leHRMaXN0ZW5lcnMgPSBjdXJyZW50TGlzdGVuZXJzO1xuXHQgIHZhciBpc0Rpc3BhdGNoaW5nID0gZmFsc2U7XG5cdFxuXHQgIGZ1bmN0aW9uIGVuc3VyZUNhbk11dGF0ZU5leHRMaXN0ZW5lcnMoKSB7XG5cdCAgICBpZiAobmV4dExpc3RlbmVycyA9PT0gY3VycmVudExpc3RlbmVycykge1xuXHQgICAgICBuZXh0TGlzdGVuZXJzID0gY3VycmVudExpc3RlbmVycy5zbGljZSgpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmVhZHMgdGhlIHN0YXRlIHRyZWUgbWFuYWdlZCBieSB0aGUgc3RvcmUuXG5cdCAgICpcblx0ICAgKiBAcmV0dXJucyB7YW55fSBUaGUgY3VycmVudCBzdGF0ZSB0cmVlIG9mIHlvdXIgYXBwbGljYXRpb24uXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gZ2V0U3RhdGUoKSB7XG5cdCAgICByZXR1cm4gY3VycmVudFN0YXRlO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQWRkcyBhIGNoYW5nZSBsaXN0ZW5lci4gSXQgd2lsbCBiZSBjYWxsZWQgYW55IHRpbWUgYW4gYWN0aW9uIGlzIGRpc3BhdGNoZWQsXG5cdCAgICogYW5kIHNvbWUgcGFydCBvZiB0aGUgc3RhdGUgdHJlZSBtYXkgcG90ZW50aWFsbHkgaGF2ZSBjaGFuZ2VkLiBZb3UgbWF5IHRoZW5cblx0ICAgKiBjYWxsIGBnZXRTdGF0ZSgpYCB0byByZWFkIHRoZSBjdXJyZW50IHN0YXRlIHRyZWUgaW5zaWRlIHRoZSBjYWxsYmFjay5cblx0ICAgKlxuXHQgICAqIFlvdSBtYXkgY2FsbCBgZGlzcGF0Y2goKWAgZnJvbSBhIGNoYW5nZSBsaXN0ZW5lciwgd2l0aCB0aGUgZm9sbG93aW5nXG5cdCAgICogY2F2ZWF0czpcblx0ICAgKlxuXHQgICAqIDEuIFRoZSBzdWJzY3JpcHRpb25zIGFyZSBzbmFwc2hvdHRlZCBqdXN0IGJlZm9yZSBldmVyeSBgZGlzcGF0Y2goKWAgY2FsbC5cblx0ICAgKiBJZiB5b3Ugc3Vic2NyaWJlIG9yIHVuc3Vic2NyaWJlIHdoaWxlIHRoZSBsaXN0ZW5lcnMgYXJlIGJlaW5nIGludm9rZWQsIHRoaXNcblx0ICAgKiB3aWxsIG5vdCBoYXZlIGFueSBlZmZlY3Qgb24gdGhlIGBkaXNwYXRjaCgpYCB0aGF0IGlzIGN1cnJlbnRseSBpbiBwcm9ncmVzcy5cblx0ICAgKiBIb3dldmVyLCB0aGUgbmV4dCBgZGlzcGF0Y2goKWAgY2FsbCwgd2hldGhlciBuZXN0ZWQgb3Igbm90LCB3aWxsIHVzZSBhIG1vcmVcblx0ICAgKiByZWNlbnQgc25hcHNob3Qgb2YgdGhlIHN1YnNjcmlwdGlvbiBsaXN0LlxuXHQgICAqXG5cdCAgICogMi4gVGhlIGxpc3RlbmVyIHNob3VsZCBub3QgZXhwZWN0IHRvIHNlZSBhbGwgc3RhdGUgY2hhbmdlcywgYXMgdGhlIHN0YXRlXG5cdCAgICogbWlnaHQgaGF2ZSBiZWVuIHVwZGF0ZWQgbXVsdGlwbGUgdGltZXMgZHVyaW5nIGEgbmVzdGVkIGBkaXNwYXRjaCgpYCBiZWZvcmVcblx0ICAgKiB0aGUgbGlzdGVuZXIgaXMgY2FsbGVkLiBJdCBpcywgaG93ZXZlciwgZ3VhcmFudGVlZCB0aGF0IGFsbCBzdWJzY3JpYmVyc1xuXHQgICAqIHJlZ2lzdGVyZWQgYmVmb3JlIHRoZSBgZGlzcGF0Y2goKWAgc3RhcnRlZCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSBsYXRlc3Rcblx0ICAgKiBzdGF0ZSBieSB0aGUgdGltZSBpdCBleGl0cy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIEEgY2FsbGJhY2sgdG8gYmUgaW52b2tlZCBvbiBldmVyeSBkaXNwYXRjaC5cblx0ICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgZnVuY3Rpb24gdG8gcmVtb3ZlIHRoaXMgY2hhbmdlIGxpc3RlbmVyLlxuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIHN1YnNjcmliZShsaXN0ZW5lcikge1xuXHQgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIGxpc3RlbmVyIHRvIGJlIGEgZnVuY3Rpb24uJyk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGlzU3Vic2NyaWJlZCA9IHRydWU7XG5cdFxuXHQgICAgZW5zdXJlQ2FuTXV0YXRlTmV4dExpc3RlbmVycygpO1xuXHQgICAgbmV4dExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcblx0XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7XG5cdCAgICAgIGlmICghaXNTdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpc1N1YnNjcmliZWQgPSBmYWxzZTtcblx0XG5cdCAgICAgIGVuc3VyZUNhbk11dGF0ZU5leHRMaXN0ZW5lcnMoKTtcblx0ICAgICAgdmFyIGluZGV4ID0gbmV4dExpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcblx0ICAgICAgbmV4dExpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIERpc3BhdGNoZXMgYW4gYWN0aW9uLiBJdCBpcyB0aGUgb25seSB3YXkgdG8gdHJpZ2dlciBhIHN0YXRlIGNoYW5nZS5cblx0ICAgKlxuXHQgICAqIFRoZSBgcmVkdWNlcmAgZnVuY3Rpb24sIHVzZWQgdG8gY3JlYXRlIHRoZSBzdG9yZSwgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGVcblx0ICAgKiBjdXJyZW50IHN0YXRlIHRyZWUgYW5kIHRoZSBnaXZlbiBgYWN0aW9uYC4gSXRzIHJldHVybiB2YWx1ZSB3aWxsXG5cdCAgICogYmUgY29uc2lkZXJlZCB0aGUgKipuZXh0Kiogc3RhdGUgb2YgdGhlIHRyZWUsIGFuZCB0aGUgY2hhbmdlIGxpc3RlbmVyc1xuXHQgICAqIHdpbGwgYmUgbm90aWZpZWQuXG5cdCAgICpcblx0ICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvbmx5IHN1cHBvcnRzIHBsYWluIG9iamVjdCBhY3Rpb25zLiBJZiB5b3Ugd2FudCB0b1xuXHQgICAqIGRpc3BhdGNoIGEgUHJvbWlzZSwgYW4gT2JzZXJ2YWJsZSwgYSB0aHVuaywgb3Igc29tZXRoaW5nIGVsc2UsIHlvdSBuZWVkIHRvXG5cdCAgICogd3JhcCB5b3VyIHN0b3JlIGNyZWF0aW5nIGZ1bmN0aW9uIGludG8gdGhlIGNvcnJlc3BvbmRpbmcgbWlkZGxld2FyZS4gRm9yXG5cdCAgICogZXhhbXBsZSwgc2VlIHRoZSBkb2N1bWVudGF0aW9uIGZvciB0aGUgYHJlZHV4LXRodW5rYCBwYWNrYWdlLiBFdmVuIHRoZVxuXHQgICAqIG1pZGRsZXdhcmUgd2lsbCBldmVudHVhbGx5IGRpc3BhdGNoIHBsYWluIG9iamVjdCBhY3Rpb25zIHVzaW5nIHRoaXMgbWV0aG9kLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IGFjdGlvbiBBIHBsYWluIG9iamVjdCByZXByZXNlbnRpbmcg4oCcd2hhdCBjaGFuZ2Vk4oCdLiBJdCBpc1xuXHQgICAqIGEgZ29vZCBpZGVhIHRvIGtlZXAgYWN0aW9ucyBzZXJpYWxpemFibGUgc28geW91IGNhbiByZWNvcmQgYW5kIHJlcGxheSB1c2VyXG5cdCAgICogc2Vzc2lvbnMsIG9yIHVzZSB0aGUgdGltZSB0cmF2ZWxsaW5nIGByZWR1eC1kZXZ0b29sc2AuIEFuIGFjdGlvbiBtdXN0IGhhdmVcblx0ICAgKiBhIGB0eXBlYCBwcm9wZXJ0eSB3aGljaCBtYXkgbm90IGJlIGB1bmRlZmluZWRgLiBJdCBpcyBhIGdvb2QgaWRlYSB0byB1c2Vcblx0ICAgKiBzdHJpbmcgY29uc3RhbnRzIGZvciBhY3Rpb24gdHlwZXMuXG5cdCAgICpcblx0ICAgKiBAcmV0dXJucyB7T2JqZWN0fSBGb3IgY29udmVuaWVuY2UsIHRoZSBzYW1lIGFjdGlvbiBvYmplY3QgeW91IGRpc3BhdGNoZWQuXG5cdCAgICpcblx0ICAgKiBOb3RlIHRoYXQsIGlmIHlvdSB1c2UgYSBjdXN0b20gbWlkZGxld2FyZSwgaXQgbWF5IHdyYXAgYGRpc3BhdGNoKClgIHRvXG5cdCAgICogcmV0dXJuIHNvbWV0aGluZyBlbHNlIChmb3IgZXhhbXBsZSwgYSBQcm9taXNlIHlvdSBjYW4gYXdhaXQpLlxuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIGRpc3BhdGNoKGFjdGlvbikge1xuXHQgICAgaWYgKCEoMCwgX2lzUGxhaW5PYmplY3QyW1wiZGVmYXVsdFwiXSkoYWN0aW9uKSkge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FjdGlvbnMgbXVzdCBiZSBwbGFpbiBvYmplY3RzLiAnICsgJ1VzZSBjdXN0b20gbWlkZGxld2FyZSBmb3IgYXN5bmMgYWN0aW9ucy4nKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAodHlwZW9mIGFjdGlvbi50eXBlID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FjdGlvbnMgbWF5IG5vdCBoYXZlIGFuIHVuZGVmaW5lZCBcInR5cGVcIiBwcm9wZXJ0eS4gJyArICdIYXZlIHlvdSBtaXNzcGVsbGVkIGEgY29uc3RhbnQ/Jyk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGlzRGlzcGF0Y2hpbmcpIHtcblx0ICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWR1Y2VycyBtYXkgbm90IGRpc3BhdGNoIGFjdGlvbnMuJyk7XG5cdCAgICB9XG5cdFxuXHQgICAgdHJ5IHtcblx0ICAgICAgaXNEaXNwYXRjaGluZyA9IHRydWU7XG5cdCAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRSZWR1Y2VyKGN1cnJlbnRTdGF0ZSwgYWN0aW9uKTtcblx0ICAgIH0gZmluYWxseSB7XG5cdCAgICAgIGlzRGlzcGF0Y2hpbmcgPSBmYWxzZTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGlzdGVuZXJzID0gY3VycmVudExpc3RlbmVycyA9IG5leHRMaXN0ZW5lcnM7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICBsaXN0ZW5lcnNbaV0oKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gYWN0aW9uO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmVwbGFjZXMgdGhlIHJlZHVjZXIgY3VycmVudGx5IHVzZWQgYnkgdGhlIHN0b3JlIHRvIGNhbGN1bGF0ZSB0aGUgc3RhdGUuXG5cdCAgICpcblx0ICAgKiBZb3UgbWlnaHQgbmVlZCB0aGlzIGlmIHlvdXIgYXBwIGltcGxlbWVudHMgY29kZSBzcGxpdHRpbmcgYW5kIHlvdSB3YW50IHRvXG5cdCAgICogbG9hZCBzb21lIG9mIHRoZSByZWR1Y2VycyBkeW5hbWljYWxseS4gWW91IG1pZ2h0IGFsc28gbmVlZCB0aGlzIGlmIHlvdVxuXHQgICAqIGltcGxlbWVudCBhIGhvdCByZWxvYWRpbmcgbWVjaGFuaXNtIGZvciBSZWR1eC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRSZWR1Y2VyIFRoZSByZWR1Y2VyIGZvciB0aGUgc3RvcmUgdG8gdXNlIGluc3RlYWQuXG5cdCAgICogQHJldHVybnMge3ZvaWR9XG5cdCAgICovXG5cdCAgZnVuY3Rpb24gcmVwbGFjZVJlZHVjZXIobmV4dFJlZHVjZXIpIHtcblx0ICAgIGlmICh0eXBlb2YgbmV4dFJlZHVjZXIgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB0aGUgbmV4dFJlZHVjZXIgdG8gYmUgYSBmdW5jdGlvbi4nKTtcblx0ICAgIH1cblx0XG5cdCAgICBjdXJyZW50UmVkdWNlciA9IG5leHRSZWR1Y2VyO1xuXHQgICAgZGlzcGF0Y2goeyB0eXBlOiBBY3Rpb25UeXBlcy5JTklUIH0pO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogSW50ZXJvcGVyYWJpbGl0eSBwb2ludCBmb3Igb2JzZXJ2YWJsZS9yZWFjdGl2ZSBsaWJyYXJpZXMuXG5cdCAgICogQHJldHVybnMge29ic2VydmFibGV9IEEgbWluaW1hbCBvYnNlcnZhYmxlIG9mIHN0YXRlIGNoYW5nZXMuXG5cdCAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZSB0aGUgb2JzZXJ2YWJsZSBwcm9wb3NhbDpcblx0ICAgKiBodHRwczovL2dpdGh1Yi5jb20vemVucGFyc2luZy9lcy1vYnNlcnZhYmxlXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gb2JzZXJ2YWJsZSgpIHtcblx0ICAgIHZhciBfcmVmO1xuXHRcblx0ICAgIHZhciBvdXRlclN1YnNjcmliZSA9IHN1YnNjcmliZTtcblx0ICAgIHJldHVybiBfcmVmID0ge1xuXHQgICAgICAvKipcblx0ICAgICAgICogVGhlIG1pbmltYWwgb2JzZXJ2YWJsZSBzdWJzY3JpcHRpb24gbWV0aG9kLlxuXHQgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JzZXJ2ZXIgQW55IG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIGFzIGFuIG9ic2VydmVyLlxuXHQgICAgICAgKiBUaGUgb2JzZXJ2ZXIgb2JqZWN0IHNob3VsZCBoYXZlIGEgYG5leHRgIG1ldGhvZC5cblx0ICAgICAgICogQHJldHVybnMge3N1YnNjcmlwdGlvbn0gQW4gb2JqZWN0IHdpdGggYW4gYHVuc3Vic2NyaWJlYCBtZXRob2QgdGhhdCBjYW5cblx0ICAgICAgICogYmUgdXNlZCB0byB1bnN1YnNjcmliZSB0aGUgb2JzZXJ2YWJsZSBmcm9tIHRoZSBzdG9yZSwgYW5kIHByZXZlbnQgZnVydGhlclxuXHQgICAgICAgKiBlbWlzc2lvbiBvZiB2YWx1ZXMgZnJvbSB0aGUgb2JzZXJ2YWJsZS5cblx0ICAgICAgICovXG5cdFxuXHQgICAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uIHN1YnNjcmliZShvYnNlcnZlcikge1xuXHQgICAgICAgIGlmICh0eXBlb2Ygb2JzZXJ2ZXIgIT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCB0aGUgb2JzZXJ2ZXIgdG8gYmUgYW4gb2JqZWN0LicpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgZnVuY3Rpb24gb2JzZXJ2ZVN0YXRlKCkge1xuXHQgICAgICAgICAgaWYgKG9ic2VydmVyLm5leHQpIHtcblx0ICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChnZXRTdGF0ZSgpKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIG9ic2VydmVTdGF0ZSgpO1xuXHQgICAgICAgIHZhciB1bnN1YnNjcmliZSA9IG91dGVyU3Vic2NyaWJlKG9ic2VydmVTdGF0ZSk7XG5cdCAgICAgICAgcmV0dXJuIHsgdW5zdWJzY3JpYmU6IHVuc3Vic2NyaWJlIH07XG5cdCAgICAgIH1cblx0ICAgIH0sIF9yZWZbX3N5bWJvbE9ic2VydmFibGUyW1wiZGVmYXVsdFwiXV0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSwgX3JlZjtcblx0ICB9XG5cdFxuXHQgIC8vIFdoZW4gYSBzdG9yZSBpcyBjcmVhdGVkLCBhbiBcIklOSVRcIiBhY3Rpb24gaXMgZGlzcGF0Y2hlZCBzbyB0aGF0IGV2ZXJ5XG5cdCAgLy8gcmVkdWNlciByZXR1cm5zIHRoZWlyIGluaXRpYWwgc3RhdGUuIFRoaXMgZWZmZWN0aXZlbHkgcG9wdWxhdGVzXG5cdCAgLy8gdGhlIGluaXRpYWwgc3RhdGUgdHJlZS5cblx0ICBkaXNwYXRjaCh7IHR5cGU6IEFjdGlvblR5cGVzLklOSVQgfSk7XG5cdFxuXHQgIHJldHVybiBfcmVmMiA9IHtcblx0ICAgIGRpc3BhdGNoOiBkaXNwYXRjaCxcblx0ICAgIHN1YnNjcmliZTogc3Vic2NyaWJlLFxuXHQgICAgZ2V0U3RhdGU6IGdldFN0YXRlLFxuXHQgICAgcmVwbGFjZVJlZHVjZXI6IHJlcGxhY2VSZWR1Y2VyXG5cdCAgfSwgX3JlZjJbX3N5bWJvbE9ic2VydmFibGUyW1wiZGVmYXVsdFwiXV0gPSBvYnNlcnZhYmxlLCBfcmVmMjtcblx0fVxuXG4vKioqLyB9LFxuLyogOTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXRQcm90b3R5cGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2KSxcblx0ICAgIGlzSG9zdE9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oOTgpLFxuXHQgICAgaXNPYmplY3RMaWtlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7XG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi9cblx0dmFyIGZ1bmNUb1N0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZztcblx0XG5cdC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdC8qKiBVc2VkIHRvIGluZmVyIHRoZSBgT2JqZWN0YCBjb25zdHJ1Y3Rvci4gKi9cblx0dmFyIG9iamVjdEN0b3JTdHJpbmcgPSBmdW5jVG9TdHJpbmcuY2FsbChPYmplY3QpO1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcblx0ICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG5cdCAqIG9mIHZhbHVlcy5cblx0ICovXG5cdHZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCB0aGF0IGlzLCBhbiBvYmplY3QgY3JlYXRlZCBieSB0aGVcblx0ICogYE9iamVjdGAgY29uc3RydWN0b3Igb3Igb25lIHdpdGggYSBgW1tQcm90b3R5cGVdXWAgb2YgYG51bGxgLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjguMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwbGFpbiBvYmplY3QsXG5cdCAqICBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIGZ1bmN0aW9uIEZvbygpIHtcblx0ICogICB0aGlzLmEgPSAxO1xuXHQgKiB9XG5cdCAqXG5cdCAqIF8uaXNQbGFpbk9iamVjdChuZXcgRm9vKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICpcblx0ICogXy5pc1BsYWluT2JqZWN0KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqXG5cdCAqIF8uaXNQbGFpbk9iamVjdCh7ICd4JzogMCwgJ3knOiAwIH0pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNQbGFpbk9iamVjdChPYmplY3QuY3JlYXRlKG51bGwpKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWx1ZSkge1xuXHQgIGlmICghaXNPYmplY3RMaWtlKHZhbHVlKSB8fFxuXHQgICAgICBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSAhPSBvYmplY3RUYWcgfHwgaXNIb3N0T2JqZWN0KHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICB2YXIgcHJvdG8gPSBnZXRQcm90b3R5cGUodmFsdWUpO1xuXHQgIGlmIChwcm90byA9PT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHQgIHZhciBDdG9yID0gaGFzT3duUHJvcGVydHkuY2FsbChwcm90bywgJ2NvbnN0cnVjdG9yJykgJiYgcHJvdG8uY29uc3RydWN0b3I7XG5cdCAgcmV0dXJuICh0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmXG5cdCAgICBDdG9yIGluc3RhbmNlb2YgQ3RvciAmJiBmdW5jVG9TdHJpbmcuY2FsbChDdG9yKSA9PSBvYmplY3RDdG9yU3RyaW5nKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc1BsYWluT2JqZWN0O1xuXG5cbi8qKiovIH0sXG4vKiA5NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG92ZXJBcmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk3KTtcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZUdldFByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBgW1tQcm90b3R5cGVdXWAgb2YgYHZhbHVlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHtudWxsfE9iamVjdH0gUmV0dXJucyB0aGUgYFtbUHJvdG90eXBlXV1gLlxuXHQgKi9cblx0dmFyIGdldFByb3RvdHlwZSA9IG92ZXJBcmcobmF0aXZlR2V0UHJvdG90eXBlLCBPYmplY3QpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXRQcm90b3R5cGU7XG5cblxuLyoqKi8gfSxcbi8qIDk3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCBpdHMgZmlyc3QgYXJndW1lbnQgdHJhbnNmb3JtZWQuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHdyYXAuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHRyYW5zZm9ybSBUaGUgYXJndW1lbnQgdHJhbnNmb3JtLlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIG92ZXJBcmcoZnVuYywgdHJhbnNmb3JtKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xuXHQgICAgcmV0dXJuIGZ1bmModHJhbnNmb3JtKGFyZykpO1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gb3ZlckFyZztcblxuXG4vKioqLyB9LFxuLyogOTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGhvc3Qgb2JqZWN0IGluIElFIDwgOS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgaG9zdCBvYmplY3QsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzSG9zdE9iamVjdCh2YWx1ZSkge1xuXHQgIC8vIE1hbnkgaG9zdCBvYmplY3RzIGFyZSBgT2JqZWN0YCBvYmplY3RzIHRoYXQgY2FuIGNvZXJjZSB0byBzdHJpbmdzXG5cdCAgLy8gZGVzcGl0ZSBoYXZpbmcgaW1wcm9wZXJseSBkZWZpbmVkIGB0b1N0cmluZ2AgbWV0aG9kcy5cblx0ICB2YXIgcmVzdWx0ID0gZmFsc2U7XG5cdCAgaWYgKHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlLnRvU3RyaW5nICE9ICdmdW5jdGlvbicpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJlc3VsdCA9ICEhKHZhbHVlICsgJycpO1xuXHQgICAgfSBjYXRjaCAoZSkge31cblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0hvc3RPYmplY3Q7XG5cblxuLyoqKi8gfSxcbi8qIDk5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG5cdCAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKHt9KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzT2JqZWN0TGlrZTtcblxuXG4vKioqLyB9LFxuLyogMTAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7LyogZ2xvYmFsIHdpbmRvdyAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTAxKShnbG9iYWwgfHwgd2luZG93IHx8IHRoaXMpO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMTAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN5bWJvbE9ic2VydmFibGVQb255ZmlsbChyb290KSB7XG5cdFx0dmFyIHJlc3VsdDtcblx0XHR2YXIgU3ltYm9sID0gcm9vdC5TeW1ib2w7XG5cdFxuXHRcdGlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRpZiAoU3ltYm9sLm9ic2VydmFibGUpIHtcblx0XHRcdFx0cmVzdWx0ID0gU3ltYm9sLm9ic2VydmFibGU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXN1bHQgPSBTeW1ib2woJ29ic2VydmFibGUnKTtcblx0XHRcdFx0U3ltYm9sLm9ic2VydmFibGUgPSByZXN1bHQ7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc3VsdCA9ICdAQG9ic2VydmFibGUnO1xuXHRcdH1cblx0XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogMTAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cdGV4cG9ydHNbXCJkZWZhdWx0XCJdID0gY29tYmluZVJlZHVjZXJzO1xuXHRcblx0dmFyIF9jcmVhdGVTdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oOTQpO1xuXHRcblx0dmFyIF9pc1BsYWluT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NSk7XG5cdFxuXHR2YXIgX2lzUGxhaW5PYmplY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaXNQbGFpbk9iamVjdCk7XG5cdFxuXHR2YXIgX3dhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMyk7XG5cdFxuXHR2YXIgX3dhcm5pbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2FybmluZyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBcImRlZmF1bHRcIjogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIGdldFVuZGVmaW5lZFN0YXRlRXJyb3JNZXNzYWdlKGtleSwgYWN0aW9uKSB7XG5cdCAgdmFyIGFjdGlvblR5cGUgPSBhY3Rpb24gJiYgYWN0aW9uLnR5cGU7XG5cdCAgdmFyIGFjdGlvbk5hbWUgPSBhY3Rpb25UeXBlICYmICdcIicgKyBhY3Rpb25UeXBlLnRvU3RyaW5nKCkgKyAnXCInIHx8ICdhbiBhY3Rpb24nO1xuXHRcblx0ICByZXR1cm4gJ0dpdmVuIGFjdGlvbiAnICsgYWN0aW9uTmFtZSArICcsIHJlZHVjZXIgXCInICsga2V5ICsgJ1wiIHJldHVybmVkIHVuZGVmaW5lZC4gJyArICdUbyBpZ25vcmUgYW4gYWN0aW9uLCB5b3UgbXVzdCBleHBsaWNpdGx5IHJldHVybiB0aGUgcHJldmlvdXMgc3RhdGUuJztcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0VW5leHBlY3RlZFN0YXRlU2hhcGVXYXJuaW5nTWVzc2FnZShpbnB1dFN0YXRlLCByZWR1Y2VycywgYWN0aW9uKSB7XG5cdCAgdmFyIHJlZHVjZXJLZXlzID0gT2JqZWN0LmtleXMocmVkdWNlcnMpO1xuXHQgIHZhciBhcmd1bWVudE5hbWUgPSBhY3Rpb24gJiYgYWN0aW9uLnR5cGUgPT09IF9jcmVhdGVTdG9yZS5BY3Rpb25UeXBlcy5JTklUID8gJ2luaXRpYWxTdGF0ZSBhcmd1bWVudCBwYXNzZWQgdG8gY3JlYXRlU3RvcmUnIDogJ3ByZXZpb3VzIHN0YXRlIHJlY2VpdmVkIGJ5IHRoZSByZWR1Y2VyJztcblx0XG5cdCAgaWYgKHJlZHVjZXJLZXlzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgcmV0dXJuICdTdG9yZSBkb2VzIG5vdCBoYXZlIGEgdmFsaWQgcmVkdWNlci4gTWFrZSBzdXJlIHRoZSBhcmd1bWVudCBwYXNzZWQgJyArICd0byBjb21iaW5lUmVkdWNlcnMgaXMgYW4gb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgcmVkdWNlcnMuJztcblx0ICB9XG5cdFxuXHQgIGlmICghKDAsIF9pc1BsYWluT2JqZWN0MltcImRlZmF1bHRcIl0pKGlucHV0U3RhdGUpKSB7XG5cdCAgICByZXR1cm4gJ1RoZSAnICsgYXJndW1lbnROYW1lICsgJyBoYXMgdW5leHBlY3RlZCB0eXBlIG9mIFwiJyArIHt9LnRvU3RyaW5nLmNhbGwoaW5wdXRTdGF0ZSkubWF0Y2goL1xccyhbYS16fEEtWl0rKS8pWzFdICsgJ1wiLiBFeHBlY3RlZCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nICcgKyAoJ2tleXM6IFwiJyArIHJlZHVjZXJLZXlzLmpvaW4oJ1wiLCBcIicpICsgJ1wiJyk7XG5cdCAgfVxuXHRcblx0ICB2YXIgdW5leHBlY3RlZEtleXMgPSBPYmplY3Qua2V5cyhpbnB1dFN0YXRlKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgcmV0dXJuICFyZWR1Y2Vycy5oYXNPd25Qcm9wZXJ0eShrZXkpO1xuXHQgIH0pO1xuXHRcblx0ICBpZiAodW5leHBlY3RlZEtleXMubGVuZ3RoID4gMCkge1xuXHQgICAgcmV0dXJuICdVbmV4cGVjdGVkICcgKyAodW5leHBlY3RlZEtleXMubGVuZ3RoID4gMSA/ICdrZXlzJyA6ICdrZXknKSArICcgJyArICgnXCInICsgdW5leHBlY3RlZEtleXMuam9pbignXCIsIFwiJykgKyAnXCIgZm91bmQgaW4gJyArIGFyZ3VtZW50TmFtZSArICcuICcpICsgJ0V4cGVjdGVkIHRvIGZpbmQgb25lIG9mIHRoZSBrbm93biByZWR1Y2VyIGtleXMgaW5zdGVhZDogJyArICgnXCInICsgcmVkdWNlcktleXMuam9pbignXCIsIFwiJykgKyAnXCIuIFVuZXhwZWN0ZWQga2V5cyB3aWxsIGJlIGlnbm9yZWQuJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhc3NlcnRSZWR1Y2VyU2FuaXR5KHJlZHVjZXJzKSB7XG5cdCAgT2JqZWN0LmtleXMocmVkdWNlcnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHQgICAgdmFyIHJlZHVjZXIgPSByZWR1Y2Vyc1trZXldO1xuXHQgICAgdmFyIGluaXRpYWxTdGF0ZSA9IHJlZHVjZXIodW5kZWZpbmVkLCB7IHR5cGU6IF9jcmVhdGVTdG9yZS5BY3Rpb25UeXBlcy5JTklUIH0pO1xuXHRcblx0ICAgIGlmICh0eXBlb2YgaW5pdGlhbFN0YXRlID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlZHVjZXIgXCInICsga2V5ICsgJ1wiIHJldHVybmVkIHVuZGVmaW5lZCBkdXJpbmcgaW5pdGlhbGl6YXRpb24uICcgKyAnSWYgdGhlIHN0YXRlIHBhc3NlZCB0byB0aGUgcmVkdWNlciBpcyB1bmRlZmluZWQsIHlvdSBtdXN0ICcgKyAnZXhwbGljaXRseSByZXR1cm4gdGhlIGluaXRpYWwgc3RhdGUuIFRoZSBpbml0aWFsIHN0YXRlIG1heSAnICsgJ25vdCBiZSB1bmRlZmluZWQuJyk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHR5cGUgPSAnQEByZWR1eC9QUk9CRV9VTktOT1dOX0FDVElPTl8nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpLnNwbGl0KCcnKS5qb2luKCcuJyk7XG5cdCAgICBpZiAodHlwZW9mIHJlZHVjZXIodW5kZWZpbmVkLCB7IHR5cGU6IHR5cGUgfSkgPT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcignUmVkdWNlciBcIicgKyBrZXkgKyAnXCIgcmV0dXJuZWQgdW5kZWZpbmVkIHdoZW4gcHJvYmVkIHdpdGggYSByYW5kb20gdHlwZS4gJyArICgnRG9uXFwndCB0cnkgdG8gaGFuZGxlICcgKyBfY3JlYXRlU3RvcmUuQWN0aW9uVHlwZXMuSU5JVCArICcgb3Igb3RoZXIgYWN0aW9ucyBpbiBcInJlZHV4LypcIiAnKSArICduYW1lc3BhY2UuIFRoZXkgYXJlIGNvbnNpZGVyZWQgcHJpdmF0ZS4gSW5zdGVhZCwgeW91IG11c3QgcmV0dXJuIHRoZSAnICsgJ2N1cnJlbnQgc3RhdGUgZm9yIGFueSB1bmtub3duIGFjdGlvbnMsIHVubGVzcyBpdCBpcyB1bmRlZmluZWQsICcgKyAnaW4gd2hpY2ggY2FzZSB5b3UgbXVzdCByZXR1cm4gdGhlIGluaXRpYWwgc3RhdGUsIHJlZ2FyZGxlc3Mgb2YgdGhlICcgKyAnYWN0aW9uIHR5cGUuIFRoZSBpbml0aWFsIHN0YXRlIG1heSBub3QgYmUgdW5kZWZpbmVkLicpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVHVybnMgYW4gb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgZGlmZmVyZW50IHJlZHVjZXIgZnVuY3Rpb25zLCBpbnRvIGEgc2luZ2xlXG5cdCAqIHJlZHVjZXIgZnVuY3Rpb24uIEl0IHdpbGwgY2FsbCBldmVyeSBjaGlsZCByZWR1Y2VyLCBhbmQgZ2F0aGVyIHRoZWlyIHJlc3VsdHNcblx0ICogaW50byBhIHNpbmdsZSBzdGF0ZSBvYmplY3QsIHdob3NlIGtleXMgY29ycmVzcG9uZCB0byB0aGUga2V5cyBvZiB0aGUgcGFzc2VkXG5cdCAqIHJlZHVjZXIgZnVuY3Rpb25zLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gcmVkdWNlcnMgQW4gb2JqZWN0IHdob3NlIHZhbHVlcyBjb3JyZXNwb25kIHRvIGRpZmZlcmVudFxuXHQgKiByZWR1Y2VyIGZ1bmN0aW9ucyB0aGF0IG5lZWQgdG8gYmUgY29tYmluZWQgaW50byBvbmUuIE9uZSBoYW5keSB3YXkgdG8gb2J0YWluXG5cdCAqIGl0IGlzIHRvIHVzZSBFUzYgYGltcG9ydCAqIGFzIHJlZHVjZXJzYCBzeW50YXguIFRoZSByZWR1Y2VycyBtYXkgbmV2ZXIgcmV0dXJuXG5cdCAqIHVuZGVmaW5lZCBmb3IgYW55IGFjdGlvbi4gSW5zdGVhZCwgdGhleSBzaG91bGQgcmV0dXJuIHRoZWlyIGluaXRpYWwgc3RhdGVcblx0ICogaWYgdGhlIHN0YXRlIHBhc3NlZCB0byB0aGVtIHdhcyB1bmRlZmluZWQsIGFuZCB0aGUgY3VycmVudCBzdGF0ZSBmb3IgYW55XG5cdCAqIHVucmVjb2duaXplZCBhY3Rpb24uXG5cdCAqXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSByZWR1Y2VyIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBldmVyeSByZWR1Y2VyIGluc2lkZSB0aGVcblx0ICogcGFzc2VkIG9iamVjdCwgYW5kIGJ1aWxkcyBhIHN0YXRlIG9iamVjdCB3aXRoIHRoZSBzYW1lIHNoYXBlLlxuXHQgKi9cblx0ZnVuY3Rpb24gY29tYmluZVJlZHVjZXJzKHJlZHVjZXJzKSB7XG5cdCAgdmFyIHJlZHVjZXJLZXlzID0gT2JqZWN0LmtleXMocmVkdWNlcnMpO1xuXHQgIHZhciBmaW5hbFJlZHVjZXJzID0ge307XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWR1Y2VyS2V5cy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIGtleSA9IHJlZHVjZXJLZXlzW2ldO1xuXHQgICAgaWYgKHR5cGVvZiByZWR1Y2Vyc1trZXldID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIGZpbmFsUmVkdWNlcnNba2V5XSA9IHJlZHVjZXJzW2tleV07XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciBmaW5hbFJlZHVjZXJLZXlzID0gT2JqZWN0LmtleXMoZmluYWxSZWR1Y2Vycyk7XG5cdFxuXHQgIHZhciBzYW5pdHlFcnJvcjtcblx0ICB0cnkge1xuXHQgICAgYXNzZXJ0UmVkdWNlclNhbml0eShmaW5hbFJlZHVjZXJzKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBzYW5pdHlFcnJvciA9IGU7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gY29tYmluYXRpb24oKSB7XG5cdCAgICB2YXIgc3RhdGUgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcblx0ICAgIHZhciBhY3Rpb24gPSBhcmd1bWVudHNbMV07XG5cdFxuXHQgICAgaWYgKHNhbml0eUVycm9yKSB7XG5cdCAgICAgIHRocm93IHNhbml0eUVycm9yO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHZhciB3YXJuaW5nTWVzc2FnZSA9IGdldFVuZXhwZWN0ZWRTdGF0ZVNoYXBlV2FybmluZ01lc3NhZ2Uoc3RhdGUsIGZpbmFsUmVkdWNlcnMsIGFjdGlvbik7XG5cdCAgICAgIGlmICh3YXJuaW5nTWVzc2FnZSkge1xuXHQgICAgICAgICgwLCBfd2FybmluZzJbXCJkZWZhdWx0XCJdKSh3YXJuaW5nTWVzc2FnZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaGFzQ2hhbmdlZCA9IGZhbHNlO1xuXHQgICAgdmFyIG5leHRTdGF0ZSA9IHt9O1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaW5hbFJlZHVjZXJLZXlzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBrZXkgPSBmaW5hbFJlZHVjZXJLZXlzW2ldO1xuXHQgICAgICB2YXIgcmVkdWNlciA9IGZpbmFsUmVkdWNlcnNba2V5XTtcblx0ICAgICAgdmFyIHByZXZpb3VzU3RhdGVGb3JLZXkgPSBzdGF0ZVtrZXldO1xuXHQgICAgICB2YXIgbmV4dFN0YXRlRm9yS2V5ID0gcmVkdWNlcihwcmV2aW91c1N0YXRlRm9yS2V5LCBhY3Rpb24pO1xuXHQgICAgICBpZiAodHlwZW9mIG5leHRTdGF0ZUZvcktleSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gZ2V0VW5kZWZpbmVkU3RhdGVFcnJvck1lc3NhZ2Uoa2V5LCBhY3Rpb24pO1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuXHQgICAgICB9XG5cdCAgICAgIG5leHRTdGF0ZVtrZXldID0gbmV4dFN0YXRlRm9yS2V5O1xuXHQgICAgICBoYXNDaGFuZ2VkID0gaGFzQ2hhbmdlZCB8fCBuZXh0U3RhdGVGb3JLZXkgIT09IHByZXZpb3VzU3RhdGVGb3JLZXk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gaGFzQ2hhbmdlZCA/IG5leHRTdGF0ZSA6IHN0YXRlO1xuXHQgIH07XG5cdH1cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNCkpKVxuXG4vKioqLyB9LFxuLyogMTAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IHdhcm5pbmc7XG5cdC8qKlxuXHQgKiBQcmludHMgYSB3YXJuaW5nIGluIHRoZSBjb25zb2xlIGlmIGl0IGV4aXN0cy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgVGhlIHdhcm5pbmcgbWVzc2FnZS5cblx0ICogQHJldHVybnMge3ZvaWR9XG5cdCAqL1xuXHRmdW5jdGlvbiB3YXJuaW5nKG1lc3NhZ2UpIHtcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXG5cdCAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY29uc29sZS5lcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcblx0ICB9XG5cdCAgLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovXG5cdCAgdHJ5IHtcblx0ICAgIC8vIFRoaXMgZXJyb3Igd2FzIHRocm93biBhcyBhIGNvbnZlbmllbmNlIHNvIHRoYXQgaWYgeW91IGVuYWJsZVxuXHQgICAgLy8gXCJicmVhayBvbiBhbGwgZXhjZXB0aW9uc1wiIGluIHlvdXIgY29uc29sZSxcblx0ICAgIC8vIGl0IHdvdWxkIHBhdXNlIHRoZSBleGVjdXRpb24gYXQgdGhpcyBsaW5lLlxuXHQgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cblx0ICB9IGNhdGNoIChlKSB7fVxuXHQgIC8qIGVzbGludC1lbmFibGUgbm8tZW1wdHkgKi9cblx0fVxuXG4vKioqLyB9LFxuLyogMTA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IGJpbmRBY3Rpb25DcmVhdG9ycztcblx0ZnVuY3Rpb24gYmluZEFjdGlvbkNyZWF0b3IoYWN0aW9uQ3JlYXRvciwgZGlzcGF0Y2gpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIGRpc3BhdGNoKGFjdGlvbkNyZWF0b3IuYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogVHVybnMgYW4gb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgYWN0aW9uIGNyZWF0b3JzLCBpbnRvIGFuIG9iamVjdCB3aXRoIHRoZVxuXHQgKiBzYW1lIGtleXMsIGJ1dCB3aXRoIGV2ZXJ5IGZ1bmN0aW9uIHdyYXBwZWQgaW50byBhIGBkaXNwYXRjaGAgY2FsbCBzbyB0aGV5XG5cdCAqIG1heSBiZSBpbnZva2VkIGRpcmVjdGx5LiBUaGlzIGlzIGp1c3QgYSBjb252ZW5pZW5jZSBtZXRob2QsIGFzIHlvdSBjYW4gY2FsbFxuXHQgKiBgc3RvcmUuZGlzcGF0Y2goTXlBY3Rpb25DcmVhdG9ycy5kb1NvbWV0aGluZygpKWAgeW91cnNlbGYganVzdCBmaW5lLlxuXHQgKlxuXHQgKiBGb3IgY29udmVuaWVuY2UsIHlvdSBjYW4gYWxzbyBwYXNzIGEgc2luZ2xlIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCxcblx0ICogYW5kIGdldCBhIGZ1bmN0aW9uIGluIHJldHVybi5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R9IGFjdGlvbkNyZWF0b3JzIEFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIGFjdGlvblxuXHQgKiBjcmVhdG9yIGZ1bmN0aW9ucy4gT25lIGhhbmR5IHdheSB0byBvYnRhaW4gaXQgaXMgdG8gdXNlIEVTNiBgaW1wb3J0ICogYXNgXG5cdCAqIHN5bnRheC4gWW91IG1heSBhbHNvIHBhc3MgYSBzaW5nbGUgZnVuY3Rpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGRpc3BhdGNoIFRoZSBgZGlzcGF0Y2hgIGZ1bmN0aW9uIGF2YWlsYWJsZSBvbiB5b3VyIFJlZHV4XG5cdCAqIHN0b3JlLlxuXHQgKlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb258T2JqZWN0fSBUaGUgb2JqZWN0IG1pbWlja2luZyB0aGUgb3JpZ2luYWwgb2JqZWN0LCBidXQgd2l0aFxuXHQgKiBldmVyeSBhY3Rpb24gY3JlYXRvciB3cmFwcGVkIGludG8gdGhlIGBkaXNwYXRjaGAgY2FsbC4gSWYgeW91IHBhc3NlZCBhXG5cdCAqIGZ1bmN0aW9uIGFzIGBhY3Rpb25DcmVhdG9yc2AsIHRoZSByZXR1cm4gdmFsdWUgd2lsbCBhbHNvIGJlIGEgc2luZ2xlXG5cdCAqIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmluZEFjdGlvbkNyZWF0b3JzKGFjdGlvbkNyZWF0b3JzLCBkaXNwYXRjaCkge1xuXHQgIGlmICh0eXBlb2YgYWN0aW9uQ3JlYXRvcnMgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiBiaW5kQWN0aW9uQ3JlYXRvcihhY3Rpb25DcmVhdG9ycywgZGlzcGF0Y2gpO1xuXHQgIH1cblx0XG5cdCAgaWYgKHR5cGVvZiBhY3Rpb25DcmVhdG9ycyAhPT0gJ29iamVjdCcgfHwgYWN0aW9uQ3JlYXRvcnMgPT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignYmluZEFjdGlvbkNyZWF0b3JzIGV4cGVjdGVkIGFuIG9iamVjdCBvciBhIGZ1bmN0aW9uLCBpbnN0ZWFkIHJlY2VpdmVkICcgKyAoYWN0aW9uQ3JlYXRvcnMgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgYWN0aW9uQ3JlYXRvcnMpICsgJy4gJyArICdEaWQgeW91IHdyaXRlIFwiaW1wb3J0IEFjdGlvbkNyZWF0b3JzIGZyb21cIiBpbnN0ZWFkIG9mIFwiaW1wb3J0ICogYXMgQWN0aW9uQ3JlYXRvcnMgZnJvbVwiPycpO1xuXHQgIH1cblx0XG5cdCAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhY3Rpb25DcmVhdG9ycyk7XG5cdCAgdmFyIGJvdW5kQWN0aW9uQ3JlYXRvcnMgPSB7fTtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuXHQgICAgdmFyIGFjdGlvbkNyZWF0b3IgPSBhY3Rpb25DcmVhdG9yc1trZXldO1xuXHQgICAgaWYgKHR5cGVvZiBhY3Rpb25DcmVhdG9yID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIGJvdW5kQWN0aW9uQ3JlYXRvcnNba2V5XSA9IGJpbmRBY3Rpb25DcmVhdG9yKGFjdGlvbkNyZWF0b3IsIGRpc3BhdGNoKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGJvdW5kQWN0aW9uQ3JlYXRvcnM7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDEwNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cdFxuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IGFwcGx5TWlkZGxld2FyZTtcblx0XG5cdHZhciBfY29tcG9zZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTA2KTtcblx0XG5cdHZhciBfY29tcG9zZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb21wb3NlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBzdG9yZSBlbmhhbmNlciB0aGF0IGFwcGxpZXMgbWlkZGxld2FyZSB0byB0aGUgZGlzcGF0Y2ggbWV0aG9kXG5cdCAqIG9mIHRoZSBSZWR1eCBzdG9yZS4gVGhpcyBpcyBoYW5keSBmb3IgYSB2YXJpZXR5IG9mIHRhc2tzLCBzdWNoIGFzIGV4cHJlc3Npbmdcblx0ICogYXN5bmNocm9ub3VzIGFjdGlvbnMgaW4gYSBjb25jaXNlIG1hbm5lciwgb3IgbG9nZ2luZyBldmVyeSBhY3Rpb24gcGF5bG9hZC5cblx0ICpcblx0ICogU2VlIGByZWR1eC10aHVua2AgcGFja2FnZSBhcyBhbiBleGFtcGxlIG9mIHRoZSBSZWR1eCBtaWRkbGV3YXJlLlxuXHQgKlxuXHQgKiBCZWNhdXNlIG1pZGRsZXdhcmUgaXMgcG90ZW50aWFsbHkgYXN5bmNocm9ub3VzLCB0aGlzIHNob3VsZCBiZSB0aGUgZmlyc3Rcblx0ICogc3RvcmUgZW5oYW5jZXIgaW4gdGhlIGNvbXBvc2l0aW9uIGNoYWluLlxuXHQgKlxuXHQgKiBOb3RlIHRoYXQgZWFjaCBtaWRkbGV3YXJlIHdpbGwgYmUgZ2l2ZW4gdGhlIGBkaXNwYXRjaGAgYW5kIGBnZXRTdGF0ZWAgZnVuY3Rpb25zXG5cdCAqIGFzIG5hbWVkIGFyZ3VtZW50cy5cblx0ICpcblx0ICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gbWlkZGxld2FyZXMgVGhlIG1pZGRsZXdhcmUgY2hhaW4gdG8gYmUgYXBwbGllZC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBBIHN0b3JlIGVuaGFuY2VyIGFwcGx5aW5nIHRoZSBtaWRkbGV3YXJlLlxuXHQgKi9cblx0ZnVuY3Rpb24gYXBwbHlNaWRkbGV3YXJlKCkge1xuXHQgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBtaWRkbGV3YXJlcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgbWlkZGxld2FyZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gKGNyZWF0ZVN0b3JlKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKHJlZHVjZXIsIGluaXRpYWxTdGF0ZSwgZW5oYW5jZXIpIHtcblx0ICAgICAgdmFyIHN0b3JlID0gY3JlYXRlU3RvcmUocmVkdWNlciwgaW5pdGlhbFN0YXRlLCBlbmhhbmNlcik7XG5cdCAgICAgIHZhciBfZGlzcGF0Y2ggPSBzdG9yZS5kaXNwYXRjaDtcblx0ICAgICAgdmFyIGNoYWluID0gW107XG5cdFxuXHQgICAgICB2YXIgbWlkZGxld2FyZUFQSSA9IHtcblx0ICAgICAgICBnZXRTdGF0ZTogc3RvcmUuZ2V0U3RhdGUsXG5cdCAgICAgICAgZGlzcGF0Y2g6IGZ1bmN0aW9uIGRpc3BhdGNoKGFjdGlvbikge1xuXHQgICAgICAgICAgcmV0dXJuIF9kaXNwYXRjaChhY3Rpb24pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgICAgY2hhaW4gPSBtaWRkbGV3YXJlcy5tYXAoZnVuY3Rpb24gKG1pZGRsZXdhcmUpIHtcblx0ICAgICAgICByZXR1cm4gbWlkZGxld2FyZShtaWRkbGV3YXJlQVBJKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIF9kaXNwYXRjaCA9IF9jb21wb3NlMltcImRlZmF1bHRcIl0uYXBwbHkodW5kZWZpbmVkLCBjaGFpbikoc3RvcmUuZGlzcGF0Y2gpO1xuXHRcblx0ICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdG9yZSwge1xuXHQgICAgICAgIGRpc3BhdGNoOiBfZGlzcGF0Y2hcblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHQgIH07XG5cdH1cblxuLyoqKi8gfSxcbi8qIDEwNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IGNvbXBvc2U7XG5cdC8qKlxuXHQgKiBDb21wb3NlcyBzaW5nbGUtYXJndW1lbnQgZnVuY3Rpb25zIGZyb20gcmlnaHQgdG8gbGVmdC4gVGhlIHJpZ2h0bW9zdFxuXHQgKiBmdW5jdGlvbiBjYW4gdGFrZSBtdWx0aXBsZSBhcmd1bWVudHMgYXMgaXQgcHJvdmlkZXMgdGhlIHNpZ25hdHVyZSBmb3Jcblx0ICogdGhlIHJlc3VsdGluZyBjb21wb3NpdGUgZnVuY3Rpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7Li4uRnVuY3Rpb259IGZ1bmNzIFRoZSBmdW5jdGlvbnMgdG8gY29tcG9zZS5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIG9idGFpbmVkIGJ5IGNvbXBvc2luZyB0aGUgYXJndW1lbnQgZnVuY3Rpb25zXG5cdCAqIGZyb20gcmlnaHQgdG8gbGVmdC4gRm9yIGV4YW1wbGUsIGNvbXBvc2UoZiwgZywgaCkgaXMgaWRlbnRpY2FsIHRvIGRvaW5nXG5cdCAqICguLi5hcmdzKSA9PiBmKGcoaCguLi5hcmdzKSkpLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBvc2UoKSB7XG5cdCAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGZ1bmNzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG5cdCAgICBmdW5jc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0ICB9XG5cdFxuXHQgIGlmIChmdW5jcy5sZW5ndGggPT09IDApIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiAoYXJnKSB7XG5cdCAgICAgIHJldHVybiBhcmc7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgX3JldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGxhc3QgPSBmdW5jc1tmdW5jcy5sZW5ndGggLSAxXTtcblx0ICAgICAgdmFyIHJlc3QgPSBmdW5jcy5zbGljZSgwLCAtMSk7XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgdjogZnVuY3Rpb24gdigpIHtcblx0ICAgICAgICAgIHJldHVybiByZXN0LnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChjb21wb3NlZCwgZikge1xuXHQgICAgICAgICAgICByZXR1cm4gZihjb21wb3NlZCk7XG5cdCAgICAgICAgICB9LCBsYXN0LmFwcGx5KHVuZGVmaW5lZCwgYXJndW1lbnRzKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHQgICAgfSgpO1xuXHRcblx0ICAgIGlmICh0eXBlb2YgX3JldCA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcblx0ICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDEwNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDgpO1xuXHRcblx0dmFyIF9leHRlbmRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZHMyKTtcblx0XG5cdHZhciBfcmVkdXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkzKTtcblx0XG5cdHZhciBfcmVkdXhVbmRvID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTMpO1xuXHRcblx0dmFyIF9yZWR1eFVuZG8yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVkdXhVbmRvKTtcblx0XG5cdHZhciBfcmVzaXplUmVkdWNlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTE0KTtcblx0XG5cdHZhciBfcmVzaXplUmVkdWNlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZXNpemVSZWR1Y2VyKTtcblx0XG5cdHZhciBfcG9pbnRzUmVkdWNlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTE3KTtcblx0XG5cdHZhciBfcG9pbnRzUmVkdWNlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb2ludHNSZWR1Y2VyKTtcblx0XG5cdHZhciBfcG9pbnRDb250cm9sc1JlZHVjZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyOSk7XG5cdFxuXHR2YXIgX3BvaW50Q29udHJvbHNSZWR1Y2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BvaW50Q29udHJvbHNSZWR1Y2VyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHQvLyByZWR1eC11bmRvIGhpZ2hlci1vcmRlciByZWR1Y2VyXG5cdHZhciBVTkRPQUJMRV9PUFRTID0ge1xuXHQgIGxpbWl0OiAxMCxcblx0ICBmaWx0ZXI6IGZ1bmN0aW9uIGZpbHRlckFjdGlvbnMoYWN0aW9uLCBjdXJyU3RhdGUsIGhpc3RvcnkpIHtcblx0ICAgIHJldHVybiBhY3Rpb24uaXNSZWNvcmQ7IC8vIG9ubHkgYWRkIHRvIGhpc3RvcnkgaWYgaXNSZWNvcmQgc2V0IG9uIGFjdGlvblxuXHQgIH0sXG5cdCAgZGVidWc6IGZhbHNlXG5cdH07IC8vIFJlZHV4IHV0aWxpdHkgZnVuY3Rpb25zXG5cdFxuXHRcblx0dmFyIHJlZHVjZXIgPSAoMCwgX3JlZHV4LmNvbWJpbmVSZWR1Y2Vycykoe1xuXHQgIHBvaW50Q29udHJvbHM6ICgwLCBfcmVkdXhVbmRvMi5kZWZhdWx0KShfcG9pbnRDb250cm9sc1JlZHVjZXIyLmRlZmF1bHQsICgwLCBfZXh0ZW5kczMuZGVmYXVsdCkoe30sIFVORE9BQkxFX09QVFMpKSxcblx0ICByZXNpemU6IF9yZXNpemVSZWR1Y2VyMi5kZWZhdWx0LFxuXHQgIHBvaW50czogKDAsIF9yZWR1eFVuZG8yLmRlZmF1bHQpKF9wb2ludHNSZWR1Y2VyMi5kZWZhdWx0LCAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBVTkRPQUJMRV9PUFRTKSlcblx0fSk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSByZWR1Y2VyO1xuXG4vKioqLyB9LFxuLyogMTA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cdFxuXHR2YXIgX2Fzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTA5KTtcblx0XG5cdHZhciBfYXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Fzc2lnbik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gX2Fzc2lnbjIuZGVmYXVsdCB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG5cdFxuXHQgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiB0YXJnZXQ7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxMDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogX193ZWJwYWNrX3JlcXVpcmVfXygxMTApLCBfX2VzTW9kdWxlOiB0cnVlIH07XG5cbi8qKiovIH0sXG4vKiAxMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdF9fd2VicGFja19yZXF1aXJlX18oMTExKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KS5PYmplY3QuYXNzaWduO1xuXG4vKioqLyB9LFxuLyogMTExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAxOS4xLjMuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlKVxuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYsICdPYmplY3QnLCB7YXNzaWduOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMil9KTtcblxuLyoqKi8gfSxcbi8qIDExMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHQvLyAxOS4xLjIuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlLCAuLi4pXG5cdHZhciBnZXRLZXlzICA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpXG5cdCAgLCBnT1BTICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzUpXG5cdCAgLCBwSUUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzYpXG5cdCAgLCB0b09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oOSlcblx0ICAsIElPYmplY3QgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NClcblx0ICAsICRhc3NpZ24gID0gT2JqZWN0LmFzc2lnbjtcblx0XG5cdC8vIHNob3VsZCB3b3JrIHdpdGggc3ltYm9scyBhbmQgc2hvdWxkIGhhdmUgZGV0ZXJtaW5pc3RpYyBwcm9wZXJ0eSBvcmRlciAoVjggYnVnKVxuXHRtb2R1bGUuZXhwb3J0cyA9ICEkYXNzaWduIHx8IF9fd2VicGFja19yZXF1aXJlX18oMjgpKGZ1bmN0aW9uKCl7XG5cdCAgdmFyIEEgPSB7fVxuXHQgICAgLCBCID0ge31cblx0ICAgICwgUyA9IFN5bWJvbCgpXG5cdCAgICAsIEsgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3QnO1xuXHQgIEFbU10gPSA3O1xuXHQgIEsuc3BsaXQoJycpLmZvckVhY2goZnVuY3Rpb24oayl7IEJba10gPSBrOyB9KTtcblx0ICByZXR1cm4gJGFzc2lnbih7fSwgQSlbU10gIT0gNyB8fCBPYmplY3Qua2V5cygkYXNzaWduKHt9LCBCKSkuam9pbignJykgIT0gSztcblx0fSkgPyBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCBzb3VyY2UpeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cdCAgdmFyIFQgICAgID0gdG9PYmplY3QodGFyZ2V0KVxuXHQgICAgLCBhTGVuICA9IGFyZ3VtZW50cy5sZW5ndGhcblx0ICAgICwgaW5kZXggPSAxXG5cdCAgICAsIGdldFN5bWJvbHMgPSBnT1BTLmZcblx0ICAgICwgaXNFbnVtICAgICA9IHBJRS5mO1xuXHQgIHdoaWxlKGFMZW4gPiBpbmRleCl7XG5cdCAgICB2YXIgUyAgICAgID0gSU9iamVjdChhcmd1bWVudHNbaW5kZXgrK10pXG5cdCAgICAgICwga2V5cyAgID0gZ2V0U3ltYm9scyA/IGdldEtleXMoUykuY29uY2F0KGdldFN5bWJvbHMoUykpIDogZ2V0S2V5cyhTKVxuXHQgICAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoXG5cdCAgICAgICwgaiAgICAgID0gMFxuXHQgICAgICAsIGtleTtcblx0ICAgIHdoaWxlKGxlbmd0aCA+IGopaWYoaXNFbnVtLmNhbGwoUywga2V5ID0ga2V5c1tqKytdKSlUW2tleV0gPSBTW2tleV07XG5cdCAgfSByZXR1cm4gVDtcblx0fSA6ICRhc3NpZ247XG5cbi8qKiovIH0sXG4vKiAxMTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblx0XG5cdGV4cG9ydHMucGFyc2VBY3Rpb25zID0gcGFyc2VBY3Rpb25zO1xuXHRleHBvcnRzLmRlZmF1bHQgPSB1bmRvYWJsZTtcblx0ZXhwb3J0cy5kaXN0aW5jdFN0YXRlID0gZGlzdGluY3RTdGF0ZTtcblx0ZXhwb3J0cy5pbmNsdWRlQWN0aW9uID0gaW5jbHVkZUFjdGlvbjtcblx0ZXhwb3J0cy5pZkFjdGlvbiA9IGlmQWN0aW9uO1xuXHRleHBvcnRzLmV4Y2x1ZGVBY3Rpb24gPSBleGNsdWRlQWN0aW9uO1xuXHRcblx0ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cdFxuXHQvLyBkZWJ1ZyBvdXRwdXRcblx0dmFyIF9fREVCVUdfXyA9IHVuZGVmaW5lZDtcblx0ZnVuY3Rpb24gZGVidWcoKSB7XG5cdCAgaWYgKF9fREVCVUdfXykge1xuXHQgICAgdmFyIF9jb25zb2xlO1xuXHRcblx0ICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG5cdCAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFjb25zb2xlLmdyb3VwKSB7XG5cdCAgICAgIGFyZ3MudW5zaGlmdCgnJWNyZWR1eC11bmRvJywgJ2ZvbnQtc3R5bGU6IGl0YWxpYycpO1xuXHQgICAgfVxuXHQgICAgKF9jb25zb2xlID0gY29uc29sZSkubG9nLmFwcGx5KF9jb25zb2xlLCBhcmdzKTtcblx0ICB9XG5cdH1cblx0ZnVuY3Rpb24gZGVidWdTdGFydChhY3Rpb24sIHN0YXRlKSB7XG5cdCAgaWYgKF9fREVCVUdfXykge1xuXHQgICAgdmFyIGFyZ3MgPSBbJ2FjdGlvbicsIGFjdGlvbi50eXBlXTtcblx0ICAgIGlmIChjb25zb2xlLmdyb3VwKSB7XG5cdCAgICAgIHZhciBfY29uc29sZTI7XG5cdFxuXHQgICAgICBhcmdzLnVuc2hpZnQoJyVjcmVkdXgtdW5kbycsICdmb250LXN0eWxlOiBpdGFsaWMnKTtcblx0ICAgICAgKF9jb25zb2xlMiA9IGNvbnNvbGUpLmdyb3VwQ29sbGFwc2VkLmFwcGx5KF9jb25zb2xlMiwgYXJncyk7XG5cdCAgICAgIGNvbnNvbGUubG9nKCdyZWNlaXZlZCcsIHsgc3RhdGU6IHN0YXRlLCBhY3Rpb246IGFjdGlvbiB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGRlYnVnLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdGZ1bmN0aW9uIGRlYnVnRW5kKCkge1xuXHQgIGlmIChfX0RFQlVHX18pIHtcblx0ICAgIHJldHVybiBjb25zb2xlLmdyb3VwRW5kICYmIGNvbnNvbGUuZ3JvdXBFbmQoKTtcblx0ICB9XG5cdH1cblx0Ly8gL2RlYnVnIG91dHB1dFxuXHRcblx0Ly8gYWN0aW9uIHR5cGVzXG5cdHZhciBBY3Rpb25UeXBlcyA9IGV4cG9ydHMuQWN0aW9uVHlwZXMgPSB7XG5cdCAgVU5ETzogJ0BAcmVkdXgtdW5kby9VTkRPJyxcblx0ICBSRURPOiAnQEByZWR1eC11bmRvL1JFRE8nLFxuXHQgIEpVTVBfVE9fRlVUVVJFOiAnQEByZWR1eC11bmRvL0pVTVBfVE9fRlVUVVJFJyxcblx0ICBKVU1QX1RPX1BBU1Q6ICdAQHJlZHV4LXVuZG8vSlVNUF9UT19QQVNUJ1xuXHR9O1xuXHQvLyAvYWN0aW9uIHR5cGVzXG5cdFxuXHQvLyBhY3Rpb24gY3JlYXRvcnMgdG8gY2hhbmdlIHRoZSBzdGF0ZVxuXHR2YXIgQWN0aW9uQ3JlYXRvcnMgPSBleHBvcnRzLkFjdGlvbkNyZWF0b3JzID0ge1xuXHQgIHVuZG86IGZ1bmN0aW9uIHVuZG8oKSB7XG5cdCAgICByZXR1cm4geyB0eXBlOiBBY3Rpb25UeXBlcy5VTkRPIH07XG5cdCAgfSxcblx0ICByZWRvOiBmdW5jdGlvbiByZWRvKCkge1xuXHQgICAgcmV0dXJuIHsgdHlwZTogQWN0aW9uVHlwZXMuUkVETyB9O1xuXHQgIH0sXG5cdCAganVtcFRvRnV0dXJlOiBmdW5jdGlvbiBqdW1wVG9GdXR1cmUoaW5kZXgpIHtcblx0ICAgIHJldHVybiB7IHR5cGU6IEFjdGlvblR5cGVzLkpVTVBfVE9fRlVUVVJFLCBpbmRleDogaW5kZXggfTtcblx0ICB9LFxuXHQgIGp1bXBUb1Bhc3Q6IGZ1bmN0aW9uIGp1bXBUb1Bhc3QoaW5kZXgpIHtcblx0ICAgIHJldHVybiB7IHR5cGU6IEFjdGlvblR5cGVzLkpVTVBfVE9fUEFTVCwgaW5kZXg6IGluZGV4IH07XG5cdCAgfVxuXHR9O1xuXHQvLyAvYWN0aW9uIGNyZWF0b3JzXG5cdFxuXHQvLyBsZW5ndGg6IGdldCBsZW5ndGggb2YgaGlzdG9yeVxuXHRmdW5jdGlvbiBsZW5ndGgoaGlzdG9yeSkge1xuXHQgIHZhciBwYXN0ID0gaGlzdG9yeS5wYXN0O1xuXHQgIHZhciBmdXR1cmUgPSBoaXN0b3J5LmZ1dHVyZTtcblx0XG5cdCAgcmV0dXJuIHBhc3QubGVuZ3RoICsgMSArIGZ1dHVyZS5sZW5ndGg7XG5cdH1cblx0Ly8gL2xlbmd0aFxuXHRcblx0Ly8gaW5zZXJ0OiBpbnNlcnQgYHN0YXRlYCBpbnRvIGhpc3RvcnksIHdoaWNoIG1lYW5zIGFkZGluZyB0aGUgY3VycmVudCBzdGF0ZVxuXHQvLyAgICAgICAgIGludG8gYHBhc3RgLCBzZXR0aW5nIHRoZSBuZXcgYHN0YXRlYCBhcyBgcHJlc2VudGAgYW5kIGVyYXNpbmdcblx0Ly8gICAgICAgICB0aGUgYGZ1dHVyZWAuXG5cdGZ1bmN0aW9uIGluc2VydChoaXN0b3J5LCBzdGF0ZSwgbGltaXQpIHtcblx0ICBkZWJ1ZygnaW5zZXJ0JywgeyBzdGF0ZTogc3RhdGUsIGhpc3Rvcnk6IGhpc3RvcnksIGZyZWU6IGxpbWl0IC0gbGVuZ3RoKGhpc3RvcnkpIH0pO1xuXHRcblx0ICB2YXIgcGFzdCA9IGhpc3RvcnkucGFzdDtcblx0ICB2YXIgcHJlc2VudCA9IGhpc3RvcnkucHJlc2VudDtcblx0XG5cdCAgdmFyIGhpc3RvcnlPdmVyZmxvdyA9IGxpbWl0ICYmIGxlbmd0aChoaXN0b3J5KSA+PSBsaW1pdDtcblx0XG5cdCAgaWYgKHByZXNlbnQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgLy8gaW5pdCBoaXN0b3J5XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBwYXN0OiBbXSxcblx0ICAgICAgcHJlc2VudDogc3RhdGUsXG5cdCAgICAgIGZ1dHVyZTogW11cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4ge1xuXHQgICAgcGFzdDogW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShwYXN0LnNsaWNlKGhpc3RvcnlPdmVyZmxvdyA/IDEgOiAwKSksIFtwcmVzZW50XSksXG5cdCAgICBwcmVzZW50OiBzdGF0ZSxcblx0ICAgIGZ1dHVyZTogW11cblx0ICB9O1xuXHR9XG5cdC8vIC9pbnNlcnRcblx0XG5cdC8vIHVuZG86IGdvIGJhY2sgdG8gdGhlIHByZXZpb3VzIHBvaW50IGluIGhpc3Rvcnlcblx0ZnVuY3Rpb24gdW5kbyhoaXN0b3J5KSB7XG5cdCAgZGVidWcoJ3VuZG8nLCB7IGhpc3Rvcnk6IGhpc3RvcnkgfSk7XG5cdFxuXHQgIHZhciBwYXN0ID0gaGlzdG9yeS5wYXN0O1xuXHQgIHZhciBwcmVzZW50ID0gaGlzdG9yeS5wcmVzZW50O1xuXHQgIHZhciBmdXR1cmUgPSBoaXN0b3J5LmZ1dHVyZTtcblx0XG5cdFxuXHQgIGlmIChwYXN0Lmxlbmd0aCA8PSAwKSByZXR1cm4gaGlzdG9yeTtcblx0XG5cdCAgcmV0dXJuIHtcblx0ICAgIHBhc3Q6IHBhc3Quc2xpY2UoMCwgcGFzdC5sZW5ndGggLSAxKSwgLy8gcmVtb3ZlIGxhc3QgZWxlbWVudCBmcm9tIHBhc3Rcblx0ICAgIHByZXNlbnQ6IHBhc3RbcGFzdC5sZW5ndGggLSAxXSwgLy8gc2V0IGVsZW1lbnQgYXMgbmV3IHByZXNlbnRcblx0ICAgIGZ1dHVyZTogW3ByZXNlbnRdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZnV0dXJlKSlcblx0ICB9O1xuXHR9XG5cdC8vIC91bmRvXG5cdFxuXHQvLyByZWRvOiBnbyB0byB0aGUgbmV4dCBwb2ludCBpbiBoaXN0b3J5XG5cdGZ1bmN0aW9uIHJlZG8oaGlzdG9yeSkge1xuXHQgIGRlYnVnKCdyZWRvJywgeyBoaXN0b3J5OiBoaXN0b3J5IH0pO1xuXHRcblx0ICB2YXIgcGFzdCA9IGhpc3RvcnkucGFzdDtcblx0ICB2YXIgcHJlc2VudCA9IGhpc3RvcnkucHJlc2VudDtcblx0ICB2YXIgZnV0dXJlID0gaGlzdG9yeS5mdXR1cmU7XG5cdFxuXHRcblx0ICBpZiAoZnV0dXJlLmxlbmd0aCA8PSAwKSByZXR1cm4gaGlzdG9yeTtcblx0XG5cdCAgcmV0dXJuIHtcblx0ICAgIGZ1dHVyZTogZnV0dXJlLnNsaWNlKDEsIGZ1dHVyZS5sZW5ndGgpLCAvLyByZW1vdmUgZWxlbWVudCBmcm9tIGZ1dHVyZVxuXHQgICAgcHJlc2VudDogZnV0dXJlWzBdLCAvLyBzZXQgZWxlbWVudCBhcyBuZXcgcHJlc2VudFxuXHQgICAgcGFzdDogW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShwYXN0KSwgW3ByZXNlbnQgLy8gb2xkIHByZXNlbnQgc3RhdGUgaXMgaW4gdGhlIHBhc3Qgbm93XG5cdCAgICBdKVxuXHQgIH07XG5cdH1cblx0Ly8gL3JlZG9cblx0XG5cdC8vIGp1bXBUb0Z1dHVyZToganVtcCB0byByZXF1ZXN0ZWQgaW5kZXggaW4gZnV0dXJlIGhpc3Rvcnlcblx0ZnVuY3Rpb24ganVtcFRvRnV0dXJlKGhpc3RvcnksIGluZGV4KSB7XG5cdCAgaWYgKGluZGV4ID09PSAwKSByZXR1cm4gcmVkbyhoaXN0b3J5KTtcblx0XG5cdCAgdmFyIHBhc3QgPSBoaXN0b3J5LnBhc3Q7XG5cdCAgdmFyIHByZXNlbnQgPSBoaXN0b3J5LnByZXNlbnQ7XG5cdCAgdmFyIGZ1dHVyZSA9IGhpc3RvcnkuZnV0dXJlO1xuXHRcblx0XG5cdCAgcmV0dXJuIHtcblx0ICAgIGZ1dHVyZTogZnV0dXJlLnNsaWNlKGluZGV4ICsgMSksXG5cdCAgICBwcmVzZW50OiBmdXR1cmVbaW5kZXhdLFxuXHQgICAgcGFzdDogcGFzdC5jb25jYXQoW3ByZXNlbnRdKS5jb25jYXQoZnV0dXJlLnNsaWNlKDAsIGluZGV4KSlcblx0ICB9O1xuXHR9XG5cdC8vIC9qdW1wVG9GdXR1cmVcblx0XG5cdC8vIGp1bXBUb1Bhc3Q6IGp1bXAgdG8gcmVxdWVzdGVkIGluZGV4IGluIHBhc3QgaGlzdG9yeVxuXHRmdW5jdGlvbiBqdW1wVG9QYXN0KGhpc3RvcnksIGluZGV4KSB7XG5cdCAgaWYgKGluZGV4ID09PSBoaXN0b3J5LnBhc3QubGVuZ3RoIC0gMSkgcmV0dXJuIHVuZG8oaGlzdG9yeSk7XG5cdFxuXHQgIHZhciBwYXN0ID0gaGlzdG9yeS5wYXN0O1xuXHQgIHZhciBwcmVzZW50ID0gaGlzdG9yeS5wcmVzZW50O1xuXHQgIHZhciBmdXR1cmUgPSBoaXN0b3J5LmZ1dHVyZTtcblx0XG5cdFxuXHQgIHJldHVybiB7XG5cdCAgICBmdXR1cmU6IHBhc3Quc2xpY2UoaW5kZXggKyAxKS5jb25jYXQoW3ByZXNlbnRdKS5jb25jYXQoZnV0dXJlKSxcblx0ICAgIHByZXNlbnQ6IHBhc3RbaW5kZXhdLFxuXHQgICAgcGFzdDogcGFzdC5zbGljZSgwLCBpbmRleClcblx0ICB9O1xuXHR9XG5cdC8vIC9qdW1wVG9QYXN0XG5cdFxuXHQvLyB3cmFwU3RhdGU6IGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB0byAwLjRcblx0ZnVuY3Rpb24gd3JhcFN0YXRlKHN0YXRlKSB7XG5cdCAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwge1xuXHQgICAgaGlzdG9yeTogc3RhdGVcblx0ICB9KTtcblx0fVxuXHQvLyAvd3JhcFN0YXRlXG5cdFxuXHQvLyB1cGRhdGVTdGF0ZVxuXHRmdW5jdGlvbiB1cGRhdGVTdGF0ZShzdGF0ZSwgaGlzdG9yeSkge1xuXHQgIHJldHVybiB3cmFwU3RhdGUoX2V4dGVuZHMoe30sIHN0YXRlLCBoaXN0b3J5KSk7XG5cdH1cblx0Ly8gL3VwZGF0ZVN0YXRlXG5cdFxuXHQvLyBjcmVhdGVIaXN0b3J5XG5cdGZ1bmN0aW9uIGNyZWF0ZUhpc3Rvcnkoc3RhdGUpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcGFzdDogW10sXG5cdCAgICBwcmVzZW50OiBzdGF0ZSxcblx0ICAgIGZ1dHVyZTogW11cblx0ICB9O1xuXHR9XG5cdC8vIC9jcmVhdGVIaXN0b3J5XG5cdFxuXHQvLyBwYXJzZUFjdGlvbnNcblx0ZnVuY3Rpb24gcGFyc2VBY3Rpb25zKHJhd0FjdGlvbnMpIHtcblx0ICB2YXIgZGVmYXVsdFZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gW10gOiBhcmd1bWVudHNbMV07XG5cdFxuXHQgIGlmIChBcnJheS5pc0FycmF5KHJhd0FjdGlvbnMpKSB7XG5cdCAgICByZXR1cm4gcmF3QWN0aW9ucztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiByYXdBY3Rpb25zID09PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIFtyYXdBY3Rpb25zXTtcblx0ICB9XG5cdCAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcblx0fVxuXHQvLyAvcGFyc2VBY3Rpb25zXG5cdFxuXHQvLyByZWR1eC11bmRvIGhpZ2hlciBvcmRlciByZWR1Y2VyXG5cdGZ1bmN0aW9uIHVuZG9hYmxlKHJlZHVjZXIpIHtcblx0ICB2YXIgcmF3Q29uZmlnID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMV07XG5cdFxuXHQgIF9fREVCVUdfXyA9IHJhd0NvbmZpZy5kZWJ1Zztcblx0XG5cdCAgdmFyIGNvbmZpZyA9IHtcblx0ICAgIGluaXRpYWxTdGF0ZTogcmF3Q29uZmlnLmluaXRpYWxTdGF0ZSxcblx0ICAgIGluaXRUeXBlczogcGFyc2VBY3Rpb25zKHJhd0NvbmZpZy5pbml0VHlwZXMsIFsnQEByZWR1eC9JTklUJywgJ0BASU5JVCddKSxcblx0ICAgIGxpbWl0OiByYXdDb25maWcubGltaXQsXG5cdCAgICBmaWx0ZXI6IHJhd0NvbmZpZy5maWx0ZXIgfHwgZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH0sXG5cdCAgICB1bmRvVHlwZTogcmF3Q29uZmlnLnVuZG9UeXBlIHx8IEFjdGlvblR5cGVzLlVORE8sXG5cdCAgICByZWRvVHlwZTogcmF3Q29uZmlnLnJlZG9UeXBlIHx8IEFjdGlvblR5cGVzLlJFRE8sXG5cdCAgICBqdW1wVG9QYXN0VHlwZTogcmF3Q29uZmlnLmp1bXBUb1Bhc3RUeXBlIHx8IEFjdGlvblR5cGVzLkpVTVBfVE9fUEFTVCxcblx0ICAgIGp1bXBUb0Z1dHVyZVR5cGU6IHJhd0NvbmZpZy5qdW1wVG9GdXR1cmVUeXBlIHx8IEFjdGlvblR5cGVzLkpVTVBfVE9fRlVUVVJFXG5cdCAgfTtcblx0ICBjb25maWcuaGlzdG9yeSA9IHJhd0NvbmZpZy5pbml0aWFsSGlzdG9yeSB8fCBjcmVhdGVIaXN0b3J5KGNvbmZpZy5pbml0aWFsU3RhdGUpO1xuXHRcblx0ICBpZiAoY29uZmlnLmluaXRUeXBlcy5sZW5ndGggPT09IDApIHtcblx0ICAgIGNvbnNvbGUud2FybigncmVkdXgtdW5kbzogc3VwcGx5IGF0IGxlYXN0IG9uZSBhY3Rpb24gdHlwZSBpbiBpbml0VHlwZXMgdG8gZW5zdXJlIGluaXRpYWwgc3RhdGUnKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuXHQgICAgZGVidWdTdGFydChhY3Rpb24sIHN0YXRlKTtcblx0ICAgIHZhciByZXMgPSB1bmRlZmluZWQ7XG5cdCAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG5cdCAgICAgIGNhc2UgY29uZmlnLnVuZG9UeXBlOlxuXHQgICAgICAgIHJlcyA9IHVuZG8oc3RhdGUpO1xuXHQgICAgICAgIGRlYnVnKCdhZnRlciB1bmRvJywgcmVzKTtcblx0ICAgICAgICBkZWJ1Z0VuZCgpO1xuXHQgICAgICAgIHJldHVybiByZXMgPyB1cGRhdGVTdGF0ZShzdGF0ZSwgcmVzKSA6IHN0YXRlO1xuXHRcblx0ICAgICAgY2FzZSBjb25maWcucmVkb1R5cGU6XG5cdCAgICAgICAgcmVzID0gcmVkbyhzdGF0ZSk7XG5cdCAgICAgICAgZGVidWcoJ2FmdGVyIHJlZG8nLCByZXMpO1xuXHQgICAgICAgIGRlYnVnRW5kKCk7XG5cdCAgICAgICAgcmV0dXJuIHJlcyA/IHVwZGF0ZVN0YXRlKHN0YXRlLCByZXMpIDogc3RhdGU7XG5cdFxuXHQgICAgICBjYXNlIGNvbmZpZy5qdW1wVG9QYXN0VHlwZTpcblx0ICAgICAgICByZXMgPSBqdW1wVG9QYXN0KHN0YXRlLCBhY3Rpb24uaW5kZXgpO1xuXHQgICAgICAgIGRlYnVnKCdhZnRlciBqdW1wVG9QYXN0JywgcmVzKTtcblx0ICAgICAgICBkZWJ1Z0VuZCgpO1xuXHQgICAgICAgIHJldHVybiByZXMgPyB1cGRhdGVTdGF0ZShzdGF0ZSwgcmVzKSA6IHN0YXRlO1xuXHRcblx0ICAgICAgY2FzZSBjb25maWcuanVtcFRvRnV0dXJlVHlwZTpcblx0ICAgICAgICByZXMgPSBqdW1wVG9GdXR1cmUoc3RhdGUsIGFjdGlvbi5pbmRleCk7XG5cdCAgICAgICAgZGVidWcoJ2FmdGVyIGp1bXBUb0Z1dHVyZScsIHJlcyk7XG5cdCAgICAgICAgZGVidWdFbmQoKTtcblx0ICAgICAgICByZXR1cm4gcmVzID8gdXBkYXRlU3RhdGUoc3RhdGUsIHJlcykgOiBzdGF0ZTtcblx0XG5cdCAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgcmVzID0gcmVkdWNlcihzdGF0ZSAmJiBzdGF0ZS5wcmVzZW50LCBhY3Rpb24pO1xuXHRcblx0ICAgICAgICBpZiAoY29uZmlnLmluaXRUeXBlcy5zb21lKGZ1bmN0aW9uIChhY3Rpb25UeXBlKSB7XG5cdCAgICAgICAgICByZXR1cm4gYWN0aW9uVHlwZSA9PT0gYWN0aW9uLnR5cGU7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIGRlYnVnKCdyZXNldCBoaXN0b3J5IGR1ZSB0byBpbml0IGFjdGlvbicpO1xuXHQgICAgICAgICAgZGVidWdFbmQoKTtcblx0ICAgICAgICAgIHJldHVybiB3cmFwU3RhdGUoX2V4dGVuZHMoe30sIHN0YXRlLCBjcmVhdGVIaXN0b3J5KHJlcykpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChjb25maWcuZmlsdGVyICYmIHR5cGVvZiBjb25maWcuZmlsdGVyID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICBpZiAoIWNvbmZpZy5maWx0ZXIoYWN0aW9uLCByZXMsIHN0YXRlICYmIHN0YXRlLnByZXNlbnQpKSB7XG5cdCAgICAgICAgICAgIGRlYnVnKCdmaWx0ZXIgcHJldmVudGVkIGFjdGlvbiwgbm90IHN0b3JpbmcgaXQnKTtcblx0ICAgICAgICAgICAgZGVidWdFbmQoKTtcblx0ICAgICAgICAgICAgcmV0dXJuIHdyYXBTdGF0ZShfZXh0ZW5kcyh7fSwgc3RhdGUsIHtcblx0ICAgICAgICAgICAgICBwcmVzZW50OiByZXNcblx0ICAgICAgICAgICAgfSkpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIGhpc3RvcnkgPSBzdGF0ZSAmJiBzdGF0ZS5wcmVzZW50ICE9PSB1bmRlZmluZWQgPyBzdGF0ZSA6IGNvbmZpZy5oaXN0b3J5O1xuXHQgICAgICAgIHZhciB1cGRhdGVkSGlzdG9yeSA9IGluc2VydChoaXN0b3J5LCByZXMsIGNvbmZpZy5saW1pdCk7XG5cdCAgICAgICAgZGVidWcoJ2FmdGVyIGluc2VydCcsIHsgaGlzdG9yeTogdXBkYXRlZEhpc3RvcnksIGZyZWU6IGNvbmZpZy5saW1pdCAtIGxlbmd0aCh1cGRhdGVkSGlzdG9yeSkgfSk7XG5cdCAgICAgICAgZGVidWdFbmQoKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIHdyYXBTdGF0ZShfZXh0ZW5kcyh7fSwgc3RhdGUsIHVwZGF0ZWRIaXN0b3J5KSk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHQvLyAvcmVkdXgtdW5kb1xuXHRcblx0Ly8gZGlzdGluY3RTdGF0ZSBoZWxwZXJcblx0ZnVuY3Rpb24gZGlzdGluY3RTdGF0ZSgpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbiwgY3VycmVudFN0YXRlLCBwcmV2aW91c1N0YXRlKSB7XG5cdCAgICByZXR1cm4gY3VycmVudFN0YXRlICE9PSBwcmV2aW91c1N0YXRlO1xuXHQgIH07XG5cdH1cblx0Ly8gL2Rpc3RpbmN0U3RhdGVcblx0XG5cdC8vIGluY2x1ZGVBY3Rpb24gaGVscGVyXG5cdGZ1bmN0aW9uIGluY2x1ZGVBY3Rpb24ocmF3QWN0aW9ucykge1xuXHQgIHZhciBhY3Rpb25zID0gcGFyc2VBY3Rpb25zKHJhd0FjdGlvbnMpO1xuXHQgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XG5cdCAgICByZXR1cm4gYWN0aW9ucy5pbmRleE9mKGFjdGlvbi50eXBlKSA+PSAwO1xuXHQgIH07XG5cdH1cblx0Ly8gL2luY2x1ZGVBY3Rpb25cblx0XG5cdC8vIGRlcHJlY2F0ZWQgaWZBY3Rpb24gaGVscGVyXG5cdGZ1bmN0aW9uIGlmQWN0aW9uKHJhd0FjdGlvbnMpIHtcblx0ICBjb25zb2xlLmVycm9yKCdEZXByZWNhdGlvbiBXYXJuaW5nOiBQbGVhc2UgY2hhbmdlIGBpZkFjdGlvbmAgdG8gYGluY2x1ZGVBY3Rpb25gJyk7XG5cdCAgcmV0dXJuIGluY2x1ZGVBY3Rpb24ocmF3QWN0aW9ucyk7XG5cdH1cblx0Ly8gL2lmQWN0aW9uXG5cdFxuXHQvLyBleGNsdWRlQWN0aW9uIGhlbHBlclxuXHRmdW5jdGlvbiBleGNsdWRlQWN0aW9uKCkge1xuXHQgIHZhciByYXdBY3Rpb25zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gW10gOiBhcmd1bWVudHNbMF07XG5cdFxuXHQgIHZhciBhY3Rpb25zID0gcGFyc2VBY3Rpb25zKHJhd0FjdGlvbnMpO1xuXHQgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XG5cdCAgICByZXR1cm4gYWN0aW9ucy5pbmRleE9mKGFjdGlvbi50eXBlKSA8IDA7XG5cdCAgfTtcblx0fVxuXHQvLyAvZXhjbHVkZUFjdGlvblxuXG4vKioqLyB9LFxuLyogMTE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZGVmaW5lUHJvcGVydHkyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTUpO1xuXHRcblx0dmFyIF9kZWZpbmVQcm9wZXJ0eTMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWZpbmVQcm9wZXJ0eTIpO1xuXHRcblx0dmFyIF9leHRlbmRzNCA9IF9fd2VicGFja19yZXF1aXJlX18oMTA4KTtcblx0XG5cdHZhciBfZXh0ZW5kczUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzNCk7XG5cdFxuXHR2YXIgX2NvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTE2KTtcblx0XG5cdHZhciBfY29uc3RhbnRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbnN0YW50cyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0dmFyIElOSVRJQUxfU1RBVEUgPSB7XG5cdCAgdHJhbnNsYXRlOiB7IHg6IDE1MCwgeTogMTAwIH0sXG5cdCAgdG9wOiAwLFxuXHQgIHRlbXBfdG9wOiAwLFxuXHRcblx0ICByaWdodDogMCxcblx0ICB0ZW1wX3JpZ2h0OiAwLFxuXHRcblx0ICBib3R0b206IDAsXG5cdCAgdGVtcF9ib3R0b206IDAsXG5cdCAgc2NhbGVyWDogX2NvbnN0YW50czIuZGVmYXVsdC5DVVJWRV9QRVJDRU5UXG5cdH07XG5cdFxuXHR2YXIgcmVzaXplUmVkdWNlciA9IGZ1bmN0aW9uIHJlc2l6ZVJlZHVjZXIoKSB7XG5cdCAgdmFyIHN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gSU5JVElBTF9TVEFURSA6IGFyZ3VtZW50c1swXTtcblx0ICB2YXIgYWN0aW9uID0gYXJndW1lbnRzWzFdO1xuXHRcblx0ICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG5cdCAgICBjYXNlICdFRElUT1JfUkVTSVpFJzpcblx0ICAgICAge1xuXHQgICAgICAgIHZhciBkYXRhID0gYWN0aW9uLmRhdGE7XG5cdCAgICAgICAgdmFyIHR5cGUgPSBkYXRhLnR5cGU7XG5cdCAgICAgICAgdmFyIGRlbHRhID0gdHlwZSA9PT0gJ3RvcCcgfHwgdHlwZSA9PT0gJ2JvdHRvbScgPyBkYXRhLnkgOiBkYXRhLng7XG5cdFxuXHQgICAgICAgIHZhciBuZXdTdGF0ZSA9ICgwLCBfZXh0ZW5kczUuZGVmYXVsdCkoe30sIHN0YXRlLCAoMCwgX2RlZmluZVByb3BlcnR5My5kZWZhdWx0KSh7fSwgJ3RlbXBfJyArIHR5cGUsIGRlbHRhKSk7XG5cdCAgICAgICAgLy8gaWYgYHJpZ2h0YHNpemUgY2hhbmdlZCAtIGNhbGN1bGF0ZSB0aGUgc2NhbGVyIGZvciB4IGF4aXNcblx0ICAgICAgICBpZiAodHlwZSA9PT0gJ3JpZ2h0Jykge1xuXHQgICAgICAgICAgbmV3U3RhdGVbJ3NjYWxlclgnXSA9IChfY29uc3RhbnRzMi5kZWZhdWx0LkNVUlZFX1NJWkUgKyBNYXRoLm1heChzdGF0ZS5yaWdodCArIGRlbHRhLCAwKSkgLyAxMDA7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBuZXdTdGF0ZTtcblx0ICAgICAgfVxuXHRcblx0ICAgIGNhc2UgJ0VESVRPUl9SRVNJWkVfRU5EJzpcblx0ICAgICAge1xuXHQgICAgICAgIHZhciBfZXh0ZW5kczM7XG5cdFxuXHQgICAgICAgIHZhciBfZGF0YSA9IGFjdGlvbi5kYXRhO1xuXHQgICAgICAgIHZhciBfdHlwZSA9IF9kYXRhLnR5cGU7XG5cdFxuXHQgICAgICAgIHZhciBfZGVsdGEgPSBfdHlwZSA9PT0gJ3RvcCcgfHwgX3R5cGUgPT09ICdib3R0b20nID8gX2RhdGEueSA6IF9kYXRhLng7XG5cdCAgICAgICAgLy8gZ2V0IHRoZSB0b3RhbCByZXNpemUgdmFsdWUgKCB0ZW1wb3JhcnkgKyBhY3R1YWwgKVxuXHQgICAgICAgIHZhciByZXNpemUgPSBzdGF0ZVsnJyArIGFjdGlvbi5kYXRhLnR5cGVdICsgX2RlbHRhO1xuXHQgICAgICAgIC8vIGlmIHRoZSB0eXBlIGlmIHRvIC0gaXQgaGFzIHRoZSBgLWAgYXMgYmFzZSBzbyB3ZSBuZWVkIHRvIHN3YXAgbWV0aG9kc1xuXHQgICAgICAgIHZhciBtYXRoTWV0aG9kID0gX3R5cGUgPT09ICd0b3AnID8gJ21pbicgOiAnbWF4Jztcblx0ICAgICAgICB2YXIgX25ld1N0YXRlID0gKDAsIF9leHRlbmRzNS5kZWZhdWx0KSh7fSwgc3RhdGUsIChfZXh0ZW5kczMgPSB7fSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTMuZGVmYXVsdCkoX2V4dGVuZHMzLCAnJyArIGFjdGlvbi5kYXRhLnR5cGUsIE1hdGhbbWF0aE1ldGhvZF0oMCwgcmVzaXplKSksICgwLCBfZGVmaW5lUHJvcGVydHkzLmRlZmF1bHQpKF9leHRlbmRzMywgJ3RlbXBfJyArIGFjdGlvbi5kYXRhLnR5cGUsIDApLCBfZXh0ZW5kczMpKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIF9uZXdTdGF0ZTtcblx0ICAgICAgfVxuXHRcblx0ICAgIGNhc2UgJ0VESVRPUl9UUkFOU0xBVEUnOlxuXHQgICAgICB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfZXh0ZW5kczUuZGVmYXVsdCkoe30sIHN0YXRlLCB7IHRyYW5zbGF0ZTogYWN0aW9uLmRhdGEgfSk7XG5cdCAgICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHN0YXRlO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gcmVzaXplUmVkdWNlcjtcblxuLyoqKi8gfSxcbi8qIDExNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRcblx0dmFyIF9kZWZpbmVQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHRcblx0dmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWZpbmVQcm9wZXJ0eSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKG9iaiwga2V5LCB2YWx1ZSkge1xuXHQgIGlmIChrZXkgaW4gb2JqKSB7XG5cdCAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KShvYmosIGtleSwge1xuXHQgICAgICB2YWx1ZTogdmFsdWUsXG5cdCAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICAgICAgd3JpdGFibGU6IHRydWVcblx0ICAgIH0pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBvYmpba2V5XSA9IHZhbHVlO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG9iajtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDExNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBDVVJWRV9TSVpFID0gMzUwO1xuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgQ1VSVkVfU0laRTogQ1VSVkVfU0laRSxcblx0ICBDVVJWRV9QRVJDRU5UOiBDVVJWRV9TSVpFIC8gMTAwLFxuXHQgIENVUlZFX1BBRERJTkc6IDEwXG5cdH07XG5cbi8qKiovIH0sXG4vKiAxMTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF90b0NvbnN1bWFibGVBcnJheTIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOCk7XG5cdFxuXHR2YXIgX3RvQ29uc3VtYWJsZUFycmF5MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RvQ29uc3VtYWJsZUFycmF5Mik7XG5cdFxuXHR2YXIgX2V4dGVuZHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDgpO1xuXHRcblx0dmFyIF9leHRlbmRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZHMyKTtcblx0XG5cdHZhciBfbWFrZVBvaW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjgpO1xuXHRcblx0dmFyIF9tYWtlUG9pbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWFrZVBvaW50KTtcblx0XG5cdHZhciBfY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTYpO1xuXHRcblx0dmFyIF9jb25zdGFudHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29uc3RhbnRzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHR2YXIgSU5JVElBTF9TVEFURSA9IFsoMCwgX21ha2VQb2ludDIuZGVmYXVsdCkoeyB4OiAwLCB5OiBfY29uc3RhbnRzMi5kZWZhdWx0LkNVUlZFX1NJWkUsIGlzTG9ja2VkWDogdHJ1ZSwgdHlwZTogJ3N0cmFpZ2h0JyB9KSwgKDAsIF9tYWtlUG9pbnQyLmRlZmF1bHQpKHsgeDogNTAsIHk6IF9jb25zdGFudHMyLmRlZmF1bHQuQ1VSVkVfU0laRSAvIDIsIHR5cGU6ICdtaXJyb3JlZCcgfSksICgwLCBfbWFrZVBvaW50Mi5kZWZhdWx0KSh7IHg6IDEwMCwgeTogMCwgaXNMb2NrZWRYOiB0cnVlIH0pXTtcblx0XG5cdHZhciBkZXNsZWN0QWxsID0gZnVuY3Rpb24gZGVzbGVjdEFsbChzdGF0ZSkge1xuXHQgIHZhciBuZXdTdGF0ZSA9IFtdO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGUubGVuZ3RoOyBpKyspIHtcblx0ICAgIG5ld1N0YXRlLnB1c2goKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7fSwgc3RhdGVbaV0sIHsgaXNTZWxlY3RlZDogZmFsc2UgfSkpO1xuXHQgIH1cblx0ICByZXR1cm4gbmV3U3RhdGU7XG5cdH07XG5cdFxuXHR2YXIgZmluZFNlbGVjdGVkSW5kZWNpZXMgPSBmdW5jdGlvbiBmaW5kU2VsZWN0ZWRJbmRlY2llcyhzdGF0ZSkge1xuXHQgIHZhciBpbmRlY2llcyA9IFtdO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGUubGVuZ3RoOyBpKyspIHtcblx0ICAgIHN0YXRlW2ldLmlzU2VsZWN0ZWQgJiYgaW5kZWNpZXMucHVzaChpKTtcblx0ICB9XG5cdCAgcmV0dXJuIGluZGVjaWVzO1xuXHR9O1xuXHRcblx0dmFyIHBvaW50c1JlZHVjZXIgPSBmdW5jdGlvbiBwb2ludHNSZWR1Y2VyKCkge1xuXHQgIHZhciBzdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IElOSVRJQUxfU1RBVEUgOiBhcmd1bWVudHNbMF07XG5cdCAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50c1sxXTtcblx0XG5cdCAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuXHQgICAgY2FzZSAnUE9JTlRfVFJBTlNMQVRFJzpcblx0ICAgICAge1xuXHQgICAgICAgIHZhciBkYXRhID0gYWN0aW9uLmRhdGE7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gZGF0YS5pbmRleDtcblx0ICAgICAgICB2YXIgb2xkUG9pbnQgPSBzdGF0ZVtpbmRleF07XG5cdCAgICAgICAgdmFyIG5ld1N0YXRlID0gW10uY29uY2F0KCgwLCBfdG9Db25zdW1hYmxlQXJyYXkzLmRlZmF1bHQpKHN0YXRlKSk7XG5cdFxuXHQgICAgICAgIG5ld1N0YXRlW2RhdGEuaW5kZXhdID0gKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7fSwgb2xkUG9pbnQsIHsgdGVtcFg6IGRhdGEueCwgdGVtcFk6IGRhdGEueSB9KTtcblx0ICAgICAgICByZXR1cm4gbmV3U3RhdGU7XG5cdCAgICAgIH1cblx0XG5cdCAgICBjYXNlICdQT0lOVF9UUkFOU0xBVEVfRU5EJzpcblx0ICAgICAge1xuXHQgICAgICAgIHZhciBfaW5kZXggPSBhY3Rpb24uZGF0YSxcblx0ICAgICAgICAgICAgX29sZFBvaW50ID0gc3RhdGVbX2luZGV4XSxcblx0ICAgICAgICAgICAgX25ld1N0YXRlID0gW10uY29uY2F0KCgwLCBfdG9Db25zdW1hYmxlQXJyYXkzLmRlZmF1bHQpKHN0YXRlKSk7XG5cdFxuXHQgICAgICAgIF9uZXdTdGF0ZVtfaW5kZXhdID0gKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7fSwgX29sZFBvaW50LCB7XG5cdCAgICAgICAgICB4OiBfb2xkUG9pbnQueCArIF9vbGRQb2ludC50ZW1wWCxcblx0ICAgICAgICAgIHk6IF9vbGRQb2ludC55ICsgX29sZFBvaW50LnRlbXBZLFxuXHQgICAgICAgICAgdGVtcFg6IDAsIHRlbXBZOiAwXG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHJldHVybiBfbmV3U3RhdGU7XG5cdCAgICAgIH1cblx0XG5cdCAgICBjYXNlICdQT0lOVF9TRUxFQ1QnOlxuXHQgICAgICB7XG5cdCAgICAgICAgdmFyIF9kYXRhID0gYWN0aW9uLmRhdGE7XG5cdCAgICAgICAgdmFyIF9pbmRleDIgPSBfZGF0YS5pbmRleDtcblx0ICAgICAgICB2YXIgaXNEZXNlbGVjdCA9IF9kYXRhLmlzRGVzZWxlY3Q7XG5cdCAgICAgICAgLy8gaWYgc2hvdWxkIGRlIHNlbGVjdCBhbGwgb3RoZXIgcG9pbnRzXG5cdCAgICAgICAgdmFyIF9uZXdTdGF0ZTIgPSBpc0Rlc2VsZWN0ID8gZGVzbGVjdEFsbChzdGF0ZSkgOiBbXS5jb25jYXQoKDAsIF90b0NvbnN1bWFibGVBcnJheTMuZGVmYXVsdCkoc3RhdGUpKTtcblx0XG5cdCAgICAgICAgdmFyIHBvaW50ID0gX25ld1N0YXRlMltfaW5kZXgyXTtcblx0ICAgICAgICB2YXIgc2liUG9pbnQgPSBfaW5kZXgyID09PSBfbmV3U3RhdGUyLmxlbmd0aCAtIDEgPyBfbmV3U3RhdGUyW19pbmRleDIgLSAxXSA6IF9uZXdTdGF0ZTJbX2luZGV4MiArIDFdO1xuXHRcblx0ICAgICAgICB2YXIgaGFuZGxlSW5kZXggPSBfaW5kZXgyID09PSBfbmV3U3RhdGUyLmxlbmd0aCAtIDEgPyAxIDogMjtcblx0XG5cdCAgICAgICAgdmFyIGhhbmRsZU5hbWUgPSAnaGFuZGxlJyArIGhhbmRsZUluZGV4O1xuXHQgICAgICAgIHZhciBzaWJIYW5kbGVJbmRleCA9IGhhbmRsZUluZGV4ID09PSAxID8gMiA6IDE7XG5cdCAgICAgICAgdmFyIHNpYkhhbmRsZU5hbWUgPSAnaGFuZGxlJyArIHNpYkhhbmRsZUluZGV4O1xuXHQgICAgICAgIHZhciBoYW5kbGUgPSAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBwb2ludFtoYW5kbGVOYW1lXSk7XG5cdCAgICAgICAgdmFyIHNpYkhhbmRsZSA9ICgwLCBfZXh0ZW5kczMuZGVmYXVsdCkoe30sIHBvaW50W3NpYkhhbmRsZU5hbWVdKTtcblx0ICAgICAgICBwb2ludFtoYW5kbGVOYW1lXSA9IGhhbmRsZTtcblx0ICAgICAgICBwb2ludFtzaWJIYW5kbGVOYW1lXSA9IHNpYkhhbmRsZTtcblx0XG5cdCAgICAgICAgdmFyIHdhc250U2V0ID0gaGFuZGxlLmFuZ2xlID09IG51bGwgfHwgaGFuZGxlLnJhZGl1cyA9PSBudWxsO1xuXHQgICAgICAgIHZhciB0eXBlID0gcG9pbnQudHlwZTtcblx0ICAgICAgICBpZiAod2FzbnRTZXQpIHtcblx0ICAgICAgICAgIGhhbmRsZS5yYWRpdXMgPSA1MDtcblx0XG5cdCAgICAgICAgICB2YXIgZHkgPSAoc2liUG9pbnQueSAtIHBvaW50LnkpIC8gX2NvbnN0YW50czIuZGVmYXVsdC5DVVJWRV9QRVJDRU5UO1xuXHQgICAgICAgICAgdmFyIGR4ID0gc2liUG9pbnQueCAtIHBvaW50Lng7XG5cdCAgICAgICAgICB2YXIgYW5nbGUgPSBNYXRoLmF0YW4oZHkgLyBkeCkgKiAoMTgwIC8gTWF0aC5QSSkgLSA5MDtcblx0ICAgICAgICAgIGlmIChkeCA+IDApIHtcblx0ICAgICAgICAgICAgYW5nbGUgPSBhbmdsZSAtIDE4MDtcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgICBoYW5kbGUuYW5nbGUgPSBhbmdsZTtcblx0XG5cdCAgICAgICAgICBzaWJIYW5kbGUucmFkaXVzID0gaGFuZGxlLnJhZGl1cztcblx0ICAgICAgICAgIHNpYkhhbmRsZS5hbmdsZSA9IGhhbmRsZS5hbmdsZSAtIDE4MDtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHBvaW50LmlzU2VsZWN0ZWQgPSB0cnVlO1xuXHQgICAgICAgIHJldHVybiBfbmV3U3RhdGUyO1xuXHQgICAgICB9XG5cdFxuXHQgICAgY2FzZSAnUE9JTlRfQUREJzpcblx0ICAgICAge1xuXHQgICAgICAgIHZhciBfZGF0YTIgPSBhY3Rpb24uZGF0YTtcblx0ICAgICAgICB2YXIgeCA9IF9kYXRhMi54O1xuXHQgICAgICAgIHZhciB5ID0gX2RhdGEyLnk7XG5cdCAgICAgICAgdmFyIF9pbmRleDMgPSBfZGF0YTIuaW5kZXg7XG5cdFxuXHRcblx0ICAgICAgICB2YXIgZGVzZWxlY3RlZCA9IGRlc2xlY3RBbGwoc3RhdGUpO1xuXHRcblx0ICAgICAgICByZXR1cm4gW10uY29uY2F0KCgwLCBfdG9Db25zdW1hYmxlQXJyYXkzLmRlZmF1bHQpKGRlc2VsZWN0ZWQuc2xpY2UoMCwgX2luZGV4MykpLCBbKDAsIF9tYWtlUG9pbnQyLmRlZmF1bHQpKHsgeDogeCwgeTogeSwgaXNTZWxlY3RlZDogdHJ1ZSB9KV0sICgwLCBfdG9Db25zdW1hYmxlQXJyYXkzLmRlZmF1bHQpKGRlc2VsZWN0ZWQuc2xpY2UoX2luZGV4MykpKTtcblx0ICAgICAgfVxuXHQgICAgY2FzZSAnUE9JTlRfREVMRVRFJzpcblx0ICAgICAge1xuXHQgICAgICAgIHZhciBzZWxlY3RlZCA9IGZpbmRTZWxlY3RlZEluZGVjaWVzKHN0YXRlKTtcblx0XG5cdCAgICAgICAgdmFyIF9uZXdTdGF0ZTMgPSBbXTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICB2YXIgaXRlbSA9IHN0YXRlW2ldO1xuXHQgICAgICAgICAgKHNlbGVjdGVkLmluZGV4T2YoaSkgPT09IC0xIHx8IGl0ZW0uaXNMb2NrZWRYKSAmJiBfbmV3U3RhdGUzLnB1c2goaXRlbSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX25ld1N0YXRlMztcblx0ICAgICAgfVxuXHRcblx0ICAgIGNhc2UgJ1BPSU5UX0NIQU5HRV9UWVBFJzpcblx0ICAgICAge1xuXHQgICAgICAgIHZhciBfc2VsZWN0ZWQgPSBmaW5kU2VsZWN0ZWRJbmRlY2llcyhzdGF0ZSk7XG5cdFxuXHQgICAgICAgIHZhciBfbmV3U3RhdGU0ID0gW107XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGF0ZS5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgdmFyIF9pdGVtID0gc3RhdGVbaV07XG5cdCAgICAgICAgICB2YXIgX3R5cGUgPSBhY3Rpb24uZGF0YTtcblx0ICAgICAgICAgIC8vIGNvcHkgYWxsIGl0ZW1zIGZyb20gcHJldmlvdXMgc3RhdGVcblx0ICAgICAgICAgIF9uZXdTdGF0ZTQucHVzaCgoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBfaXRlbSkpO1xuXHQgICAgICAgICAgLy8gaWYgaXRlbSB3YXMgc2VsZWN0ZWQgLSBzZXQgdGhlIG5ldyBgdHlwZWBcblx0ICAgICAgICAgIF9zZWxlY3RlZC5pbmRleE9mKGkpICE9PSAtMSAmJiAoX25ld1N0YXRlNFtpXS50eXBlID0gX3R5cGUpO1xuXHRcblx0ICAgICAgICAgIHZhciBfaW5kZXg0ID0gaTtcblx0ICAgICAgICAgIHZhciBfcG9pbnQgPSBfbmV3U3RhdGU0W19pbmRleDRdO1xuXHQgICAgICAgICAgdmFyIF9zaWJQb2ludCA9IF9pbmRleDQgPT09IF9uZXdTdGF0ZTQubGVuZ3RoIC0gMSA/IF9uZXdTdGF0ZTRbX2luZGV4NCAtIDFdIDogX25ld1N0YXRlNFtfaW5kZXg0ICsgMV07XG5cdFxuXHQgICAgICAgICAgdmFyIF9oYW5kbGVJbmRleCA9IF9pbmRleDQgPT09IF9uZXdTdGF0ZTQubGVuZ3RoIC0gMSA/IDEgOiAyO1xuXHQgICAgICAgICAgdmFyIF9zaWJIYW5kbGVJbmRleCA9IF9oYW5kbGVJbmRleCA9PT0gMSA/IDIgOiAxO1xuXHQgICAgICAgICAgdmFyIF9oYW5kbGVOYW1lID0gJ2hhbmRsZScgKyBfaGFuZGxlSW5kZXg7XG5cdCAgICAgICAgICB2YXIgX3NpYkhhbmRsZU5hbWUgPSAnaGFuZGxlJyArIF9zaWJIYW5kbGVJbmRleDtcblx0ICAgICAgICAgIHZhciBfaGFuZGxlID0gKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7fSwgX3BvaW50W19oYW5kbGVOYW1lXSk7XG5cdCAgICAgICAgICB2YXIgX3NpYkhhbmRsZSA9ICgwLCBfZXh0ZW5kczMuZGVmYXVsdCkoe30sIF9wb2ludFtfc2liSGFuZGxlTmFtZV0pO1xuXHQgICAgICAgICAgX3BvaW50W19oYW5kbGVOYW1lXSA9IF9oYW5kbGU7XG5cdCAgICAgICAgICBfcG9pbnRbX3NpYkhhbmRsZU5hbWVdID0gX3NpYkhhbmRsZTtcblx0XG5cdCAgICAgICAgICBpZiAoX3R5cGUgPT09ICdtaXJyb3JlZCcgfHwgX3R5cGUgPT09ICdhc3ltbWV0cmljJykge1xuXHQgICAgICAgICAgICBfc2liSGFuZGxlLmFuZ2xlID0gX2hhbmRsZS5hbmdsZSAtIDE4MDtcblx0ICAgICAgICAgICAgaWYgKF90eXBlID09PSAnbWlycm9yZWQnKSB7XG5cdCAgICAgICAgICAgICAgX3NpYkhhbmRsZS5yYWRpdXMgPSBfaGFuZGxlLnJhZGl1cztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9uZXdTdGF0ZTQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICBjYXNlICdQT0lOVF9ERVNFTEVDVF9BTEwnOlxuXHQgICAgICB7XG5cdCAgICAgICAgcmV0dXJuIGRlc2xlY3RBbGwoc3RhdGUpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgLy8gSEFORExFU1xuXHQgICAgY2FzZSAnSEFORExFX1RSQU5TTEFURSc6XG5cdCAgICAgIHtcblx0ICAgICAgICB2YXIgX2RhdGEzID0gYWN0aW9uLmRhdGE7XG5cdCAgICAgICAgLy8gY3JlYXRlIG5ldyBzdGF0ZSBhbmQgY29weSB0aGUgbmV3IHBvaW50IGludG8gaXRcblx0XG5cdCAgICAgICAgdmFyIF9uZXdTdGF0ZTUgPSBbXS5jb25jYXQoKDAsIF90b0NvbnN1bWFibGVBcnJheTMuZGVmYXVsdCkoc3RhdGUpKTtcblx0ICAgICAgICB2YXIgbmV3UG9pbnQgPSAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBfbmV3U3RhdGU1W19kYXRhMy5wYXJlbnRJbmRleF0pO1xuXHQgICAgICAgIF9uZXdTdGF0ZTVbX2RhdGEzLnBhcmVudEluZGV4XSA9IG5ld1BvaW50O1xuXHQgICAgICAgIC8vIGNyZWF0ZSBoYW5kbGUgYW5kIGNvcHkgaXQgaW50byB0aGUgbmV3IHBvaW50XG5cdCAgICAgICAgdmFyIF9oYW5kbGVOYW1lMiA9ICdoYW5kbGUnICsgX2RhdGEzLmluZGV4O1xuXHQgICAgICAgIHZhciBuZXdIYW5kbGUgPSAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBuZXdQb2ludFtfaGFuZGxlTmFtZTJdKTtcblx0ICAgICAgICBuZXdQb2ludFtfaGFuZGxlTmFtZTJdID0gbmV3SGFuZGxlO1xuXHQgICAgICAgIC8vIGZpbmFsbHkgYWRkIGFuZ2xlIGFuZCByYWRpdXNcblx0ICAgICAgICBuZXdIYW5kbGUuYW5nbGUgPSBfZGF0YTMuYW5nbGU7XG5cdCAgICAgICAgbmV3SGFuZGxlLnJhZGl1cyA9IF9kYXRhMy5yYWRpdXM7XG5cdFxuXHQgICAgICAgIHJldHVybiBfbmV3U3RhdGU1O1xuXHQgICAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBzdGF0ZTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHBvaW50c1JlZHVjZXI7XG5cbi8qKiovIH0sXG4vKiAxMTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0ZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblx0XG5cdHZhciBfZnJvbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTE5KTtcblx0XG5cdHZhciBfZnJvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mcm9tKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoYXJyKSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuXHQgICAgICBhcnIyW2ldID0gYXJyW2ldO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBhcnIyO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gKDAsIF9mcm9tMi5kZWZhdWx0KShhcnIpO1xuXHQgIH1cblx0fTtcblxuLyoqKi8gfSxcbi8qIDExOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMCksIF9fZXNNb2R1bGU6IHRydWUgfTtcblxuLyoqKi8gfSxcbi8qIDEyMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTIxKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KS5BcnJheS5mcm9tO1xuXG4vKioqLyB9LFxuLyogMTIxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciBjdHggICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjApXG5cdCAgLCAkZXhwb3J0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpXG5cdCAgLCB0b09iamVjdCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOSlcblx0ICAsIGNhbGwgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjIpXG5cdCAgLCBpc0FycmF5SXRlciAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIzKVxuXHQgICwgdG9MZW5ndGggICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KVxuXHQgICwgY3JlYXRlUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNClcblx0ICAsIGdldEl0ZXJGbiAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjUpO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhX193ZWJwYWNrX3JlcXVpcmVfXygxMjcpKGZ1bmN0aW9uKGl0ZXIpeyBBcnJheS5mcm9tKGl0ZXIpOyB9KSwgJ0FycmF5Jywge1xuXHQgIC8vIDIyLjEuMi4xIEFycmF5LmZyb20oYXJyYXlMaWtlLCBtYXBmbiA9IHVuZGVmaW5lZCwgdGhpc0FyZyA9IHVuZGVmaW5lZClcblx0ICBmcm9tOiBmdW5jdGlvbiBmcm9tKGFycmF5TGlrZS8qLCBtYXBmbiA9IHVuZGVmaW5lZCwgdGhpc0FyZyA9IHVuZGVmaW5lZCovKXtcblx0ICAgIHZhciBPICAgICAgID0gdG9PYmplY3QoYXJyYXlMaWtlKVxuXHQgICAgICAsIEMgICAgICAgPSB0eXBlb2YgdGhpcyA9PSAnZnVuY3Rpb24nID8gdGhpcyA6IEFycmF5XG5cdCAgICAgICwgYUxlbiAgICA9IGFyZ3VtZW50cy5sZW5ndGhcblx0ICAgICAgLCBtYXBmbiAgID0gYUxlbiA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWRcblx0ICAgICAgLCBtYXBwaW5nID0gbWFwZm4gIT09IHVuZGVmaW5lZFxuXHQgICAgICAsIGluZGV4ICAgPSAwXG5cdCAgICAgICwgaXRlckZuICA9IGdldEl0ZXJGbihPKVxuXHQgICAgICAsIGxlbmd0aCwgcmVzdWx0LCBzdGVwLCBpdGVyYXRvcjtcblx0ICAgIGlmKG1hcHBpbmcpbWFwZm4gPSBjdHgobWFwZm4sIGFMZW4gPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkLCAyKTtcblx0ICAgIC8vIGlmIG9iamVjdCBpc24ndCBpdGVyYWJsZSBvciBpdCdzIGFycmF5IHdpdGggZGVmYXVsdCBpdGVyYXRvciAtIHVzZSBzaW1wbGUgY2FzZVxuXHQgICAgaWYoaXRlckZuICE9IHVuZGVmaW5lZCAmJiAhKEMgPT0gQXJyYXkgJiYgaXNBcnJheUl0ZXIoaXRlckZuKSkpe1xuXHQgICAgICBmb3IoaXRlcmF0b3IgPSBpdGVyRm4uY2FsbChPKSwgcmVzdWx0ID0gbmV3IEM7ICEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZTsgaW5kZXgrKyl7XG5cdCAgICAgICAgY3JlYXRlUHJvcGVydHkocmVzdWx0LCBpbmRleCwgbWFwcGluZyA/IGNhbGwoaXRlcmF0b3IsIG1hcGZuLCBbc3RlcC52YWx1ZSwgaW5kZXhdLCB0cnVlKSA6IHN0ZXAudmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCk7XG5cdCAgICAgIGZvcihyZXN1bHQgPSBuZXcgQyhsZW5ndGgpOyBsZW5ndGggPiBpbmRleDsgaW5kZXgrKyl7XG5cdCAgICAgICAgY3JlYXRlUHJvcGVydHkocmVzdWx0LCBpbmRleCwgbWFwcGluZyA/IG1hcGZuKE9baW5kZXhdLCBpbmRleCkgOiBPW2luZGV4XSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJlc3VsdC5sZW5ndGggPSBpbmRleDtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHR9KTtcblxuXG4vKioqLyB9LFxuLyogMTIyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBjYWxsIHNvbWV0aGluZyBvbiBpdGVyYXRvciBzdGVwIHdpdGggc2FmZSBjbG9zaW5nIG9uIGVycm9yXG5cdHZhciBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0ZXJhdG9yLCBmbiwgdmFsdWUsIGVudHJpZXMpe1xuXHQgIHRyeSB7XG5cdCAgICByZXR1cm4gZW50cmllcyA/IGZuKGFuT2JqZWN0KHZhbHVlKVswXSwgdmFsdWVbMV0pIDogZm4odmFsdWUpO1xuXHQgIC8vIDcuNC42IEl0ZXJhdG9yQ2xvc2UoaXRlcmF0b3IsIGNvbXBsZXRpb24pXG5cdCAgfSBjYXRjaChlKXtcblx0ICAgIHZhciByZXQgPSBpdGVyYXRvclsncmV0dXJuJ107XG5cdCAgICBpZihyZXQgIT09IHVuZGVmaW5lZClhbk9iamVjdChyZXQuY2FsbChpdGVyYXRvcikpO1xuXHQgICAgdGhyb3cgZTtcblx0ICB9XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxMjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIGNoZWNrIG9uIGRlZmF1bHQgQXJyYXkgaXRlcmF0b3Jcblx0dmFyIEl0ZXJhdG9ycyAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KVxuXHQgICwgSVRFUkFUT1IgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpKCdpdGVyYXRvcicpXG5cdCAgLCBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG5cdCAgcmV0dXJuIGl0ICE9PSB1bmRlZmluZWQgJiYgKEl0ZXJhdG9ycy5BcnJheSA9PT0gaXQgfHwgQXJyYXlQcm90b1tJVEVSQVRPUl0gPT09IGl0KTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDEyNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgJGRlZmluZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMylcblx0ICAsIGNyZWF0ZURlc2MgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmplY3QsIGluZGV4LCB2YWx1ZSl7XG5cdCAgaWYoaW5kZXggaW4gb2JqZWN0KSRkZWZpbmVQcm9wZXJ0eS5mKG9iamVjdCwgaW5kZXgsIGNyZWF0ZURlc2MoMCwgdmFsdWUpKTtcblx0ICBlbHNlIG9iamVjdFtpbmRleF0gPSB2YWx1ZTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDEyNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGNsYXNzb2YgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTI2KVxuXHQgICwgSVRFUkFUT1IgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MikoJ2l0ZXJhdG9yJylcblx0ICAsIEl0ZXJhdG9ycyA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpLmdldEl0ZXJhdG9yTWV0aG9kID0gZnVuY3Rpb24oaXQpe1xuXHQgIGlmKGl0ICE9IHVuZGVmaW5lZClyZXR1cm4gaXRbSVRFUkFUT1JdXG5cdCAgICB8fCBpdFsnQEBpdGVyYXRvciddXG5cdCAgICB8fCBJdGVyYXRvcnNbY2xhc3NvZihpdCldO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBnZXR0aW5nIHRhZyBmcm9tIDE5LjEuMy42IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcoKVxuXHR2YXIgY29mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSlcblx0ICAsIFRBRyA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpKCd0b1N0cmluZ1RhZycpXG5cdCAgLy8gRVMzIHdyb25nIGhlcmVcblx0ICAsIEFSRyA9IGNvZihmdW5jdGlvbigpeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpID09ICdBcmd1bWVudHMnO1xuXHRcblx0Ly8gZmFsbGJhY2sgZm9yIElFMTEgU2NyaXB0IEFjY2VzcyBEZW5pZWQgZXJyb3Jcblx0dmFyIHRyeUdldCA9IGZ1bmN0aW9uKGl0LCBrZXkpe1xuXHQgIHRyeSB7XG5cdCAgICByZXR1cm4gaXRba2V5XTtcblx0ICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcblx0ICB2YXIgTywgVCwgQjtcblx0ICByZXR1cm4gaXQgPT09IHVuZGVmaW5lZCA/ICdVbmRlZmluZWQnIDogaXQgPT09IG51bGwgPyAnTnVsbCdcblx0ICAgIC8vIEBAdG9TdHJpbmdUYWcgY2FzZVxuXHQgICAgOiB0eXBlb2YgKFQgPSB0cnlHZXQoTyA9IE9iamVjdChpdCksIFRBRykpID09ICdzdHJpbmcnID8gVFxuXHQgICAgLy8gYnVpbHRpblRhZyBjYXNlXG5cdCAgICA6IEFSRyA/IGNvZihPKVxuXHQgICAgLy8gRVMzIGFyZ3VtZW50cyBmYWxsYmFja1xuXHQgICAgOiAoQiA9IGNvZihPKSkgPT0gJ09iamVjdCcgJiYgdHlwZW9mIE8uY2FsbGVlID09ICdmdW5jdGlvbicgPyAnQXJndW1lbnRzJyA6IEI7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxMjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBJVEVSQVRPUiAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKSgnaXRlcmF0b3InKVxuXHQgICwgU0FGRV9DTE9TSU5HID0gZmFsc2U7XG5cdFxuXHR0cnkge1xuXHQgIHZhciByaXRlciA9IFs3XVtJVEVSQVRPUl0oKTtcblx0ICByaXRlclsncmV0dXJuJ10gPSBmdW5jdGlvbigpeyBTQUZFX0NMT1NJTkcgPSB0cnVlOyB9O1xuXHQgIEFycmF5LmZyb20ocml0ZXIsIGZ1bmN0aW9uKCl7IHRocm93IDI7IH0pO1xuXHR9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMsIHNraXBDbG9zaW5nKXtcblx0ICBpZighc2tpcENsb3NpbmcgJiYgIVNBRkVfQ0xPU0lORylyZXR1cm4gZmFsc2U7XG5cdCAgdmFyIHNhZmUgPSBmYWxzZTtcblx0ICB0cnkge1xuXHQgICAgdmFyIGFyciAgPSBbN11cblx0ICAgICAgLCBpdGVyID0gYXJyW0lURVJBVE9SXSgpO1xuXHQgICAgaXRlci5uZXh0ID0gZnVuY3Rpb24oKXsgcmV0dXJuIHtkb25lOiBzYWZlID0gdHJ1ZX07IH07XG5cdCAgICBhcnJbSVRFUkFUT1JdID0gZnVuY3Rpb24oKXsgcmV0dXJuIGl0ZXI7IH07XG5cdCAgICBleGVjKGFycik7XG5cdCAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfVxuXHQgIHJldHVybiBzYWZlO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTI4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZXh0ZW5kczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOCk7XG5cdFxuXHR2YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBmYWxsYmFjayA9IGZ1bmN0aW9uIGZhbGxiYWNrKHZhbHVlLCBfZmFsbGJhY2spIHtcblx0ICByZXR1cm4gdmFsdWUgIT0gbnVsbCA/IHZhbHVlIDogX2ZhbGxiYWNrO1xuXHR9O1xuXHRcblx0dmFyIG1ha2VIYW5kbGVQb2ludCA9IGZ1bmN0aW9uIG1ha2VIYW5kbGVQb2ludCgpIHtcblx0ICB2YXIgbyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzBdO1xuXHRcblx0ICByZXR1cm4ge1xuXHQgICAgaW5kZXg6IGZhbGxiYWNrKG8uaW5kZXgsIDApLFxuXHQgICAgLy8gY29vcmRpbmF0ZXNcblx0ICAgIGFuZ2xlOiBmYWxsYmFjayhvLmFuZ2xlLCBudWxsKSxcblx0ICAgIHJhZGl1czogZmFsbGJhY2soby5yYWRpdXMsIG51bGwpLFxuXHQgICAgLy8gc3RhdGVcblx0ICAgIGlzVG91Y2hlZDogZmFsbGJhY2soby5pc1RvdWNoZWQsIGZhbHNlKSxcblx0ICAgIGlzU2VsZWN0ZWQ6IGZhbGxiYWNrKG8uaXNTZWxlY3RlZCwgZmFsc2UpXG5cdCAgfTtcblx0fTtcblx0XG5cdHZhciBtYWtlUG9zaXRpb25Qb2ludCA9IGZ1bmN0aW9uIG1ha2VQb3NpdGlvblBvaW50KCkge1xuXHQgIHZhciBvID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMF07XG5cdFxuXHQgIHJldHVybiB7XG5cdCAgICAvLyBjb29yZGluYXRlc1xuXHQgICAgeDogZmFsbGJhY2soby54LCAwKSxcblx0ICAgIHk6IGZhbGxiYWNrKG8ueSwgMCksXG5cdCAgICAvLyB0ZW1wb3JhcnkgY29vcmRpbmF0ZXMgKHdoZW4gdXNlciBtb3ZlcyB0aGUgcG9pbnQpIC1cblx0ICAgIC8vIHNob3VsZCBub3QgYmUgaW4gaGlzdG9yeVxuXHQgICAgdGVtcFg6IGZhbGxiYWNrKG8udGVtcFgsIDApLFxuXHQgICAgdGVtcFk6IGZhbGxiYWNrKG8udGVtcFksIDApLFxuXHQgICAgLy8gc3RhdGVcblx0ICAgIGlzVG91Y2hlZDogZmFsbGJhY2soby5pc1RvdWNoZWQsIGZhbHNlKSxcblx0ICAgIGlzU2VsZWN0ZWQ6IGZhbGxiYWNrKG8uaXNTZWxlY3RlZCwgZmFsc2UpXG5cdCAgfTtcblx0fTtcblx0XG5cdHZhciBtYWtlUG9pbnQgPSBmdW5jdGlvbiBtYWtlUG9pbnQoKSB7XG5cdCAgdmFyIG8gPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcblx0XG5cdCAgcmV0dXJuICgwLCBfZXh0ZW5kczMuZGVmYXVsdCkoe1xuXHQgICAgLy8gc3RhdGVcblx0ICAgIC8vIGlzT25lSGFuZGxlOiBmYWxsYmFjayggby5pc09uZUhhbmRsZSwgZmFsc2UgKSxcblx0ICAgIGlzTG9ja2VkWDogZmFsbGJhY2soby5pc0xvY2tlZFgsIGZhbHNlKSxcblx0ICAgIGlzTG9ja2VkWTogZmFsbGJhY2soby5pc0xvY2tlZFksIGZhbHNlKSxcblx0ICAgIC8vIHR5cGUgb2YgdGhlIHBvaW50OlxuXHQgICAgLy8gICAnc3RyYWlnaHQnIHx8ICdtaXJyb3JlZCcgfHwgJ2Rpc2Nvbm5lY3RlZCcgfHwgJ2FzeW1ldHJpYydcblx0ICAgIHR5cGU6IGZhbGxiYWNrKG8udHlwZSwgJ3N0cmFpZ2h0Jylcblx0ICB9LCBtYWtlUG9zaXRpb25Qb2ludChvKSwge1xuXHQgICAgLy8gYWRkIGN1cnZlIGhhbmRsZXNcblx0ICAgIGhhbmRsZTE6IG1ha2VIYW5kbGVQb2ludChvLmhhbmRsZTEgfHwgeyBpbmRleDogMSB9KSxcblx0ICAgIGhhbmRsZTI6IG1ha2VIYW5kbGVQb2ludChvLmhhbmRsZTIgfHwgeyBpbmRleDogMiB9KVxuXHQgIH0pO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gbWFrZVBvaW50O1xuXG4vKioqLyB9LFxuLyogMTI5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZXh0ZW5kczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOCk7XG5cdFxuXHR2YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBJTklUSUFMX1NUQVRFID0ge1xuXHQgIGlzU2hvdzogZmFsc2UsXG5cdCAgdHlwZTogJ3N0cmFpZ2h0J1xuXHR9O1xuXHRcblx0dmFyIHBvaW50Q29udHJvbHMgPSBmdW5jdGlvbiBwb2ludENvbnRyb2xzKCkge1xuXHQgIHZhciBzdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IElOSVRJQUxfU1RBVEUgOiBhcmd1bWVudHNbMF07XG5cdCAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50c1sxXTtcblx0XG5cdCAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuXHQgICAgLy8gcHJvYmFibHkgcmVkdW5kYW50XG5cdCAgICAvLyBjYXNlICdQT0lOVF9BREQnOiB7XG5cdCAgICAvLyAgIHJldHVybiB7IC4uLnN0YXRlLCBpc1Nob3c6IHRydWUsIHR5cGU6ICdzdHJhaWdodCcgfTtcblx0ICAgIC8vIH1cblx0ICAgIGNhc2UgJ1BPSU5UX1NFTEVDVCc6XG5cdCAgICAgIHtcblx0ICAgICAgICByZXR1cm4gKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7fSwgc3RhdGUsIHsgaXNTaG93OiAhYWN0aW9uLmlzRGVzZWxlY3QsIHR5cGU6IGFjdGlvbi5kYXRhLnR5cGUgfSk7XG5cdCAgICAgIH1cblx0ICAgIGNhc2UgJ1BPSU5UX0NIQU5HRV9UWVBFJzpcblx0ICAgICAge1xuXHQgICAgICAgIHJldHVybiAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBzdGF0ZSwgeyB0eXBlOiBhY3Rpb24uZGF0YSB9KTtcblx0ICAgICAgfVxuXHQgICAgY2FzZSAnUE9JTlRfREVTRUxFQ1RfQUxMJzpcblx0ICAgICAge1xuXHQgICAgICAgIHJldHVybiAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBzdGF0ZSwgeyBpc1Nob3c6IGZhbHNlIH0pO1xuXHQgICAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBzdGF0ZTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHBvaW50Q29udHJvbHM7XG5cbi8qKiovIH0sXG4vKiAxMzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsvKiEgSGFtbWVyLkpTIC0gdjIuMC43IC0gMjAxNi0wNC0yMlxuXHQgKiBodHRwOi8vaGFtbWVyanMuZ2l0aHViLmlvL1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQgKGMpIDIwMTYgSm9yaWsgVGFuZ2VsZGVyO1xuXHQgKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgKi9cblx0KGZ1bmN0aW9uKHdpbmRvdywgZG9jdW1lbnQsIGV4cG9ydE5hbWUsIHVuZGVmaW5lZCkge1xuXHQgICd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBWRU5ET1JfUFJFRklYRVMgPSBbJycsICd3ZWJraXQnLCAnTW96JywgJ01TJywgJ21zJywgJ28nXTtcblx0dmFyIFRFU1RfRUxFTUVOVCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcblx0dmFyIFRZUEVfRlVOQ1RJT04gPSAnZnVuY3Rpb24nO1xuXHRcblx0dmFyIHJvdW5kID0gTWF0aC5yb3VuZDtcblx0dmFyIGFicyA9IE1hdGguYWJzO1xuXHR2YXIgbm93ID0gRGF0ZS5ub3c7XG5cdFxuXHQvKipcblx0ICogc2V0IGEgdGltZW91dCB3aXRoIGEgZ2l2ZW4gc2NvcGVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVvdXRcblx0ICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRcblx0ICogQHJldHVybnMge251bWJlcn1cblx0ICovXG5cdGZ1bmN0aW9uIHNldFRpbWVvdXRDb250ZXh0KGZuLCB0aW1lb3V0LCBjb250ZXh0KSB7XG5cdCAgICByZXR1cm4gc2V0VGltZW91dChiaW5kRm4oZm4sIGNvbnRleHQpLCB0aW1lb3V0KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIGlmIHRoZSBhcmd1bWVudCBpcyBhbiBhcnJheSwgd2Ugd2FudCB0byBleGVjdXRlIHRoZSBmbiBvbiBlYWNoIGVudHJ5XG5cdCAqIGlmIGl0IGFpbnQgYW4gYXJyYXkgd2UgZG9uJ3Qgd2FudCB0byBkbyBhIHRoaW5nLlxuXHQgKiB0aGlzIGlzIHVzZWQgYnkgYWxsIHRoZSBtZXRob2RzIHRoYXQgYWNjZXB0IGEgc2luZ2xlIGFuZCBhcnJheSBhcmd1bWVudC5cblx0ICogQHBhcmFtIHsqfEFycmF5fSBhcmdcblx0ICogQHBhcmFtIHtTdHJpbmd9IGZuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbY29udGV4dF1cblx0ICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAqL1xuXHRmdW5jdGlvbiBpbnZva2VBcnJheUFyZyhhcmcsIGZuLCBjb250ZXh0KSB7XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdCAgICAgICAgZWFjaChhcmcsIGNvbnRleHRbZm5dLCBjb250ZXh0KTtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIHdhbGsgb2JqZWN0cyBhbmQgYXJyYXlzXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0b3Jcblx0ICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRcblx0ICovXG5cdGZ1bmN0aW9uIGVhY2gob2JqLCBpdGVyYXRvciwgY29udGV4dCkge1xuXHQgICAgdmFyIGk7XG5cdFxuXHQgICAgaWYgKCFvYmopIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKG9iai5mb3JFYWNoKSB7XG5cdCAgICAgICAgb2JqLmZvckVhY2goaXRlcmF0b3IsIGNvbnRleHQpO1xuXHQgICAgfSBlbHNlIGlmIChvYmoubGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICBpID0gMDtcblx0ICAgICAgICB3aGlsZSAoaSA8IG9iai5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpbaV0sIGksIG9iaik7XG5cdCAgICAgICAgICAgIGkrKztcblx0ICAgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIGZvciAoaSBpbiBvYmopIHtcblx0ICAgICAgICAgICAgb2JqLmhhc093blByb3BlcnR5KGkpICYmIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIHdyYXAgYSBtZXRob2Qgd2l0aCBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgYW5kIHN0YWNrIHRyYWNlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG1ldGhvZFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgbmV3IGZ1bmN0aW9uIHdyYXBwaW5nIHRoZSBzdXBwbGllZCBtZXRob2QuXG5cdCAqL1xuXHRmdW5jdGlvbiBkZXByZWNhdGUobWV0aG9kLCBuYW1lLCBtZXNzYWdlKSB7XG5cdCAgICB2YXIgZGVwcmVjYXRpb25NZXNzYWdlID0gJ0RFUFJFQ0FURUQgTUVUSE9EOiAnICsgbmFtZSArICdcXG4nICsgbWVzc2FnZSArICcgQVQgXFxuJztcblx0ICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgZSA9IG5ldyBFcnJvcignZ2V0LXN0YWNrLXRyYWNlJyk7XG5cdCAgICAgICAgdmFyIHN0YWNrID0gZSAmJiBlLnN0YWNrID8gZS5zdGFjay5yZXBsYWNlKC9eW15cXChdKz9bXFxuJF0vZ20sICcnKVxuXHQgICAgICAgICAgICAucmVwbGFjZSgvXlxccythdFxccysvZ20sICcnKVxuXHQgICAgICAgICAgICAucmVwbGFjZSgvXk9iamVjdC48YW5vbnltb3VzPlxccypcXCgvZ20sICd7YW5vbnltb3VzfSgpQCcpIDogJ1Vua25vd24gU3RhY2sgVHJhY2UnO1xuXHRcblx0ICAgICAgICB2YXIgbG9nID0gd2luZG93LmNvbnNvbGUgJiYgKHdpbmRvdy5jb25zb2xlLndhcm4gfHwgd2luZG93LmNvbnNvbGUubG9nKTtcblx0ICAgICAgICBpZiAobG9nKSB7XG5cdCAgICAgICAgICAgIGxvZy5jYWxsKHdpbmRvdy5jb25zb2xlLCBkZXByZWNhdGlvbk1lc3NhZ2UsIHN0YWNrKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIG1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIGV4dGVuZCBvYmplY3QuXG5cdCAqIG1lYW5zIHRoYXQgcHJvcGVydGllcyBpbiBkZXN0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gYnkgdGhlIG9uZXMgaW4gc3JjLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7Li4uT2JqZWN0fSBvYmplY3RzX3RvX2Fzc2lnblxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSB0YXJnZXRcblx0ICovXG5cdHZhciBhc3NpZ247XG5cdGlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgYXNzaWduID0gZnVuY3Rpb24gYXNzaWduKHRhcmdldCkge1xuXHQgICAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCB8fCB0YXJnZXQgPT09IG51bGwpIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG5cdCAgICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcblx0ICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG5cdCAgICAgICAgICAgIGlmIChzb3VyY2UgIT09IHVuZGVmaW5lZCAmJiBzb3VyY2UgIT09IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIG5leHRLZXkgaW4gc291cmNlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShuZXh0S2V5KSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbbmV4dEtleV0gPSBzb3VyY2VbbmV4dEtleV07XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBvdXRwdXQ7XG5cdCAgICB9O1xuXHR9IGVsc2Uge1xuXHQgICAgYXNzaWduID0gT2JqZWN0LmFzc2lnbjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIGV4dGVuZCBvYmplY3QuXG5cdCAqIG1lYW5zIHRoYXQgcHJvcGVydGllcyBpbiBkZXN0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gYnkgdGhlIG9uZXMgaW4gc3JjLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gZGVzdFxuXHQgKiBAcGFyYW0ge09iamVjdH0gc3JjXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW21lcmdlPWZhbHNlXVxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBkZXN0XG5cdCAqL1xuXHR2YXIgZXh0ZW5kID0gZGVwcmVjYXRlKGZ1bmN0aW9uIGV4dGVuZChkZXN0LCBzcmMsIG1lcmdlKSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHNyYyk7XG5cdCAgICB2YXIgaSA9IDA7XG5cdCAgICB3aGlsZSAoaSA8IGtleXMubGVuZ3RoKSB7XG5cdCAgICAgICAgaWYgKCFtZXJnZSB8fCAobWVyZ2UgJiYgZGVzdFtrZXlzW2ldXSA9PT0gdW5kZWZpbmVkKSkge1xuXHQgICAgICAgICAgICBkZXN0W2tleXNbaV1dID0gc3JjW2tleXNbaV1dO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpKys7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZGVzdDtcblx0fSwgJ2V4dGVuZCcsICdVc2UgYGFzc2lnbmAuJyk7XG5cdFxuXHQvKipcblx0ICogbWVyZ2UgdGhlIHZhbHVlcyBmcm9tIHNyYyBpbiB0aGUgZGVzdC5cblx0ICogbWVhbnMgdGhhdCBwcm9wZXJ0aWVzIHRoYXQgZXhpc3QgaW4gZGVzdCB3aWxsIG5vdCBiZSBvdmVyd3JpdHRlbiBieSBzcmNcblx0ICogQHBhcmFtIHtPYmplY3R9IGRlc3Rcblx0ICogQHBhcmFtIHtPYmplY3R9IHNyY1xuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBkZXN0XG5cdCAqL1xuXHR2YXIgbWVyZ2UgPSBkZXByZWNhdGUoZnVuY3Rpb24gbWVyZ2UoZGVzdCwgc3JjKSB7XG5cdCAgICByZXR1cm4gZXh0ZW5kKGRlc3QsIHNyYywgdHJ1ZSk7XG5cdH0sICdtZXJnZScsICdVc2UgYGFzc2lnbmAuJyk7XG5cdFxuXHQvKipcblx0ICogc2ltcGxlIGNsYXNzIGluaGVyaXRhbmNlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNoaWxkXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGJhc2Vcblx0ICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzXVxuXHQgKi9cblx0ZnVuY3Rpb24gaW5oZXJpdChjaGlsZCwgYmFzZSwgcHJvcGVydGllcykge1xuXHQgICAgdmFyIGJhc2VQID0gYmFzZS5wcm90b3R5cGUsXG5cdCAgICAgICAgY2hpbGRQO1xuXHRcblx0ICAgIGNoaWxkUCA9IGNoaWxkLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoYmFzZVApO1xuXHQgICAgY2hpbGRQLmNvbnN0cnVjdG9yID0gY2hpbGQ7XG5cdCAgICBjaGlsZFAuX3N1cGVyID0gYmFzZVA7XG5cdFxuXHQgICAgaWYgKHByb3BlcnRpZXMpIHtcblx0ICAgICAgICBhc3NpZ24oY2hpbGRQLCBwcm9wZXJ0aWVzKTtcblx0ICAgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIHNpbXBsZSBmdW5jdGlvbiBiaW5kXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0XG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn1cblx0ICovXG5cdGZ1bmN0aW9uIGJpbmRGbihmbiwgY29udGV4dCkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIGJvdW5kRm4oKSB7XG5cdCAgICAgICAgcmV0dXJuIGZuLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG5cdCAgICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogbGV0IGEgYm9vbGVhbiB2YWx1ZSBhbHNvIGJlIGEgZnVuY3Rpb24gdGhhdCBtdXN0IHJldHVybiBhIGJvb2xlYW5cblx0ICogdGhpcyBmaXJzdCBpdGVtIGluIGFyZ3Mgd2lsbCBiZSB1c2VkIGFzIHRoZSBjb250ZXh0XG5cdCAqIEBwYXJhbSB7Qm9vbGVhbnxGdW5jdGlvbn0gdmFsXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFthcmdzXVxuXHQgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICovXG5cdGZ1bmN0aW9uIGJvb2xPckZuKHZhbCwgYXJncykge1xuXHQgICAgaWYgKHR5cGVvZiB2YWwgPT0gVFlQRV9GVU5DVElPTikge1xuXHQgICAgICAgIHJldHVybiB2YWwuYXBwbHkoYXJncyA/IGFyZ3NbMF0gfHwgdW5kZWZpbmVkIDogdW5kZWZpbmVkLCBhcmdzKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB2YWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiB1c2UgdGhlIHZhbDIgd2hlbiB2YWwxIGlzIHVuZGVmaW5lZFxuXHQgKiBAcGFyYW0geyp9IHZhbDFcblx0ICogQHBhcmFtIHsqfSB2YWwyXG5cdCAqIEByZXR1cm5zIHsqfVxuXHQgKi9cblx0ZnVuY3Rpb24gaWZVbmRlZmluZWQodmFsMSwgdmFsMikge1xuXHQgICAgcmV0dXJuICh2YWwxID09PSB1bmRlZmluZWQpID8gdmFsMiA6IHZhbDE7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBhZGRFdmVudExpc3RlbmVyIHdpdGggbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2Vcblx0ICogQHBhcmFtIHtFdmVudFRhcmdldH0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlc1xuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG5cdCAqL1xuXHRmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycyh0YXJnZXQsIHR5cGVzLCBoYW5kbGVyKSB7XG5cdCAgICBlYWNoKHNwbGl0U3RyKHR5cGVzKSwgZnVuY3Rpb24odHlwZSkge1xuXHQgICAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIsIGZhbHNlKTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogcmVtb3ZlRXZlbnRMaXN0ZW5lciB3aXRoIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlXG5cdCAqIEBwYXJhbSB7RXZlbnRUYXJnZXR9IHRhcmdldFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZXNcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuXHQgKi9cblx0ZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcnModGFyZ2V0LCB0eXBlcywgaGFuZGxlcikge1xuXHQgICAgZWFjaChzcGxpdFN0cih0eXBlcyksIGZ1bmN0aW9uKHR5cGUpIHtcblx0ICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCBmYWxzZSk7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIGZpbmQgaWYgYSBub2RlIGlzIGluIHRoZSBnaXZlbiBwYXJlbnRcblx0ICogQG1ldGhvZCBoYXNQYXJlbnRcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gbm9kZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBwYXJlbnRcblx0ICogQHJldHVybiB7Qm9vbGVhbn0gZm91bmRcblx0ICovXG5cdGZ1bmN0aW9uIGhhc1BhcmVudChub2RlLCBwYXJlbnQpIHtcblx0ICAgIHdoaWxlIChub2RlKSB7XG5cdCAgICAgICAgaWYgKG5vZGUgPT0gcGFyZW50KSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogc21hbGwgaW5kZXhPZiB3cmFwcGVyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IGZpbmRcblx0ICogQHJldHVybnMge0Jvb2xlYW59IGZvdW5kXG5cdCAqL1xuXHRmdW5jdGlvbiBpblN0cihzdHIsIGZpbmQpIHtcblx0ICAgIHJldHVybiBzdHIuaW5kZXhPZihmaW5kKSA+IC0xO1xuXHR9XG5cdFxuXHQvKipcblx0ICogc3BsaXQgc3RyaW5nIG9uIHdoaXRlc3BhY2Vcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IHdvcmRzXG5cdCAqL1xuXHRmdW5jdGlvbiBzcGxpdFN0cihzdHIpIHtcblx0ICAgIHJldHVybiBzdHIudHJpbSgpLnNwbGl0KC9cXHMrL2cpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogZmluZCBpZiBhIGFycmF5IGNvbnRhaW5zIHRoZSBvYmplY3QgdXNpbmcgaW5kZXhPZiBvciBhIHNpbXBsZSBwb2x5RmlsbFxuXHQgKiBAcGFyYW0ge0FycmF5fSBzcmNcblx0ICogQHBhcmFtIHtTdHJpbmd9IGZpbmRcblx0ICogQHBhcmFtIHtTdHJpbmd9IFtmaW5kQnlLZXldXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW58TnVtYmVyfSBmYWxzZSB3aGVuIG5vdCBmb3VuZCwgb3IgdGhlIGluZGV4XG5cdCAqL1xuXHRmdW5jdGlvbiBpbkFycmF5KHNyYywgZmluZCwgZmluZEJ5S2V5KSB7XG5cdCAgICBpZiAoc3JjLmluZGV4T2YgJiYgIWZpbmRCeUtleSkge1xuXHQgICAgICAgIHJldHVybiBzcmMuaW5kZXhPZihmaW5kKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdmFyIGkgPSAwO1xuXHQgICAgICAgIHdoaWxlIChpIDwgc3JjLmxlbmd0aCkge1xuXHQgICAgICAgICAgICBpZiAoKGZpbmRCeUtleSAmJiBzcmNbaV1bZmluZEJ5S2V5XSA9PSBmaW5kKSB8fCAoIWZpbmRCeUtleSAmJiBzcmNbaV0gPT09IGZpbmQpKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gaTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpKys7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiAtMTtcblx0ICAgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIGNvbnZlcnQgYXJyYXktbGlrZSBvYmplY3RzIHRvIHJlYWwgYXJyYXlzXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHJldHVybnMge0FycmF5fVxuXHQgKi9cblx0ZnVuY3Rpb24gdG9BcnJheShvYmopIHtcblx0ICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChvYmosIDApO1xuXHR9XG5cdFxuXHQvKipcblx0ICogdW5pcXVlIGFycmF5IHdpdGggb2JqZWN0cyBiYXNlZCBvbiBhIGtleSAobGlrZSAnaWQnKSBvciBqdXN0IGJ5IHRoZSBhcnJheSdzIHZhbHVlXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHNyYyBbe2lkOjF9LHtpZDoyfSx7aWQ6MX1dXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFtzb3J0PUZhbHNlXVxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFt7aWQ6MX0se2lkOjJ9XVxuXHQgKi9cblx0ZnVuY3Rpb24gdW5pcXVlQXJyYXkoc3JjLCBrZXksIHNvcnQpIHtcblx0ICAgIHZhciByZXN1bHRzID0gW107XG5cdCAgICB2YXIgdmFsdWVzID0gW107XG5cdCAgICB2YXIgaSA9IDA7XG5cdFxuXHQgICAgd2hpbGUgKGkgPCBzcmMubGVuZ3RoKSB7XG5cdCAgICAgICAgdmFyIHZhbCA9IGtleSA/IHNyY1tpXVtrZXldIDogc3JjW2ldO1xuXHQgICAgICAgIGlmIChpbkFycmF5KHZhbHVlcywgdmFsKSA8IDApIHtcblx0ICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHNyY1tpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhbHVlc1tpXSA9IHZhbDtcblx0ICAgICAgICBpKys7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHNvcnQpIHtcblx0ICAgICAgICBpZiAoIWtleSkge1xuXHQgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5zb3J0KCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuc29ydChmdW5jdGlvbiBzb3J0VW5pcXVlQXJyYXkoYSwgYikge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGFba2V5XSA+IGJba2V5XTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiByZXN1bHRzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogZ2V0IHRoZSBwcmVmaXhlZCBwcm9wZXJ0eVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eVxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfFVuZGVmaW5lZH0gcHJlZml4ZWRcblx0ICovXG5cdGZ1bmN0aW9uIHByZWZpeGVkKG9iaiwgcHJvcGVydHkpIHtcblx0ICAgIHZhciBwcmVmaXgsIHByb3A7XG5cdCAgICB2YXIgY2FtZWxQcm9wID0gcHJvcGVydHlbMF0udG9VcHBlckNhc2UoKSArIHByb3BlcnR5LnNsaWNlKDEpO1xuXHRcblx0ICAgIHZhciBpID0gMDtcblx0ICAgIHdoaWxlIChpIDwgVkVORE9SX1BSRUZJWEVTLmxlbmd0aCkge1xuXHQgICAgICAgIHByZWZpeCA9IFZFTkRPUl9QUkVGSVhFU1tpXTtcblx0ICAgICAgICBwcm9wID0gKHByZWZpeCkgPyBwcmVmaXggKyBjYW1lbFByb3AgOiBwcm9wZXJ0eTtcblx0XG5cdCAgICAgICAgaWYgKHByb3AgaW4gb2JqKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBwcm9wO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpKys7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdW5kZWZpbmVkO1xuXHR9XG5cdFxuXHQvKipcblx0ICogZ2V0IGEgdW5pcXVlIGlkXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IHVuaXF1ZUlkXG5cdCAqL1xuXHR2YXIgX3VuaXF1ZUlkID0gMTtcblx0ZnVuY3Rpb24gdW5pcXVlSWQoKSB7XG5cdCAgICByZXR1cm4gX3VuaXF1ZUlkKys7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBnZXQgdGhlIHdpbmRvdyBvYmplY3Qgb2YgYW4gZWxlbWVudFxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG5cdCAqIEByZXR1cm5zIHtEb2N1bWVudFZpZXd8V2luZG93fVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0V2luZG93Rm9yRWxlbWVudChlbGVtZW50KSB7XG5cdCAgICB2YXIgZG9jID0gZWxlbWVudC5vd25lckRvY3VtZW50IHx8IGVsZW1lbnQ7XG5cdCAgICByZXR1cm4gKGRvYy5kZWZhdWx0VmlldyB8fCBkb2MucGFyZW50V2luZG93IHx8IHdpbmRvdyk7XG5cdH1cblx0XG5cdHZhciBNT0JJTEVfUkVHRVggPSAvbW9iaWxlfHRhYmxldHxpcChhZHxob25lfG9kKXxhbmRyb2lkL2k7XG5cdFxuXHR2YXIgU1VQUE9SVF9UT1VDSCA9ICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpO1xuXHR2YXIgU1VQUE9SVF9QT0lOVEVSX0VWRU5UUyA9IHByZWZpeGVkKHdpbmRvdywgJ1BvaW50ZXJFdmVudCcpICE9PSB1bmRlZmluZWQ7XG5cdHZhciBTVVBQT1JUX09OTFlfVE9VQ0ggPSBTVVBQT1JUX1RPVUNIICYmIE1PQklMRV9SRUdFWC50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuXHRcblx0dmFyIElOUFVUX1RZUEVfVE9VQ0ggPSAndG91Y2gnO1xuXHR2YXIgSU5QVVRfVFlQRV9QRU4gPSAncGVuJztcblx0dmFyIElOUFVUX1RZUEVfTU9VU0UgPSAnbW91c2UnO1xuXHR2YXIgSU5QVVRfVFlQRV9LSU5FQ1QgPSAna2luZWN0Jztcblx0XG5cdHZhciBDT01QVVRFX0lOVEVSVkFMID0gMjU7XG5cdFxuXHR2YXIgSU5QVVRfU1RBUlQgPSAxO1xuXHR2YXIgSU5QVVRfTU9WRSA9IDI7XG5cdHZhciBJTlBVVF9FTkQgPSA0O1xuXHR2YXIgSU5QVVRfQ0FOQ0VMID0gODtcblx0XG5cdHZhciBESVJFQ1RJT05fTk9ORSA9IDE7XG5cdHZhciBESVJFQ1RJT05fTEVGVCA9IDI7XG5cdHZhciBESVJFQ1RJT05fUklHSFQgPSA0O1xuXHR2YXIgRElSRUNUSU9OX1VQID0gODtcblx0dmFyIERJUkVDVElPTl9ET1dOID0gMTY7XG5cdFxuXHR2YXIgRElSRUNUSU9OX0hPUklaT05UQUwgPSBESVJFQ1RJT05fTEVGVCB8IERJUkVDVElPTl9SSUdIVDtcblx0dmFyIERJUkVDVElPTl9WRVJUSUNBTCA9IERJUkVDVElPTl9VUCB8IERJUkVDVElPTl9ET1dOO1xuXHR2YXIgRElSRUNUSU9OX0FMTCA9IERJUkVDVElPTl9IT1JJWk9OVEFMIHwgRElSRUNUSU9OX1ZFUlRJQ0FMO1xuXHRcblx0dmFyIFBST1BTX1hZID0gWyd4JywgJ3knXTtcblx0dmFyIFBST1BTX0NMSUVOVF9YWSA9IFsnY2xpZW50WCcsICdjbGllbnRZJ107XG5cdFxuXHQvKipcblx0ICogY3JlYXRlIG5ldyBpbnB1dCB0eXBlIG1hbmFnZXJcblx0ICogQHBhcmFtIHtNYW5hZ2VyfSBtYW5hZ2VyXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG5cdCAqIEByZXR1cm5zIHtJbnB1dH1cblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqL1xuXHRmdW5jdGlvbiBJbnB1dChtYW5hZ2VyLCBjYWxsYmFjaykge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdGhpcy5tYW5hZ2VyID0gbWFuYWdlcjtcblx0ICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcblx0ICAgIHRoaXMuZWxlbWVudCA9IG1hbmFnZXIuZWxlbWVudDtcblx0ICAgIHRoaXMudGFyZ2V0ID0gbWFuYWdlci5vcHRpb25zLmlucHV0VGFyZ2V0O1xuXHRcblx0ICAgIC8vIHNtYWxsZXIgd3JhcHBlciBhcm91bmQgdGhlIGhhbmRsZXIsIGZvciB0aGUgc2NvcGUgYW5kIHRoZSBlbmFibGVkIHN0YXRlIG9mIHRoZSBtYW5hZ2VyLFxuXHQgICAgLy8gc28gd2hlbiBkaXNhYmxlZCB0aGUgaW5wdXQgZXZlbnRzIGFyZSBjb21wbGV0ZWx5IGJ5cGFzc2VkLlxuXHQgICAgdGhpcy5kb21IYW5kbGVyID0gZnVuY3Rpb24oZXYpIHtcblx0ICAgICAgICBpZiAoYm9vbE9yRm4obWFuYWdlci5vcHRpb25zLmVuYWJsZSwgW21hbmFnZXJdKSkge1xuXHQgICAgICAgICAgICBzZWxmLmhhbmRsZXIoZXYpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5pbml0KCk7XG5cdFxuXHR9XG5cdFxuXHRJbnB1dC5wcm90b3R5cGUgPSB7XG5cdCAgICAvKipcblx0ICAgICAqIHNob3VsZCBoYW5kbGUgdGhlIGlucHV0RXZlbnQgZGF0YSBhbmQgdHJpZ2dlciB0aGUgY2FsbGJhY2tcblx0ICAgICAqIEB2aXJ0dWFsXG5cdCAgICAgKi9cblx0ICAgIGhhbmRsZXI6IGZ1bmN0aW9uKCkgeyB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogYmluZCB0aGUgZXZlbnRzXG5cdCAgICAgKi9cblx0ICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHRoaXMuZXZFbCAmJiBhZGRFdmVudExpc3RlbmVycyh0aGlzLmVsZW1lbnQsIHRoaXMuZXZFbCwgdGhpcy5kb21IYW5kbGVyKTtcblx0ICAgICAgICB0aGlzLmV2VGFyZ2V0ICYmIGFkZEV2ZW50TGlzdGVuZXJzKHRoaXMudGFyZ2V0LCB0aGlzLmV2VGFyZ2V0LCB0aGlzLmRvbUhhbmRsZXIpO1xuXHQgICAgICAgIHRoaXMuZXZXaW4gJiYgYWRkRXZlbnRMaXN0ZW5lcnMoZ2V0V2luZG93Rm9yRWxlbWVudCh0aGlzLmVsZW1lbnQpLCB0aGlzLmV2V2luLCB0aGlzLmRvbUhhbmRsZXIpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIHVuYmluZCB0aGUgZXZlbnRzXG5cdCAgICAgKi9cblx0ICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHRoaXMuZXZFbCAmJiByZW1vdmVFdmVudExpc3RlbmVycyh0aGlzLmVsZW1lbnQsIHRoaXMuZXZFbCwgdGhpcy5kb21IYW5kbGVyKTtcblx0ICAgICAgICB0aGlzLmV2VGFyZ2V0ICYmIHJlbW92ZUV2ZW50TGlzdGVuZXJzKHRoaXMudGFyZ2V0LCB0aGlzLmV2VGFyZ2V0LCB0aGlzLmRvbUhhbmRsZXIpO1xuXHQgICAgICAgIHRoaXMuZXZXaW4gJiYgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoZ2V0V2luZG93Rm9yRWxlbWVudCh0aGlzLmVsZW1lbnQpLCB0aGlzLmV2V2luLCB0aGlzLmRvbUhhbmRsZXIpO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIGNyZWF0ZSBuZXcgaW5wdXQgdHlwZSBtYW5hZ2VyXG5cdCAqIGNhbGxlZCBieSB0aGUgTWFuYWdlciBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge0hhbW1lcn0gbWFuYWdlclxuXHQgKiBAcmV0dXJucyB7SW5wdXR9XG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVJbnB1dEluc3RhbmNlKG1hbmFnZXIpIHtcblx0ICAgIHZhciBUeXBlO1xuXHQgICAgdmFyIGlucHV0Q2xhc3MgPSBtYW5hZ2VyLm9wdGlvbnMuaW5wdXRDbGFzcztcblx0XG5cdCAgICBpZiAoaW5wdXRDbGFzcykge1xuXHQgICAgICAgIFR5cGUgPSBpbnB1dENsYXNzO1xuXHQgICAgfSBlbHNlIGlmIChTVVBQT1JUX1BPSU5URVJfRVZFTlRTKSB7XG5cdCAgICAgICAgVHlwZSA9IFBvaW50ZXJFdmVudElucHV0O1xuXHQgICAgfSBlbHNlIGlmIChTVVBQT1JUX09OTFlfVE9VQ0gpIHtcblx0ICAgICAgICBUeXBlID0gVG91Y2hJbnB1dDtcblx0ICAgIH0gZWxzZSBpZiAoIVNVUFBPUlRfVE9VQ0gpIHtcblx0ICAgICAgICBUeXBlID0gTW91c2VJbnB1dDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgVHlwZSA9IFRvdWNoTW91c2VJbnB1dDtcblx0ICAgIH1cblx0ICAgIHJldHVybiBuZXcgKFR5cGUpKG1hbmFnZXIsIGlucHV0SGFuZGxlcik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBoYW5kbGUgaW5wdXQgZXZlbnRzXG5cdCAqIEBwYXJhbSB7TWFuYWdlcn0gbWFuYWdlclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRUeXBlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuXHQgKi9cblx0ZnVuY3Rpb24gaW5wdXRIYW5kbGVyKG1hbmFnZXIsIGV2ZW50VHlwZSwgaW5wdXQpIHtcblx0ICAgIHZhciBwb2ludGVyc0xlbiA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aDtcblx0ICAgIHZhciBjaGFuZ2VkUG9pbnRlcnNMZW4gPSBpbnB1dC5jaGFuZ2VkUG9pbnRlcnMubGVuZ3RoO1xuXHQgICAgdmFyIGlzRmlyc3QgPSAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQgJiYgKHBvaW50ZXJzTGVuIC0gY2hhbmdlZFBvaW50ZXJzTGVuID09PSAwKSk7XG5cdCAgICB2YXIgaXNGaW5hbCA9IChldmVudFR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSAmJiAocG9pbnRlcnNMZW4gLSBjaGFuZ2VkUG9pbnRlcnNMZW4gPT09IDApKTtcblx0XG5cdCAgICBpbnB1dC5pc0ZpcnN0ID0gISFpc0ZpcnN0O1xuXHQgICAgaW5wdXQuaXNGaW5hbCA9ICEhaXNGaW5hbDtcblx0XG5cdCAgICBpZiAoaXNGaXJzdCkge1xuXHQgICAgICAgIG1hbmFnZXIuc2Vzc2lvbiA9IHt9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHNvdXJjZSBldmVudCBpcyB0aGUgbm9ybWFsaXplZCB2YWx1ZSBvZiB0aGUgZG9tRXZlbnRzXG5cdCAgICAvLyBsaWtlICd0b3VjaHN0YXJ0LCBtb3VzZXVwLCBwb2ludGVyZG93bidcblx0ICAgIGlucHV0LmV2ZW50VHlwZSA9IGV2ZW50VHlwZTtcblx0XG5cdCAgICAvLyBjb21wdXRlIHNjYWxlLCByb3RhdGlvbiBldGNcblx0ICAgIGNvbXB1dGVJbnB1dERhdGEobWFuYWdlciwgaW5wdXQpO1xuXHRcblx0ICAgIC8vIGVtaXQgc2VjcmV0IGV2ZW50XG5cdCAgICBtYW5hZ2VyLmVtaXQoJ2hhbW1lci5pbnB1dCcsIGlucHV0KTtcblx0XG5cdCAgICBtYW5hZ2VyLnJlY29nbml6ZShpbnB1dCk7XG5cdCAgICBtYW5hZ2VyLnNlc3Npb24ucHJldklucHV0ID0gaW5wdXQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBleHRlbmQgdGhlIGRhdGEgd2l0aCBzb21lIHVzYWJsZSBwcm9wZXJ0aWVzIGxpa2Ugc2NhbGUsIHJvdGF0ZSwgdmVsb2NpdHkgZXRjXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBtYW5hZ2VyXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuXHQgKi9cblx0ZnVuY3Rpb24gY29tcHV0ZUlucHV0RGF0YShtYW5hZ2VyLCBpbnB1dCkge1xuXHQgICAgdmFyIHNlc3Npb24gPSBtYW5hZ2VyLnNlc3Npb247XG5cdCAgICB2YXIgcG9pbnRlcnMgPSBpbnB1dC5wb2ludGVycztcblx0ICAgIHZhciBwb2ludGVyc0xlbmd0aCA9IHBvaW50ZXJzLmxlbmd0aDtcblx0XG5cdCAgICAvLyBzdG9yZSB0aGUgZmlyc3QgaW5wdXQgdG8gY2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBhbmQgZGlyZWN0aW9uXG5cdCAgICBpZiAoIXNlc3Npb24uZmlyc3RJbnB1dCkge1xuXHQgICAgICAgIHNlc3Npb24uZmlyc3RJbnB1dCA9IHNpbXBsZUNsb25lSW5wdXREYXRhKGlucHV0KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyB0byBjb21wdXRlIHNjYWxlIGFuZCByb3RhdGlvbiB3ZSBuZWVkIHRvIHN0b3JlIHRoZSBtdWx0aXBsZSB0b3VjaGVzXG5cdCAgICBpZiAocG9pbnRlcnNMZW5ndGggPiAxICYmICFzZXNzaW9uLmZpcnN0TXVsdGlwbGUpIHtcblx0ICAgICAgICBzZXNzaW9uLmZpcnN0TXVsdGlwbGUgPSBzaW1wbGVDbG9uZUlucHV0RGF0YShpbnB1dCk7XG5cdCAgICB9IGVsc2UgaWYgKHBvaW50ZXJzTGVuZ3RoID09PSAxKSB7XG5cdCAgICAgICAgc2Vzc2lvbi5maXJzdE11bHRpcGxlID0gZmFsc2U7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGZpcnN0SW5wdXQgPSBzZXNzaW9uLmZpcnN0SW5wdXQ7XG5cdCAgICB2YXIgZmlyc3RNdWx0aXBsZSA9IHNlc3Npb24uZmlyc3RNdWx0aXBsZTtcblx0ICAgIHZhciBvZmZzZXRDZW50ZXIgPSBmaXJzdE11bHRpcGxlID8gZmlyc3RNdWx0aXBsZS5jZW50ZXIgOiBmaXJzdElucHV0LmNlbnRlcjtcblx0XG5cdCAgICB2YXIgY2VudGVyID0gaW5wdXQuY2VudGVyID0gZ2V0Q2VudGVyKHBvaW50ZXJzKTtcblx0ICAgIGlucHV0LnRpbWVTdGFtcCA9IG5vdygpO1xuXHQgICAgaW5wdXQuZGVsdGFUaW1lID0gaW5wdXQudGltZVN0YW1wIC0gZmlyc3RJbnB1dC50aW1lU3RhbXA7XG5cdFxuXHQgICAgaW5wdXQuYW5nbGUgPSBnZXRBbmdsZShvZmZzZXRDZW50ZXIsIGNlbnRlcik7XG5cdCAgICBpbnB1dC5kaXN0YW5jZSA9IGdldERpc3RhbmNlKG9mZnNldENlbnRlciwgY2VudGVyKTtcblx0XG5cdCAgICBjb21wdXRlRGVsdGFYWShzZXNzaW9uLCBpbnB1dCk7XG5cdCAgICBpbnB1dC5vZmZzZXREaXJlY3Rpb24gPSBnZXREaXJlY3Rpb24oaW5wdXQuZGVsdGFYLCBpbnB1dC5kZWx0YVkpO1xuXHRcblx0ICAgIHZhciBvdmVyYWxsVmVsb2NpdHkgPSBnZXRWZWxvY2l0eShpbnB1dC5kZWx0YVRpbWUsIGlucHV0LmRlbHRhWCwgaW5wdXQuZGVsdGFZKTtcblx0ICAgIGlucHV0Lm92ZXJhbGxWZWxvY2l0eVggPSBvdmVyYWxsVmVsb2NpdHkueDtcblx0ICAgIGlucHV0Lm92ZXJhbGxWZWxvY2l0eVkgPSBvdmVyYWxsVmVsb2NpdHkueTtcblx0ICAgIGlucHV0Lm92ZXJhbGxWZWxvY2l0eSA9IChhYnMob3ZlcmFsbFZlbG9jaXR5LngpID4gYWJzKG92ZXJhbGxWZWxvY2l0eS55KSkgPyBvdmVyYWxsVmVsb2NpdHkueCA6IG92ZXJhbGxWZWxvY2l0eS55O1xuXHRcblx0ICAgIGlucHV0LnNjYWxlID0gZmlyc3RNdWx0aXBsZSA/IGdldFNjYWxlKGZpcnN0TXVsdGlwbGUucG9pbnRlcnMsIHBvaW50ZXJzKSA6IDE7XG5cdCAgICBpbnB1dC5yb3RhdGlvbiA9IGZpcnN0TXVsdGlwbGUgPyBnZXRSb3RhdGlvbihmaXJzdE11bHRpcGxlLnBvaW50ZXJzLCBwb2ludGVycykgOiAwO1xuXHRcblx0ICAgIGlucHV0Lm1heFBvaW50ZXJzID0gIXNlc3Npb24ucHJldklucHV0ID8gaW5wdXQucG9pbnRlcnMubGVuZ3RoIDogKChpbnB1dC5wb2ludGVycy5sZW5ndGggPlxuXHQgICAgICAgIHNlc3Npb24ucHJldklucHV0Lm1heFBvaW50ZXJzKSA/IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA6IHNlc3Npb24ucHJldklucHV0Lm1heFBvaW50ZXJzKTtcblx0XG5cdCAgICBjb21wdXRlSW50ZXJ2YWxJbnB1dERhdGEoc2Vzc2lvbiwgaW5wdXQpO1xuXHRcblx0ICAgIC8vIGZpbmQgdGhlIGNvcnJlY3QgdGFyZ2V0XG5cdCAgICB2YXIgdGFyZ2V0ID0gbWFuYWdlci5lbGVtZW50O1xuXHQgICAgaWYgKGhhc1BhcmVudChpbnB1dC5zcmNFdmVudC50YXJnZXQsIHRhcmdldCkpIHtcblx0ICAgICAgICB0YXJnZXQgPSBpbnB1dC5zcmNFdmVudC50YXJnZXQ7XG5cdCAgICB9XG5cdCAgICBpbnB1dC50YXJnZXQgPSB0YXJnZXQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNvbXB1dGVEZWx0YVhZKHNlc3Npb24sIGlucHV0KSB7XG5cdCAgICB2YXIgY2VudGVyID0gaW5wdXQuY2VudGVyO1xuXHQgICAgdmFyIG9mZnNldCA9IHNlc3Npb24ub2Zmc2V0RGVsdGEgfHwge307XG5cdCAgICB2YXIgcHJldkRlbHRhID0gc2Vzc2lvbi5wcmV2RGVsdGEgfHwge307XG5cdCAgICB2YXIgcHJldklucHV0ID0gc2Vzc2lvbi5wcmV2SW5wdXQgfHwge307XG5cdFxuXHQgICAgaWYgKGlucHV0LmV2ZW50VHlwZSA9PT0gSU5QVVRfU1RBUlQgfHwgcHJldklucHV0LmV2ZW50VHlwZSA9PT0gSU5QVVRfRU5EKSB7XG5cdCAgICAgICAgcHJldkRlbHRhID0gc2Vzc2lvbi5wcmV2RGVsdGEgPSB7XG5cdCAgICAgICAgICAgIHg6IHByZXZJbnB1dC5kZWx0YVggfHwgMCxcblx0ICAgICAgICAgICAgeTogcHJldklucHV0LmRlbHRhWSB8fCAwXG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgb2Zmc2V0ID0gc2Vzc2lvbi5vZmZzZXREZWx0YSA9IHtcblx0ICAgICAgICAgICAgeDogY2VudGVyLngsXG5cdCAgICAgICAgICAgIHk6IGNlbnRlci55XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBpbnB1dC5kZWx0YVggPSBwcmV2RGVsdGEueCArIChjZW50ZXIueCAtIG9mZnNldC54KTtcblx0ICAgIGlucHV0LmRlbHRhWSA9IHByZXZEZWx0YS55ICsgKGNlbnRlci55IC0gb2Zmc2V0LnkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogdmVsb2NpdHkgaXMgY2FsY3VsYXRlZCBldmVyeSB4IG1zXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzZXNzaW9uXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuXHQgKi9cblx0ZnVuY3Rpb24gY29tcHV0ZUludGVydmFsSW5wdXREYXRhKHNlc3Npb24sIGlucHV0KSB7XG5cdCAgICB2YXIgbGFzdCA9IHNlc3Npb24ubGFzdEludGVydmFsIHx8IGlucHV0LFxuXHQgICAgICAgIGRlbHRhVGltZSA9IGlucHV0LnRpbWVTdGFtcCAtIGxhc3QudGltZVN0YW1wLFxuXHQgICAgICAgIHZlbG9jaXR5LCB2ZWxvY2l0eVgsIHZlbG9jaXR5WSwgZGlyZWN0aW9uO1xuXHRcblx0ICAgIGlmIChpbnB1dC5ldmVudFR5cGUgIT0gSU5QVVRfQ0FOQ0VMICYmIChkZWx0YVRpbWUgPiBDT01QVVRFX0lOVEVSVkFMIHx8IGxhc3QudmVsb2NpdHkgPT09IHVuZGVmaW5lZCkpIHtcblx0ICAgICAgICB2YXIgZGVsdGFYID0gaW5wdXQuZGVsdGFYIC0gbGFzdC5kZWx0YVg7XG5cdCAgICAgICAgdmFyIGRlbHRhWSA9IGlucHV0LmRlbHRhWSAtIGxhc3QuZGVsdGFZO1xuXHRcblx0ICAgICAgICB2YXIgdiA9IGdldFZlbG9jaXR5KGRlbHRhVGltZSwgZGVsdGFYLCBkZWx0YVkpO1xuXHQgICAgICAgIHZlbG9jaXR5WCA9IHYueDtcblx0ICAgICAgICB2ZWxvY2l0eVkgPSB2Lnk7XG5cdCAgICAgICAgdmVsb2NpdHkgPSAoYWJzKHYueCkgPiBhYnModi55KSkgPyB2LnggOiB2Lnk7XG5cdCAgICAgICAgZGlyZWN0aW9uID0gZ2V0RGlyZWN0aW9uKGRlbHRhWCwgZGVsdGFZKTtcblx0XG5cdCAgICAgICAgc2Vzc2lvbi5sYXN0SW50ZXJ2YWwgPSBpbnB1dDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gdXNlIGxhdGVzdCB2ZWxvY2l0eSBpbmZvIGlmIGl0IGRvZXNuJ3Qgb3ZlcnRha2UgYSBtaW5pbXVtIHBlcmlvZFxuXHQgICAgICAgIHZlbG9jaXR5ID0gbGFzdC52ZWxvY2l0eTtcblx0ICAgICAgICB2ZWxvY2l0eVggPSBsYXN0LnZlbG9jaXR5WDtcblx0ICAgICAgICB2ZWxvY2l0eVkgPSBsYXN0LnZlbG9jaXR5WTtcblx0ICAgICAgICBkaXJlY3Rpb24gPSBsYXN0LmRpcmVjdGlvbjtcblx0ICAgIH1cblx0XG5cdCAgICBpbnB1dC52ZWxvY2l0eSA9IHZlbG9jaXR5O1xuXHQgICAgaW5wdXQudmVsb2NpdHlYID0gdmVsb2NpdHlYO1xuXHQgICAgaW5wdXQudmVsb2NpdHlZID0gdmVsb2NpdHlZO1xuXHQgICAgaW5wdXQuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuXHR9XG5cdFxuXHQvKipcblx0ICogY3JlYXRlIGEgc2ltcGxlIGNsb25lIGZyb20gdGhlIGlucHV0IHVzZWQgZm9yIHN0b3JhZ2Ugb2YgZmlyc3RJbnB1dCBhbmQgZmlyc3RNdWx0aXBsZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcblx0ICogQHJldHVybnMge09iamVjdH0gY2xvbmVkSW5wdXREYXRhXG5cdCAqL1xuXHRmdW5jdGlvbiBzaW1wbGVDbG9uZUlucHV0RGF0YShpbnB1dCkge1xuXHQgICAgLy8gbWFrZSBhIHNpbXBsZSBjb3B5IG9mIHRoZSBwb2ludGVycyBiZWNhdXNlIHdlIHdpbGwgZ2V0IGEgcmVmZXJlbmNlIGlmIHdlIGRvbid0XG5cdCAgICAvLyB3ZSBvbmx5IG5lZWQgY2xpZW50WFkgZm9yIHRoZSBjYWxjdWxhdGlvbnNcblx0ICAgIHZhciBwb2ludGVycyA9IFtdO1xuXHQgICAgdmFyIGkgPSAwO1xuXHQgICAgd2hpbGUgKGkgPCBpbnB1dC5wb2ludGVycy5sZW5ndGgpIHtcblx0ICAgICAgICBwb2ludGVyc1tpXSA9IHtcblx0ICAgICAgICAgICAgY2xpZW50WDogcm91bmQoaW5wdXQucG9pbnRlcnNbaV0uY2xpZW50WCksXG5cdCAgICAgICAgICAgIGNsaWVudFk6IHJvdW5kKGlucHV0LnBvaW50ZXJzW2ldLmNsaWVudFkpXG5cdCAgICAgICAgfTtcblx0ICAgICAgICBpKys7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICB0aW1lU3RhbXA6IG5vdygpLFxuXHQgICAgICAgIHBvaW50ZXJzOiBwb2ludGVycyxcblx0ICAgICAgICBjZW50ZXI6IGdldENlbnRlcihwb2ludGVycyksXG5cdCAgICAgICAgZGVsdGFYOiBpbnB1dC5kZWx0YVgsXG5cdCAgICAgICAgZGVsdGFZOiBpbnB1dC5kZWx0YVlcblx0ICAgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBnZXQgdGhlIGNlbnRlciBvZiBhbGwgdGhlIHBvaW50ZXJzXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHBvaW50ZXJzXG5cdCAqIEByZXR1cm4ge09iamVjdH0gY2VudGVyIGNvbnRhaW5zIGB4YCBhbmQgYHlgIHByb3BlcnRpZXNcblx0ICovXG5cdGZ1bmN0aW9uIGdldENlbnRlcihwb2ludGVycykge1xuXHQgICAgdmFyIHBvaW50ZXJzTGVuZ3RoID0gcG9pbnRlcnMubGVuZ3RoO1xuXHRcblx0ICAgIC8vIG5vIG5lZWQgdG8gbG9vcCB3aGVuIG9ubHkgb25lIHRvdWNoXG5cdCAgICBpZiAocG9pbnRlcnNMZW5ndGggPT09IDEpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB4OiByb3VuZChwb2ludGVyc1swXS5jbGllbnRYKSxcblx0ICAgICAgICAgICAgeTogcm91bmQocG9pbnRlcnNbMF0uY2xpZW50WSlcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciB4ID0gMCwgeSA9IDAsIGkgPSAwO1xuXHQgICAgd2hpbGUgKGkgPCBwb2ludGVyc0xlbmd0aCkge1xuXHQgICAgICAgIHggKz0gcG9pbnRlcnNbaV0uY2xpZW50WDtcblx0ICAgICAgICB5ICs9IHBvaW50ZXJzW2ldLmNsaWVudFk7XG5cdCAgICAgICAgaSsrO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB7XG5cdCAgICAgICAgeDogcm91bmQoeCAvIHBvaW50ZXJzTGVuZ3RoKSxcblx0ICAgICAgICB5OiByb3VuZCh5IC8gcG9pbnRlcnNMZW5ndGgpXG5cdCAgICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogY2FsY3VsYXRlIHRoZSB2ZWxvY2l0eSBiZXR3ZWVuIHR3byBwb2ludHMuIHVuaXQgaXMgaW4gcHggcGVyIG1zLlxuXHQgKiBAcGFyYW0ge051bWJlcn0gZGVsdGFUaW1lXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB4XG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB5XG5cdCAqIEByZXR1cm4ge09iamVjdH0gdmVsb2NpdHkgYHhgIGFuZCBgeWBcblx0ICovXG5cdGZ1bmN0aW9uIGdldFZlbG9jaXR5KGRlbHRhVGltZSwgeCwgeSkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICB4OiB4IC8gZGVsdGFUaW1lIHx8IDAsXG5cdCAgICAgICAgeTogeSAvIGRlbHRhVGltZSB8fCAwXG5cdCAgICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogZ2V0IHRoZSBkaXJlY3Rpb24gYmV0d2VlbiB0d28gcG9pbnRzXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB4XG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB5XG5cdCAqIEByZXR1cm4ge051bWJlcn0gZGlyZWN0aW9uXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXREaXJlY3Rpb24oeCwgeSkge1xuXHQgICAgaWYgKHggPT09IHkpIHtcblx0ICAgICAgICByZXR1cm4gRElSRUNUSU9OX05PTkU7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGFicyh4KSA+PSBhYnMoeSkpIHtcblx0ICAgICAgICByZXR1cm4geCA8IDAgPyBESVJFQ1RJT05fTEVGVCA6IERJUkVDVElPTl9SSUdIVDtcblx0ICAgIH1cblx0ICAgIHJldHVybiB5IDwgMCA/IERJUkVDVElPTl9VUCA6IERJUkVDVElPTl9ET1dOO1xuXHR9XG5cdFxuXHQvKipcblx0ICogY2FsY3VsYXRlIHRoZSBhYnNvbHV0ZSBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHNcblx0ICogQHBhcmFtIHtPYmplY3R9IHAxIHt4LCB5fVxuXHQgKiBAcGFyYW0ge09iamVjdH0gcDIge3gsIHl9XG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtwcm9wc10gY29udGFpbmluZyB4IGFuZCB5IGtleXNcblx0ICogQHJldHVybiB7TnVtYmVyfSBkaXN0YW5jZVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0RGlzdGFuY2UocDEsIHAyLCBwcm9wcykge1xuXHQgICAgaWYgKCFwcm9wcykge1xuXHQgICAgICAgIHByb3BzID0gUFJPUFNfWFk7XG5cdCAgICB9XG5cdCAgICB2YXIgeCA9IHAyW3Byb3BzWzBdXSAtIHAxW3Byb3BzWzBdXSxcblx0ICAgICAgICB5ID0gcDJbcHJvcHNbMV1dIC0gcDFbcHJvcHNbMV1dO1xuXHRcblx0ICAgIHJldHVybiBNYXRoLnNxcnQoKHggKiB4KSArICh5ICogeSkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogY2FsY3VsYXRlIHRoZSBhbmdsZSBiZXR3ZWVuIHR3byBjb29yZGluYXRlc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gcDFcblx0ICogQHBhcmFtIHtPYmplY3R9IHAyXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtwcm9wc10gY29udGFpbmluZyB4IGFuZCB5IGtleXNcblx0ICogQHJldHVybiB7TnVtYmVyfSBhbmdsZVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0QW5nbGUocDEsIHAyLCBwcm9wcykge1xuXHQgICAgaWYgKCFwcm9wcykge1xuXHQgICAgICAgIHByb3BzID0gUFJPUFNfWFk7XG5cdCAgICB9XG5cdCAgICB2YXIgeCA9IHAyW3Byb3BzWzBdXSAtIHAxW3Byb3BzWzBdXSxcblx0ICAgICAgICB5ID0gcDJbcHJvcHNbMV1dIC0gcDFbcHJvcHNbMV1dO1xuXHQgICAgcmV0dXJuIE1hdGguYXRhbjIoeSwgeCkgKiAxODAgLyBNYXRoLlBJO1xuXHR9XG5cdFxuXHQvKipcblx0ICogY2FsY3VsYXRlIHRoZSByb3RhdGlvbiBkZWdyZWVzIGJldHdlZW4gdHdvIHBvaW50ZXJzZXRzXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHN0YXJ0IGFycmF5IG9mIHBvaW50ZXJzXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGVuZCBhcnJheSBvZiBwb2ludGVyc1xuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9IHJvdGF0aW9uXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRSb3RhdGlvbihzdGFydCwgZW5kKSB7XG5cdCAgICByZXR1cm4gZ2V0QW5nbGUoZW5kWzFdLCBlbmRbMF0sIFBST1BTX0NMSUVOVF9YWSkgKyBnZXRBbmdsZShzdGFydFsxXSwgc3RhcnRbMF0sIFBST1BTX0NMSUVOVF9YWSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBjYWxjdWxhdGUgdGhlIHNjYWxlIGZhY3RvciBiZXR3ZWVuIHR3byBwb2ludGVyc2V0c1xuXHQgKiBubyBzY2FsZSBpcyAxLCBhbmQgZ29lcyBkb3duIHRvIDAgd2hlbiBwaW5jaGVkIHRvZ2V0aGVyLCBhbmQgYmlnZ2VyIHdoZW4gcGluY2hlZCBvdXRcblx0ICogQHBhcmFtIHtBcnJheX0gc3RhcnQgYXJyYXkgb2YgcG9pbnRlcnNcblx0ICogQHBhcmFtIHtBcnJheX0gZW5kIGFycmF5IG9mIHBvaW50ZXJzXG5cdCAqIEByZXR1cm4ge051bWJlcn0gc2NhbGVcblx0ICovXG5cdGZ1bmN0aW9uIGdldFNjYWxlKHN0YXJ0LCBlbmQpIHtcblx0ICAgIHJldHVybiBnZXREaXN0YW5jZShlbmRbMF0sIGVuZFsxXSwgUFJPUFNfQ0xJRU5UX1hZKSAvIGdldERpc3RhbmNlKHN0YXJ0WzBdLCBzdGFydFsxXSwgUFJPUFNfQ0xJRU5UX1hZKTtcblx0fVxuXHRcblx0dmFyIE1PVVNFX0lOUFVUX01BUCA9IHtcblx0ICAgIG1vdXNlZG93bjogSU5QVVRfU1RBUlQsXG5cdCAgICBtb3VzZW1vdmU6IElOUFVUX01PVkUsXG5cdCAgICBtb3VzZXVwOiBJTlBVVF9FTkRcblx0fTtcblx0XG5cdHZhciBNT1VTRV9FTEVNRU5UX0VWRU5UUyA9ICdtb3VzZWRvd24nO1xuXHR2YXIgTU9VU0VfV0lORE9XX0VWRU5UUyA9ICdtb3VzZW1vdmUgbW91c2V1cCc7XG5cdFxuXHQvKipcblx0ICogTW91c2UgZXZlbnRzIGlucHV0XG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAZXh0ZW5kcyBJbnB1dFxuXHQgKi9cblx0ZnVuY3Rpb24gTW91c2VJbnB1dCgpIHtcblx0ICAgIHRoaXMuZXZFbCA9IE1PVVNFX0VMRU1FTlRfRVZFTlRTO1xuXHQgICAgdGhpcy5ldldpbiA9IE1PVVNFX1dJTkRPV19FVkVOVFM7XG5cdFxuXHQgICAgdGhpcy5wcmVzc2VkID0gZmFsc2U7IC8vIG1vdXNlZG93biBzdGF0ZVxuXHRcblx0ICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblx0XG5cdGluaGVyaXQoTW91c2VJbnB1dCwgSW5wdXQsIHtcblx0ICAgIC8qKlxuXHQgICAgICogaGFuZGxlIG1vdXNlIGV2ZW50c1xuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGV2XG5cdCAgICAgKi9cblx0ICAgIGhhbmRsZXI6IGZ1bmN0aW9uIE1FaGFuZGxlcihldikge1xuXHQgICAgICAgIHZhciBldmVudFR5cGUgPSBNT1VTRV9JTlBVVF9NQVBbZXYudHlwZV07XG5cdFxuXHQgICAgICAgIC8vIG9uIHN0YXJ0IHdlIHdhbnQgdG8gaGF2ZSB0aGUgbGVmdCBtb3VzZSBidXR0b24gZG93blxuXHQgICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCAmJiBldi5idXR0b24gPT09IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5wcmVzc2VkID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9NT1ZFICYmIGV2LndoaWNoICE9PSAxKSB7XG5cdCAgICAgICAgICAgIGV2ZW50VHlwZSA9IElOUFVUX0VORDtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIG1vdXNlIG11c3QgYmUgZG93blxuXHQgICAgICAgIGlmICghdGhpcy5wcmVzc2VkKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9FTkQpIHtcblx0ICAgICAgICAgICAgdGhpcy5wcmVzc2VkID0gZmFsc2U7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgZXZlbnRUeXBlLCB7XG5cdCAgICAgICAgICAgIHBvaW50ZXJzOiBbZXZdLFxuXHQgICAgICAgICAgICBjaGFuZ2VkUG9pbnRlcnM6IFtldl0sXG5cdCAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBJTlBVVF9UWVBFX01PVVNFLFxuXHQgICAgICAgICAgICBzcmNFdmVudDogZXZcblx0ICAgICAgICB9KTtcblx0ICAgIH1cblx0fSk7XG5cdFxuXHR2YXIgUE9JTlRFUl9JTlBVVF9NQVAgPSB7XG5cdCAgICBwb2ludGVyZG93bjogSU5QVVRfU1RBUlQsXG5cdCAgICBwb2ludGVybW92ZTogSU5QVVRfTU9WRSxcblx0ICAgIHBvaW50ZXJ1cDogSU5QVVRfRU5ELFxuXHQgICAgcG9pbnRlcmNhbmNlbDogSU5QVVRfQ0FOQ0VMLFxuXHQgICAgcG9pbnRlcm91dDogSU5QVVRfQ0FOQ0VMXG5cdH07XG5cdFxuXHQvLyBpbiBJRTEwIHRoZSBwb2ludGVyIHR5cGVzIGlzIGRlZmluZWQgYXMgYW4gZW51bVxuXHR2YXIgSUUxMF9QT0lOVEVSX1RZUEVfRU5VTSA9IHtcblx0ICAgIDI6IElOUFVUX1RZUEVfVE9VQ0gsXG5cdCAgICAzOiBJTlBVVF9UWVBFX1BFTixcblx0ICAgIDQ6IElOUFVUX1RZUEVfTU9VU0UsXG5cdCAgICA1OiBJTlBVVF9UWVBFX0tJTkVDVCAvLyBzZWUgaHR0cHM6Ly90d2l0dGVyLmNvbS9qYWNvYnJvc3NpL3N0YXR1cy80ODA1OTY0Mzg0ODk4OTA4MTZcblx0fTtcblx0XG5cdHZhciBQT0lOVEVSX0VMRU1FTlRfRVZFTlRTID0gJ3BvaW50ZXJkb3duJztcblx0dmFyIFBPSU5URVJfV0lORE9XX0VWRU5UUyA9ICdwb2ludGVybW92ZSBwb2ludGVydXAgcG9pbnRlcmNhbmNlbCc7XG5cdFxuXHQvLyBJRTEwIGhhcyBwcmVmaXhlZCBzdXBwb3J0LCBhbmQgY2FzZS1zZW5zaXRpdmVcblx0aWYgKHdpbmRvdy5NU1BvaW50ZXJFdmVudCAmJiAhd2luZG93LlBvaW50ZXJFdmVudCkge1xuXHQgICAgUE9JTlRFUl9FTEVNRU5UX0VWRU5UUyA9ICdNU1BvaW50ZXJEb3duJztcblx0ICAgIFBPSU5URVJfV0lORE9XX0VWRU5UUyA9ICdNU1BvaW50ZXJNb3ZlIE1TUG9pbnRlclVwIE1TUG9pbnRlckNhbmNlbCc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQb2ludGVyIGV2ZW50cyBpbnB1dFxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQGV4dGVuZHMgSW5wdXRcblx0ICovXG5cdGZ1bmN0aW9uIFBvaW50ZXJFdmVudElucHV0KCkge1xuXHQgICAgdGhpcy5ldkVsID0gUE9JTlRFUl9FTEVNRU5UX0VWRU5UUztcblx0ICAgIHRoaXMuZXZXaW4gPSBQT0lOVEVSX1dJTkRPV19FVkVOVFM7XG5cdFxuXHQgICAgSW5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XG5cdCAgICB0aGlzLnN0b3JlID0gKHRoaXMubWFuYWdlci5zZXNzaW9uLnBvaW50ZXJFdmVudHMgPSBbXSk7XG5cdH1cblx0XG5cdGluaGVyaXQoUG9pbnRlckV2ZW50SW5wdXQsIElucHV0LCB7XG5cdCAgICAvKipcblx0ICAgICAqIGhhbmRsZSBtb3VzZSBldmVudHNcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldlxuXHQgICAgICovXG5cdCAgICBoYW5kbGVyOiBmdW5jdGlvbiBQRWhhbmRsZXIoZXYpIHtcblx0ICAgICAgICB2YXIgc3RvcmUgPSB0aGlzLnN0b3JlO1xuXHQgICAgICAgIHZhciByZW1vdmVQb2ludGVyID0gZmFsc2U7XG5cdFxuXHQgICAgICAgIHZhciBldmVudFR5cGVOb3JtYWxpemVkID0gZXYudHlwZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJ21zJywgJycpO1xuXHQgICAgICAgIHZhciBldmVudFR5cGUgPSBQT0lOVEVSX0lOUFVUX01BUFtldmVudFR5cGVOb3JtYWxpemVkXTtcblx0ICAgICAgICB2YXIgcG9pbnRlclR5cGUgPSBJRTEwX1BPSU5URVJfVFlQRV9FTlVNW2V2LnBvaW50ZXJUeXBlXSB8fCBldi5wb2ludGVyVHlwZTtcblx0XG5cdCAgICAgICAgdmFyIGlzVG91Y2ggPSAocG9pbnRlclR5cGUgPT0gSU5QVVRfVFlQRV9UT1VDSCk7XG5cdFxuXHQgICAgICAgIC8vIGdldCBpbmRleCBvZiB0aGUgZXZlbnQgaW4gdGhlIHN0b3JlXG5cdCAgICAgICAgdmFyIHN0b3JlSW5kZXggPSBpbkFycmF5KHN0b3JlLCBldi5wb2ludGVySWQsICdwb2ludGVySWQnKTtcblx0XG5cdCAgICAgICAgLy8gc3RhcnQgYW5kIG1vdXNlIG11c3QgYmUgZG93blxuXHQgICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCAmJiAoZXYuYnV0dG9uID09PSAwIHx8IGlzVG91Y2gpKSB7XG5cdCAgICAgICAgICAgIGlmIChzdG9yZUluZGV4IDwgMCkge1xuXHQgICAgICAgICAgICAgICAgc3RvcmUucHVzaChldik7XG5cdCAgICAgICAgICAgICAgICBzdG9yZUluZGV4ID0gc3RvcmUubGVuZ3RoIC0gMTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAoZXZlbnRUeXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkpIHtcblx0ICAgICAgICAgICAgcmVtb3ZlUG9pbnRlciA9IHRydWU7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyBpdCBub3QgZm91bmQsIHNvIHRoZSBwb2ludGVyIGhhc24ndCBiZWVuIGRvd24gKHNvIGl0J3MgcHJvYmFibHkgYSBob3Zlcilcblx0ICAgICAgICBpZiAoc3RvcmVJbmRleCA8IDApIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gdXBkYXRlIHRoZSBldmVudCBpbiB0aGUgc3RvcmVcblx0ICAgICAgICBzdG9yZVtzdG9yZUluZGV4XSA9IGV2O1xuXHRcblx0ICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgZXZlbnRUeXBlLCB7XG5cdCAgICAgICAgICAgIHBvaW50ZXJzOiBzdG9yZSxcblx0ICAgICAgICAgICAgY2hhbmdlZFBvaW50ZXJzOiBbZXZdLFxuXHQgICAgICAgICAgICBwb2ludGVyVHlwZTogcG9pbnRlclR5cGUsXG5cdCAgICAgICAgICAgIHNyY0V2ZW50OiBldlxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBpZiAocmVtb3ZlUG9pbnRlcikge1xuXHQgICAgICAgICAgICAvLyByZW1vdmUgZnJvbSB0aGUgc3RvcmVcblx0ICAgICAgICAgICAgc3RvcmUuc3BsaWNlKHN0b3JlSW5kZXgsIDEpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fSk7XG5cdFxuXHR2YXIgU0lOR0xFX1RPVUNIX0lOUFVUX01BUCA9IHtcblx0ICAgIHRvdWNoc3RhcnQ6IElOUFVUX1NUQVJULFxuXHQgICAgdG91Y2htb3ZlOiBJTlBVVF9NT1ZFLFxuXHQgICAgdG91Y2hlbmQ6IElOUFVUX0VORCxcblx0ICAgIHRvdWNoY2FuY2VsOiBJTlBVVF9DQU5DRUxcblx0fTtcblx0XG5cdHZhciBTSU5HTEVfVE9VQ0hfVEFSR0VUX0VWRU5UUyA9ICd0b3VjaHN0YXJ0Jztcblx0dmFyIFNJTkdMRV9UT1VDSF9XSU5ET1dfRVZFTlRTID0gJ3RvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsJztcblx0XG5cdC8qKlxuXHQgKiBUb3VjaCBldmVudHMgaW5wdXRcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBleHRlbmRzIElucHV0XG5cdCAqL1xuXHRmdW5jdGlvbiBTaW5nbGVUb3VjaElucHV0KCkge1xuXHQgICAgdGhpcy5ldlRhcmdldCA9IFNJTkdMRV9UT1VDSF9UQVJHRVRfRVZFTlRTO1xuXHQgICAgdGhpcy5ldldpbiA9IFNJTkdMRV9UT1VDSF9XSU5ET1dfRVZFTlRTO1xuXHQgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG5cdFxuXHQgICAgSW5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXHRcblx0aW5oZXJpdChTaW5nbGVUb3VjaElucHV0LCBJbnB1dCwge1xuXHQgICAgaGFuZGxlcjogZnVuY3Rpb24gVEVoYW5kbGVyKGV2KSB7XG5cdCAgICAgICAgdmFyIHR5cGUgPSBTSU5HTEVfVE9VQ0hfSU5QVVRfTUFQW2V2LnR5cGVdO1xuXHRcblx0ICAgICAgICAvLyBzaG91bGQgd2UgaGFuZGxlIHRoZSB0b3VjaCBldmVudHM/XG5cdCAgICAgICAgaWYgKHR5cGUgPT09IElOUFVUX1NUQVJUKSB7XG5cdCAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgdG91Y2hlcyA9IG5vcm1hbGl6ZVNpbmdsZVRvdWNoZXMuY2FsbCh0aGlzLCBldiwgdHlwZSk7XG5cdFxuXHQgICAgICAgIC8vIHdoZW4gZG9uZSwgcmVzZXQgdGhlIHN0YXJ0ZWQgc3RhdGVcblx0ICAgICAgICBpZiAodHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpICYmIHRvdWNoZXNbMF0ubGVuZ3RoIC0gdG91Y2hlc1sxXS5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgdHlwZSwge1xuXHQgICAgICAgICAgICBwb2ludGVyczogdG91Y2hlc1swXSxcblx0ICAgICAgICAgICAgY2hhbmdlZFBvaW50ZXJzOiB0b3VjaGVzWzFdLFxuXHQgICAgICAgICAgICBwb2ludGVyVHlwZTogSU5QVVRfVFlQRV9UT1VDSCxcblx0ICAgICAgICAgICAgc3JjRXZlbnQ6IGV2XG5cdCAgICAgICAgfSk7XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIEB0aGlzIHtUb3VjaElucHV0fVxuXHQgKiBAcGFyYW0ge09iamVjdH0gZXZcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHR5cGUgZmxhZ1xuXHQgKiBAcmV0dXJucyB7dW5kZWZpbmVkfEFycmF5fSBbYWxsLCBjaGFuZ2VkXVxuXHQgKi9cblx0ZnVuY3Rpb24gbm9ybWFsaXplU2luZ2xlVG91Y2hlcyhldiwgdHlwZSkge1xuXHQgICAgdmFyIGFsbCA9IHRvQXJyYXkoZXYudG91Y2hlcyk7XG5cdCAgICB2YXIgY2hhbmdlZCA9IHRvQXJyYXkoZXYuY2hhbmdlZFRvdWNoZXMpO1xuXHRcblx0ICAgIGlmICh0eXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkpIHtcblx0ICAgICAgICBhbGwgPSB1bmlxdWVBcnJheShhbGwuY29uY2F0KGNoYW5nZWQpLCAnaWRlbnRpZmllcicsIHRydWUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBbYWxsLCBjaGFuZ2VkXTtcblx0fVxuXHRcblx0dmFyIFRPVUNIX0lOUFVUX01BUCA9IHtcblx0ICAgIHRvdWNoc3RhcnQ6IElOUFVUX1NUQVJULFxuXHQgICAgdG91Y2htb3ZlOiBJTlBVVF9NT1ZFLFxuXHQgICAgdG91Y2hlbmQ6IElOUFVUX0VORCxcblx0ICAgIHRvdWNoY2FuY2VsOiBJTlBVVF9DQU5DRUxcblx0fTtcblx0XG5cdHZhciBUT1VDSF9UQVJHRVRfRVZFTlRTID0gJ3RvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsJztcblx0XG5cdC8qKlxuXHQgKiBNdWx0aS11c2VyIHRvdWNoIGV2ZW50cyBpbnB1dFxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQGV4dGVuZHMgSW5wdXRcblx0ICovXG5cdGZ1bmN0aW9uIFRvdWNoSW5wdXQoKSB7XG5cdCAgICB0aGlzLmV2VGFyZ2V0ID0gVE9VQ0hfVEFSR0VUX0VWRU5UUztcblx0ICAgIHRoaXMudGFyZ2V0SWRzID0ge307XG5cdFxuXHQgICAgSW5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXHRcblx0aW5oZXJpdChUb3VjaElucHV0LCBJbnB1dCwge1xuXHQgICAgaGFuZGxlcjogZnVuY3Rpb24gTVRFaGFuZGxlcihldikge1xuXHQgICAgICAgIHZhciB0eXBlID0gVE9VQ0hfSU5QVVRfTUFQW2V2LnR5cGVdO1xuXHQgICAgICAgIHZhciB0b3VjaGVzID0gZ2V0VG91Y2hlcy5jYWxsKHRoaXMsIGV2LCB0eXBlKTtcblx0ICAgICAgICBpZiAoIXRvdWNoZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsIHR5cGUsIHtcblx0ICAgICAgICAgICAgcG9pbnRlcnM6IHRvdWNoZXNbMF0sXG5cdCAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogdG91Y2hlc1sxXSxcblx0ICAgICAgICAgICAgcG9pbnRlclR5cGU6IElOUFVUX1RZUEVfVE9VQ0gsXG5cdCAgICAgICAgICAgIHNyY0V2ZW50OiBldlxuXHQgICAgICAgIH0pO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBAdGhpcyB7VG91Y2hJbnB1dH1cblx0ICogQHBhcmFtIHtPYmplY3R9IGV2XG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB0eXBlIGZsYWdcblx0ICogQHJldHVybnMge3VuZGVmaW5lZHxBcnJheX0gW2FsbCwgY2hhbmdlZF1cblx0ICovXG5cdGZ1bmN0aW9uIGdldFRvdWNoZXMoZXYsIHR5cGUpIHtcblx0ICAgIHZhciBhbGxUb3VjaGVzID0gdG9BcnJheShldi50b3VjaGVzKTtcblx0ICAgIHZhciB0YXJnZXRJZHMgPSB0aGlzLnRhcmdldElkcztcblx0XG5cdCAgICAvLyB3aGVuIHRoZXJlIGlzIG9ubHkgb25lIHRvdWNoLCB0aGUgcHJvY2VzcyBjYW4gYmUgc2ltcGxpZmllZFxuXHQgICAgaWYgKHR5cGUgJiAoSU5QVVRfU1RBUlQgfCBJTlBVVF9NT1ZFKSAmJiBhbGxUb3VjaGVzLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICAgIHRhcmdldElkc1thbGxUb3VjaGVzWzBdLmlkZW50aWZpZXJdID0gdHJ1ZTtcblx0ICAgICAgICByZXR1cm4gW2FsbFRvdWNoZXMsIGFsbFRvdWNoZXNdO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBpLFxuXHQgICAgICAgIHRhcmdldFRvdWNoZXMsXG5cdCAgICAgICAgY2hhbmdlZFRvdWNoZXMgPSB0b0FycmF5KGV2LmNoYW5nZWRUb3VjaGVzKSxcblx0ICAgICAgICBjaGFuZ2VkVGFyZ2V0VG91Y2hlcyA9IFtdLFxuXHQgICAgICAgIHRhcmdldCA9IHRoaXMudGFyZ2V0O1xuXHRcblx0ICAgIC8vIGdldCB0YXJnZXQgdG91Y2hlcyBmcm9tIHRvdWNoZXNcblx0ICAgIHRhcmdldFRvdWNoZXMgPSBhbGxUb3VjaGVzLmZpbHRlcihmdW5jdGlvbih0b3VjaCkge1xuXHQgICAgICAgIHJldHVybiBoYXNQYXJlbnQodG91Y2gudGFyZ2V0LCB0YXJnZXQpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLy8gY29sbGVjdCB0b3VjaGVzXG5cdCAgICBpZiAodHlwZSA9PT0gSU5QVVRfU1RBUlQpIHtcblx0ICAgICAgICBpID0gMDtcblx0ICAgICAgICB3aGlsZSAoaSA8IHRhcmdldFRvdWNoZXMubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIHRhcmdldElkc1t0YXJnZXRUb3VjaGVzW2ldLmlkZW50aWZpZXJdID0gdHJ1ZTtcblx0ICAgICAgICAgICAgaSsrO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBmaWx0ZXIgY2hhbmdlZCB0b3VjaGVzIHRvIG9ubHkgY29udGFpbiB0b3VjaGVzIHRoYXQgZXhpc3QgaW4gdGhlIGNvbGxlY3RlZCB0YXJnZXQgaWRzXG5cdCAgICBpID0gMDtcblx0ICAgIHdoaWxlIChpIDwgY2hhbmdlZFRvdWNoZXMubGVuZ3RoKSB7XG5cdCAgICAgICAgaWYgKHRhcmdldElkc1tjaGFuZ2VkVG91Y2hlc1tpXS5pZGVudGlmaWVyXSkge1xuXHQgICAgICAgICAgICBjaGFuZ2VkVGFyZ2V0VG91Y2hlcy5wdXNoKGNoYW5nZWRUb3VjaGVzW2ldKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIGNsZWFudXAgcmVtb3ZlZCB0b3VjaGVzXG5cdCAgICAgICAgaWYgKHR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSkge1xuXHQgICAgICAgICAgICBkZWxldGUgdGFyZ2V0SWRzW2NoYW5nZWRUb3VjaGVzW2ldLmlkZW50aWZpZXJdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpKys7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFjaGFuZ2VkVGFyZ2V0VG91Y2hlcy5sZW5ndGgpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIFtcblx0ICAgICAgICAvLyBtZXJnZSB0YXJnZXRUb3VjaGVzIHdpdGggY2hhbmdlZFRhcmdldFRvdWNoZXMgc28gaXQgY29udGFpbnMgQUxMIHRvdWNoZXMsIGluY2x1ZGluZyAnZW5kJyBhbmQgJ2NhbmNlbCdcblx0ICAgICAgICB1bmlxdWVBcnJheSh0YXJnZXRUb3VjaGVzLmNvbmNhdChjaGFuZ2VkVGFyZ2V0VG91Y2hlcyksICdpZGVudGlmaWVyJywgdHJ1ZSksXG5cdCAgICAgICAgY2hhbmdlZFRhcmdldFRvdWNoZXNcblx0ICAgIF07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21iaW5lZCB0b3VjaCBhbmQgbW91c2UgaW5wdXRcblx0ICpcblx0ICogVG91Y2ggaGFzIGEgaGlnaGVyIHByaW9yaXR5IHRoZW4gbW91c2UsIGFuZCB3aGlsZSB0b3VjaGluZyBubyBtb3VzZSBldmVudHMgYXJlIGFsbG93ZWQuXG5cdCAqIFRoaXMgYmVjYXVzZSB0b3VjaCBkZXZpY2VzIGFsc28gZW1pdCBtb3VzZSBldmVudHMgd2hpbGUgZG9pbmcgYSB0b3VjaC5cblx0ICpcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBleHRlbmRzIElucHV0XG5cdCAqL1xuXHRcblx0dmFyIERFRFVQX1RJTUVPVVQgPSAyNTAwO1xuXHR2YXIgREVEVVBfRElTVEFOQ0UgPSAyNTtcblx0XG5cdGZ1bmN0aW9uIFRvdWNoTW91c2VJbnB1dCgpIHtcblx0ICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFxuXHQgICAgdmFyIGhhbmRsZXIgPSBiaW5kRm4odGhpcy5oYW5kbGVyLCB0aGlzKTtcblx0ICAgIHRoaXMudG91Y2ggPSBuZXcgVG91Y2hJbnB1dCh0aGlzLm1hbmFnZXIsIGhhbmRsZXIpO1xuXHQgICAgdGhpcy5tb3VzZSA9IG5ldyBNb3VzZUlucHV0KHRoaXMubWFuYWdlciwgaGFuZGxlcik7XG5cdFxuXHQgICAgdGhpcy5wcmltYXJ5VG91Y2ggPSBudWxsO1xuXHQgICAgdGhpcy5sYXN0VG91Y2hlcyA9IFtdO1xuXHR9XG5cdFxuXHRpbmhlcml0KFRvdWNoTW91c2VJbnB1dCwgSW5wdXQsIHtcblx0ICAgIC8qKlxuXHQgICAgICogaGFuZGxlIG1vdXNlIGFuZCB0b3VjaCBldmVudHNcblx0ICAgICAqIEBwYXJhbSB7SGFtbWVyfSBtYW5hZ2VyXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXRFdmVudFxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuXHQgICAgICovXG5cdCAgICBoYW5kbGVyOiBmdW5jdGlvbiBUTUVoYW5kbGVyKG1hbmFnZXIsIGlucHV0RXZlbnQsIGlucHV0RGF0YSkge1xuXHQgICAgICAgIHZhciBpc1RvdWNoID0gKGlucHV0RGF0YS5wb2ludGVyVHlwZSA9PSBJTlBVVF9UWVBFX1RPVUNIKSxcblx0ICAgICAgICAgICAgaXNNb3VzZSA9IChpbnB1dERhdGEucG9pbnRlclR5cGUgPT0gSU5QVVRfVFlQRV9NT1VTRSk7XG5cdFxuXHQgICAgICAgIGlmIChpc01vdXNlICYmIGlucHV0RGF0YS5zb3VyY2VDYXBhYmlsaXRpZXMgJiYgaW5wdXREYXRhLnNvdXJjZUNhcGFiaWxpdGllcy5maXJlc1RvdWNoRXZlbnRzKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIHdoZW4gd2UncmUgaW4gYSB0b3VjaCBldmVudCwgcmVjb3JkIHRvdWNoZXMgdG8gIGRlLWR1cGUgc3ludGhldGljIG1vdXNlIGV2ZW50XG5cdCAgICAgICAgaWYgKGlzVG91Y2gpIHtcblx0ICAgICAgICAgICAgcmVjb3JkVG91Y2hlcy5jYWxsKHRoaXMsIGlucHV0RXZlbnQsIGlucHV0RGF0YSk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChpc01vdXNlICYmIGlzU3ludGhldGljRXZlbnQuY2FsbCh0aGlzLCBpbnB1dERhdGEpKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMuY2FsbGJhY2sobWFuYWdlciwgaW5wdXRFdmVudCwgaW5wdXREYXRhKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyc1xuXHQgICAgICovXG5cdCAgICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkge1xuXHQgICAgICAgIHRoaXMudG91Y2guZGVzdHJveSgpO1xuXHQgICAgICAgIHRoaXMubW91c2UuZGVzdHJveSgpO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIHJlY29yZFRvdWNoZXMoZXZlbnRUeXBlLCBldmVudERhdGEpIHtcblx0ICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCkge1xuXHQgICAgICAgIHRoaXMucHJpbWFyeVRvdWNoID0gZXZlbnREYXRhLmNoYW5nZWRQb2ludGVyc1swXS5pZGVudGlmaWVyO1xuXHQgICAgICAgIHNldExhc3RUb3VjaC5jYWxsKHRoaXMsIGV2ZW50RGF0YSk7XG5cdCAgICB9IGVsc2UgaWYgKGV2ZW50VHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpKSB7XG5cdCAgICAgICAgc2V0TGFzdFRvdWNoLmNhbGwodGhpcywgZXZlbnREYXRhKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0TGFzdFRvdWNoKGV2ZW50RGF0YSkge1xuXHQgICAgdmFyIHRvdWNoID0gZXZlbnREYXRhLmNoYW5nZWRQb2ludGVyc1swXTtcblx0XG5cdCAgICBpZiAodG91Y2guaWRlbnRpZmllciA9PT0gdGhpcy5wcmltYXJ5VG91Y2gpIHtcblx0ICAgICAgICB2YXIgbGFzdFRvdWNoID0ge3g6IHRvdWNoLmNsaWVudFgsIHk6IHRvdWNoLmNsaWVudFl9O1xuXHQgICAgICAgIHRoaXMubGFzdFRvdWNoZXMucHVzaChsYXN0VG91Y2gpO1xuXHQgICAgICAgIHZhciBsdHMgPSB0aGlzLmxhc3RUb3VjaGVzO1xuXHQgICAgICAgIHZhciByZW1vdmVMYXN0VG91Y2ggPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgdmFyIGkgPSBsdHMuaW5kZXhPZihsYXN0VG91Y2gpO1xuXHQgICAgICAgICAgICBpZiAoaSA+IC0xKSB7XG5cdCAgICAgICAgICAgICAgICBsdHMuc3BsaWNlKGksIDEpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBzZXRUaW1lb3V0KHJlbW92ZUxhc3RUb3VjaCwgREVEVVBfVElNRU9VVCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzU3ludGhldGljRXZlbnQoZXZlbnREYXRhKSB7XG5cdCAgICB2YXIgeCA9IGV2ZW50RGF0YS5zcmNFdmVudC5jbGllbnRYLCB5ID0gZXZlbnREYXRhLnNyY0V2ZW50LmNsaWVudFk7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGFzdFRvdWNoZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB2YXIgdCA9IHRoaXMubGFzdFRvdWNoZXNbaV07XG5cdCAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnMoeCAtIHQueCksIGR5ID0gTWF0aC5hYnMoeSAtIHQueSk7XG5cdCAgICAgICAgaWYgKGR4IDw9IERFRFVQX0RJU1RBTkNFICYmIGR5IDw9IERFRFVQX0RJU1RBTkNFKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0dmFyIFBSRUZJWEVEX1RPVUNIX0FDVElPTiA9IHByZWZpeGVkKFRFU1RfRUxFTUVOVC5zdHlsZSwgJ3RvdWNoQWN0aW9uJyk7XG5cdHZhciBOQVRJVkVfVE9VQ0hfQUNUSU9OID0gUFJFRklYRURfVE9VQ0hfQUNUSU9OICE9PSB1bmRlZmluZWQ7XG5cdFxuXHQvLyBtYWdpY2FsIHRvdWNoQWN0aW9uIHZhbHVlXG5cdHZhciBUT1VDSF9BQ1RJT05fQ09NUFVURSA9ICdjb21wdXRlJztcblx0dmFyIFRPVUNIX0FDVElPTl9BVVRPID0gJ2F1dG8nO1xuXHR2YXIgVE9VQ0hfQUNUSU9OX01BTklQVUxBVElPTiA9ICdtYW5pcHVsYXRpb24nOyAvLyBub3QgaW1wbGVtZW50ZWRcblx0dmFyIFRPVUNIX0FDVElPTl9OT05FID0gJ25vbmUnO1xuXHR2YXIgVE9VQ0hfQUNUSU9OX1BBTl9YID0gJ3Bhbi14Jztcblx0dmFyIFRPVUNIX0FDVElPTl9QQU5fWSA9ICdwYW4teSc7XG5cdHZhciBUT1VDSF9BQ1RJT05fTUFQID0gZ2V0VG91Y2hBY3Rpb25Qcm9wcygpO1xuXHRcblx0LyoqXG5cdCAqIFRvdWNoIEFjdGlvblxuXHQgKiBzZXRzIHRoZSB0b3VjaEFjdGlvbiBwcm9wZXJ0eSBvciB1c2VzIHRoZSBqcyBhbHRlcm5hdGl2ZVxuXHQgKiBAcGFyYW0ge01hbmFnZXJ9IG1hbmFnZXJcblx0ICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0ZnVuY3Rpb24gVG91Y2hBY3Rpb24obWFuYWdlciwgdmFsdWUpIHtcblx0ICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG5cdCAgICB0aGlzLnNldCh2YWx1ZSk7XG5cdH1cblx0XG5cdFRvdWNoQWN0aW9uLnByb3RvdHlwZSA9IHtcblx0ICAgIC8qKlxuXHQgICAgICogc2V0IHRoZSB0b3VjaEFjdGlvbiB2YWx1ZSBvbiB0aGUgZWxlbWVudCBvciBlbmFibGUgdGhlIHBvbHlmaWxsXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcblx0ICAgICAqL1xuXHQgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIC8vIGZpbmQgb3V0IHRoZSB0b3VjaC1hY3Rpb24gYnkgdGhlIGV2ZW50IGhhbmRsZXJzXG5cdCAgICAgICAgaWYgKHZhbHVlID09IFRPVUNIX0FDVElPTl9DT01QVVRFKSB7XG5cdCAgICAgICAgICAgIHZhbHVlID0gdGhpcy5jb21wdXRlKCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoTkFUSVZFX1RPVUNIX0FDVElPTiAmJiB0aGlzLm1hbmFnZXIuZWxlbWVudC5zdHlsZSAmJiBUT1VDSF9BQ1RJT05fTUFQW3ZhbHVlXSkge1xuXHQgICAgICAgICAgICB0aGlzLm1hbmFnZXIuZWxlbWVudC5zdHlsZVtQUkVGSVhFRF9UT1VDSF9BQ1RJT05dID0gdmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuYWN0aW9ucyA9IHZhbHVlLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIGp1c3QgcmUtc2V0IHRoZSB0b3VjaEFjdGlvbiB2YWx1ZVxuXHQgICAgICovXG5cdCAgICB1cGRhdGU6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHRoaXMuc2V0KHRoaXMubWFuYWdlci5vcHRpb25zLnRvdWNoQWN0aW9uKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBjb21wdXRlIHRoZSB2YWx1ZSBmb3IgdGhlIHRvdWNoQWN0aW9uIHByb3BlcnR5IGJhc2VkIG9uIHRoZSByZWNvZ25pemVyJ3Mgc2V0dGluZ3Ncblx0ICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IHZhbHVlXG5cdCAgICAgKi9cblx0ICAgIGNvbXB1dGU6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciBhY3Rpb25zID0gW107XG5cdCAgICAgICAgZWFjaCh0aGlzLm1hbmFnZXIucmVjb2duaXplcnMsIGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcblx0ICAgICAgICAgICAgaWYgKGJvb2xPckZuKHJlY29nbml6ZXIub3B0aW9ucy5lbmFibGUsIFtyZWNvZ25pemVyXSkpIHtcblx0ICAgICAgICAgICAgICAgIGFjdGlvbnMgPSBhY3Rpb25zLmNvbmNhdChyZWNvZ25pemVyLmdldFRvdWNoQWN0aW9uKCkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgcmV0dXJuIGNsZWFuVG91Y2hBY3Rpb25zKGFjdGlvbnMuam9pbignICcpKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgb24gZWFjaCBpbnB1dCBjeWNsZSBhbmQgcHJvdmlkZXMgdGhlIHByZXZlbnRpbmcgb2YgdGhlIGJyb3dzZXIgYmVoYXZpb3Jcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuXHQgICAgICovXG5cdCAgICBwcmV2ZW50RGVmYXVsdHM6IGZ1bmN0aW9uKGlucHV0KSB7XG5cdCAgICAgICAgdmFyIHNyY0V2ZW50ID0gaW5wdXQuc3JjRXZlbnQ7XG5cdCAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGlucHV0Lm9mZnNldERpcmVjdGlvbjtcblx0XG5cdCAgICAgICAgLy8gaWYgdGhlIHRvdWNoIGFjdGlvbiBkaWQgcHJldmVudGVkIG9uY2UgdGhpcyBzZXNzaW9uXG5cdCAgICAgICAgaWYgKHRoaXMubWFuYWdlci5zZXNzaW9uLnByZXZlbnRlZCkge1xuXHQgICAgICAgICAgICBzcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgYWN0aW9ucyA9IHRoaXMuYWN0aW9ucztcblx0ICAgICAgICB2YXIgaGFzTm9uZSA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9OT05FKSAmJiAhVE9VQ0hfQUNUSU9OX01BUFtUT1VDSF9BQ1RJT05fTk9ORV07XG5cdCAgICAgICAgdmFyIGhhc1BhblkgPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fUEFOX1kpICYmICFUT1VDSF9BQ1RJT05fTUFQW1RPVUNIX0FDVElPTl9QQU5fWV07XG5cdCAgICAgICAgdmFyIGhhc1BhblggPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fUEFOX1gpICYmICFUT1VDSF9BQ1RJT05fTUFQW1RPVUNIX0FDVElPTl9QQU5fWF07XG5cdFxuXHQgICAgICAgIGlmIChoYXNOb25lKSB7XG5cdCAgICAgICAgICAgIC8vZG8gbm90IHByZXZlbnQgZGVmYXVsdHMgaWYgdGhpcyBpcyBhIHRhcCBnZXN0dXJlXG5cdFxuXHQgICAgICAgICAgICB2YXIgaXNUYXBQb2ludGVyID0gaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSAxO1xuXHQgICAgICAgICAgICB2YXIgaXNUYXBNb3ZlbWVudCA9IGlucHV0LmRpc3RhbmNlIDwgMjtcblx0ICAgICAgICAgICAgdmFyIGlzVGFwVG91Y2hUaW1lID0gaW5wdXQuZGVsdGFUaW1lIDwgMjUwO1xuXHRcblx0ICAgICAgICAgICAgaWYgKGlzVGFwUG9pbnRlciAmJiBpc1RhcE1vdmVtZW50ICYmIGlzVGFwVG91Y2hUaW1lKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChoYXNQYW5YICYmIGhhc1BhblkpIHtcblx0ICAgICAgICAgICAgLy8gYHBhbi14IHBhbi15YCBtZWFucyBicm93c2VyIGhhbmRsZXMgYWxsIHNjcm9sbGluZy9wYW5uaW5nLCBkbyBub3QgcHJldmVudFxuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoaGFzTm9uZSB8fFxuXHQgICAgICAgICAgICAoaGFzUGFuWSAmJiBkaXJlY3Rpb24gJiBESVJFQ1RJT05fSE9SSVpPTlRBTCkgfHxcblx0ICAgICAgICAgICAgKGhhc1BhblggJiYgZGlyZWN0aW9uICYgRElSRUNUSU9OX1ZFUlRJQ0FMKSkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5wcmV2ZW50U3JjKHNyY0V2ZW50KTtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogY2FsbCBwcmV2ZW50RGVmYXVsdCB0byBwcmV2ZW50IHRoZSBicm93c2VyJ3MgZGVmYXVsdCBiZWhhdmlvciAoc2Nyb2xsaW5nIGluIG1vc3QgY2FzZXMpXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gc3JjRXZlbnRcblx0ICAgICAqL1xuXHQgICAgcHJldmVudFNyYzogZnVuY3Rpb24oc3JjRXZlbnQpIHtcblx0ICAgICAgICB0aGlzLm1hbmFnZXIuc2Vzc2lvbi5wcmV2ZW50ZWQgPSB0cnVlO1xuXHQgICAgICAgIHNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogd2hlbiB0aGUgdG91Y2hBY3Rpb25zIGFyZSBjb2xsZWN0ZWQgdGhleSBhcmUgbm90IGEgdmFsaWQgdmFsdWUsIHNvIHdlIG5lZWQgdG8gY2xlYW4gdGhpbmdzIHVwLiAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25zXG5cdCAqIEByZXR1cm5zIHsqfVxuXHQgKi9cblx0ZnVuY3Rpb24gY2xlYW5Ub3VjaEFjdGlvbnMoYWN0aW9ucykge1xuXHQgICAgLy8gbm9uZVxuXHQgICAgaWYgKGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9OT05FKSkge1xuXHQgICAgICAgIHJldHVybiBUT1VDSF9BQ1RJT05fTk9ORTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaGFzUGFuWCA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9QQU5fWCk7XG5cdCAgICB2YXIgaGFzUGFuWSA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9QQU5fWSk7XG5cdFxuXHQgICAgLy8gaWYgYm90aCBwYW4teCBhbmQgcGFuLXkgYXJlIHNldCAoZGlmZmVyZW50IHJlY29nbml6ZXJzXG5cdCAgICAvLyBmb3IgZGlmZmVyZW50IGRpcmVjdGlvbnMsIGUuZy4gaG9yaXpvbnRhbCBwYW4gYnV0IHZlcnRpY2FsIHN3aXBlPylcblx0ICAgIC8vIHdlIG5lZWQgbm9uZSAoYXMgb3RoZXJ3aXNlIHdpdGggcGFuLXggcGFuLXkgY29tYmluZWQgbm9uZSBvZiB0aGVzZVxuXHQgICAgLy8gcmVjb2duaXplcnMgd2lsbCB3b3JrLCBzaW5jZSB0aGUgYnJvd3NlciB3b3VsZCBoYW5kbGUgYWxsIHBhbm5pbmdcblx0ICAgIGlmIChoYXNQYW5YICYmIGhhc1BhblkpIHtcblx0ICAgICAgICByZXR1cm4gVE9VQ0hfQUNUSU9OX05PTkU7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gcGFuLXggT1IgcGFuLXlcblx0ICAgIGlmIChoYXNQYW5YIHx8IGhhc1BhblkpIHtcblx0ICAgICAgICByZXR1cm4gaGFzUGFuWCA/IFRPVUNIX0FDVElPTl9QQU5fWCA6IFRPVUNIX0FDVElPTl9QQU5fWTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBtYW5pcHVsYXRpb25cblx0ICAgIGlmIChpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fTUFOSVBVTEFUSU9OKSkge1xuXHQgICAgICAgIHJldHVybiBUT1VDSF9BQ1RJT05fTUFOSVBVTEFUSU9OO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBUT1VDSF9BQ1RJT05fQVVUTztcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0VG91Y2hBY3Rpb25Qcm9wcygpIHtcblx0ICAgIGlmICghTkFUSVZFX1RPVUNIX0FDVElPTikge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICAgIHZhciB0b3VjaE1hcCA9IHt9O1xuXHQgICAgdmFyIGNzc1N1cHBvcnRzID0gd2luZG93LkNTUyAmJiB3aW5kb3cuQ1NTLnN1cHBvcnRzO1xuXHQgICAgWydhdXRvJywgJ21hbmlwdWxhdGlvbicsICdwYW4teScsICdwYW4teCcsICdwYW4teCBwYW4teScsICdub25lJ10uZm9yRWFjaChmdW5jdGlvbih2YWwpIHtcblx0XG5cdCAgICAgICAgLy8gSWYgY3NzLnN1cHBvcnRzIGlzIG5vdCBzdXBwb3J0ZWQgYnV0IHRoZXJlIGlzIG5hdGl2ZSB0b3VjaC1hY3Rpb24gYXNzdW1lIGl0IHN1cHBvcnRzXG5cdCAgICAgICAgLy8gYWxsIHZhbHVlcy4gVGhpcyBpcyB0aGUgY2FzZSBmb3IgSUUgMTAgYW5kIDExLlxuXHQgICAgICAgIHRvdWNoTWFwW3ZhbF0gPSBjc3NTdXBwb3J0cyA/IHdpbmRvdy5DU1Muc3VwcG9ydHMoJ3RvdWNoLWFjdGlvbicsIHZhbCkgOiB0cnVlO1xuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gdG91Y2hNYXA7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZWNvZ25pemVyIGZsb3cgZXhwbGFpbmVkOyAqXG5cdCAqIEFsbCByZWNvZ25pemVycyBoYXZlIHRoZSBpbml0aWFsIHN0YXRlIG9mIFBPU1NJQkxFIHdoZW4gYSBpbnB1dCBzZXNzaW9uIHN0YXJ0cy5cblx0ICogVGhlIGRlZmluaXRpb24gb2YgYSBpbnB1dCBzZXNzaW9uIGlzIGZyb20gdGhlIGZpcnN0IGlucHV0IHVudGlsIHRoZSBsYXN0IGlucHV0LCB3aXRoIGFsbCBpdCdzIG1vdmVtZW50IGluIGl0LiAqXG5cdCAqIEV4YW1wbGUgc2Vzc2lvbiBmb3IgbW91c2UtaW5wdXQ6IG1vdXNlZG93biAtPiBtb3VzZW1vdmUgLT4gbW91c2V1cFxuXHQgKlxuXHQgKiBPbiBlYWNoIHJlY29nbml6aW5nIGN5Y2xlIChzZWUgTWFuYWdlci5yZWNvZ25pemUpIHRoZSAucmVjb2duaXplKCkgbWV0aG9kIGlzIGV4ZWN1dGVkXG5cdCAqIHdoaWNoIGRldGVybWluZXMgd2l0aCBzdGF0ZSBpdCBzaG91bGQgYmUuXG5cdCAqXG5cdCAqIElmIHRoZSByZWNvZ25pemVyIGhhcyB0aGUgc3RhdGUgRkFJTEVELCBDQU5DRUxMRUQgb3IgUkVDT0dOSVpFRCAoZXF1YWxzIEVOREVEKSwgaXQgaXMgcmVzZXQgdG9cblx0ICogUE9TU0lCTEUgdG8gZ2l2ZSBpdCBhbm90aGVyIGNoYW5nZSBvbiB0aGUgbmV4dCBjeWNsZS5cblx0ICpcblx0ICogICAgICAgICAgICAgICBQb3NzaWJsZVxuXHQgKiAgICAgICAgICAgICAgICAgIHxcblx0ICogICAgICAgICAgICArLS0tLS0rLS0tLS0tLS0tLS0tLS0tK1xuXHQgKiAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICB8XG5cdCAqICAgICAgKy0tLS0tKy0tLS0tKyAgICAgICAgICAgICAgIHxcblx0ICogICAgICB8ICAgICAgICAgICB8ICAgICAgICAgICAgICAgfFxuXHQgKiAgIEZhaWxlZCAgICAgIENhbmNlbGxlZCAgICAgICAgICB8XG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICArLS0tLS0tLSstLS0tLS0rXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICB8XG5cdCAqICAgICAgICAgICAgICAgICAgICAgIFJlY29nbml6ZWQgICAgICAgQmVnYW5cblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYW5nZWRcblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRW5kZWQvUmVjb2duaXplZFxuXHQgKi9cblx0dmFyIFNUQVRFX1BPU1NJQkxFID0gMTtcblx0dmFyIFNUQVRFX0JFR0FOID0gMjtcblx0dmFyIFNUQVRFX0NIQU5HRUQgPSA0O1xuXHR2YXIgU1RBVEVfRU5ERUQgPSA4O1xuXHR2YXIgU1RBVEVfUkVDT0dOSVpFRCA9IFNUQVRFX0VOREVEO1xuXHR2YXIgU1RBVEVfQ0FOQ0VMTEVEID0gMTY7XG5cdHZhciBTVEFURV9GQUlMRUQgPSAzMjtcblx0XG5cdC8qKlxuXHQgKiBSZWNvZ25pemVyXG5cdCAqIEV2ZXJ5IHJlY29nbml6ZXIgbmVlZHMgdG8gZXh0ZW5kIGZyb20gdGhpcyBjbGFzcy5cblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqL1xuXHRmdW5jdGlvbiBSZWNvZ25pemVyKG9wdGlvbnMpIHtcblx0ICAgIHRoaXMub3B0aW9ucyA9IGFzc2lnbih7fSwgdGhpcy5kZWZhdWx0cywgb3B0aW9ucyB8fCB7fSk7XG5cdFxuXHQgICAgdGhpcy5pZCA9IHVuaXF1ZUlkKCk7XG5cdFxuXHQgICAgdGhpcy5tYW5hZ2VyID0gbnVsbDtcblx0XG5cdCAgICAvLyBkZWZhdWx0IGlzIGVuYWJsZSB0cnVlXG5cdCAgICB0aGlzLm9wdGlvbnMuZW5hYmxlID0gaWZVbmRlZmluZWQodGhpcy5vcHRpb25zLmVuYWJsZSwgdHJ1ZSk7XG5cdFxuXHQgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1BPU1NJQkxFO1xuXHRcblx0ICAgIHRoaXMuc2ltdWx0YW5lb3VzID0ge307XG5cdCAgICB0aGlzLnJlcXVpcmVGYWlsID0gW107XG5cdH1cblx0XG5cdFJlY29nbml6ZXIucHJvdG90eXBlID0ge1xuXHQgICAgLyoqXG5cdCAgICAgKiBAdmlydHVhbFxuXHQgICAgICogQHR5cGUge09iamVjdH1cblx0ICAgICAqL1xuXHQgICAgZGVmYXVsdHM6IHt9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogc2V0IG9wdGlvbnNcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAgICAgKiBAcmV0dXJuIHtSZWNvZ25pemVyfVxuXHQgICAgICovXG5cdCAgICBzZXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgICBhc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKTtcblx0XG5cdCAgICAgICAgLy8gYWxzbyB1cGRhdGUgdGhlIHRvdWNoQWN0aW9uLCBpbiBjYXNlIHNvbWV0aGluZyBjaGFuZ2VkIGFib3V0IHRoZSBkaXJlY3Rpb25zL2VuYWJsZWQgc3RhdGVcblx0ICAgICAgICB0aGlzLm1hbmFnZXIgJiYgdGhpcy5tYW5hZ2VyLnRvdWNoQWN0aW9uLnVwZGF0ZSgpO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIHJlY29nbml6ZSBzaW11bHRhbmVvdXMgd2l0aCBhbiBvdGhlciByZWNvZ25pemVyLlxuXHQgICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcblx0ICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfSB0aGlzXG5cdCAgICAgKi9cblx0ICAgIHJlY29nbml6ZVdpdGg6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuXHQgICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhvdGhlclJlY29nbml6ZXIsICdyZWNvZ25pemVXaXRoJywgdGhpcykpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgc2ltdWx0YW5lb3VzID0gdGhpcy5zaW11bHRhbmVvdXM7XG5cdCAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuXHQgICAgICAgIGlmICghc2ltdWx0YW5lb3VzW290aGVyUmVjb2duaXplci5pZF0pIHtcblx0ICAgICAgICAgICAgc2ltdWx0YW5lb3VzW290aGVyUmVjb2duaXplci5pZF0gPSBvdGhlclJlY29nbml6ZXI7XG5cdCAgICAgICAgICAgIG90aGVyUmVjb2duaXplci5yZWNvZ25pemVXaXRoKHRoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBkcm9wIHRoZSBzaW11bHRhbmVvdXMgbGluay4gaXQgZG9lc250IHJlbW92ZSB0aGUgbGluayBvbiB0aGUgb3RoZXIgcmVjb2duaXplci5cblx0ICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG5cdCAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcn0gdGhpc1xuXHQgICAgICovXG5cdCAgICBkcm9wUmVjb2duaXplV2l0aDogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG5cdCAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKG90aGVyUmVjb2duaXplciwgJ2Ryb3BSZWNvZ25pemVXaXRoJywgdGhpcykpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG5cdCAgICAgICAgZGVsZXRlIHRoaXMuc2ltdWx0YW5lb3VzW290aGVyUmVjb2duaXplci5pZF07XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogcmVjb2duaXplciBjYW4gb25seSBydW4gd2hlbiBhbiBvdGhlciBpcyBmYWlsaW5nXG5cdCAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuXHQgICAgICogQHJldHVybnMge1JlY29nbml6ZXJ9IHRoaXNcblx0ICAgICAqL1xuXHQgICAgcmVxdWlyZUZhaWx1cmU6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuXHQgICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhvdGhlclJlY29nbml6ZXIsICdyZXF1aXJlRmFpbHVyZScsIHRoaXMpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIHJlcXVpcmVGYWlsID0gdGhpcy5yZXF1aXJlRmFpbDtcblx0ICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG5cdCAgICAgICAgaWYgKGluQXJyYXkocmVxdWlyZUZhaWwsIG90aGVyUmVjb2duaXplcikgPT09IC0xKSB7XG5cdCAgICAgICAgICAgIHJlcXVpcmVGYWlsLnB1c2gob3RoZXJSZWNvZ25pemVyKTtcblx0ICAgICAgICAgICAgb3RoZXJSZWNvZ25pemVyLnJlcXVpcmVGYWlsdXJlKHRoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBkcm9wIHRoZSByZXF1aXJlRmFpbHVyZSBsaW5rLiBpdCBkb2VzIG5vdCByZW1vdmUgdGhlIGxpbmsgb24gdGhlIG90aGVyIHJlY29nbml6ZXIuXG5cdCAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuXHQgICAgICogQHJldHVybnMge1JlY29nbml6ZXJ9IHRoaXNcblx0ICAgICAqL1xuXHQgICAgZHJvcFJlcXVpcmVGYWlsdXJlOiBmdW5jdGlvbihvdGhlclJlY29nbml6ZXIpIHtcblx0ICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAnZHJvcFJlcXVpcmVGYWlsdXJlJywgdGhpcykpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gaW5BcnJheSh0aGlzLnJlcXVpcmVGYWlsLCBvdGhlclJlY29nbml6ZXIpO1xuXHQgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG5cdCAgICAgICAgICAgIHRoaXMucmVxdWlyZUZhaWwuc3BsaWNlKGluZGV4LCAxKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogaGFzIHJlcXVpcmUgZmFpbHVyZXMgYm9vbGVhblxuXHQgICAgICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAgICAgKi9cblx0ICAgIGhhc1JlcXVpcmVGYWlsdXJlczogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMucmVxdWlyZUZhaWwubGVuZ3RoID4gMDtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBpZiB0aGUgcmVjb2duaXplciBjYW4gcmVjb2duaXplIHNpbXVsdGFuZW91cyB3aXRoIGFuIG90aGVyIHJlY29nbml6ZXJcblx0ICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG5cdCAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAqL1xuXHQgICAgY2FuUmVjb2duaXplV2l0aDogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG5cdCAgICAgICAgcmV0dXJuICEhdGhpcy5zaW11bHRhbmVvdXNbb3RoZXJSZWNvZ25pemVyLmlkXTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBZb3Ugc2hvdWxkIHVzZSBgdHJ5RW1pdGAgaW5zdGVhZCBvZiBgZW1pdGAgZGlyZWN0bHkgdG8gY2hlY2tcblx0ICAgICAqIHRoYXQgYWxsIHRoZSBuZWVkZWQgcmVjb2duaXplcnMgaGFzIGZhaWxlZCBiZWZvcmUgZW1pdHRpbmcuXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcblx0ICAgICAqL1xuXHQgICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcblx0ICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcblx0XG5cdCAgICAgICAgZnVuY3Rpb24gZW1pdChldmVudCkge1xuXHQgICAgICAgICAgICBzZWxmLm1hbmFnZXIuZW1pdChldmVudCwgaW5wdXQpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gJ3BhbnN0YXJ0JyBhbmQgJ3Bhbm1vdmUnXG5cdCAgICAgICAgaWYgKHN0YXRlIDwgU1RBVEVfRU5ERUQpIHtcblx0ICAgICAgICAgICAgZW1pdChzZWxmLm9wdGlvbnMuZXZlbnQgKyBzdGF0ZVN0cihzdGF0ZSkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgZW1pdChzZWxmLm9wdGlvbnMuZXZlbnQpOyAvLyBzaW1wbGUgJ2V2ZW50TmFtZScgZXZlbnRzXG5cdFxuXHQgICAgICAgIGlmIChpbnB1dC5hZGRpdGlvbmFsRXZlbnQpIHsgLy8gYWRkaXRpb25hbCBldmVudChwYW5sZWZ0LCBwYW5yaWdodCwgcGluY2hpbiwgcGluY2hvdXQuLi4pXG5cdCAgICAgICAgICAgIGVtaXQoaW5wdXQuYWRkaXRpb25hbEV2ZW50KTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIHBhbmVuZCBhbmQgcGFuY2FuY2VsXG5cdCAgICAgICAgaWYgKHN0YXRlID49IFNUQVRFX0VOREVEKSB7XG5cdCAgICAgICAgICAgIGVtaXQoc2VsZi5vcHRpb25zLmV2ZW50ICsgc3RhdGVTdHIoc3RhdGUpKTtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQ2hlY2sgdGhhdCBhbGwgdGhlIHJlcXVpcmUgZmFpbHVyZSByZWNvZ25pemVycyBoYXMgZmFpbGVkLFxuXHQgICAgICogaWYgdHJ1ZSwgaXQgZW1pdHMgYSBnZXN0dXJlIGV2ZW50LFxuXHQgICAgICogb3RoZXJ3aXNlLCBzZXR1cCB0aGUgc3RhdGUgdG8gRkFJTEVELlxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG5cdCAgICAgKi9cblx0ICAgIHRyeUVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG5cdCAgICAgICAgaWYgKHRoaXMuY2FuRW1pdCgpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLmVtaXQoaW5wdXQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBpdCdzIGZhaWxpbmcgYW55d2F5XG5cdCAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZBSUxFRDtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBjYW4gd2UgZW1pdD9cblx0ICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgICAgICovXG5cdCAgICBjYW5FbWl0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgaSA9IDA7XG5cdCAgICAgICAgd2hpbGUgKGkgPCB0aGlzLnJlcXVpcmVGYWlsLmxlbmd0aCkge1xuXHQgICAgICAgICAgICBpZiAoISh0aGlzLnJlcXVpcmVGYWlsW2ldLnN0YXRlICYgKFNUQVRFX0ZBSUxFRCB8IFNUQVRFX1BPU1NJQkxFKSkpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpKys7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIHVwZGF0ZSB0aGUgcmVjb2duaXplclxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuXHQgICAgICovXG5cdCAgICByZWNvZ25pemU6IGZ1bmN0aW9uKGlucHV0RGF0YSkge1xuXHQgICAgICAgIC8vIG1ha2UgYSBuZXcgY29weSBvZiB0aGUgaW5wdXREYXRhXG5cdCAgICAgICAgLy8gc28gd2UgY2FuIGNoYW5nZSB0aGUgaW5wdXREYXRhIHdpdGhvdXQgbWVzc2luZyB1cCB0aGUgb3RoZXIgcmVjb2duaXplcnNcblx0ICAgICAgICB2YXIgaW5wdXREYXRhQ2xvbmUgPSBhc3NpZ24oe30sIGlucHV0RGF0YSk7XG5cdFxuXHQgICAgICAgIC8vIGlzIGlzIGVuYWJsZWQgYW5kIGFsbG93IHJlY29nbml6aW5nP1xuXHQgICAgICAgIGlmICghYm9vbE9yRm4odGhpcy5vcHRpb25zLmVuYWJsZSwgW3RoaXMsIGlucHV0RGF0YUNsb25lXSkpIHtcblx0ICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuXHQgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRkFJTEVEO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyByZXNldCB3aGVuIHdlJ3ZlIHJlYWNoZWQgdGhlIGVuZFxuXHQgICAgICAgIGlmICh0aGlzLnN0YXRlICYgKFNUQVRFX1JFQ09HTklaRUQgfCBTVEFURV9DQU5DRUxMRUQgfCBTVEFURV9GQUlMRUQpKSB7XG5cdCAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9QT1NTSUJMRTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLnByb2Nlc3MoaW5wdXREYXRhQ2xvbmUpO1xuXHRcblx0ICAgICAgICAvLyB0aGUgcmVjb2duaXplciBoYXMgcmVjb2duaXplZCBhIGdlc3R1cmVcblx0ICAgICAgICAvLyBzbyB0cmlnZ2VyIGFuIGV2ZW50XG5cdCAgICAgICAgaWYgKHRoaXMuc3RhdGUgJiAoU1RBVEVfQkVHQU4gfCBTVEFURV9DSEFOR0VEIHwgU1RBVEVfRU5ERUQgfCBTVEFURV9DQU5DRUxMRUQpKSB7XG5cdCAgICAgICAgICAgIHRoaXMudHJ5RW1pdChpbnB1dERhdGFDbG9uZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIHJldHVybiB0aGUgc3RhdGUgb2YgdGhlIHJlY29nbml6ZXJcblx0ICAgICAqIHRoZSBhY3R1YWwgcmVjb2duaXppbmcgaGFwcGVucyBpbiB0aGlzIG1ldGhvZFxuXHQgICAgICogQHZpcnR1YWxcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dERhdGFcblx0ICAgICAqIEByZXR1cm5zIHtDb25zdH0gU1RBVEVcblx0ICAgICAqL1xuXHQgICAgcHJvY2VzczogZnVuY3Rpb24oaW5wdXREYXRhKSB7IH0sIC8vIGpzaGludCBpZ25vcmU6bGluZVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogcmV0dXJuIHRoZSBwcmVmZXJyZWQgdG91Y2gtYWN0aW9uXG5cdCAgICAgKiBAdmlydHVhbFxuXHQgICAgICogQHJldHVybnMge0FycmF5fVxuXHQgICAgICovXG5cdCAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7IH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBjYWxsZWQgd2hlbiB0aGUgZ2VzdHVyZSBpc24ndCBhbGxvd2VkIHRvIHJlY29nbml6ZVxuXHQgICAgICogbGlrZSB3aGVuIGFub3RoZXIgaXMgYmVpbmcgcmVjb2duaXplZCBvciBpdCBpcyBkaXNhYmxlZFxuXHQgICAgICogQHZpcnR1YWxcblx0ICAgICAqL1xuXHQgICAgcmVzZXQ6IGZ1bmN0aW9uKCkgeyB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogZ2V0IGEgdXNhYmxlIHN0cmluZywgdXNlZCBhcyBldmVudCBwb3N0Zml4XG5cdCAqIEBwYXJhbSB7Q29uc3R9IHN0YXRlXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IHN0YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBzdGF0ZVN0cihzdGF0ZSkge1xuXHQgICAgaWYgKHN0YXRlICYgU1RBVEVfQ0FOQ0VMTEVEKSB7XG5cdCAgICAgICAgcmV0dXJuICdjYW5jZWwnO1xuXHQgICAgfSBlbHNlIGlmIChzdGF0ZSAmIFNUQVRFX0VOREVEKSB7XG5cdCAgICAgICAgcmV0dXJuICdlbmQnO1xuXHQgICAgfSBlbHNlIGlmIChzdGF0ZSAmIFNUQVRFX0NIQU5HRUQpIHtcblx0ICAgICAgICByZXR1cm4gJ21vdmUnO1xuXHQgICAgfSBlbHNlIGlmIChzdGF0ZSAmIFNUQVRFX0JFR0FOKSB7XG5cdCAgICAgICAgcmV0dXJuICdzdGFydCc7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gJyc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBkaXJlY3Rpb24gY29ucyB0byBzdHJpbmdcblx0ICogQHBhcmFtIHtDb25zdH0gZGlyZWN0aW9uXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdCAqL1xuXHRmdW5jdGlvbiBkaXJlY3Rpb25TdHIoZGlyZWN0aW9uKSB7XG5cdCAgICBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9ET1dOKSB7XG5cdCAgICAgICAgcmV0dXJuICdkb3duJztcblx0ICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9VUCkge1xuXHQgICAgICAgIHJldHVybiAndXAnO1xuXHQgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gRElSRUNUSU9OX0xFRlQpIHtcblx0ICAgICAgICByZXR1cm4gJ2xlZnQnO1xuXHQgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gRElSRUNUSU9OX1JJR0hUKSB7XG5cdCAgICAgICAgcmV0dXJuICdyaWdodCc7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gJyc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBnZXQgYSByZWNvZ25pemVyIGJ5IG5hbWUgaWYgaXQgaXMgYm91bmQgdG8gYSBtYW5hZ2VyXG5cdCAqIEBwYXJhbSB7UmVjb2duaXplcnxTdHJpbmd9IG90aGVyUmVjb2duaXplclxuXHQgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IHJlY29nbml6ZXJcblx0ICogQHJldHVybnMge1JlY29nbml6ZXJ9XG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgcmVjb2duaXplcikge1xuXHQgICAgdmFyIG1hbmFnZXIgPSByZWNvZ25pemVyLm1hbmFnZXI7XG5cdCAgICBpZiAobWFuYWdlcikge1xuXHQgICAgICAgIHJldHVybiBtYW5hZ2VyLmdldChvdGhlclJlY29nbml6ZXIpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG90aGVyUmVjb2duaXplcjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoaXMgcmVjb2duaXplciBpcyBqdXN0IHVzZWQgYXMgYSBiYXNlIGZvciB0aGUgc2ltcGxlIGF0dHJpYnV0ZSByZWNvZ25pemVycy5cblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBleHRlbmRzIFJlY29nbml6ZXJcblx0ICovXG5cdGZ1bmN0aW9uIEF0dHJSZWNvZ25pemVyKCkge1xuXHQgICAgUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cdFxuXHRpbmhlcml0KEF0dHJSZWNvZ25pemVyLCBSZWNvZ25pemVyLCB7XG5cdCAgICAvKipcblx0ICAgICAqIEBuYW1lc3BhY2Vcblx0ICAgICAqIEBtZW1iZXJvZiBBdHRyUmVjb2duaXplclxuXHQgICAgICovXG5cdCAgICBkZWZhdWx0czoge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XG5cdCAgICAgICAgICogQGRlZmF1bHQgMVxuXHQgICAgICAgICAqL1xuXHQgICAgICAgIHBvaW50ZXJzOiAxXG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVXNlZCB0byBjaGVjayBpZiBpdCB0aGUgcmVjb2duaXplciByZWNlaXZlcyB2YWxpZCBpbnB1dCwgbGlrZSBpbnB1dC5kaXN0YW5jZSA+IDEwLlxuXHQgICAgICogQG1lbWJlcm9mIEF0dHJSZWNvZ25pemVyXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcblx0ICAgICAqIEByZXR1cm5zIHtCb29sZWFufSByZWNvZ25pemVkXG5cdCAgICAgKi9cblx0ICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIHZhciBvcHRpb25Qb2ludGVycyA9IHRoaXMub3B0aW9ucy5wb2ludGVycztcblx0ICAgICAgICByZXR1cm4gb3B0aW9uUG9pbnRlcnMgPT09IDAgfHwgaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSBvcHRpb25Qb2ludGVycztcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBQcm9jZXNzIHRoZSBpbnB1dCBhbmQgcmV0dXJuIHRoZSBzdGF0ZSBmb3IgdGhlIHJlY29nbml6ZXJcblx0ICAgICAqIEBtZW1iZXJvZiBBdHRyUmVjb2duaXplclxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG5cdCAgICAgKiBAcmV0dXJucyB7Kn0gU3RhdGVcblx0ICAgICAqL1xuXHQgICAgcHJvY2VzczogZnVuY3Rpb24oaW5wdXQpIHtcblx0ICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuXHQgICAgICAgIHZhciBldmVudFR5cGUgPSBpbnB1dC5ldmVudFR5cGU7XG5cdFxuXHQgICAgICAgIHZhciBpc1JlY29nbml6ZWQgPSBzdGF0ZSAmIChTVEFURV9CRUdBTiB8IFNUQVRFX0NIQU5HRUQpO1xuXHQgICAgICAgIHZhciBpc1ZhbGlkID0gdGhpcy5hdHRyVGVzdChpbnB1dCk7XG5cdFxuXHQgICAgICAgIC8vIG9uIGNhbmNlbCBpbnB1dCBhbmQgd2UndmUgcmVjb2duaXplZCBiZWZvcmUsIHJldHVybiBTVEFURV9DQU5DRUxMRURcblx0ICAgICAgICBpZiAoaXNSZWNvZ25pemVkICYmIChldmVudFR5cGUgJiBJTlBVVF9DQU5DRUwgfHwgIWlzVmFsaWQpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBzdGF0ZSB8IFNUQVRFX0NBTkNFTExFRDtcblx0ICAgICAgICB9IGVsc2UgaWYgKGlzUmVjb2duaXplZCB8fCBpc1ZhbGlkKSB7XG5cdCAgICAgICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9FTkQpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZSB8IFNUQVRFX0VOREVEO1xuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKCEoc3RhdGUgJiBTVEFURV9CRUdBTikpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBTVEFURV9CRUdBTjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gc3RhdGUgfCBTVEFURV9DSEFOR0VEO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gU1RBVEVfRkFJTEVEO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBQYW5cblx0ICogUmVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIGRvd24gYW5kIG1vdmVkIGluIHRoZSBhbGxvd2VkIGRpcmVjdGlvbi5cblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBleHRlbmRzIEF0dHJSZWNvZ25pemVyXG5cdCAqL1xuXHRmdW5jdGlvbiBQYW5SZWNvZ25pemVyKCkge1xuXHQgICAgQXR0clJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XG5cdCAgICB0aGlzLnBYID0gbnVsbDtcblx0ICAgIHRoaXMucFkgPSBudWxsO1xuXHR9XG5cdFxuXHRpbmhlcml0KFBhblJlY29nbml6ZXIsIEF0dHJSZWNvZ25pemVyLCB7XG5cdCAgICAvKipcblx0ICAgICAqIEBuYW1lc3BhY2Vcblx0ICAgICAqIEBtZW1iZXJvZiBQYW5SZWNvZ25pemVyXG5cdCAgICAgKi9cblx0ICAgIGRlZmF1bHRzOiB7XG5cdCAgICAgICAgZXZlbnQ6ICdwYW4nLFxuXHQgICAgICAgIHRocmVzaG9sZDogMTAsXG5cdCAgICAgICAgcG9pbnRlcnM6IDEsXG5cdCAgICAgICAgZGlyZWN0aW9uOiBESVJFQ1RJT05fQUxMXG5cdCAgICB9LFxuXHRcblx0ICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbjtcblx0ICAgICAgICB2YXIgYWN0aW9ucyA9IFtdO1xuXHQgICAgICAgIGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fSE9SSVpPTlRBTCkge1xuXHQgICAgICAgICAgICBhY3Rpb25zLnB1c2goVE9VQ0hfQUNUSU9OX1BBTl9ZKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGRpcmVjdGlvbiAmIERJUkVDVElPTl9WRVJUSUNBTCkge1xuXHQgICAgICAgICAgICBhY3Rpb25zLnB1c2goVE9VQ0hfQUNUSU9OX1BBTl9YKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIGFjdGlvbnM7XG5cdCAgICB9LFxuXHRcblx0ICAgIGRpcmVjdGlvblRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG5cdCAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cdCAgICAgICAgdmFyIGhhc01vdmVkID0gdHJ1ZTtcblx0ICAgICAgICB2YXIgZGlzdGFuY2UgPSBpbnB1dC5kaXN0YW5jZTtcblx0ICAgICAgICB2YXIgZGlyZWN0aW9uID0gaW5wdXQuZGlyZWN0aW9uO1xuXHQgICAgICAgIHZhciB4ID0gaW5wdXQuZGVsdGFYO1xuXHQgICAgICAgIHZhciB5ID0gaW5wdXQuZGVsdGFZO1xuXHRcblx0ICAgICAgICAvLyBsb2NrIHRvIGF4aXM/XG5cdCAgICAgICAgaWYgKCEoZGlyZWN0aW9uICYgb3B0aW9ucy5kaXJlY3Rpb24pKSB7XG5cdCAgICAgICAgICAgIGlmIChvcHRpb25zLmRpcmVjdGlvbiAmIERJUkVDVElPTl9IT1JJWk9OVEFMKSB7XG5cdCAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAoeCA9PT0gMCkgPyBESVJFQ1RJT05fTk9ORSA6ICh4IDwgMCkgPyBESVJFQ1RJT05fTEVGVCA6IERJUkVDVElPTl9SSUdIVDtcblx0ICAgICAgICAgICAgICAgIGhhc01vdmVkID0geCAhPSB0aGlzLnBYO1xuXHQgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBNYXRoLmFicyhpbnB1dC5kZWx0YVgpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gKHkgPT09IDApID8gRElSRUNUSU9OX05PTkUgOiAoeSA8IDApID8gRElSRUNUSU9OX1VQIDogRElSRUNUSU9OX0RPV047XG5cdCAgICAgICAgICAgICAgICBoYXNNb3ZlZCA9IHkgIT0gdGhpcy5wWTtcblx0ICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gTWF0aC5hYnMoaW5wdXQuZGVsdGFZKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBpbnB1dC5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG5cdCAgICAgICAgcmV0dXJuIGhhc01vdmVkICYmIGRpc3RhbmNlID4gb3B0aW9ucy50aHJlc2hvbGQgJiYgZGlyZWN0aW9uICYgb3B0aW9ucy5kaXJlY3Rpb247XG5cdCAgICB9LFxuXHRcblx0ICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIHJldHVybiBBdHRyUmVjb2duaXplci5wcm90b3R5cGUuYXR0clRlc3QuY2FsbCh0aGlzLCBpbnB1dCkgJiZcblx0ICAgICAgICAgICAgKHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTiB8fCAoISh0aGlzLnN0YXRlICYgU1RBVEVfQkVHQU4pICYmIHRoaXMuZGlyZWN0aW9uVGVzdChpbnB1dCkpKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcblx0XG5cdCAgICAgICAgdGhpcy5wWCA9IGlucHV0LmRlbHRhWDtcblx0ICAgICAgICB0aGlzLnBZID0gaW5wdXQuZGVsdGFZO1xuXHRcblx0ICAgICAgICB2YXIgZGlyZWN0aW9uID0gZGlyZWN0aW9uU3RyKGlucHV0LmRpcmVjdGlvbik7XG5cdFxuXHQgICAgICAgIGlmIChkaXJlY3Rpb24pIHtcblx0ICAgICAgICAgICAgaW5wdXQuYWRkaXRpb25hbEV2ZW50ID0gdGhpcy5vcHRpb25zLmV2ZW50ICsgZGlyZWN0aW9uO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLl9zdXBlci5lbWl0LmNhbGwodGhpcywgaW5wdXQpO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBQaW5jaFxuXHQgKiBSZWNvZ25pemVkIHdoZW4gdHdvIG9yIG1vcmUgcG9pbnRlcnMgYXJlIG1vdmluZyB0b3dhcmQgKHpvb20taW4pIG9yIGF3YXkgZnJvbSBlYWNoIG90aGVyICh6b29tLW91dCkuXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuXHQgKi9cblx0ZnVuY3Rpb24gUGluY2hSZWNvZ25pemVyKCkge1xuXHQgICAgQXR0clJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXHRcblx0aW5oZXJpdChQaW5jaFJlY29nbml6ZXIsIEF0dHJSZWNvZ25pemVyLCB7XG5cdCAgICAvKipcblx0ICAgICAqIEBuYW1lc3BhY2Vcblx0ICAgICAqIEBtZW1iZXJvZiBQaW5jaFJlY29nbml6ZXJcblx0ICAgICAqL1xuXHQgICAgZGVmYXVsdHM6IHtcblx0ICAgICAgICBldmVudDogJ3BpbmNoJyxcblx0ICAgICAgICB0aHJlc2hvbGQ6IDAsXG5cdCAgICAgICAgcG9pbnRlcnM6IDJcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiBbVE9VQ0hfQUNUSU9OX05PTkVdO1xuXHQgICAgfSxcblx0XG5cdCAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLCBpbnB1dCkgJiZcblx0ICAgICAgICAgICAgKE1hdGguYWJzKGlucHV0LnNjYWxlIC0gMSkgPiB0aGlzLm9wdGlvbnMudGhyZXNob2xkIHx8IHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTik7XG5cdCAgICB9LFxuXHRcblx0ICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG5cdCAgICAgICAgaWYgKGlucHV0LnNjYWxlICE9PSAxKSB7XG5cdCAgICAgICAgICAgIHZhciBpbk91dCA9IGlucHV0LnNjYWxlIDwgMSA/ICdpbicgOiAnb3V0Jztcblx0ICAgICAgICAgICAgaW5wdXQuYWRkaXRpb25hbEV2ZW50ID0gdGhpcy5vcHRpb25zLmV2ZW50ICsgaW5PdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLCBpbnB1dCk7XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIFByZXNzXG5cdCAqIFJlY29nbml6ZWQgd2hlbiB0aGUgcG9pbnRlciBpcyBkb3duIGZvciB4IG1zIHdpdGhvdXQgYW55IG1vdmVtZW50LlxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQGV4dGVuZHMgUmVjb2duaXplclxuXHQgKi9cblx0ZnVuY3Rpb24gUHJlc3NSZWNvZ25pemVyKCkge1xuXHQgICAgUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcblx0ICAgIHRoaXMuX3RpbWVyID0gbnVsbDtcblx0ICAgIHRoaXMuX2lucHV0ID0gbnVsbDtcblx0fVxuXHRcblx0aW5oZXJpdChQcmVzc1JlY29nbml6ZXIsIFJlY29nbml6ZXIsIHtcblx0ICAgIC8qKlxuXHQgICAgICogQG5hbWVzcGFjZVxuXHQgICAgICogQG1lbWJlcm9mIFByZXNzUmVjb2duaXplclxuXHQgICAgICovXG5cdCAgICBkZWZhdWx0czoge1xuXHQgICAgICAgIGV2ZW50OiAncHJlc3MnLFxuXHQgICAgICAgIHBvaW50ZXJzOiAxLFxuXHQgICAgICAgIHRpbWU6IDI1MSwgLy8gbWluaW1hbCB0aW1lIG9mIHRoZSBwb2ludGVyIHRvIGJlIHByZXNzZWRcblx0ICAgICAgICB0aHJlc2hvbGQ6IDkgLy8gYSBtaW5pbWFsIG1vdmVtZW50IGlzIG9rLCBidXQga2VlcCBpdCBsb3dcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiBbVE9VQ0hfQUNUSU9OX0FVVE9dO1xuXHQgICAgfSxcblx0XG5cdCAgICBwcm9jZXNzOiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXHQgICAgICAgIHZhciB2YWxpZFBvaW50ZXJzID0gaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSBvcHRpb25zLnBvaW50ZXJzO1xuXHQgICAgICAgIHZhciB2YWxpZE1vdmVtZW50ID0gaW5wdXQuZGlzdGFuY2UgPCBvcHRpb25zLnRocmVzaG9sZDtcblx0ICAgICAgICB2YXIgdmFsaWRUaW1lID0gaW5wdXQuZGVsdGFUaW1lID4gb3B0aW9ucy50aW1lO1xuXHRcblx0ICAgICAgICB0aGlzLl9pbnB1dCA9IGlucHV0O1xuXHRcblx0ICAgICAgICAvLyB3ZSBvbmx5IGFsbG93IGxpdHRsZSBtb3ZlbWVudFxuXHQgICAgICAgIC8vIGFuZCB3ZSd2ZSByZWFjaGVkIGFuIGVuZCBldmVudCwgc28gYSB0YXAgaXMgcG9zc2libGVcblx0ICAgICAgICBpZiAoIXZhbGlkTW92ZW1lbnQgfHwgIXZhbGlkUG9pbnRlcnMgfHwgKGlucHV0LmV2ZW50VHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpICYmICF2YWxpZFRpbWUpKSB7XG5cdCAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX1NUQVJUKSB7XG5cdCAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcblx0ICAgICAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0Q29udGV4dChmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9SRUNPR05JWkVEO1xuXHQgICAgICAgICAgICAgICAgdGhpcy50cnlFbWl0KCk7XG5cdCAgICAgICAgICAgIH0sIG9wdGlvbnMudGltZSwgdGhpcyk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChpbnB1dC5ldmVudFR5cGUgJiBJTlBVVF9FTkQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIFNUQVRFX1JFQ09HTklaRUQ7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBTVEFURV9GQUlMRUQ7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xuXHQgICAgfSxcblx0XG5cdCAgICBlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBTVEFURV9SRUNPR05JWkVEKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChpbnB1dCAmJiAoaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfRU5EKSkge1xuXHQgICAgICAgICAgICB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQgKyAndXAnLCBpbnB1dCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5faW5wdXQudGltZVN0YW1wID0gbm93KCk7XG5cdCAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCwgdGhpcy5faW5wdXQpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fSk7XG5cdFxuXHQvKipcblx0ICogUm90YXRlXG5cdCAqIFJlY29nbml6ZWQgd2hlbiB0d28gb3IgbW9yZSBwb2ludGVyIGFyZSBtb3ZpbmcgaW4gYSBjaXJjdWxhciBtb3Rpb24uXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuXHQgKi9cblx0ZnVuY3Rpb24gUm90YXRlUmVjb2duaXplcigpIHtcblx0ICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblx0XG5cdGluaGVyaXQoUm90YXRlUmVjb2duaXplciwgQXR0clJlY29nbml6ZXIsIHtcblx0ICAgIC8qKlxuXHQgICAgICogQG5hbWVzcGFjZVxuXHQgICAgICogQG1lbWJlcm9mIFJvdGF0ZVJlY29nbml6ZXJcblx0ICAgICAqL1xuXHQgICAgZGVmYXVsdHM6IHtcblx0ICAgICAgICBldmVudDogJ3JvdGF0ZScsXG5cdCAgICAgICAgdGhyZXNob2xkOiAwLFxuXHQgICAgICAgIHBvaW50ZXJzOiAyXG5cdCAgICB9LFxuXHRcblx0ICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9OT05FXTtcblx0ICAgIH0sXG5cdFxuXHQgICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcywgaW5wdXQpICYmXG5cdCAgICAgICAgICAgIChNYXRoLmFicyhpbnB1dC5yb3RhdGlvbikgPiB0aGlzLm9wdGlvbnMudGhyZXNob2xkIHx8IHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTik7XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIFN3aXBlXG5cdCAqIFJlY29nbml6ZWQgd2hlbiB0aGUgcG9pbnRlciBpcyBtb3ZpbmcgZmFzdCAodmVsb2NpdHkpLCB3aXRoIGVub3VnaCBkaXN0YW5jZSBpbiB0aGUgYWxsb3dlZCBkaXJlY3Rpb24uXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuXHQgKi9cblx0ZnVuY3Rpb24gU3dpcGVSZWNvZ25pemVyKCkge1xuXHQgICAgQXR0clJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXHRcblx0aW5oZXJpdChTd2lwZVJlY29nbml6ZXIsIEF0dHJSZWNvZ25pemVyLCB7XG5cdCAgICAvKipcblx0ICAgICAqIEBuYW1lc3BhY2Vcblx0ICAgICAqIEBtZW1iZXJvZiBTd2lwZVJlY29nbml6ZXJcblx0ICAgICAqL1xuXHQgICAgZGVmYXVsdHM6IHtcblx0ICAgICAgICBldmVudDogJ3N3aXBlJyxcblx0ICAgICAgICB0aHJlc2hvbGQ6IDEwLFxuXHQgICAgICAgIHZlbG9jaXR5OiAwLjMsXG5cdCAgICAgICAgZGlyZWN0aW9uOiBESVJFQ1RJT05fSE9SSVpPTlRBTCB8IERJUkVDVElPTl9WRVJUSUNBTCxcblx0ICAgICAgICBwb2ludGVyczogMVxuXHQgICAgfSxcblx0XG5cdCAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIFBhblJlY29nbml6ZXIucHJvdG90eXBlLmdldFRvdWNoQWN0aW9uLmNhbGwodGhpcyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uO1xuXHQgICAgICAgIHZhciB2ZWxvY2l0eTtcblx0XG5cdCAgICAgICAgaWYgKGRpcmVjdGlvbiAmIChESVJFQ1RJT05fSE9SSVpPTlRBTCB8IERJUkVDVElPTl9WRVJUSUNBTCkpIHtcblx0ICAgICAgICAgICAgdmVsb2NpdHkgPSBpbnB1dC5vdmVyYWxsVmVsb2NpdHk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fSE9SSVpPTlRBTCkge1xuXHQgICAgICAgICAgICB2ZWxvY2l0eSA9IGlucHV0Lm92ZXJhbGxWZWxvY2l0eVg7XG5cdCAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fVkVSVElDQUwpIHtcblx0ICAgICAgICAgICAgdmVsb2NpdHkgPSBpbnB1dC5vdmVyYWxsVmVsb2NpdHlZO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcywgaW5wdXQpICYmXG5cdCAgICAgICAgICAgIGRpcmVjdGlvbiAmIGlucHV0Lm9mZnNldERpcmVjdGlvbiAmJlxuXHQgICAgICAgICAgICBpbnB1dC5kaXN0YW5jZSA+IHRoaXMub3B0aW9ucy50aHJlc2hvbGQgJiZcblx0ICAgICAgICAgICAgaW5wdXQubWF4UG9pbnRlcnMgPT0gdGhpcy5vcHRpb25zLnBvaW50ZXJzICYmXG5cdCAgICAgICAgICAgIGFicyh2ZWxvY2l0eSkgPiB0aGlzLm9wdGlvbnMudmVsb2NpdHkgJiYgaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfRU5EO1xuXHQgICAgfSxcblx0XG5cdCAgICBlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIHZhciBkaXJlY3Rpb24gPSBkaXJlY3Rpb25TdHIoaW5wdXQub2Zmc2V0RGlyZWN0aW9uKTtcblx0ICAgICAgICBpZiAoZGlyZWN0aW9uKSB7XG5cdCAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCArIGRpcmVjdGlvbiwgaW5wdXQpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LCBpbnB1dCk7XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIEEgdGFwIGlzIGVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIGRvaW5nIGEgc21hbGwgdGFwL2NsaWNrLiBNdWx0aXBsZSB0YXBzIGFyZSByZWNvZ25pemVkIGlmIHRoZXkgb2NjdXJcblx0ICogYmV0d2VlbiB0aGUgZ2l2ZW4gaW50ZXJ2YWwgYW5kIHBvc2l0aW9uLiBUaGUgZGVsYXkgb3B0aW9uIGNhbiBiZSB1c2VkIHRvIHJlY29nbml6ZSBtdWx0aS10YXBzIHdpdGhvdXQgZmlyaW5nXG5cdCAqIGEgc2luZ2xlIHRhcC5cblx0ICpcblx0ICogVGhlIGV2ZW50RGF0YSBmcm9tIHRoZSBlbWl0dGVkIGV2ZW50IGNvbnRhaW5zIHRoZSBwcm9wZXJ0eSBgdGFwQ291bnRgLCB3aGljaCBjb250YWlucyB0aGUgYW1vdW50IG9mXG5cdCAqIG11bHRpLXRhcHMgYmVpbmcgcmVjb2duaXplZC5cblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBleHRlbmRzIFJlY29nbml6ZXJcblx0ICovXG5cdGZ1bmN0aW9uIFRhcFJlY29nbml6ZXIoKSB7XG5cdCAgICBSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFxuXHQgICAgLy8gcHJldmlvdXMgdGltZSBhbmQgY2VudGVyLFxuXHQgICAgLy8gdXNlZCBmb3IgdGFwIGNvdW50aW5nXG5cdCAgICB0aGlzLnBUaW1lID0gZmFsc2U7XG5cdCAgICB0aGlzLnBDZW50ZXIgPSBmYWxzZTtcblx0XG5cdCAgICB0aGlzLl90aW1lciA9IG51bGw7XG5cdCAgICB0aGlzLl9pbnB1dCA9IG51bGw7XG5cdCAgICB0aGlzLmNvdW50ID0gMDtcblx0fVxuXHRcblx0aW5oZXJpdChUYXBSZWNvZ25pemVyLCBSZWNvZ25pemVyLCB7XG5cdCAgICAvKipcblx0ICAgICAqIEBuYW1lc3BhY2Vcblx0ICAgICAqIEBtZW1iZXJvZiBQaW5jaFJlY29nbml6ZXJcblx0ICAgICAqL1xuXHQgICAgZGVmYXVsdHM6IHtcblx0ICAgICAgICBldmVudDogJ3RhcCcsXG5cdCAgICAgICAgcG9pbnRlcnM6IDEsXG5cdCAgICAgICAgdGFwczogMSxcblx0ICAgICAgICBpbnRlcnZhbDogMzAwLCAvLyBtYXggdGltZSBiZXR3ZWVuIHRoZSBtdWx0aS10YXAgdGFwc1xuXHQgICAgICAgIHRpbWU6IDI1MCwgLy8gbWF4IHRpbWUgb2YgdGhlIHBvaW50ZXIgdG8gYmUgZG93biAobGlrZSBmaW5nZXIgb24gdGhlIHNjcmVlbilcblx0ICAgICAgICB0aHJlc2hvbGQ6IDksIC8vIGEgbWluaW1hbCBtb3ZlbWVudCBpcyBvaywgYnV0IGtlZXAgaXQgbG93XG5cdCAgICAgICAgcG9zVGhyZXNob2xkOiAxMCAvLyBhIG11bHRpLXRhcCBjYW4gYmUgYSBiaXQgb2ZmIHRoZSBpbml0aWFsIHBvc2l0aW9uXG5cdCAgICB9LFxuXHRcblx0ICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9NQU5JUFVMQVRJT05dO1xuXHQgICAgfSxcblx0XG5cdCAgICBwcm9jZXNzOiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXHRcblx0ICAgICAgICB2YXIgdmFsaWRQb2ludGVycyA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA9PT0gb3B0aW9ucy5wb2ludGVycztcblx0ICAgICAgICB2YXIgdmFsaWRNb3ZlbWVudCA9IGlucHV0LmRpc3RhbmNlIDwgb3B0aW9ucy50aHJlc2hvbGQ7XG5cdCAgICAgICAgdmFyIHZhbGlkVG91Y2hUaW1lID0gaW5wdXQuZGVsdGFUaW1lIDwgb3B0aW9ucy50aW1lO1xuXHRcblx0ICAgICAgICB0aGlzLnJlc2V0KCk7XG5cdFxuXHQgICAgICAgIGlmICgoaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQpICYmICh0aGlzLmNvdW50ID09PSAwKSkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gd2Ugb25seSBhbGxvdyBsaXR0bGUgbW92ZW1lbnRcblx0ICAgICAgICAvLyBhbmQgd2UndmUgcmVhY2hlZCBhbiBlbmQgZXZlbnQsIHNvIGEgdGFwIGlzIHBvc3NpYmxlXG5cdCAgICAgICAgaWYgKHZhbGlkTW92ZW1lbnQgJiYgdmFsaWRUb3VjaFRpbWUgJiYgdmFsaWRQb2ludGVycykge1xuXHQgICAgICAgICAgICBpZiAoaW5wdXQuZXZlbnRUeXBlICE9IElOUFVUX0VORCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmFpbFRpbWVvdXQoKTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgdmFyIHZhbGlkSW50ZXJ2YWwgPSB0aGlzLnBUaW1lID8gKGlucHV0LnRpbWVTdGFtcCAtIHRoaXMucFRpbWUgPCBvcHRpb25zLmludGVydmFsKSA6IHRydWU7XG5cdCAgICAgICAgICAgIHZhciB2YWxpZE11bHRpVGFwID0gIXRoaXMucENlbnRlciB8fCBnZXREaXN0YW5jZSh0aGlzLnBDZW50ZXIsIGlucHV0LmNlbnRlcikgPCBvcHRpb25zLnBvc1RocmVzaG9sZDtcblx0XG5cdCAgICAgICAgICAgIHRoaXMucFRpbWUgPSBpbnB1dC50aW1lU3RhbXA7XG5cdCAgICAgICAgICAgIHRoaXMucENlbnRlciA9IGlucHV0LmNlbnRlcjtcblx0XG5cdCAgICAgICAgICAgIGlmICghdmFsaWRNdWx0aVRhcCB8fCAhdmFsaWRJbnRlcnZhbCkge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IDE7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmNvdW50ICs9IDE7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHRoaXMuX2lucHV0ID0gaW5wdXQ7XG5cdFxuXHQgICAgICAgICAgICAvLyBpZiB0YXAgY291bnQgbWF0Y2hlcyB3ZSBoYXZlIHJlY29nbml6ZWQgaXQsXG5cdCAgICAgICAgICAgIC8vIGVsc2UgaXQgaGFzIGJlZ2FuIHJlY29nbml6aW5nLi4uXG5cdCAgICAgICAgICAgIHZhciB0YXBDb3VudCA9IHRoaXMuY291bnQgJSBvcHRpb25zLnRhcHM7XG5cdCAgICAgICAgICAgIGlmICh0YXBDb3VudCA9PT0gMCkge1xuXHQgICAgICAgICAgICAgICAgLy8gbm8gZmFpbGluZyByZXF1aXJlbWVudHMsIGltbWVkaWF0ZWx5IHRyaWdnZXIgdGhlIHRhcCBldmVudFxuXHQgICAgICAgICAgICAgICAgLy8gb3Igd2FpdCBhcyBsb25nIGFzIHRoZSBtdWx0aXRhcCBpbnRlcnZhbCB0byB0cmlnZ2VyXG5cdCAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaGFzUmVxdWlyZUZhaWx1cmVzKCkpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1RBVEVfUkVDT0dOSVpFRDtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0Q29udGV4dChmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1JFQ09HTklaRUQ7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJ5RW1pdCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMuaW50ZXJ2YWwsIHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBTVEFURV9CRUdBTjtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gU1RBVEVfRkFJTEVEO1xuXHQgICAgfSxcblx0XG5cdCAgICBmYWlsVGltZW91dDogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0Q29udGV4dChmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZBSUxFRDtcblx0ICAgICAgICB9LCB0aGlzLm9wdGlvbnMuaW50ZXJ2YWwsIHRoaXMpO1xuXHQgICAgICAgIHJldHVybiBTVEFURV9GQUlMRUQ7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xuXHQgICAgfSxcblx0XG5cdCAgICBlbWl0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSBTVEFURV9SRUNPR05JWkVEKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX2lucHV0LnRhcENvdW50ID0gdGhpcy5jb3VudDtcblx0ICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LCB0aGlzLl9pbnB1dCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBTaW1wbGUgd2F5IHRvIGNyZWF0ZSBhIG1hbmFnZXIgd2l0aCBhIGRlZmF1bHQgc2V0IG9mIHJlY29nbml6ZXJzLlxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqL1xuXHRmdW5jdGlvbiBIYW1tZXIoZWxlbWVudCwgb3B0aW9ucykge1xuXHQgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdCAgICBvcHRpb25zLnJlY29nbml6ZXJzID0gaWZVbmRlZmluZWQob3B0aW9ucy5yZWNvZ25pemVycywgSGFtbWVyLmRlZmF1bHRzLnByZXNldCk7XG5cdCAgICByZXR1cm4gbmV3IE1hbmFnZXIoZWxlbWVudCwgb3B0aW9ucyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBAY29uc3Qge3N0cmluZ31cblx0ICovXG5cdEhhbW1lci5WRVJTSU9OID0gJzIuMC43Jztcblx0XG5cdC8qKlxuXHQgKiBkZWZhdWx0IHNldHRpbmdzXG5cdCAqIEBuYW1lc3BhY2Vcblx0ICovXG5cdEhhbW1lci5kZWZhdWx0cyA9IHtcblx0ICAgIC8qKlxuXHQgICAgICogc2V0IGlmIERPTSBldmVudHMgYXJlIGJlaW5nIHRyaWdnZXJlZC5cblx0ICAgICAqIEJ1dCB0aGlzIGlzIHNsb3dlciBhbmQgdW51c2VkIGJ5IHNpbXBsZSBpbXBsZW1lbnRhdGlvbnMsIHNvIGRpc2FibGVkIGJ5IGRlZmF1bHQuXG5cdCAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cblx0ICAgICAqIEBkZWZhdWx0IGZhbHNlXG5cdCAgICAgKi9cblx0ICAgIGRvbUV2ZW50czogZmFsc2UsXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBUaGUgdmFsdWUgZm9yIHRoZSB0b3VjaEFjdGlvbiBwcm9wZXJ0eS9mYWxsYmFjay5cblx0ICAgICAqIFdoZW4gc2V0IHRvIGBjb21wdXRlYCBpdCB3aWxsIG1hZ2ljYWxseSBzZXQgdGhlIGNvcnJlY3QgdmFsdWUgYmFzZWQgb24gdGhlIGFkZGVkIHJlY29nbml6ZXJzLlxuXHQgICAgICogQHR5cGUge1N0cmluZ31cblx0ICAgICAqIEBkZWZhdWx0IGNvbXB1dGVcblx0ICAgICAqL1xuXHQgICAgdG91Y2hBY3Rpb246IFRPVUNIX0FDVElPTl9DT01QVVRFLFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHR5cGUge0Jvb2xlYW59XG5cdCAgICAgKiBAZGVmYXVsdCB0cnVlXG5cdCAgICAgKi9cblx0ICAgIGVuYWJsZTogdHJ1ZSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEVYUEVSSU1FTlRBTCBGRUFUVVJFIC0tIGNhbiBiZSByZW1vdmVkL2NoYW5nZWRcblx0ICAgICAqIENoYW5nZSB0aGUgcGFyZW50IGlucHV0IHRhcmdldCBlbGVtZW50LlxuXHQgICAgICogSWYgTnVsbCwgdGhlbiBpdCBpcyBiZWluZyBzZXQgdGhlIHRvIG1haW4gZWxlbWVudC5cblx0ICAgICAqIEB0eXBlIHtOdWxsfEV2ZW50VGFyZ2V0fVxuXHQgICAgICogQGRlZmF1bHQgbnVsbFxuXHQgICAgICovXG5cdCAgICBpbnB1dFRhcmdldDogbnVsbCxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIGZvcmNlIGFuIGlucHV0IGNsYXNzXG5cdCAgICAgKiBAdHlwZSB7TnVsbHxGdW5jdGlvbn1cblx0ICAgICAqIEBkZWZhdWx0IG51bGxcblx0ICAgICAqL1xuXHQgICAgaW5wdXRDbGFzczogbnVsbCxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIERlZmF1bHQgcmVjb2duaXplciBzZXR1cCB3aGVuIGNhbGxpbmcgYEhhbW1lcigpYFxuXHQgICAgICogV2hlbiBjcmVhdGluZyBhIG5ldyBNYW5hZ2VyIHRoZXNlIHdpbGwgYmUgc2tpcHBlZC5cblx0ICAgICAqIEB0eXBlIHtBcnJheX1cblx0ICAgICAqL1xuXHQgICAgcHJlc2V0OiBbXG5cdCAgICAgICAgLy8gUmVjb2duaXplckNsYXNzLCBvcHRpb25zLCBbcmVjb2duaXplV2l0aCwgLi4uXSwgW3JlcXVpcmVGYWlsdXJlLCAuLi5dXG5cdCAgICAgICAgW1JvdGF0ZVJlY29nbml6ZXIsIHtlbmFibGU6IGZhbHNlfV0sXG5cdCAgICAgICAgW1BpbmNoUmVjb2duaXplciwge2VuYWJsZTogZmFsc2V9LCBbJ3JvdGF0ZSddXSxcblx0ICAgICAgICBbU3dpcGVSZWNvZ25pemVyLCB7ZGlyZWN0aW9uOiBESVJFQ1RJT05fSE9SSVpPTlRBTH1dLFxuXHQgICAgICAgIFtQYW5SZWNvZ25pemVyLCB7ZGlyZWN0aW9uOiBESVJFQ1RJT05fSE9SSVpPTlRBTH0sIFsnc3dpcGUnXV0sXG5cdCAgICAgICAgW1RhcFJlY29nbml6ZXJdLFxuXHQgICAgICAgIFtUYXBSZWNvZ25pemVyLCB7ZXZlbnQ6ICdkb3VibGV0YXAnLCB0YXBzOiAyfSwgWyd0YXAnXV0sXG5cdCAgICAgICAgW1ByZXNzUmVjb2duaXplcl1cblx0ICAgIF0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTb21lIENTUyBwcm9wZXJ0aWVzIGNhbiBiZSB1c2VkIHRvIGltcHJvdmUgdGhlIHdvcmtpbmcgb2YgSGFtbWVyLlxuXHQgICAgICogQWRkIHRoZW0gdG8gdGhpcyBtZXRob2QgYW5kIHRoZXkgd2lsbCBiZSBzZXQgd2hlbiBjcmVhdGluZyBhIG5ldyBNYW5hZ2VyLlxuXHQgICAgICogQG5hbWVzcGFjZVxuXHQgICAgICovXG5cdCAgICBjc3NQcm9wczoge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIERpc2FibGVzIHRleHQgc2VsZWN0aW9uIHRvIGltcHJvdmUgdGhlIGRyYWdnaW5nIGdlc3R1cmUuIE1haW5seSBmb3IgZGVza3RvcCBicm93c2Vycy5cblx0ICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuXHQgICAgICAgICAqIEBkZWZhdWx0ICdub25lJ1xuXHQgICAgICAgICAqL1xuXHQgICAgICAgIHVzZXJTZWxlY3Q6ICdub25lJyxcblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogRGlzYWJsZSB0aGUgV2luZG93cyBQaG9uZSBncmlwcGVycyB3aGVuIHByZXNzaW5nIGFuIGVsZW1lbnQuXG5cdCAgICAgICAgICogQHR5cGUge1N0cmluZ31cblx0ICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcblx0ICAgICAgICAgKi9cblx0ICAgICAgICB0b3VjaFNlbGVjdDogJ25vbmUnLFxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBEaXNhYmxlcyB0aGUgZGVmYXVsdCBjYWxsb3V0IHNob3duIHdoZW4geW91IHRvdWNoIGFuZCBob2xkIGEgdG91Y2ggdGFyZ2V0LlxuXHQgICAgICAgICAqIE9uIGlPUywgd2hlbiB5b3UgdG91Y2ggYW5kIGhvbGQgYSB0b3VjaCB0YXJnZXQgc3VjaCBhcyBhIGxpbmssIFNhZmFyaSBkaXNwbGF5c1xuXHQgICAgICAgICAqIGEgY2FsbG91dCBjb250YWluaW5nIGluZm9ybWF0aW9uIGFib3V0IHRoZSBsaW5rLiBUaGlzIHByb3BlcnR5IGFsbG93cyB5b3UgdG8gZGlzYWJsZSB0aGF0IGNhbGxvdXQuXG5cdCAgICAgICAgICogQHR5cGUge1N0cmluZ31cblx0ICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcblx0ICAgICAgICAgKi9cblx0ICAgICAgICB0b3VjaENhbGxvdXQ6ICdub25lJyxcblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogU3BlY2lmaWVzIHdoZXRoZXIgem9vbWluZyBpcyBlbmFibGVkLiBVc2VkIGJ5IElFMTA+XG5cdCAgICAgICAgICogQHR5cGUge1N0cmluZ31cblx0ICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcblx0ICAgICAgICAgKi9cblx0ICAgICAgICBjb250ZW50Wm9vbWluZzogJ25vbmUnLFxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBTcGVjaWZpZXMgdGhhdCBhbiBlbnRpcmUgZWxlbWVudCBzaG91bGQgYmUgZHJhZ2dhYmxlIGluc3RlYWQgb2YgaXRzIGNvbnRlbnRzLiBNYWlubHkgZm9yIGRlc2t0b3AgYnJvd3NlcnMuXG5cdCAgICAgICAgICogQHR5cGUge1N0cmluZ31cblx0ICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcblx0ICAgICAgICAgKi9cblx0ICAgICAgICB1c2VyRHJhZzogJ25vbmUnLFxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBPdmVycmlkZXMgdGhlIGhpZ2hsaWdodCBjb2xvciBzaG93biB3aGVuIHRoZSB1c2VyIHRhcHMgYSBsaW5rIG9yIGEgSmF2YVNjcmlwdFxuXHQgICAgICAgICAqIGNsaWNrYWJsZSBlbGVtZW50IGluIGlPUy4gVGhpcyBwcm9wZXJ0eSBvYmV5cyB0aGUgYWxwaGEgdmFsdWUsIGlmIHNwZWNpZmllZC5cblx0ICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuXHQgICAgICAgICAqIEBkZWZhdWx0ICdyZ2JhKDAsMCwwLDApJ1xuXHQgICAgICAgICAqL1xuXHQgICAgICAgIHRhcEhpZ2hsaWdodENvbG9yOiAncmdiYSgwLDAsMCwwKSdcblx0ICAgIH1cblx0fTtcblx0XG5cdHZhciBTVE9QID0gMTtcblx0dmFyIEZPUkNFRF9TVE9QID0gMjtcblx0XG5cdC8qKlxuXHQgKiBNYW5hZ2VyXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcblx0ICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICovXG5cdGZ1bmN0aW9uIE1hbmFnZXIoZWxlbWVudCwgb3B0aW9ucykge1xuXHQgICAgdGhpcy5vcHRpb25zID0gYXNzaWduKHt9LCBIYW1tZXIuZGVmYXVsdHMsIG9wdGlvbnMgfHwge30pO1xuXHRcblx0ICAgIHRoaXMub3B0aW9ucy5pbnB1dFRhcmdldCA9IHRoaXMub3B0aW9ucy5pbnB1dFRhcmdldCB8fCBlbGVtZW50O1xuXHRcblx0ICAgIHRoaXMuaGFuZGxlcnMgPSB7fTtcblx0ICAgIHRoaXMuc2Vzc2lvbiA9IHt9O1xuXHQgICAgdGhpcy5yZWNvZ25pemVycyA9IFtdO1xuXHQgICAgdGhpcy5vbGRDc3NQcm9wcyA9IHt9O1xuXHRcblx0ICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG5cdCAgICB0aGlzLmlucHV0ID0gY3JlYXRlSW5wdXRJbnN0YW5jZSh0aGlzKTtcblx0ICAgIHRoaXMudG91Y2hBY3Rpb24gPSBuZXcgVG91Y2hBY3Rpb24odGhpcywgdGhpcy5vcHRpb25zLnRvdWNoQWN0aW9uKTtcblx0XG5cdCAgICB0b2dnbGVDc3NQcm9wcyh0aGlzLCB0cnVlKTtcblx0XG5cdCAgICBlYWNoKHRoaXMub3B0aW9ucy5yZWNvZ25pemVycywgZnVuY3Rpb24oaXRlbSkge1xuXHQgICAgICAgIHZhciByZWNvZ25pemVyID0gdGhpcy5hZGQobmV3IChpdGVtWzBdKShpdGVtWzFdKSk7XG5cdCAgICAgICAgaXRlbVsyXSAmJiByZWNvZ25pemVyLnJlY29nbml6ZVdpdGgoaXRlbVsyXSk7XG5cdCAgICAgICAgaXRlbVszXSAmJiByZWNvZ25pemVyLnJlcXVpcmVGYWlsdXJlKGl0ZW1bM10pO1xuXHQgICAgfSwgdGhpcyk7XG5cdH1cblx0XG5cdE1hbmFnZXIucHJvdG90eXBlID0ge1xuXHQgICAgLyoqXG5cdCAgICAgKiBzZXQgb3B0aW9uc1xuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICAgICAqIEByZXR1cm5zIHtNYW5hZ2VyfVxuXHQgICAgICovXG5cdCAgICBzZXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgICBhc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKTtcblx0XG5cdCAgICAgICAgLy8gT3B0aW9ucyB0aGF0IG5lZWQgYSBsaXR0bGUgbW9yZSBzZXR1cFxuXHQgICAgICAgIGlmIChvcHRpb25zLnRvdWNoQWN0aW9uKSB7XG5cdCAgICAgICAgICAgIHRoaXMudG91Y2hBY3Rpb24udXBkYXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChvcHRpb25zLmlucHV0VGFyZ2V0KSB7XG5cdCAgICAgICAgICAgIC8vIENsZWFuIHVwIGV4aXN0aW5nIGV2ZW50IGxpc3RlbmVycyBhbmQgcmVpbml0aWFsaXplXG5cdCAgICAgICAgICAgIHRoaXMuaW5wdXQuZGVzdHJveSgpO1xuXHQgICAgICAgICAgICB0aGlzLmlucHV0LnRhcmdldCA9IG9wdGlvbnMuaW5wdXRUYXJnZXQ7XG5cdCAgICAgICAgICAgIHRoaXMuaW5wdXQuaW5pdCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBzdG9wIHJlY29nbml6aW5nIGZvciB0aGlzIHNlc3Npb24uXG5cdCAgICAgKiBUaGlzIHNlc3Npb24gd2lsbCBiZSBkaXNjYXJkZWQsIHdoZW4gYSBuZXcgW2lucHV0XXN0YXJ0IGV2ZW50IGlzIGZpcmVkLlxuXHQgICAgICogV2hlbiBmb3JjZWQsIHRoZSByZWNvZ25pemVyIGN5Y2xlIGlzIHN0b3BwZWQgaW1tZWRpYXRlbHkuXG5cdCAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtmb3JjZV1cblx0ICAgICAqL1xuXHQgICAgc3RvcDogZnVuY3Rpb24oZm9yY2UpIHtcblx0ICAgICAgICB0aGlzLnNlc3Npb24uc3RvcHBlZCA9IGZvcmNlID8gRk9SQ0VEX1NUT1AgOiBTVE9QO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIHJ1biB0aGUgcmVjb2duaXplcnMhXG5cdCAgICAgKiBjYWxsZWQgYnkgdGhlIGlucHV0SGFuZGxlciBmdW5jdGlvbiBvbiBldmVyeSBtb3ZlbWVudCBvZiB0aGUgcG9pbnRlcnMgKHRvdWNoZXMpXG5cdCAgICAgKiBpdCB3YWxrcyB0aHJvdWdoIGFsbCB0aGUgcmVjb2duaXplcnMgYW5kIHRyaWVzIHRvIGRldGVjdCB0aGUgZ2VzdHVyZSB0aGF0IGlzIGJlaW5nIG1hZGVcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dERhdGFcblx0ICAgICAqL1xuXHQgICAgcmVjb2duaXplOiBmdW5jdGlvbihpbnB1dERhdGEpIHtcblx0ICAgICAgICB2YXIgc2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbjtcblx0ICAgICAgICBpZiAoc2Vzc2lvbi5zdG9wcGVkKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIHJ1biB0aGUgdG91Y2gtYWN0aW9uIHBvbHlmaWxsXG5cdCAgICAgICAgdGhpcy50b3VjaEFjdGlvbi5wcmV2ZW50RGVmYXVsdHMoaW5wdXREYXRhKTtcblx0XG5cdCAgICAgICAgdmFyIHJlY29nbml6ZXI7XG5cdCAgICAgICAgdmFyIHJlY29nbml6ZXJzID0gdGhpcy5yZWNvZ25pemVycztcblx0XG5cdCAgICAgICAgLy8gdGhpcyBob2xkcyB0aGUgcmVjb2duaXplciB0aGF0IGlzIGJlaW5nIHJlY29nbml6ZWQuXG5cdCAgICAgICAgLy8gc28gdGhlIHJlY29nbml6ZXIncyBzdGF0ZSBuZWVkcyB0byBiZSBCRUdBTiwgQ0hBTkdFRCwgRU5ERUQgb3IgUkVDT0dOSVpFRFxuXHQgICAgICAgIC8vIGlmIG5vIHJlY29nbml6ZXIgaXMgZGV0ZWN0aW5nIGEgdGhpbmcsIGl0IGlzIHNldCB0byBgbnVsbGBcblx0ICAgICAgICB2YXIgY3VyUmVjb2duaXplciA9IHNlc3Npb24uY3VyUmVjb2duaXplcjtcblx0XG5cdCAgICAgICAgLy8gcmVzZXQgd2hlbiB0aGUgbGFzdCByZWNvZ25pemVyIGlzIHJlY29nbml6ZWRcblx0ICAgICAgICAvLyBvciB3aGVuIHdlJ3JlIGluIGEgbmV3IHNlc3Npb25cblx0ICAgICAgICBpZiAoIWN1clJlY29nbml6ZXIgfHwgKGN1clJlY29nbml6ZXIgJiYgY3VyUmVjb2duaXplci5zdGF0ZSAmIFNUQVRFX1JFQ09HTklaRUQpKSB7XG5cdCAgICAgICAgICAgIGN1clJlY29nbml6ZXIgPSBzZXNzaW9uLmN1clJlY29nbml6ZXIgPSBudWxsO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIGkgPSAwO1xuXHQgICAgICAgIHdoaWxlIChpIDwgcmVjb2duaXplcnMubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIHJlY29nbml6ZXIgPSByZWNvZ25pemVyc1tpXTtcblx0XG5cdCAgICAgICAgICAgIC8vIGZpbmQgb3V0IGlmIHdlIGFyZSBhbGxvd2VkIHRyeSB0byByZWNvZ25pemUgdGhlIGlucHV0IGZvciB0aGlzIG9uZS5cblx0ICAgICAgICAgICAgLy8gMS4gICBhbGxvdyBpZiB0aGUgc2Vzc2lvbiBpcyBOT1QgZm9yY2VkIHN0b3BwZWQgKHNlZSB0aGUgLnN0b3AoKSBtZXRob2QpXG5cdCAgICAgICAgICAgIC8vIDIuICAgYWxsb3cgaWYgd2Ugc3RpbGwgaGF2ZW4ndCByZWNvZ25pemVkIGEgZ2VzdHVyZSBpbiB0aGlzIHNlc3Npb24sIG9yIHRoZSB0aGlzIHJlY29nbml6ZXIgaXMgdGhlIG9uZVxuXHQgICAgICAgICAgICAvLyAgICAgIHRoYXQgaXMgYmVpbmcgcmVjb2duaXplZC5cblx0ICAgICAgICAgICAgLy8gMy4gICBhbGxvdyBpZiB0aGUgcmVjb2duaXplciBpcyBhbGxvd2VkIHRvIHJ1biBzaW11bHRhbmVvdXMgd2l0aCB0aGUgY3VycmVudCByZWNvZ25pemVkIHJlY29nbml6ZXIuXG5cdCAgICAgICAgICAgIC8vICAgICAgdGhpcyBjYW4gYmUgc2V0dXAgd2l0aCB0aGUgYHJlY29nbml6ZVdpdGgoKWAgbWV0aG9kIG9uIHRoZSByZWNvZ25pemVyLlxuXHQgICAgICAgICAgICBpZiAoc2Vzc2lvbi5zdG9wcGVkICE9PSBGT1JDRURfU1RPUCAmJiAoIC8vIDFcblx0ICAgICAgICAgICAgICAgICAgICAhY3VyUmVjb2duaXplciB8fCByZWNvZ25pemVyID09IGN1clJlY29nbml6ZXIgfHwgLy8gMlxuXHQgICAgICAgICAgICAgICAgICAgIHJlY29nbml6ZXIuY2FuUmVjb2duaXplV2l0aChjdXJSZWNvZ25pemVyKSkpIHsgLy8gM1xuXHQgICAgICAgICAgICAgICAgcmVjb2duaXplci5yZWNvZ25pemUoaW5wdXREYXRhKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHJlY29nbml6ZXIucmVzZXQoKTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgLy8gaWYgdGhlIHJlY29nbml6ZXIgaGFzIGJlZW4gcmVjb2duaXppbmcgdGhlIGlucHV0IGFzIGEgdmFsaWQgZ2VzdHVyZSwgd2Ugd2FudCB0byBzdG9yZSB0aGlzIG9uZSBhcyB0aGVcblx0ICAgICAgICAgICAgLy8gY3VycmVudCBhY3RpdmUgcmVjb2duaXplci4gYnV0IG9ubHkgaWYgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIGFuIGFjdGl2ZSByZWNvZ25pemVyXG5cdCAgICAgICAgICAgIGlmICghY3VyUmVjb2duaXplciAmJiByZWNvZ25pemVyLnN0YXRlICYgKFNUQVRFX0JFR0FOIHwgU1RBVEVfQ0hBTkdFRCB8IFNUQVRFX0VOREVEKSkge1xuXHQgICAgICAgICAgICAgICAgY3VyUmVjb2duaXplciA9IHNlc3Npb24uY3VyUmVjb2duaXplciA9IHJlY29nbml6ZXI7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaSsrO1xuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBnZXQgYSByZWNvZ25pemVyIGJ5IGl0cyBldmVudCBuYW1lLlxuXHQgICAgICogQHBhcmFtIHtSZWNvZ25pemVyfFN0cmluZ30gcmVjb2duaXplclxuXHQgICAgICogQHJldHVybnMge1JlY29nbml6ZXJ8TnVsbH1cblx0ICAgICAqL1xuXHQgICAgZ2V0OiBmdW5jdGlvbihyZWNvZ25pemVyKSB7XG5cdCAgICAgICAgaWYgKHJlY29nbml6ZXIgaW5zdGFuY2VvZiBSZWNvZ25pemVyKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZWNvZ25pemVyO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIHJlY29nbml6ZXJzID0gdGhpcy5yZWNvZ25pemVycztcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlY29nbml6ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGlmIChyZWNvZ25pemVyc1tpXS5vcHRpb25zLmV2ZW50ID09IHJlY29nbml6ZXIpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiByZWNvZ25pemVyc1tpXTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gbnVsbDtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBhZGQgYSByZWNvZ25pemVyIHRvIHRoZSBtYW5hZ2VyXG5cdCAgICAgKiBleGlzdGluZyByZWNvZ25pemVycyB3aXRoIHRoZSBzYW1lIGV2ZW50IG5hbWUgd2lsbCBiZSByZW1vdmVkXG5cdCAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IHJlY29nbml6ZXJcblx0ICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfE1hbmFnZXJ9XG5cdCAgICAgKi9cblx0ICAgIGFkZDogZnVuY3Rpb24ocmVjb2duaXplcikge1xuXHQgICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhyZWNvZ25pemVyLCAnYWRkJywgdGhpcykpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyByZW1vdmUgZXhpc3Rpbmdcblx0ICAgICAgICB2YXIgZXhpc3RpbmcgPSB0aGlzLmdldChyZWNvZ25pemVyLm9wdGlvbnMuZXZlbnQpO1xuXHQgICAgICAgIGlmIChleGlzdGluZykge1xuXHQgICAgICAgICAgICB0aGlzLnJlbW92ZShleGlzdGluZyk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLnJlY29nbml6ZXJzLnB1c2gocmVjb2duaXplcik7XG5cdCAgICAgICAgcmVjb2duaXplci5tYW5hZ2VyID0gdGhpcztcblx0XG5cdCAgICAgICAgdGhpcy50b3VjaEFjdGlvbi51cGRhdGUoKTtcblx0ICAgICAgICByZXR1cm4gcmVjb2duaXplcjtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiByZW1vdmUgYSByZWNvZ25pemVyIGJ5IG5hbWUgb3IgaW5zdGFuY2Vcblx0ICAgICAqIEBwYXJhbSB7UmVjb2duaXplcnxTdHJpbmd9IHJlY29nbml6ZXJcblx0ICAgICAqIEByZXR1cm5zIHtNYW5hZ2VyfVxuXHQgICAgICovXG5cdCAgICByZW1vdmU6IGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcblx0ICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcocmVjb2duaXplciwgJ3JlbW92ZScsIHRoaXMpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmVjb2duaXplciA9IHRoaXMuZ2V0KHJlY29nbml6ZXIpO1xuXHRcblx0ICAgICAgICAvLyBsZXQncyBtYWtlIHN1cmUgdGhpcyByZWNvZ25pemVyIGV4aXN0c1xuXHQgICAgICAgIGlmIChyZWNvZ25pemVyKSB7XG5cdCAgICAgICAgICAgIHZhciByZWNvZ25pemVycyA9IHRoaXMucmVjb2duaXplcnM7XG5cdCAgICAgICAgICAgIHZhciBpbmRleCA9IGluQXJyYXkocmVjb2duaXplcnMsIHJlY29nbml6ZXIpO1xuXHRcblx0ICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuXHQgICAgICAgICAgICAgICAgcmVjb2duaXplcnMuc3BsaWNlKGluZGV4LCAxKTtcblx0ICAgICAgICAgICAgICAgIHRoaXMudG91Y2hBY3Rpb24udXBkYXRlKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIGJpbmQgZXZlbnRcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudHNcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcblx0ICAgICAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IHRoaXNcblx0ICAgICAqL1xuXHQgICAgb246IGZ1bmN0aW9uKGV2ZW50cywgaGFuZGxlcikge1xuXHQgICAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChoYW5kbGVyID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycztcblx0ICAgICAgICBlYWNoKHNwbGl0U3RyKGV2ZW50cyksIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIGhhbmRsZXJzW2V2ZW50XSA9IGhhbmRsZXJzW2V2ZW50XSB8fCBbXTtcblx0ICAgICAgICAgICAgaGFuZGxlcnNbZXZlbnRdLnB1c2goaGFuZGxlcik7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogdW5iaW5kIGV2ZW50LCBsZWF2ZSBlbWl0IGJsYW5rIHRvIHJlbW92ZSBhbGwgaGFuZGxlcnNcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudHNcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtoYW5kbGVyXVxuXHQgICAgICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gdGhpc1xuXHQgICAgICovXG5cdCAgICBvZmY6IGZ1bmN0aW9uKGV2ZW50cywgaGFuZGxlcikge1xuXHQgICAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzO1xuXHQgICAgICAgIGVhY2goc3BsaXRTdHIoZXZlbnRzKSwgZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgICAgICAgaWYgKCFoYW5kbGVyKSB7XG5cdCAgICAgICAgICAgICAgICBkZWxldGUgaGFuZGxlcnNbZXZlbnRdO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgaGFuZGxlcnNbZXZlbnRdICYmIGhhbmRsZXJzW2V2ZW50XS5zcGxpY2UoaW5BcnJheShoYW5kbGVyc1tldmVudF0sIGhhbmRsZXIpLCAxKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIGVtaXQgZXZlbnQgdG8gdGhlIGxpc3RlbmVyc1xuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuXHQgICAgICovXG5cdCAgICBlbWl0OiBmdW5jdGlvbihldmVudCwgZGF0YSkge1xuXHQgICAgICAgIC8vIHdlIGFsc28gd2FudCB0byB0cmlnZ2VyIGRvbSBldmVudHNcblx0ICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRvbUV2ZW50cykge1xuXHQgICAgICAgICAgICB0cmlnZ2VyRG9tRXZlbnQoZXZlbnQsIGRhdGEpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gbm8gaGFuZGxlcnMsIHNvIHNraXAgaXQgYWxsXG5cdCAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVyc1tldmVudF0gJiYgdGhpcy5oYW5kbGVyc1tldmVudF0uc2xpY2UoKTtcblx0ICAgICAgICBpZiAoIWhhbmRsZXJzIHx8ICFoYW5kbGVycy5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgZGF0YS50eXBlID0gZXZlbnQ7XG5cdCAgICAgICAgZGF0YS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICBkYXRhLnNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgdmFyIGkgPSAwO1xuXHQgICAgICAgIHdoaWxlIChpIDwgaGFuZGxlcnMubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIGhhbmRsZXJzW2ldKGRhdGEpO1xuXHQgICAgICAgICAgICBpKys7XG5cdCAgICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIGRlc3Ryb3kgdGhlIG1hbmFnZXIgYW5kIHVuYmluZHMgYWxsIGV2ZW50c1xuXHQgICAgICogaXQgZG9lc24ndCB1bmJpbmQgZG9tIGV2ZW50cywgdGhhdCBpcyB0aGUgdXNlciBvd24gcmVzcG9uc2liaWxpdHlcblx0ICAgICAqL1xuXHQgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdGhpcy5lbGVtZW50ICYmIHRvZ2dsZUNzc1Byb3BzKHRoaXMsIGZhbHNlKTtcblx0XG5cdCAgICAgICAgdGhpcy5oYW5kbGVycyA9IHt9O1xuXHQgICAgICAgIHRoaXMuc2Vzc2lvbiA9IHt9O1xuXHQgICAgICAgIHRoaXMuaW5wdXQuZGVzdHJveSgpO1xuXHQgICAgICAgIHRoaXMuZWxlbWVudCA9IG51bGw7XG5cdCAgICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogYWRkL3JlbW92ZSB0aGUgY3NzIHByb3BlcnRpZXMgYXMgZGVmaW5lZCBpbiBtYW5hZ2VyLm9wdGlvbnMuY3NzUHJvcHNcblx0ICogQHBhcmFtIHtNYW5hZ2VyfSBtYW5hZ2VyXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gYWRkXG5cdCAqL1xuXHRmdW5jdGlvbiB0b2dnbGVDc3NQcm9wcyhtYW5hZ2VyLCBhZGQpIHtcblx0ICAgIHZhciBlbGVtZW50ID0gbWFuYWdlci5lbGVtZW50O1xuXHQgICAgaWYgKCFlbGVtZW50LnN0eWxlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIHByb3A7XG5cdCAgICBlYWNoKG1hbmFnZXIub3B0aW9ucy5jc3NQcm9wcywgZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcblx0ICAgICAgICBwcm9wID0gcHJlZml4ZWQoZWxlbWVudC5zdHlsZSwgbmFtZSk7XG5cdCAgICAgICAgaWYgKGFkZCkge1xuXHQgICAgICAgICAgICBtYW5hZ2VyLm9sZENzc1Byb3BzW3Byb3BdID0gZWxlbWVudC5zdHlsZVtwcm9wXTtcblx0ICAgICAgICAgICAgZWxlbWVudC5zdHlsZVtwcm9wXSA9IHZhbHVlO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGVsZW1lbnQuc3R5bGVbcHJvcF0gPSBtYW5hZ2VyLm9sZENzc1Byb3BzW3Byb3BdIHx8ICcnO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHQgICAgaWYgKCFhZGQpIHtcblx0ICAgICAgICBtYW5hZ2VyLm9sZENzc1Byb3BzID0ge307XG5cdCAgICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiB0cmlnZ2VyIGRvbSBldmVudFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICogQHBhcmFtIHtPYmplY3R9IGRhdGFcblx0ICovXG5cdGZ1bmN0aW9uIHRyaWdnZXJEb21FdmVudChldmVudCwgZGF0YSkge1xuXHQgICAgdmFyIGdlc3R1cmVFdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuXHQgICAgZ2VzdHVyZUV2ZW50LmluaXRFdmVudChldmVudCwgdHJ1ZSwgdHJ1ZSk7XG5cdCAgICBnZXN0dXJlRXZlbnQuZ2VzdHVyZSA9IGRhdGE7XG5cdCAgICBkYXRhLnRhcmdldC5kaXNwYXRjaEV2ZW50KGdlc3R1cmVFdmVudCk7XG5cdH1cblx0XG5cdGFzc2lnbihIYW1tZXIsIHtcblx0ICAgIElOUFVUX1NUQVJUOiBJTlBVVF9TVEFSVCxcblx0ICAgIElOUFVUX01PVkU6IElOUFVUX01PVkUsXG5cdCAgICBJTlBVVF9FTkQ6IElOUFVUX0VORCxcblx0ICAgIElOUFVUX0NBTkNFTDogSU5QVVRfQ0FOQ0VMLFxuXHRcblx0ICAgIFNUQVRFX1BPU1NJQkxFOiBTVEFURV9QT1NTSUJMRSxcblx0ICAgIFNUQVRFX0JFR0FOOiBTVEFURV9CRUdBTixcblx0ICAgIFNUQVRFX0NIQU5HRUQ6IFNUQVRFX0NIQU5HRUQsXG5cdCAgICBTVEFURV9FTkRFRDogU1RBVEVfRU5ERUQsXG5cdCAgICBTVEFURV9SRUNPR05JWkVEOiBTVEFURV9SRUNPR05JWkVELFxuXHQgICAgU1RBVEVfQ0FOQ0VMTEVEOiBTVEFURV9DQU5DRUxMRUQsXG5cdCAgICBTVEFURV9GQUlMRUQ6IFNUQVRFX0ZBSUxFRCxcblx0XG5cdCAgICBESVJFQ1RJT05fTk9ORTogRElSRUNUSU9OX05PTkUsXG5cdCAgICBESVJFQ1RJT05fTEVGVDogRElSRUNUSU9OX0xFRlQsXG5cdCAgICBESVJFQ1RJT05fUklHSFQ6IERJUkVDVElPTl9SSUdIVCxcblx0ICAgIERJUkVDVElPTl9VUDogRElSRUNUSU9OX1VQLFxuXHQgICAgRElSRUNUSU9OX0RPV046IERJUkVDVElPTl9ET1dOLFxuXHQgICAgRElSRUNUSU9OX0hPUklaT05UQUw6IERJUkVDVElPTl9IT1JJWk9OVEFMLFxuXHQgICAgRElSRUNUSU9OX1ZFUlRJQ0FMOiBESVJFQ1RJT05fVkVSVElDQUwsXG5cdCAgICBESVJFQ1RJT05fQUxMOiBESVJFQ1RJT05fQUxMLFxuXHRcblx0ICAgIE1hbmFnZXI6IE1hbmFnZXIsXG5cdCAgICBJbnB1dDogSW5wdXQsXG5cdCAgICBUb3VjaEFjdGlvbjogVG91Y2hBY3Rpb24sXG5cdFxuXHQgICAgVG91Y2hJbnB1dDogVG91Y2hJbnB1dCxcblx0ICAgIE1vdXNlSW5wdXQ6IE1vdXNlSW5wdXQsXG5cdCAgICBQb2ludGVyRXZlbnRJbnB1dDogUG9pbnRlckV2ZW50SW5wdXQsXG5cdCAgICBUb3VjaE1vdXNlSW5wdXQ6IFRvdWNoTW91c2VJbnB1dCxcblx0ICAgIFNpbmdsZVRvdWNoSW5wdXQ6IFNpbmdsZVRvdWNoSW5wdXQsXG5cdFxuXHQgICAgUmVjb2duaXplcjogUmVjb2duaXplcixcblx0ICAgIEF0dHJSZWNvZ25pemVyOiBBdHRyUmVjb2duaXplcixcblx0ICAgIFRhcDogVGFwUmVjb2duaXplcixcblx0ICAgIFBhbjogUGFuUmVjb2duaXplcixcblx0ICAgIFN3aXBlOiBTd2lwZVJlY29nbml6ZXIsXG5cdCAgICBQaW5jaDogUGluY2hSZWNvZ25pemVyLFxuXHQgICAgUm90YXRlOiBSb3RhdGVSZWNvZ25pemVyLFxuXHQgICAgUHJlc3M6IFByZXNzUmVjb2duaXplcixcblx0XG5cdCAgICBvbjogYWRkRXZlbnRMaXN0ZW5lcnMsXG5cdCAgICBvZmY6IHJlbW92ZUV2ZW50TGlzdGVuZXJzLFxuXHQgICAgZWFjaDogZWFjaCxcblx0ICAgIG1lcmdlOiBtZXJnZSxcblx0ICAgIGV4dGVuZDogZXh0ZW5kLFxuXHQgICAgYXNzaWduOiBhc3NpZ24sXG5cdCAgICBpbmhlcml0OiBpbmhlcml0LFxuXHQgICAgYmluZEZuOiBiaW5kRm4sXG5cdCAgICBwcmVmaXhlZDogcHJlZml4ZWRcblx0fSk7XG5cdFxuXHQvLyB0aGlzIHByZXZlbnRzIGVycm9ycyB3aGVuIEhhbW1lciBpcyBsb2FkZWQgaW4gdGhlIHByZXNlbmNlIG9mIGFuIEFNRFxuXHQvLyAgc3R5bGUgbG9hZGVyIGJ1dCBieSBzY3JpcHQgdGFnLCBub3QgYnkgdGhlIGxvYWRlci5cblx0dmFyIGZyZWVHbG9iYWwgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9KSk7IC8vIGpzaGludCBpZ25vcmU6bGluZVxuXHRmcmVlR2xvYmFsLkhhbW1lciA9IEhhbW1lcjtcblx0XG5cdGlmICh0cnVlKSB7XG5cdCAgICAhKF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIEhhbW1lcjtcblx0ICAgIH0uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fLCBleHBvcnRzLCBtb2R1bGUpLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHQgICAgbW9kdWxlLmV4cG9ydHMgPSBIYW1tZXI7XG5cdH0gZWxzZSB7XG5cdCAgICB3aW5kb3dbZXhwb3J0TmFtZV0gPSBIYW1tZXI7XG5cdH1cblx0XG5cdH0pKHdpbmRvdywgZG9jdW1lbnQsICdIYW1tZXInKTtcblxuXG4vKioqLyB9LFxuLyogMTMxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsndXNlIHN0cmljdCc7XG5cdFxuXHQoZnVuY3Rpb24gKGZhY3RvcnkpIHtcblx0ICBpZiAodHJ1ZSkge1xuXHQgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuXHQgICAgIShfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fID0gW10sIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyA9IChmYWN0b3J5KSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSAodHlwZW9mIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyA9PT0gJ2Z1bmN0aW9uJyA/IChfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXykpIDogX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG5cdCAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXRcblx0ICAgIC8vIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzLFxuXHQgICAgLy8gbGlrZSBOb2RlLlxuXHQgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG5cdCAgICB3aW5kb3cucHJvcGFnYXRpbmcgPSBmYWN0b3J5KCk7XG5cdCAgfVxuXHR9KGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgX2ZpcnN0VGFyZ2V0ID0gbnVsbDsgLy8gc2luZ2xldG9uLCB3aWxsIGNvbnRhaW4gdGhlIHRhcmdldCBlbGVtZW50IHdoZXJlIHRoZSB0b3VjaCBldmVudCBzdGFydGVkXG5cdFxuXHQgIC8qKlxuXHQgICAqIEV4dGVuZCBhbiBIYW1tZXIuanMgaW5zdGFuY2Ugd2l0aCBldmVudCBwcm9wYWdhdGlvbi5cblx0ICAgKlxuXHQgICAqIEZlYXR1cmVzOlxuXHQgICAqIC0gRXZlbnRzIGVtaXR0ZWQgYnkgaGFtbWVyIHdpbGwgcHJvcGFnYXRlIGluIG9yZGVyIGZyb20gY2hpbGQgdG8gcGFyZW50XG5cdCAgICogICBlbGVtZW50cy5cblx0ICAgKiAtIEV2ZW50cyBhcmUgZXh0ZW5kZWQgd2l0aCBhIGZ1bmN0aW9uIGBldmVudC5zdG9wUHJvcGFnYXRpb24oKWAgdG8gc3RvcFxuXHQgICAqICAgcHJvcGFnYXRpb24gdG8gcGFyZW50IGVsZW1lbnRzLlxuXHQgICAqIC0gQW4gb3B0aW9uIGBwcmV2ZW50RGVmYXVsdGAgdG8gc3RvcCBhbGwgZGVmYXVsdCBicm93c2VyIGJlaGF2aW9yLlxuXHQgICAqXG5cdCAgICogVXNhZ2U6XG5cdCAgICogICB2YXIgaGFtbWVyID0gcHJvcGFnYXRpbmdIYW1tZXIobmV3IEhhbW1lcihlbGVtZW50KSk7XG5cdCAgICogICB2YXIgaGFtbWVyID0gcHJvcGFnYXRpbmdIYW1tZXIobmV3IEhhbW1lcihlbGVtZW50KSwge3ByZXZlbnREZWZhdWx0OiB0cnVlfSk7XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0hhbW1lci5NYW5hZ2VyfSBoYW1tZXIgICBBbiBoYW1tZXIgaW5zdGFuY2UuXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAgICAgICAgQXZhaWxhYmxlIG9wdGlvbnM6XG5cdCAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLSBgcHJldmVudERlZmF1bHQ6IHRydWUgfCBmYWxzZSB8ICdtb3VzZScgfCAndG91Y2gnIHwgJ3BlbidgLlxuXHQgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRW5mb3JjZSBwcmV2ZW50aW5nIHRoZSBkZWZhdWx0IGJyb3dzZXIgYmVoYXZpb3IuXG5cdCAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYW5ub3QgYmUgc2V0IHRvIGBmYWxzZWAuXG5cdCAgICogQHJldHVybiB7SGFtbWVyLk1hbmFnZXJ9IFJldHVybnMgdGhlIHNhbWUgaGFtbWVyIGluc3RhbmNlIHdpdGggZXh0ZW5kZWRcblx0ICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25hbGl0eVxuXHQgICAqL1xuXHQgIHJldHVybiBmdW5jdGlvbiBwcm9wYWdhdGluZyhoYW1tZXIsIG9wdGlvbnMpIHtcblx0ICAgIHZhciBfb3B0aW9ucyA9IG9wdGlvbnMgfHwge1xuXHQgICAgICBwcmV2ZW50RGVmYXVsdDogZmFsc2Vcblx0ICAgIH07XG5cdFxuXHQgICAgaWYgKGhhbW1lci5NYW5hZ2VyKSB7XG5cdCAgICAgIC8vIFRoaXMgbG9va3MgbGlrZSB0aGUgSGFtbWVyIGNvbnN0cnVjdG9yLlxuXHQgICAgICAvLyBPdmVybG9hZCB0aGUgY29uc3RydWN0b3JzIHdpdGggb3VyIG93bi5cblx0ICAgICAgdmFyIEhhbW1lciA9IGhhbW1lcjtcblx0XG5cdCAgICAgIHZhciBQcm9wYWdhdGluZ0hhbW1lciA9IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdGlvbnMpIHtcblx0ICAgICAgICB2YXIgbyA9IE9iamVjdC5jcmVhdGUoX29wdGlvbnMpO1xuXHQgICAgICAgIGlmIChvcHRpb25zKSBIYW1tZXIuYXNzaWduKG8sIG9wdGlvbnMpO1xuXHQgICAgICAgIHJldHVybiBwcm9wYWdhdGluZyhuZXcgSGFtbWVyKGVsZW1lbnQsIG8pLCBvKTtcblx0ICAgICAgfTtcblx0ICAgICAgSGFtbWVyLmFzc2lnbihQcm9wYWdhdGluZ0hhbW1lciwgSGFtbWVyKTtcblx0XG5cdCAgICAgIFByb3BhZ2F0aW5nSGFtbWVyLk1hbmFnZXIgPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykge1xuXHQgICAgICAgIHZhciBvID0gT2JqZWN0LmNyZWF0ZShfb3B0aW9ucyk7XG5cdCAgICAgICAgaWYgKG9wdGlvbnMpIEhhbW1lci5hc3NpZ24obywgb3B0aW9ucyk7XG5cdCAgICAgICAgcmV0dXJuIHByb3BhZ2F0aW5nKG5ldyBIYW1tZXIuTWFuYWdlcihlbGVtZW50LCBvKSwgbyk7XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICByZXR1cm4gUHJvcGFnYXRpbmdIYW1tZXI7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gY3JlYXRlIGEgd3JhcHBlciBvYmplY3Qgd2hpY2ggd2lsbCBvdmVycmlkZSB0aGUgZnVuY3Rpb25zXG5cdCAgICAvLyBgb25gLCBgb2ZmYCwgYGRlc3Ryb3lgLCBhbmQgYGVtaXRgIG9mIHRoZSBoYW1tZXIgaW5zdGFuY2Vcblx0ICAgIHZhciB3cmFwcGVyID0gT2JqZWN0LmNyZWF0ZShoYW1tZXIpO1xuXHRcblx0ICAgIC8vIGF0dGFjaCB0byBET00gZWxlbWVudFxuXHQgICAgdmFyIGVsZW1lbnQgPSBoYW1tZXIuZWxlbWVudDtcblx0XG5cdCAgICBpZighZWxlbWVudC5oYW1tZXIpIGVsZW1lbnQuaGFtbWVyID0gW107XG5cdCAgICBlbGVtZW50LmhhbW1lci5wdXNoKHdyYXBwZXIpO1xuXHRcblx0ICAgIC8vIHJlZ2lzdGVyIGFuIGV2ZW50IHRvIGNhdGNoIHRoZSBzdGFydCBvZiBhIGdlc3R1cmUgYW5kIHN0b3JlIHRoZVxuXHQgICAgLy8gdGFyZ2V0IGluIGEgc2luZ2xldG9uXG5cdCAgICBoYW1tZXIub24oJ2hhbW1lci5pbnB1dCcsIGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgICBpZiAoX29wdGlvbnMucHJldmVudERlZmF1bHQgPT09IHRydWUgfHwgKF9vcHRpb25zLnByZXZlbnREZWZhdWx0ID09PSBldmVudC5wb2ludGVyVHlwZSkpIHtcblx0ICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChldmVudC5pc0ZpcnN0KSB7XG5cdCAgICAgICAgX2ZpcnN0VGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICAvKiogQHR5cGUge09iamVjdC48U3RyaW5nLCBBcnJheS48ZnVuY3Rpb24+Pn0gKi9cblx0ICAgIHdyYXBwZXIuX2hhbmRsZXJzID0ge307XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSZWdpc3RlciBhIGhhbmRsZXIgZm9yIG9uZSBvciBtdWx0aXBsZSBldmVudHNcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudHMgICAgQSBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIHdpdGggZXZlbnRzXG5cdCAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBoYW5kbGVyIEEgY2FsbGJhY2sgZnVuY3Rpb24sIGNhbGxlZCBhcyBoYW5kbGVyKGV2ZW50KVxuXHQgICAgICogQHJldHVybnMge0hhbW1lci5NYW5hZ2VyfSBSZXR1cm5zIHRoZSBoYW1tZXIgaW5zdGFuY2Vcblx0ICAgICAqL1xuXHQgICAgd3JhcHBlci5vbiA9IGZ1bmN0aW9uIChldmVudHMsIGhhbmRsZXIpIHtcblx0ICAgICAgLy8gcmVnaXN0ZXIgdGhlIGhhbmRsZXJcblx0ICAgICAgc3BsaXQoZXZlbnRzKS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgICAgIHZhciBfaGFuZGxlcnMgPSB3cmFwcGVyLl9oYW5kbGVyc1tldmVudF07XG5cdCAgICAgICAgaWYgKCFfaGFuZGxlcnMpIHtcblx0ICAgICAgICAgIHdyYXBwZXIuX2hhbmRsZXJzW2V2ZW50XSA9IF9oYW5kbGVycyA9IFtdO1xuXHRcblx0ICAgICAgICAgIC8vIHJlZ2lzdGVyIHRoZSBzdGF0aWMsIHByb3BhZ2F0ZWQgaGFuZGxlclxuXHQgICAgICAgICAgaGFtbWVyLm9uKGV2ZW50LCBwcm9wYWdhdGVkSGFuZGxlcik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIF9oYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIHJldHVybiB3cmFwcGVyO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFVucmVnaXN0ZXIgYSBoYW5kbGVyIGZvciBvbmUgb3IgbXVsdGlwbGUgZXZlbnRzXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRzICAgICAgQSBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIHdpdGggZXZlbnRzXG5cdCAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbaGFuZGxlcl0gT3B0aW9uYWwuIFRoZSByZWdpc3RlcmVkIGhhbmRsZXIuIElmIG5vdFxuXHQgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVkLCBhbGwgaGFuZGxlcnMgZm9yIGdpdmVuIGV2ZW50c1xuXHQgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZSByZW1vdmVkLlxuXHQgICAgICogQHJldHVybnMge0hhbW1lci5NYW5hZ2VyfSAgIFJldHVybnMgdGhlIGhhbW1lciBpbnN0YW5jZVxuXHQgICAgICovXG5cdCAgICB3cmFwcGVyLm9mZiA9IGZ1bmN0aW9uIChldmVudHMsIGhhbmRsZXIpIHtcblx0ICAgICAgLy8gdW5yZWdpc3RlciB0aGUgaGFuZGxlclxuXHQgICAgICBzcGxpdChldmVudHMpLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgdmFyIF9oYW5kbGVycyA9IHdyYXBwZXIuX2hhbmRsZXJzW2V2ZW50XTtcblx0ICAgICAgICBpZiAoX2hhbmRsZXJzKSB7XG5cdCAgICAgICAgICBfaGFuZGxlcnMgPSBoYW5kbGVyID8gX2hhbmRsZXJzLmZpbHRlcihmdW5jdGlvbiAoaCkge1xuXHQgICAgICAgICAgICByZXR1cm4gaCAhPT0gaGFuZGxlcjtcblx0ICAgICAgICAgIH0pIDogW107XG5cdFxuXHQgICAgICAgICAgaWYgKF9oYW5kbGVycy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHdyYXBwZXIuX2hhbmRsZXJzW2V2ZW50XSA9IF9oYW5kbGVycztcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAvLyByZW1vdmUgc3RhdGljLCBwcm9wYWdhdGVkIGhhbmRsZXJcblx0ICAgICAgICAgICAgaGFtbWVyLm9mZihldmVudCwgcHJvcGFnYXRlZEhhbmRsZXIpO1xuXHQgICAgICAgICAgICBkZWxldGUgd3JhcHBlci5faGFuZGxlcnNbZXZlbnRdO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICByZXR1cm4gd3JhcHBlcjtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBFbWl0IHRvIHRoZSBldmVudCBsaXN0ZW5lcnNcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGVcblx0ICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG5cdCAgICAgKi9cblx0ICAgIHdyYXBwZXIuZW1pdCA9IGZ1bmN0aW9uKGV2ZW50VHlwZSwgZXZlbnQpIHtcblx0ICAgICAgX2ZpcnN0VGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuXHQgICAgICBoYW1tZXIuZW1pdChldmVudFR5cGUsIGV2ZW50KTtcblx0ICAgIH07XG5cdFxuXHQgICAgd3JhcHBlci5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAvLyBEZXRhY2ggZnJvbSBET00gZWxlbWVudFxuXHQgICAgICB2YXIgaGFtbWVycyA9IGhhbW1lci5lbGVtZW50LmhhbW1lcjtcblx0ICAgICAgdmFyIGlkeCA9IGhhbW1lcnMuaW5kZXhPZih3cmFwcGVyKTtcblx0ICAgICAgaWYoaWR4ICE9PSAtMSkgaGFtbWVycy5zcGxpY2UoaWR4LDEpO1xuXHQgICAgICBpZighaGFtbWVycy5sZW5ndGgpIGRlbGV0ZSBoYW1tZXIuZWxlbWVudC5oYW1tZXI7XG5cdFxuXHQgICAgICAvLyBjbGVhciBhbGwgaGFuZGxlcnNcblx0ICAgICAgd3JhcHBlci5faGFuZGxlcnMgPSB7fTtcblx0XG5cdCAgICAgIC8vIGNhbGwgb3JpZ2luYWwgaGFtbWVyIGRlc3Ryb3lcblx0ICAgICAgaGFtbWVyLmRlc3Ryb3koKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gc3BsaXQgYSBzdHJpbmcgd2l0aCBzcGFjZSBzZXBhcmF0ZWQgd29yZHNcblx0ICAgIGZ1bmN0aW9uIHNwbGl0KGV2ZW50cykge1xuXHQgICAgICByZXR1cm4gZXZlbnRzLm1hdGNoKC9bXiBdKy9nKTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEEgc3RhdGljIGV2ZW50IGhhbmRsZXIsIGFwcGx5aW5nIGV2ZW50IHByb3BhZ2F0aW9uLlxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50XG5cdCAgICAgKi9cblx0ICAgIGZ1bmN0aW9uIHByb3BhZ2F0ZWRIYW5kbGVyKGV2ZW50KSB7XG5cdCAgICAgIC8vIGxldCBvbmx5IGEgc2luZ2xlIGhhbW1lciBpbnN0YW5jZSBoYW5kbGUgdGhpcyBldmVudFxuXHQgICAgICBpZiAoZXZlbnQudHlwZSAhPT0gJ2hhbW1lci5pbnB1dCcpIHtcblx0ICAgICAgICAvLyBpdCBpcyBwb3NzaWJsZSB0aGF0IHRoZSBzYW1lIHNyY0V2ZW50IGlzIHVzZWQgd2l0aCBtdWx0aXBsZSBoYW1tZXIgZXZlbnRzLFxuXHQgICAgICAgIC8vIHdlIGtlZXAgdHJhY2sgb24gd2hpY2ggZXZlbnRzIGFyZSBoYW5kbGVkIGluIGFuIG9iamVjdCBfaGFuZGxlZFxuXHQgICAgICAgIGlmICghZXZlbnQuc3JjRXZlbnQuX2hhbmRsZWQpIHtcblx0ICAgICAgICAgIGV2ZW50LnNyY0V2ZW50Ll9oYW5kbGVkID0ge307XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoZXZlbnQuc3JjRXZlbnQuX2hhbmRsZWRbZXZlbnQudHlwZV0pIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICBldmVudC5zcmNFdmVudC5faGFuZGxlZFtldmVudC50eXBlXSA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBhdHRhY2ggYSBzdG9wUHJvcGFnYXRpb24gZnVuY3Rpb24gdG8gdGhlIGV2ZW50XG5cdCAgICAgIHZhciBzdG9wcGVkID0gZmFsc2U7XG5cdCAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzdG9wcGVkID0gdHJ1ZTtcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIC8vd3JhcCB0aGUgc3JjRXZlbnQncyBzdG9wUHJvcGFnYXRpb24gdG8gYWxzbyBzdG9wIGhhbW1lciBwcm9wYWdhdGlvbjpcblx0ICAgICAgdmFyIHNyY1N0b3AgPSBldmVudC5zcmNFdmVudC5zdG9wUHJvcGFnYXRpb24uYmluZChldmVudC5zcmNFdmVudCk7XG5cdCAgICAgIGlmKHR5cGVvZiBzcmNTdG9wID09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgIGV2ZW50LnNyY0V2ZW50LnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICBzcmNTdG9wKCk7XG5cdCAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIGF0dGFjaCBmaXJzdFRhcmdldCBwcm9wZXJ0eSB0byB0aGUgZXZlbnRcblx0ICAgICAgZXZlbnQuZmlyc3RUYXJnZXQgPSBfZmlyc3RUYXJnZXQ7XG5cdFxuXHQgICAgICAvLyBwcm9wYWdhdGUgb3ZlciBhbGwgZWxlbWVudHMgKHVudGlsIHN0b3BwZWQpXG5cdCAgICAgIHZhciBlbGVtID0gX2ZpcnN0VGFyZ2V0O1xuXHQgICAgICB3aGlsZSAoZWxlbSAmJiAhc3RvcHBlZCkge1xuXHQgICAgICAgIHZhciBlbGVtSGFtbWVyID0gZWxlbS5oYW1tZXI7XG5cdCAgICAgICAgaWYoZWxlbUhhbW1lcil7XG5cdCAgICAgICAgICB2YXIgX2hhbmRsZXJzO1xuXHQgICAgICAgICAgZm9yKHZhciBrID0gMDsgayA8IGVsZW1IYW1tZXIubGVuZ3RoOyBrKyspe1xuXHQgICAgICAgICAgICBfaGFuZGxlcnMgPSBlbGVtSGFtbWVyW2tdLl9oYW5kbGVyc1tldmVudC50eXBlXTtcblx0ICAgICAgICAgICAgaWYoX2hhbmRsZXJzKSBmb3IgKHZhciBpID0gMDsgaSA8IF9oYW5kbGVycy5sZW5ndGggJiYgIXN0b3BwZWQ7IGkrKykge1xuXHQgICAgICAgICAgICAgIF9oYW5kbGVyc1tpXShldmVudCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxlbSA9IGVsZW0ucGFyZW50Tm9kZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB3cmFwcGVyO1xuXHQgIH07XG5cdH0pKTtcblxuXG4vKioqLyB9LFxuLyogMTMyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzMpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzUpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYodHJ1ZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdCgxMzMsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMzKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDEzMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzQpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLl9jdXJ2ZS1lZGl0b3JfMXZxNmxfNHtwb3NpdGlvbjpmaXhlZDtsZWZ0OjA7dG9wOjA7d2lkdGg6NDAzcHg7aGVpZ2h0OjM3OHB4O2JvcmRlci1yYWRpdXM6MTJweDtiYWNrZ3JvdW5kOnJnYmEoNTgsOCw1OCwuODUpO3otaW5kZXg6MTAwO2JveC1zaGFkb3c6MnB4IDJweCAycHggcmdiYSgwLDAsMCwuMzgpfS5fY3VydmUtZWRpdG9yX19sZWZ0XzF2cTZsXzF7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6NDJweDtsZWZ0OjA7dG9wOjA7Ym90dG9tOjA7cGFkZGluZzoxMHB4fS5fY3VydmUtZWRpdG9yX19sZWZ0XzF2cTZsXzEgaWNvbi1kaXZpZGVye21hcmdpbjoxMHB4IGF1dG99Ll9jdXJ2ZS1lZGl0b3JfX3JpZ2h0XzF2cTZsXzF7cG9zaXRpb246YWJzb2x1dGU7bGVmdDo0M3B4O3RvcDowO3JpZ2h0OjA7Ym90dG9tOjB9Ll9jdXJ2ZS1lZGl0b3JfX3JpZ2h0XzF2cTZsXzEgcmVzaXplLWhhbmRsZXtwb3NpdGlvbjphYnNvbHV0ZX0uX2N1cnZlLWVkaXRvcl9fcmlnaHRfMXZxNmxfMSByZXNpemUtaGFuZGxlW3R5cGU9dG9wXXt0b3A6LTE2cHh9Ll9jdXJ2ZS1lZGl0b3JfX3JpZ2h0XzF2cTZsXzEgcmVzaXplLWhhbmRsZVt0eXBlPWJvdHRvbV17Ym90dG9tOjB9Ll9jdXJ2ZS1lZGl0b3JfX3JpZ2h0XzF2cTZsXzEgcmVzaXplLWhhbmRsZVt0eXBlPWJvdHRvbV0sLl9jdXJ2ZS1lZGl0b3JfX3JpZ2h0XzF2cTZsXzEgcmVzaXplLWhhbmRsZVt0eXBlPXRvcF17bGVmdDo1MCU7bWFyZ2luLWxlZnQ6LTIxcHh9Ll9jdXJ2ZS1lZGl0b3JfX3JpZ2h0XzF2cTZsXzEgcmVzaXplLWhhbmRsZVt0eXBlPXJpZ2h0XXtyaWdodDotMTZweDt0b3A6NTAlO21hcmdpbi10b3A6LTE2cHh9Ll9jdXJ2ZS1lZGl0b3JfX2FuY2hvci1idXR0b25zXzF2cTZsXzF7bWFyZ2luLXRvcDoxMHB4fS5fY3VydmUtZWRpdG9yX19hbmNob3ItYnV0dG9uc18xdnE2bF8xIGljb24tYnV0dG9ue21hcmdpbi1ib3R0b206NXB4fS5fY3VydmUtZWRpdG9yX19tb2pzLWxvZ29fMXZxNmxfMXtwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206MTdweDtsZWZ0OjUwJTttYXJnaW4tbGVmdDoxcHg7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKX0uX2N1cnZlLWVkaXRvcl9fbW9qcy1sb2dvXzF2cTZsXzEgaWNvbntmaWxsOiNmZjUxMmY7d2lkdGg6MTJweDtoZWlnaHQ6MTJweH1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiAxMzQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qXHJcblx0XHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdFx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG5cdCovXHJcblx0Ly8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcclxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGxpc3QgPSBbXTtcclxuXHRcclxuXHRcdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcclxuXHRcdGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcclxuXHRcdFx0dmFyIHJlc3VsdCA9IFtdO1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBpdGVtID0gdGhpc1tpXTtcclxuXHRcdFx0XHRpZihpdGVtWzJdKSB7XHJcblx0XHRcdFx0XHRyZXN1bHQucHVzaChcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGl0ZW1bMV0gKyBcIn1cIik7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKGl0ZW1bMV0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oXCJcIik7XHJcblx0XHR9O1xyXG5cdFxyXG5cdFx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcclxuXHRcdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXHJcblx0XHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xyXG5cdFx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XHJcblx0XHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxyXG5cdFx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XHJcblx0XHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxyXG5cdFx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXHJcblx0XHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cclxuXHRcdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxyXG5cdFx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XHJcblx0XHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XHJcblx0XHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdHJldHVybiBsaXN0O1xyXG5cdH07XHJcblxuXG4vKioqLyB9LFxuLyogMTM1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxyXG5cdFx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcclxuXHRcdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcclxuXHQqL1xyXG5cdHZhciBzdHlsZXNJbkRvbSA9IHt9LFxyXG5cdFx0bWVtb2l6ZSA9IGZ1bmN0aW9uKGZuKSB7XHJcblx0XHRcdHZhciBtZW1vO1xyXG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdGlmICh0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIikgbWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcblx0XHRcdFx0cmV0dXJuIG1lbW87XHJcblx0XHRcdH07XHJcblx0XHR9LFxyXG5cdFx0aXNPbGRJRSA9IG1lbW9pemUoZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAvbXNpZSBbNi05XVxcYi8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTtcclxuXHRcdH0pLFxyXG5cdFx0Z2V0SGVhZEVsZW1lbnQgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0cmV0dXJuIGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO1xyXG5cdFx0fSksXHJcblx0XHRzaW5nbGV0b25FbGVtZW50ID0gbnVsbCxcclxuXHRcdHNpbmdsZXRvbkNvdW50ZXIgPSAwLFxyXG5cdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AgPSBbXTtcclxuXHRcclxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHtcclxuXHRcdGlmKGZhbHNlKSB7XHJcblx0XHRcdGlmKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xyXG5cdFx0fVxyXG5cdFxyXG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcblx0XHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cclxuXHRcdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2VcclxuXHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xyXG5cdFxyXG5cdFx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgYm90dG9tIG9mIDxoZWFkPi5cclxuXHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ1bmRlZmluZWRcIikgb3B0aW9ucy5pbnNlcnRBdCA9IFwiYm90dG9tXCI7XHJcblx0XHJcblx0XHR2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QpO1xyXG5cdFx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcclxuXHRcclxuXHRcdHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xyXG5cdFx0XHR2YXIgbWF5UmVtb3ZlID0gW107XHJcblx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcclxuXHRcdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcclxuXHRcdFx0XHRkb21TdHlsZS5yZWZzLS07XHJcblx0XHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmKG5ld0xpc3QpIHtcclxuXHRcdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QpO1xyXG5cdFx0XHRcdGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XHJcblx0XHRcdH1cclxuXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXTtcclxuXHRcdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XHJcblx0XHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspXHJcblx0XHRcdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKCk7XHJcblx0XHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9XHJcblx0XHJcblx0ZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKSB7XHJcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xyXG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcclxuXHRcdFx0aWYoZG9tU3R5bGUpIHtcclxuXHRcdFx0XHRkb21TdHlsZS5yZWZzKys7XHJcblx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Zm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR2YXIgcGFydHMgPSBbXTtcclxuXHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdFx0cGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdGZ1bmN0aW9uIGxpc3RUb1N0eWxlcyhsaXN0KSB7XHJcblx0XHR2YXIgc3R5bGVzID0gW107XHJcblx0XHR2YXIgbmV3U3R5bGVzID0ge307XHJcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XHJcblx0XHRcdHZhciBpZCA9IGl0ZW1bMF07XHJcblx0XHRcdHZhciBjc3MgPSBpdGVtWzFdO1xyXG5cdFx0XHR2YXIgbWVkaWEgPSBpdGVtWzJdO1xyXG5cdFx0XHR2YXIgc291cmNlTWFwID0gaXRlbVszXTtcclxuXHRcdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xyXG5cdFx0XHRpZighbmV3U3R5bGVzW2lkXSlcclxuXHRcdFx0XHRzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge2lkOiBpZCwgcGFydHM6IFtwYXJ0XX0pO1xyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0bmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHN0eWxlcztcclxuXHR9XHJcblx0XHJcblx0ZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCkge1xyXG5cdFx0dmFyIGhlYWQgPSBnZXRIZWFkRWxlbWVudCgpO1xyXG5cdFx0dmFyIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID0gc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3Bbc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AubGVuZ3RoIC0gMV07XHJcblx0XHRpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xyXG5cdFx0XHRpZighbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3ApIHtcclxuXHRcdFx0XHRoZWFkLmluc2VydEJlZm9yZShzdHlsZUVsZW1lbnQsIGhlYWQuZmlyc3RDaGlsZCk7XHJcblx0XHRcdH0gZWxzZSBpZihsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xyXG5cdFx0XHRcdGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlRWxlbWVudCwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5wdXNoKHN0eWxlRWxlbWVudCk7XHJcblx0XHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcclxuXHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcuIE11c3QgYmUgJ3RvcCcgb3IgJ2JvdHRvbScuXCIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRmdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KSB7XHJcblx0XHRzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xyXG5cdFx0dmFyIGlkeCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmluZGV4T2Yoc3R5bGVFbGVtZW50KTtcclxuXHRcdGlmKGlkeCA+PSAwKSB7XHJcblx0XHRcdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLnNwbGljZShpZHgsIDEpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRmdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykge1xyXG5cdFx0dmFyIHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcclxuXHRcdHN0eWxlRWxlbWVudC50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xyXG5cdFx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCk7XHJcblx0XHRyZXR1cm4gc3R5bGVFbGVtZW50O1xyXG5cdH1cclxuXHRcclxuXHRmdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKSB7XHJcblx0XHR2YXIgbGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcclxuXHRcdGxpbmtFbGVtZW50LnJlbCA9IFwic3R5bGVzaGVldFwiO1xyXG5cdFx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIGxpbmtFbGVtZW50KTtcclxuXHRcdHJldHVybiBsaW5rRWxlbWVudDtcclxuXHR9XHJcblx0XHJcblx0ZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XHJcblx0XHR2YXIgc3R5bGVFbGVtZW50LCB1cGRhdGUsIHJlbW92ZTtcclxuXHRcclxuXHRcdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xyXG5cdFx0XHR2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcclxuXHRcdFx0c3R5bGVFbGVtZW50ID0gc2luZ2xldG9uRWxlbWVudCB8fCAoc2luZ2xldG9uRWxlbWVudCA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSk7XHJcblx0XHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIGZhbHNlKTtcclxuXHRcdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCwgc3R5bGVJbmRleCwgdHJ1ZSk7XHJcblx0XHR9IGVsc2UgaWYob2JqLnNvdXJjZU1hcCAmJlxyXG5cdFx0XHR0eXBlb2YgVVJMID09PSBcImZ1bmN0aW9uXCIgJiZcclxuXHRcdFx0dHlwZW9mIFVSTC5jcmVhdGVPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxyXG5cdFx0XHR0eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXHJcblx0XHRcdHR5cGVvZiBCbG9iID09PSBcImZ1bmN0aW9uXCIgJiZcclxuXHRcdFx0dHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIikge1xyXG5cdFx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKTtcclxuXHRcdFx0dXBkYXRlID0gdXBkYXRlTGluay5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCk7XHJcblx0XHRcdHJlbW92ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpO1xyXG5cdFx0XHRcdGlmKHN0eWxlRWxlbWVudC5ocmVmKVxyXG5cdFx0XHRcdFx0VVJMLnJldm9rZU9iamVjdFVSTChzdHlsZUVsZW1lbnQuaHJlZik7XHJcblx0XHRcdH07XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XHJcblx0XHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpO1xyXG5cdFx0XHRyZW1vdmUgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHRcclxuXHRcdHVwZGF0ZShvYmopO1xyXG5cdFxyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xyXG5cdFx0XHRpZihuZXdPYmopIHtcclxuXHRcdFx0XHRpZihuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApXHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG5cdFxyXG5cdHZhciByZXBsYWNlVGV4dCA9IChmdW5jdGlvbiAoKSB7XHJcblx0XHR2YXIgdGV4dFN0b3JlID0gW107XHJcblx0XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24gKGluZGV4LCByZXBsYWNlbWVudCkge1xyXG5cdFx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XHJcblx0XHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xyXG5cdFx0fTtcclxuXHR9KSgpO1xyXG5cdFxyXG5cdGZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGVFbGVtZW50LCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcclxuXHRcdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcclxuXHRcclxuXHRcdGlmIChzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xyXG5cdFx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XHJcblx0XHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGVFbGVtZW50LmNoaWxkTm9kZXM7XHJcblx0XHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcclxuXHRcdFx0aWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XHJcblx0XHRcdFx0c3R5bGVFbGVtZW50Lmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0c3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGNzc05vZGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdGZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGVFbGVtZW50LCBvYmopIHtcclxuXHRcdHZhciBjc3MgPSBvYmouY3NzO1xyXG5cdFx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xyXG5cdFxyXG5cdFx0aWYobWVkaWEpIHtcclxuXHRcdFx0c3R5bGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIG1lZGlhKVxyXG5cdFx0fVxyXG5cdFxyXG5cdFx0aWYoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcclxuXHRcdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHdoaWxlKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XHJcblx0XHRcdFx0c3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdGZ1bmN0aW9uIHVwZGF0ZUxpbmsobGlua0VsZW1lbnQsIG9iaikge1xyXG5cdFx0dmFyIGNzcyA9IG9iai5jc3M7XHJcblx0XHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcclxuXHRcclxuXHRcdGlmKHNvdXJjZU1hcCkge1xyXG5cdFx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjYwMzg3NVxyXG5cdFx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XHJcblx0XHR9XHJcblx0XHJcblx0XHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcclxuXHRcclxuXHRcdHZhciBvbGRTcmMgPSBsaW5rRWxlbWVudC5ocmVmO1xyXG5cdFxyXG5cdFx0bGlua0VsZW1lbnQuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcblx0XHJcblx0XHRpZihvbGRTcmMpXHJcblx0XHRcdFVSTC5yZXZva2VPYmplY3RVUkwob2xkU3JjKTtcclxuXHR9XHJcblxuXG4vKioqLyB9LFxuLyogMTM2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0XHRcImN1cnZlLWVkaXRvclwiOiBcIl9jdXJ2ZS1lZGl0b3JfMXZxNmxfNFwiLFxuXHRcdFwiY3VydmUtZWRpdG9yX19sZWZ0XCI6IFwiX2N1cnZlLWVkaXRvcl9fbGVmdF8xdnE2bF8xXCIsXG5cdFx0XCJjdXJ2ZS1lZGl0b3JfX3JpZ2h0XCI6IFwiX2N1cnZlLWVkaXRvcl9fcmlnaHRfMXZxNmxfMVwiLFxuXHRcdFwiY3VydmUtZWRpdG9yX19hbmNob3ItYnV0dG9uc1wiOiBcIl9jdXJ2ZS1lZGl0b3JfX2FuY2hvci1idXR0b25zXzF2cTZsXzFcIixcblx0XHRcImN1cnZlLWVkaXRvcl9fbW9qcy1sb2dvXCI6IFwiX2N1cnZlLWVkaXRvcl9fbW9qcy1sb2dvXzF2cTZsXzFcIlxuXHR9O1xuXG4vKioqLyB9LFxuLyogMTM3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzgpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzUpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYodHJ1ZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdCgxMzgsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTM4KTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDEzOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzQpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiYm9keSxodG1se21hcmdpbjowO3BhZGRpbmc6MDtiYWNrZ3JvdW5kOiNmZmY1ZTR9Kntib3gtc2l6aW5nOmJvcmRlci1ib3h9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogMTM5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTE2KTtcblx0XG5cdHZhciBfY29uc3RhbnRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbnN0YW50cyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0dmFyIFlfU0laRSA9IF9jb25zdGFudHMyLmRlZmF1bHQuQ1VSVkVfU0laRTtcblx0dmFyIG1vZCA9IGZ1bmN0aW9uIG1vZCh0ZW1wUmVzaXplX3RvcCkge1xuXHQgICAgICB2YXIgY29lZiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IDEgOiBhcmd1bWVudHNbMV07XG5cdFxuXHQgICAgICB2YXIgTU9EID0gTWF0aC5hYnModGVtcFJlc2l6ZV90b3AgJSBZX1NJWkUpLFxuXHQgICAgICAgICAgRElWID0gcGFyc2VJbnQodGVtcFJlc2l6ZV90b3AgLyBZX1NJWkUpLFxuXHQgICAgICAgICAgR0FQID0gMTU7XG5cdFxuXHQgICAgICBpZiAoTU9EIDwgR0FQKSB7XG5cdCAgICAgICAgICAgIHRlbXBSZXNpemVfdG9wID0gRElWICogWV9TSVpFO1xuXHQgICAgICB9IGVsc2UgaWYgKE1PRCA+IFlfU0laRSAtIEdBUCkge1xuXHQgICAgICAgICAgICB0ZW1wUmVzaXplX3RvcCA9IGNvZWYgKiAoRElWICsgMSkgKiBZX1NJWkU7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiB0ZW1wUmVzaXplX3RvcDtcblx0fTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IG1vZDtcblxuLyoqKi8gfVxuLyoqKioqKi8gXSlcbn0pO1xuO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIG1vanMtY3VydmUtZWRpdG9yLm1pbi5qc1xuICoqLyIsIiBcdHZhciBwYXJlbnRIb3RVcGRhdGVDYWxsYmFjayA9IHRoaXNbXCJ3ZWJwYWNrSG90VXBkYXRlbW9qc19jdXJ2ZV9lZGl0b3JcIl07XG4gXHR0aGlzW1wid2VicGFja0hvdFVwZGF0ZW1vanNfY3VydmVfZWRpdG9yXCJdID0gXHJcbiBcdGZ1bmN0aW9uIHdlYnBhY2tIb3RVcGRhdGVDYWxsYmFjayhjaHVua0lkLCBtb3JlTW9kdWxlcykgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbiBcdFx0aG90QWRkVXBkYXRlQ2h1bmsoY2h1bmtJZCwgbW9yZU1vZHVsZXMpO1xyXG4gXHRcdGlmKHBhcmVudEhvdFVwZGF0ZUNhbGxiYWNrKSBwYXJlbnRIb3RVcGRhdGVDYWxsYmFjayhjaHVua0lkLCBtb3JlTW9kdWxlcyk7XHJcbiBcdH1cclxuIFx0XHJcbiBcdGZ1bmN0aW9uIGhvdERvd25sb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbiBcdFx0dmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XHJcbiBcdFx0dmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XHJcbiBcdFx0c2NyaXB0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xyXG4gXHRcdHNjcmlwdC5jaGFyc2V0ID0gXCJ1dGYtOFwiO1xyXG4gXHRcdHNjcmlwdC5zcmMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIlwiICsgY2h1bmtJZCArIFwiLmhvdC11cGRhdGUuanNcIjtcclxuIFx0XHRoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbiBcdH1cclxuIFx0XHJcbiBcdGZ1bmN0aW9uIGhvdERvd25sb2FkTWFuaWZlc3QoY2FsbGJhY2spIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4gXHRcdGlmKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCA9PT0gXCJ1bmRlZmluZWRcIilcclxuIFx0XHRcdHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoXCJObyBicm93c2VyIHN1cHBvcnRcIikpO1xyXG4gXHRcdHRyeSB7XHJcbiBcdFx0XHR2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gXHRcdFx0dmFyIHJlcXVlc3RQYXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIGhvdEN1cnJlbnRIYXNoICsgXCIuaG90LXVwZGF0ZS5qc29uXCI7XHJcbiBcdFx0XHRyZXF1ZXN0Lm9wZW4oXCJHRVRcIiwgcmVxdWVzdFBhdGgsIHRydWUpO1xyXG4gXHRcdFx0cmVxdWVzdC50aW1lb3V0ID0gMTAwMDA7XHJcbiBcdFx0XHRyZXF1ZXN0LnNlbmQobnVsbCk7XHJcbiBcdFx0fSBjYXRjaChlcnIpIHtcclxuIFx0XHRcdHJldHVybiBjYWxsYmFjayhlcnIpO1xyXG4gXHRcdH1cclxuIFx0XHRyZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gXHRcdFx0aWYocmVxdWVzdC5yZWFkeVN0YXRlICE9PSA0KSByZXR1cm47XHJcbiBcdFx0XHRpZihyZXF1ZXN0LnN0YXR1cyA9PT0gMCkge1xyXG4gXHRcdFx0XHQvLyB0aW1lb3V0XHJcbiBcdFx0XHRcdGNhbGxiYWNrKG5ldyBFcnJvcihcIk1hbmlmZXN0IHJlcXVlc3QgdG8gXCIgKyByZXF1ZXN0UGF0aCArIFwiIHRpbWVkIG91dC5cIikpO1xyXG4gXHRcdFx0fSBlbHNlIGlmKHJlcXVlc3Quc3RhdHVzID09PSA0MDQpIHtcclxuIFx0XHRcdFx0Ly8gbm8gdXBkYXRlIGF2YWlsYWJsZVxyXG4gXHRcdFx0XHRjYWxsYmFjaygpO1xyXG4gXHRcdFx0fSBlbHNlIGlmKHJlcXVlc3Quc3RhdHVzICE9PSAyMDAgJiYgcmVxdWVzdC5zdGF0dXMgIT09IDMwNCkge1xyXG4gXHRcdFx0XHQvLyBvdGhlciBmYWlsdXJlXHJcbiBcdFx0XHRcdGNhbGxiYWNrKG5ldyBFcnJvcihcIk1hbmlmZXN0IHJlcXVlc3QgdG8gXCIgKyByZXF1ZXN0UGF0aCArIFwiIGZhaWxlZC5cIikpO1xyXG4gXHRcdFx0fSBlbHNlIHtcclxuIFx0XHRcdFx0Ly8gc3VjY2Vzc1xyXG4gXHRcdFx0XHR0cnkge1xyXG4gXHRcdFx0XHRcdHZhciB1cGRhdGUgPSBKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcclxuIFx0XHRcdFx0fSBjYXRjaChlKSB7XHJcbiBcdFx0XHRcdFx0Y2FsbGJhY2soZSk7XHJcbiBcdFx0XHRcdFx0cmV0dXJuO1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHRcdGNhbGxiYWNrKG51bGwsIHVwZGF0ZSk7XHJcbiBcdFx0XHR9XHJcbiBcdFx0fTtcclxuIFx0fVxyXG5cbiBcdFxyXG4gXHRcclxuIFx0Ly8gQ29waWVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2Jsb2IvYmVmNDViMC9zcmMvc2hhcmVkL3V0aWxzL2NhbkRlZmluZVByb3BlcnR5LmpzXHJcbiBcdHZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IGZhbHNlO1xyXG4gXHR0cnkge1xyXG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgXCJ4XCIsIHtcclxuIFx0XHRcdGdldDogZnVuY3Rpb24oKSB7fVxyXG4gXHRcdH0pO1xyXG4gXHRcdGNhbkRlZmluZVByb3BlcnR5ID0gdHJ1ZTtcclxuIFx0fSBjYXRjaCh4KSB7XHJcbiBcdFx0Ly8gSUUgd2lsbCBmYWlsIG9uIGRlZmluZVByb3BlcnR5XHJcbiBcdH1cclxuIFx0XHJcbiBcdHZhciBob3RBcHBseU9uVXBkYXRlID0gdHJ1ZTtcclxuIFx0dmFyIGhvdEN1cnJlbnRIYXNoID0gXCJkYTIwMWIxZjlhYjgxOTkxNWM2N1wiOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbiBcdHZhciBob3RDdXJyZW50TW9kdWxlRGF0YSA9IHt9O1xyXG4gXHR2YXIgaG90Q3VycmVudFBhcmVudHMgPSBbXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4gXHRcclxuIFx0ZnVuY3Rpb24gaG90Q3JlYXRlUmVxdWlyZShtb2R1bGVJZCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbiBcdFx0dmFyIG1lID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XHJcbiBcdFx0aWYoIW1lKSByZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXztcclxuIFx0XHR2YXIgZm4gPSBmdW5jdGlvbihyZXF1ZXN0KSB7XHJcbiBcdFx0XHRpZihtZS5ob3QuYWN0aXZlKSB7XHJcbiBcdFx0XHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbcmVxdWVzdF0pIHtcclxuIFx0XHRcdFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdLnBhcmVudHMuaW5kZXhPZihtb2R1bGVJZCkgPCAwKVxyXG4gXHRcdFx0XHRcdFx0aW5zdGFsbGVkTW9kdWxlc1tyZXF1ZXN0XS5wYXJlbnRzLnB1c2gobW9kdWxlSWQpO1xyXG4gXHRcdFx0XHRcdGlmKG1lLmNoaWxkcmVuLmluZGV4T2YocmVxdWVzdCkgPCAwKVxyXG4gXHRcdFx0XHRcdFx0bWUuY2hpbGRyZW4ucHVzaChyZXF1ZXN0KTtcclxuIFx0XHRcdFx0fSBlbHNlIGhvdEN1cnJlbnRQYXJlbnRzID0gW21vZHVsZUlkXTtcclxuIFx0XHRcdH0gZWxzZSB7XHJcbiBcdFx0XHRcdGNvbnNvbGUud2FybihcIltITVJdIHVuZXhwZWN0ZWQgcmVxdWlyZShcIiArIHJlcXVlc3QgKyBcIikgZnJvbSBkaXNwb3NlZCBtb2R1bGUgXCIgKyBtb2R1bGVJZCk7XHJcbiBcdFx0XHRcdGhvdEN1cnJlbnRQYXJlbnRzID0gW107XHJcbiBcdFx0XHR9XHJcbiBcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhyZXF1ZXN0KTtcclxuIFx0XHR9O1xyXG4gXHRcdGZvcih2YXIgbmFtZSBpbiBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XHJcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoX193ZWJwYWNrX3JlcXVpcmVfXywgbmFtZSkpIHtcclxuIFx0XHRcdFx0aWYoY2FuRGVmaW5lUHJvcGVydHkpIHtcclxuIFx0XHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZm4sIG5hbWUsIChmdW5jdGlvbihuYW1lKSB7XHJcbiBcdFx0XHRcdFx0XHRyZXR1cm4ge1xyXG4gXHRcdFx0XHRcdFx0XHRjb25maWd1cmFibGU6IHRydWUsXHJcbiBcdFx0XHRcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXHJcbiBcdFx0XHRcdFx0XHRcdGdldDogZnVuY3Rpb24oKSB7XHJcbiBcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX19bbmFtZV07XHJcbiBcdFx0XHRcdFx0XHRcdH0sXHJcbiBcdFx0XHRcdFx0XHRcdHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuIFx0XHRcdFx0XHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fW25hbWVdID0gdmFsdWU7XHJcbiBcdFx0XHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0XHRcdH07XHJcbiBcdFx0XHRcdFx0fShuYW1lKSkpO1xyXG4gXHRcdFx0XHR9IGVsc2Uge1xyXG4gXHRcdFx0XHRcdGZuW25hbWVdID0gX193ZWJwYWNrX3JlcXVpcmVfX1tuYW1lXTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0fVxyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0ZnVuY3Rpb24gZW5zdXJlKGNodW5rSWQsIGNhbGxiYWNrKSB7XHJcbiBcdFx0XHRpZihob3RTdGF0dXMgPT09IFwicmVhZHlcIilcclxuIFx0XHRcdFx0aG90U2V0U3RhdHVzKFwicHJlcGFyZVwiKTtcclxuIFx0XHRcdGhvdENodW5rc0xvYWRpbmcrKztcclxuIFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18uZShjaHVua0lkLCBmdW5jdGlvbigpIHtcclxuIFx0XHRcdFx0dHJ5IHtcclxuIFx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKG51bGwsIGZuKTtcclxuIFx0XHRcdFx0fSBmaW5hbGx5IHtcclxuIFx0XHRcdFx0XHRmaW5pc2hDaHVua0xvYWRpbmcoKTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcclxuIFx0XHRcdFx0ZnVuY3Rpb24gZmluaXNoQ2h1bmtMb2FkaW5nKCkge1xyXG4gXHRcdFx0XHRcdGhvdENodW5rc0xvYWRpbmctLTtcclxuIFx0XHRcdFx0XHRpZihob3RTdGF0dXMgPT09IFwicHJlcGFyZVwiKSB7XHJcbiBcdFx0XHRcdFx0XHRpZighaG90V2FpdGluZ0ZpbGVzTWFwW2NodW5rSWRdKSB7XHJcbiBcdFx0XHRcdFx0XHRcdGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpO1xyXG4gXHRcdFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRcdFx0aWYoaG90Q2h1bmtzTG9hZGluZyA9PT0gMCAmJiBob3RXYWl0aW5nRmlsZXMgPT09IDApIHtcclxuIFx0XHRcdFx0XHRcdFx0aG90VXBkYXRlRG93bmxvYWRlZCgpO1xyXG4gXHRcdFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0fSk7XHJcbiBcdFx0fVxyXG4gXHRcdGlmKGNhbkRlZmluZVByb3BlcnR5KSB7XHJcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZm4sIFwiZVwiLCB7XHJcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXHJcbiBcdFx0XHRcdHZhbHVlOiBlbnN1cmVcclxuIFx0XHRcdH0pO1xyXG4gXHRcdH0gZWxzZSB7XHJcbiBcdFx0XHRmbi5lID0gZW5zdXJlO1xyXG4gXHRcdH1cclxuIFx0XHRyZXR1cm4gZm47XHJcbiBcdH1cclxuIFx0XHJcbiBcdGZ1bmN0aW9uIGhvdENyZWF0ZU1vZHVsZShtb2R1bGVJZCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbiBcdFx0dmFyIGhvdCA9IHtcclxuIFx0XHRcdC8vIHByaXZhdGUgc3R1ZmZcclxuIFx0XHRcdF9hY2NlcHRlZERlcGVuZGVuY2llczoge30sXHJcbiBcdFx0XHRfZGVjbGluZWREZXBlbmRlbmNpZXM6IHt9LFxyXG4gXHRcdFx0X3NlbGZBY2NlcHRlZDogZmFsc2UsXHJcbiBcdFx0XHRfc2VsZkRlY2xpbmVkOiBmYWxzZSxcclxuIFx0XHRcdF9kaXNwb3NlSGFuZGxlcnM6IFtdLFxyXG4gXHRcclxuIFx0XHRcdC8vIE1vZHVsZSBBUElcclxuIFx0XHRcdGFjdGl2ZTogdHJ1ZSxcclxuIFx0XHRcdGFjY2VwdDogZnVuY3Rpb24oZGVwLCBjYWxsYmFjaykge1xyXG4gXHRcdFx0XHRpZih0eXBlb2YgZGVwID09PSBcInVuZGVmaW5lZFwiKVxyXG4gXHRcdFx0XHRcdGhvdC5fc2VsZkFjY2VwdGVkID0gdHJ1ZTtcclxuIFx0XHRcdFx0ZWxzZSBpZih0eXBlb2YgZGVwID09PSBcImZ1bmN0aW9uXCIpXHJcbiBcdFx0XHRcdFx0aG90Ll9zZWxmQWNjZXB0ZWQgPSBkZXA7XHJcbiBcdFx0XHRcdGVsc2UgaWYodHlwZW9mIGRlcCA9PT0gXCJvYmplY3RcIilcclxuIFx0XHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKVxyXG4gXHRcdFx0XHRcdFx0aG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBbaV1dID0gY2FsbGJhY2s7XHJcbiBcdFx0XHRcdGVsc2VcclxuIFx0XHRcdFx0XHRob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcF0gPSBjYWxsYmFjaztcclxuIFx0XHRcdH0sXHJcbiBcdFx0XHRkZWNsaW5lOiBmdW5jdGlvbihkZXApIHtcclxuIFx0XHRcdFx0aWYodHlwZW9mIGRlcCA9PT0gXCJ1bmRlZmluZWRcIilcclxuIFx0XHRcdFx0XHRob3QuX3NlbGZEZWNsaW5lZCA9IHRydWU7XHJcbiBcdFx0XHRcdGVsc2UgaWYodHlwZW9mIGRlcCA9PT0gXCJudW1iZXJcIilcclxuIFx0XHRcdFx0XHRob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW2RlcF0gPSB0cnVlO1xyXG4gXHRcdFx0XHRlbHNlXHJcbiBcdFx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlcC5sZW5ndGg7IGkrKylcclxuIFx0XHRcdFx0XHRcdGhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbZGVwW2ldXSA9IHRydWU7XHJcbiBcdFx0XHR9LFxyXG4gXHRcdFx0ZGlzcG9zZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuIFx0XHRcdFx0aG90Ll9kaXNwb3NlSGFuZGxlcnMucHVzaChjYWxsYmFjayk7XHJcbiBcdFx0XHR9LFxyXG4gXHRcdFx0YWRkRGlzcG9zZUhhbmRsZXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiBcdFx0XHRcdGhvdC5fZGlzcG9zZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gXHRcdFx0fSxcclxuIFx0XHRcdHJlbW92ZURpc3Bvc2VIYW5kbGVyOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gXHRcdFx0XHR2YXIgaWR4ID0gaG90Ll9kaXNwb3NlSGFuZGxlcnMuaW5kZXhPZihjYWxsYmFjayk7XHJcbiBcdFx0XHRcdGlmKGlkeCA+PSAwKSBob3QuX2Rpc3Bvc2VIYW5kbGVycy5zcGxpY2UoaWR4LCAxKTtcclxuIFx0XHRcdH0sXHJcbiBcdFxyXG4gXHRcdFx0Ly8gTWFuYWdlbWVudCBBUElcclxuIFx0XHRcdGNoZWNrOiBob3RDaGVjayxcclxuIFx0XHRcdGFwcGx5OiBob3RBcHBseSxcclxuIFx0XHRcdHN0YXR1czogZnVuY3Rpb24obCkge1xyXG4gXHRcdFx0XHRpZighbCkgcmV0dXJuIGhvdFN0YXR1cztcclxuIFx0XHRcdFx0aG90U3RhdHVzSGFuZGxlcnMucHVzaChsKTtcclxuIFx0XHRcdH0sXHJcbiBcdFx0XHRhZGRTdGF0dXNIYW5kbGVyOiBmdW5jdGlvbihsKSB7XHJcbiBcdFx0XHRcdGhvdFN0YXR1c0hhbmRsZXJzLnB1c2gobCk7XHJcbiBcdFx0XHR9LFxyXG4gXHRcdFx0cmVtb3ZlU3RhdHVzSGFuZGxlcjogZnVuY3Rpb24obCkge1xyXG4gXHRcdFx0XHR2YXIgaWR4ID0gaG90U3RhdHVzSGFuZGxlcnMuaW5kZXhPZihsKTtcclxuIFx0XHRcdFx0aWYoaWR4ID49IDApIGhvdFN0YXR1c0hhbmRsZXJzLnNwbGljZShpZHgsIDEpO1xyXG4gXHRcdFx0fSxcclxuIFx0XHJcbiBcdFx0XHQvL2luaGVyaXQgZnJvbSBwcmV2aW91cyBkaXNwb3NlIGNhbGxcclxuIFx0XHRcdGRhdGE6IGhvdEN1cnJlbnRNb2R1bGVEYXRhW21vZHVsZUlkXVxyXG4gXHRcdH07XHJcbiBcdFx0cmV0dXJuIGhvdDtcclxuIFx0fVxyXG4gXHRcclxuIFx0dmFyIGhvdFN0YXR1c0hhbmRsZXJzID0gW107XHJcbiBcdHZhciBob3RTdGF0dXMgPSBcImlkbGVcIjtcclxuIFx0XHJcbiBcdGZ1bmN0aW9uIGhvdFNldFN0YXR1cyhuZXdTdGF0dXMpIHtcclxuIFx0XHRob3RTdGF0dXMgPSBuZXdTdGF0dXM7XHJcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGhvdFN0YXR1c0hhbmRsZXJzLmxlbmd0aDsgaSsrKVxyXG4gXHRcdFx0aG90U3RhdHVzSGFuZGxlcnNbaV0uY2FsbChudWxsLCBuZXdTdGF0dXMpO1xyXG4gXHR9XHJcbiBcdFxyXG4gXHQvLyB3aGlsZSBkb3dubG9hZGluZ1xyXG4gXHR2YXIgaG90V2FpdGluZ0ZpbGVzID0gMDtcclxuIFx0dmFyIGhvdENodW5rc0xvYWRpbmcgPSAwO1xyXG4gXHR2YXIgaG90V2FpdGluZ0ZpbGVzTWFwID0ge307XHJcbiBcdHZhciBob3RSZXF1ZXN0ZWRGaWxlc01hcCA9IHt9O1xyXG4gXHR2YXIgaG90QXZhaWxpYmxlRmlsZXNNYXAgPSB7fTtcclxuIFx0dmFyIGhvdENhbGxiYWNrO1xyXG4gXHRcclxuIFx0Ly8gVGhlIHVwZGF0ZSBpbmZvXHJcbiBcdHZhciBob3RVcGRhdGUsIGhvdFVwZGF0ZU5ld0hhc2g7XHJcbiBcdFxyXG4gXHRmdW5jdGlvbiB0b01vZHVsZUlkKGlkKSB7XHJcbiBcdFx0dmFyIGlzTnVtYmVyID0gKCtpZCkgKyBcIlwiID09PSBpZDtcclxuIFx0XHRyZXR1cm4gaXNOdW1iZXIgPyAraWQgOiBpZDtcclxuIFx0fVxyXG4gXHRcclxuIFx0ZnVuY3Rpb24gaG90Q2hlY2soYXBwbHksIGNhbGxiYWNrKSB7XHJcbiBcdFx0aWYoaG90U3RhdHVzICE9PSBcImlkbGVcIikgdGhyb3cgbmV3IEVycm9yKFwiY2hlY2soKSBpcyBvbmx5IGFsbG93ZWQgaW4gaWRsZSBzdGF0dXNcIik7XHJcbiBcdFx0aWYodHlwZW9mIGFwcGx5ID09PSBcImZ1bmN0aW9uXCIpIHtcclxuIFx0XHRcdGhvdEFwcGx5T25VcGRhdGUgPSBmYWxzZTtcclxuIFx0XHRcdGNhbGxiYWNrID0gYXBwbHk7XHJcbiBcdFx0fSBlbHNlIHtcclxuIFx0XHRcdGhvdEFwcGx5T25VcGRhdGUgPSBhcHBseTtcclxuIFx0XHRcdGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oZXJyKSB7XHJcbiBcdFx0XHRcdGlmKGVycikgdGhyb3cgZXJyO1xyXG4gXHRcdFx0fTtcclxuIFx0XHR9XHJcbiBcdFx0aG90U2V0U3RhdHVzKFwiY2hlY2tcIik7XHJcbiBcdFx0aG90RG93bmxvYWRNYW5pZmVzdChmdW5jdGlvbihlcnIsIHVwZGF0ZSkge1xyXG4gXHRcdFx0aWYoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKTtcclxuIFx0XHRcdGlmKCF1cGRhdGUpIHtcclxuIFx0XHRcdFx0aG90U2V0U3RhdHVzKFwiaWRsZVwiKTtcclxuIFx0XHRcdFx0Y2FsbGJhY2sobnVsbCwgbnVsbCk7XHJcbiBcdFx0XHRcdHJldHVybjtcclxuIFx0XHRcdH1cclxuIFx0XHJcbiBcdFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcCA9IHt9O1xyXG4gXHRcdFx0aG90QXZhaWxpYmxlRmlsZXNNYXAgPSB7fTtcclxuIFx0XHRcdGhvdFdhaXRpbmdGaWxlc01hcCA9IHt9O1xyXG4gXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IHVwZGF0ZS5jLmxlbmd0aDsgaSsrKVxyXG4gXHRcdFx0XHRob3RBdmFpbGlibGVGaWxlc01hcFt1cGRhdGUuY1tpXV0gPSB0cnVlO1xyXG4gXHRcdFx0aG90VXBkYXRlTmV3SGFzaCA9IHVwZGF0ZS5oO1xyXG4gXHRcclxuIFx0XHRcdGhvdFNldFN0YXR1cyhcInByZXBhcmVcIik7XHJcbiBcdFx0XHRob3RDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gXHRcdFx0aG90VXBkYXRlID0ge307XHJcbiBcdFx0XHR2YXIgY2h1bmtJZCA9IDA7XHJcbiBcdFx0XHR7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbG9uZS1ibG9ja3NcclxuIFx0XHRcdFx0LypnbG9iYWxzIGNodW5rSWQgKi9cclxuIFx0XHRcdFx0aG90RW5zdXJlVXBkYXRlQ2h1bmsoY2h1bmtJZCk7XHJcbiBcdFx0XHR9XHJcbiBcdFx0XHRpZihob3RTdGF0dXMgPT09IFwicHJlcGFyZVwiICYmIGhvdENodW5rc0xvYWRpbmcgPT09IDAgJiYgaG90V2FpdGluZ0ZpbGVzID09PSAwKSB7XHJcbiBcdFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcclxuIFx0XHRcdH1cclxuIFx0XHR9KTtcclxuIFx0fVxyXG4gXHRcclxuIFx0ZnVuY3Rpb24gaG90QWRkVXBkYXRlQ2h1bmsoY2h1bmtJZCwgbW9yZU1vZHVsZXMpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4gXHRcdGlmKCFob3RBdmFpbGlibGVGaWxlc01hcFtjaHVua0lkXSB8fCAhaG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0pXHJcbiBcdFx0XHRyZXR1cm47XHJcbiBcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0gPSBmYWxzZTtcclxuIFx0XHRmb3IodmFyIG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XHJcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xyXG4gXHRcdFx0XHRob3RVcGRhdGVbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xyXG4gXHRcdFx0fVxyXG4gXHRcdH1cclxuIFx0XHRpZigtLWhvdFdhaXRpbmdGaWxlcyA9PT0gMCAmJiBob3RDaHVua3NMb2FkaW5nID09PSAwKSB7XHJcbiBcdFx0XHRob3RVcGRhdGVEb3dubG9hZGVkKCk7XHJcbiBcdFx0fVxyXG4gXHR9XHJcbiBcdFxyXG4gXHRmdW5jdGlvbiBob3RFbnN1cmVVcGRhdGVDaHVuayhjaHVua0lkKSB7XHJcbiBcdFx0aWYoIWhvdEF2YWlsaWJsZUZpbGVzTWFwW2NodW5rSWRdKSB7XHJcbiBcdFx0XHRob3RXYWl0aW5nRmlsZXNNYXBbY2h1bmtJZF0gPSB0cnVlO1xyXG4gXHRcdH0gZWxzZSB7XHJcbiBcdFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcFtjaHVua0lkXSA9IHRydWU7XHJcbiBcdFx0XHRob3RXYWl0aW5nRmlsZXMrKztcclxuIFx0XHRcdGhvdERvd25sb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCk7XHJcbiBcdFx0fVxyXG4gXHR9XHJcbiBcdFxyXG4gXHRmdW5jdGlvbiBob3RVcGRhdGVEb3dubG9hZGVkKCkge1xyXG4gXHRcdGhvdFNldFN0YXR1cyhcInJlYWR5XCIpO1xyXG4gXHRcdHZhciBjYWxsYmFjayA9IGhvdENhbGxiYWNrO1xyXG4gXHRcdGhvdENhbGxiYWNrID0gbnVsbDtcclxuIFx0XHRpZighY2FsbGJhY2spIHJldHVybjtcclxuIFx0XHRpZihob3RBcHBseU9uVXBkYXRlKSB7XHJcbiBcdFx0XHRob3RBcHBseShob3RBcHBseU9uVXBkYXRlLCBjYWxsYmFjayk7XHJcbiBcdFx0fSBlbHNlIHtcclxuIFx0XHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbXTtcclxuIFx0XHRcdGZvcih2YXIgaWQgaW4gaG90VXBkYXRlKSB7XHJcbiBcdFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChob3RVcGRhdGUsIGlkKSkge1xyXG4gXHRcdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKHRvTW9kdWxlSWQoaWQpKTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0fVxyXG4gXHRcdFx0Y2FsbGJhY2sobnVsbCwgb3V0ZGF0ZWRNb2R1bGVzKTtcclxuIFx0XHR9XHJcbiBcdH1cclxuIFx0XHJcbiBcdGZ1bmN0aW9uIGhvdEFwcGx5KG9wdGlvbnMsIGNhbGxiYWNrKSB7XHJcbiBcdFx0aWYoaG90U3RhdHVzICE9PSBcInJlYWR5XCIpIHRocm93IG5ldyBFcnJvcihcImFwcGx5KCkgaXMgb25seSBhbGxvd2VkIGluIHJlYWR5IHN0YXR1c1wiKTtcclxuIFx0XHRpZih0eXBlb2Ygb3B0aW9ucyA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiBcdFx0XHRjYWxsYmFjayA9IG9wdGlvbnM7XHJcbiBcdFx0XHRvcHRpb25zID0ge307XHJcbiBcdFx0fSBlbHNlIGlmKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMgPT09IFwib2JqZWN0XCIpIHtcclxuIFx0XHRcdGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oZXJyKSB7XHJcbiBcdFx0XHRcdGlmKGVycikgdGhyb3cgZXJyO1xyXG4gXHRcdFx0fTtcclxuIFx0XHR9IGVsc2Uge1xyXG4gXHRcdFx0b3B0aW9ucyA9IHt9O1xyXG4gXHRcdFx0Y2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbihlcnIpIHtcclxuIFx0XHRcdFx0aWYoZXJyKSB0aHJvdyBlcnI7XHJcbiBcdFx0XHR9O1xyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0ZnVuY3Rpb24gZ2V0QWZmZWN0ZWRTdHVmZihtb2R1bGUpIHtcclxuIFx0XHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbbW9kdWxlXTtcclxuIFx0XHRcdHZhciBvdXRkYXRlZERlcGVuZGVuY2llcyA9IHt9O1xyXG4gXHRcclxuIFx0XHRcdHZhciBxdWV1ZSA9IG91dGRhdGVkTW9kdWxlcy5zbGljZSgpO1xyXG4gXHRcdFx0d2hpbGUocXVldWUubGVuZ3RoID4gMCkge1xyXG4gXHRcdFx0XHR2YXIgbW9kdWxlSWQgPSBxdWV1ZS5wb3AoKTtcclxuIFx0XHRcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4gXHRcdFx0XHRpZighbW9kdWxlIHx8IG1vZHVsZS5ob3QuX3NlbGZBY2NlcHRlZClcclxuIFx0XHRcdFx0XHRjb250aW51ZTtcclxuIFx0XHRcdFx0aWYobW9kdWxlLmhvdC5fc2VsZkRlY2xpbmVkKSB7XHJcbiBcdFx0XHRcdFx0cmV0dXJuIG5ldyBFcnJvcihcIkFib3J0ZWQgYmVjYXVzZSBvZiBzZWxmIGRlY2xpbmU6IFwiICsgbW9kdWxlSWQpO1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHRcdGlmKG1vZHVsZUlkID09PSAwKSB7XHJcbiBcdFx0XHRcdFx0cmV0dXJuO1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtb2R1bGUucGFyZW50cy5sZW5ndGg7IGkrKykge1xyXG4gXHRcdFx0XHRcdHZhciBwYXJlbnRJZCA9IG1vZHVsZS5wYXJlbnRzW2ldO1xyXG4gXHRcdFx0XHRcdHZhciBwYXJlbnQgPSBpbnN0YWxsZWRNb2R1bGVzW3BhcmVudElkXTtcclxuIFx0XHRcdFx0XHRpZihwYXJlbnQuaG90Ll9kZWNsaW5lZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pIHtcclxuIFx0XHRcdFx0XHRcdHJldHVybiBuZXcgRXJyb3IoXCJBYm9ydGVkIGJlY2F1c2Ugb2YgZGVjbGluZWQgZGVwZW5kZW5jeTogXCIgKyBtb2R1bGVJZCArIFwiIGluIFwiICsgcGFyZW50SWQpO1xyXG4gXHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0XHRpZihvdXRkYXRlZE1vZHVsZXMuaW5kZXhPZihwYXJlbnRJZCkgPj0gMCkgY29udGludWU7XHJcbiBcdFx0XHRcdFx0aWYocGFyZW50LmhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKSB7XHJcbiBcdFx0XHRcdFx0XHRpZighb3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdKVxyXG4gXHRcdFx0XHRcdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF0gPSBbXTtcclxuIFx0XHRcdFx0XHRcdGFkZEFsbFRvU2V0KG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSwgW21vZHVsZUlkXSk7XHJcbiBcdFx0XHRcdFx0XHRjb250aW51ZTtcclxuIFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdFx0ZGVsZXRlIG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXTtcclxuIFx0XHRcdFx0XHRvdXRkYXRlZE1vZHVsZXMucHVzaChwYXJlbnRJZCk7XHJcbiBcdFx0XHRcdFx0cXVldWUucHVzaChwYXJlbnRJZCk7XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdH1cclxuIFx0XHJcbiBcdFx0XHRyZXR1cm4gW291dGRhdGVkTW9kdWxlcywgb3V0ZGF0ZWREZXBlbmRlbmNpZXNdO1xyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0ZnVuY3Rpb24gYWRkQWxsVG9TZXQoYSwgYikge1xyXG4gXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGIubGVuZ3RoOyBpKyspIHtcclxuIFx0XHRcdFx0dmFyIGl0ZW0gPSBiW2ldO1xyXG4gXHRcdFx0XHRpZihhLmluZGV4T2YoaXRlbSkgPCAwKVxyXG4gXHRcdFx0XHRcdGEucHVzaChpdGVtKTtcclxuIFx0XHRcdH1cclxuIFx0XHR9XHJcbiBcdFxyXG4gXHRcdC8vIGF0IGJlZ2luIGFsbCB1cGRhdGVzIG1vZHVsZXMgYXJlIG91dGRhdGVkXHJcbiBcdFx0Ly8gdGhlIFwib3V0ZGF0ZWRcIiBzdGF0dXMgY2FuIHByb3BhZ2F0ZSB0byBwYXJlbnRzIGlmIHRoZXkgZG9uJ3QgYWNjZXB0IHRoZSBjaGlsZHJlblxyXG4gXHRcdHZhciBvdXRkYXRlZERlcGVuZGVuY2llcyA9IHt9O1xyXG4gXHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbXTtcclxuIFx0XHR2YXIgYXBwbGllZFVwZGF0ZSA9IHt9O1xyXG4gXHRcdGZvcih2YXIgaWQgaW4gaG90VXBkYXRlKSB7XHJcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaG90VXBkYXRlLCBpZCkpIHtcclxuIFx0XHRcdFx0dmFyIG1vZHVsZUlkID0gdG9Nb2R1bGVJZChpZCk7XHJcbiBcdFx0XHRcdHZhciByZXN1bHQgPSBnZXRBZmZlY3RlZFN0dWZmKG1vZHVsZUlkKTtcclxuIFx0XHRcdFx0aWYoIXJlc3VsdCkge1xyXG4gXHRcdFx0XHRcdGlmKG9wdGlvbnMuaWdub3JlVW5hY2NlcHRlZClcclxuIFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xyXG4gXHRcdFx0XHRcdGhvdFNldFN0YXR1cyhcImFib3J0XCIpO1xyXG4gXHRcdFx0XHRcdHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoXCJBYm9ydGVkIGJlY2F1c2UgXCIgKyBtb2R1bGVJZCArIFwiIGlzIG5vdCBhY2NlcHRlZFwiKSk7XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdFx0aWYocmVzdWx0IGluc3RhbmNlb2YgRXJyb3IpIHtcclxuIFx0XHRcdFx0XHRob3RTZXRTdGF0dXMoXCJhYm9ydFwiKTtcclxuIFx0XHRcdFx0XHRyZXR1cm4gY2FsbGJhY2socmVzdWx0KTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRhcHBsaWVkVXBkYXRlW21vZHVsZUlkXSA9IGhvdFVwZGF0ZVttb2R1bGVJZF07XHJcbiBcdFx0XHRcdGFkZEFsbFRvU2V0KG91dGRhdGVkTW9kdWxlcywgcmVzdWx0WzBdKTtcclxuIFx0XHRcdFx0Zm9yKHZhciBtb2R1bGVJZCBpbiByZXN1bHRbMV0pIHtcclxuIFx0XHRcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocmVzdWx0WzFdLCBtb2R1bGVJZCkpIHtcclxuIFx0XHRcdFx0XHRcdGlmKCFvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pXHJcbiBcdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSA9IFtdO1xyXG4gXHRcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdLCByZXN1bHRbMV1bbW9kdWxlSWRdKTtcclxuIFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdH1cclxuIFx0XHR9XHJcbiBcdFxyXG4gXHRcdC8vIFN0b3JlIHNlbGYgYWNjZXB0ZWQgb3V0ZGF0ZWQgbW9kdWxlcyB0byByZXF1aXJlIHRoZW0gbGF0ZXIgYnkgdGhlIG1vZHVsZSBzeXN0ZW1cclxuIFx0XHR2YXIgb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzID0gW107XHJcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG91dGRhdGVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xyXG4gXHRcdFx0dmFyIG1vZHVsZUlkID0gb3V0ZGF0ZWRNb2R1bGVzW2ldO1xyXG4gXHRcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gJiYgaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uaG90Ll9zZWxmQWNjZXB0ZWQpXHJcbiBcdFx0XHRcdG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcy5wdXNoKHtcclxuIFx0XHRcdFx0XHRtb2R1bGU6IG1vZHVsZUlkLFxyXG4gXHRcdFx0XHRcdGVycm9ySGFuZGxlcjogaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uaG90Ll9zZWxmQWNjZXB0ZWRcclxuIFx0XHRcdFx0fSk7XHJcbiBcdFx0fVxyXG4gXHRcclxuIFx0XHQvLyBOb3cgaW4gXCJkaXNwb3NlXCIgcGhhc2VcclxuIFx0XHRob3RTZXRTdGF0dXMoXCJkaXNwb3NlXCIpO1xyXG4gXHRcdHZhciBxdWV1ZSA9IG91dGRhdGVkTW9kdWxlcy5zbGljZSgpO1xyXG4gXHRcdHdoaWxlKHF1ZXVlLmxlbmd0aCA+IDApIHtcclxuIFx0XHRcdHZhciBtb2R1bGVJZCA9IHF1ZXVlLnBvcCgpO1xyXG4gXHRcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4gXHRcdFx0aWYoIW1vZHVsZSkgY29udGludWU7XHJcbiBcdFxyXG4gXHRcdFx0dmFyIGRhdGEgPSB7fTtcclxuIFx0XHJcbiBcdFx0XHQvLyBDYWxsIGRpc3Bvc2UgaGFuZGxlcnNcclxuIFx0XHRcdHZhciBkaXNwb3NlSGFuZGxlcnMgPSBtb2R1bGUuaG90Ll9kaXNwb3NlSGFuZGxlcnM7XHJcbiBcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZGlzcG9zZUhhbmRsZXJzLmxlbmd0aDsgaisrKSB7XHJcbiBcdFx0XHRcdHZhciBjYiA9IGRpc3Bvc2VIYW5kbGVyc1tqXTtcclxuIFx0XHRcdFx0Y2IoZGF0YSk7XHJcbiBcdFx0XHR9XHJcbiBcdFx0XHRob3RDdXJyZW50TW9kdWxlRGF0YVttb2R1bGVJZF0gPSBkYXRhO1xyXG4gXHRcclxuIFx0XHRcdC8vIGRpc2FibGUgbW9kdWxlICh0aGlzIGRpc2FibGVzIHJlcXVpcmVzIGZyb20gdGhpcyBtb2R1bGUpXHJcbiBcdFx0XHRtb2R1bGUuaG90LmFjdGl2ZSA9IGZhbHNlO1xyXG4gXHRcclxuIFx0XHRcdC8vIHJlbW92ZSBtb2R1bGUgZnJvbSBjYWNoZVxyXG4gXHRcdFx0ZGVsZXRlIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4gXHRcclxuIFx0XHRcdC8vIHJlbW92ZSBcInBhcmVudHNcIiByZWZlcmVuY2VzIGZyb20gYWxsIGNoaWxkcmVuXHJcbiBcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgbW9kdWxlLmNoaWxkcmVuLmxlbmd0aDsgaisrKSB7XHJcbiBcdFx0XHRcdHZhciBjaGlsZCA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlLmNoaWxkcmVuW2pdXTtcclxuIFx0XHRcdFx0aWYoIWNoaWxkKSBjb250aW51ZTtcclxuIFx0XHRcdFx0dmFyIGlkeCA9IGNoaWxkLnBhcmVudHMuaW5kZXhPZihtb2R1bGVJZCk7XHJcbiBcdFx0XHRcdGlmKGlkeCA+PSAwKSB7XHJcbiBcdFx0XHRcdFx0Y2hpbGQucGFyZW50cy5zcGxpY2UoaWR4LCAxKTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0fVxyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0Ly8gcmVtb3ZlIG91dGRhdGVkIGRlcGVuZGVuY3kgZnJvbSBtb2R1bGUgY2hpbGRyZW5cclxuIFx0XHRmb3IodmFyIG1vZHVsZUlkIGluIG91dGRhdGVkRGVwZW5kZW5jaWVzKSB7XHJcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3V0ZGF0ZWREZXBlbmRlbmNpZXMsIG1vZHVsZUlkKSkge1xyXG4gXHRcdFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XHJcbiBcdFx0XHRcdHZhciBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyA9IG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXTtcclxuIFx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzLmxlbmd0aDsgaisrKSB7XHJcbiBcdFx0XHRcdFx0dmFyIGRlcGVuZGVuY3kgPSBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llc1tqXTtcclxuIFx0XHRcdFx0XHR2YXIgaWR4ID0gbW9kdWxlLmNoaWxkcmVuLmluZGV4T2YoZGVwZW5kZW5jeSk7XHJcbiBcdFx0XHRcdFx0aWYoaWR4ID49IDApIG1vZHVsZS5jaGlsZHJlbi5zcGxpY2UoaWR4LCAxKTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0fVxyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0Ly8gTm90IGluIFwiYXBwbHlcIiBwaGFzZVxyXG4gXHRcdGhvdFNldFN0YXR1cyhcImFwcGx5XCIpO1xyXG4gXHRcclxuIFx0XHRob3RDdXJyZW50SGFzaCA9IGhvdFVwZGF0ZU5ld0hhc2g7XHJcbiBcdFxyXG4gXHRcdC8vIGluc2VydCBuZXcgY29kZVxyXG4gXHRcdGZvcih2YXIgbW9kdWxlSWQgaW4gYXBwbGllZFVwZGF0ZSkge1xyXG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGFwcGxpZWRVcGRhdGUsIG1vZHVsZUlkKSkge1xyXG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IGFwcGxpZWRVcGRhdGVbbW9kdWxlSWRdO1xyXG4gXHRcdFx0fVxyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0Ly8gY2FsbCBhY2NlcHQgaGFuZGxlcnNcclxuIFx0XHR2YXIgZXJyb3IgPSBudWxsO1xyXG4gXHRcdGZvcih2YXIgbW9kdWxlSWQgaW4gb3V0ZGF0ZWREZXBlbmRlbmNpZXMpIHtcclxuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvdXRkYXRlZERlcGVuZGVuY2llcywgbW9kdWxlSWQpKSB7XHJcbiBcdFx0XHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuIFx0XHRcdFx0dmFyIG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzID0gb3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdO1xyXG4gXHRcdFx0XHR2YXIgY2FsbGJhY2tzID0gW107XHJcbiBcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcy5sZW5ndGg7IGkrKykge1xyXG4gXHRcdFx0XHRcdHZhciBkZXBlbmRlbmN5ID0gbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXNbaV07XHJcbiBcdFx0XHRcdFx0dmFyIGNiID0gbW9kdWxlLmhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbZGVwZW5kZW5jeV07XHJcbiBcdFx0XHRcdFx0aWYoY2FsbGJhY2tzLmluZGV4T2YoY2IpID49IDApIGNvbnRpbnVlO1xyXG4gXHRcdFx0XHRcdGNhbGxiYWNrcy5wdXNoKGNiKTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XHJcbiBcdFx0XHRcdFx0dmFyIGNiID0gY2FsbGJhY2tzW2ldO1xyXG4gXHRcdFx0XHRcdHRyeSB7XHJcbiBcdFx0XHRcdFx0XHRjYihvdXRkYXRlZERlcGVuZGVuY2llcyk7XHJcbiBcdFx0XHRcdFx0fSBjYXRjaChlcnIpIHtcclxuIFx0XHRcdFx0XHRcdGlmKCFlcnJvcilcclxuIFx0XHRcdFx0XHRcdFx0ZXJyb3IgPSBlcnI7XHJcbiBcdFx0XHRcdFx0fVxyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHR9XHJcbiBcdFx0fVxyXG4gXHRcclxuIFx0XHQvLyBMb2FkIHNlbGYgYWNjZXB0ZWQgbW9kdWxlc1xyXG4gXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuIFx0XHRcdHZhciBpdGVtID0gb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzW2ldO1xyXG4gXHRcdFx0dmFyIG1vZHVsZUlkID0gaXRlbS5tb2R1bGU7XHJcbiBcdFx0XHRob3RDdXJyZW50UGFyZW50cyA9IFttb2R1bGVJZF07XHJcbiBcdFx0XHR0cnkge1xyXG4gXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKTtcclxuIFx0XHRcdH0gY2F0Y2goZXJyKSB7XHJcbiBcdFx0XHRcdGlmKHR5cGVvZiBpdGVtLmVycm9ySGFuZGxlciA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiBcdFx0XHRcdFx0dHJ5IHtcclxuIFx0XHRcdFx0XHRcdGl0ZW0uZXJyb3JIYW5kbGVyKGVycik7XHJcbiBcdFx0XHRcdFx0fSBjYXRjaChlcnIpIHtcclxuIFx0XHRcdFx0XHRcdGlmKCFlcnJvcilcclxuIFx0XHRcdFx0XHRcdFx0ZXJyb3IgPSBlcnI7XHJcbiBcdFx0XHRcdFx0fVxyXG4gXHRcdFx0XHR9IGVsc2UgaWYoIWVycm9yKVxyXG4gXHRcdFx0XHRcdGVycm9yID0gZXJyO1xyXG4gXHRcdFx0fVxyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0Ly8gaGFuZGxlIGVycm9ycyBpbiBhY2NlcHQgaGFuZGxlcnMgYW5kIHNlbGYgYWNjZXB0ZWQgbW9kdWxlIGxvYWRcclxuIFx0XHRpZihlcnJvcikge1xyXG4gXHRcdFx0aG90U2V0U3RhdHVzKFwiZmFpbFwiKTtcclxuIFx0XHRcdHJldHVybiBjYWxsYmFjayhlcnJvcik7XHJcbiBcdFx0fVxyXG4gXHRcclxuIFx0XHRob3RTZXRTdGF0dXMoXCJpZGxlXCIpO1xyXG4gXHRcdGNhbGxiYWNrKG51bGwsIG91dGRhdGVkTW9kdWxlcyk7XHJcbiBcdH1cclxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2UsXG4gXHRcdFx0aG90OiBob3RDcmVhdGVNb2R1bGUobW9kdWxlSWQpLFxuIFx0XHRcdHBhcmVudHM6IGhvdEN1cnJlbnRQYXJlbnRzLFxuIFx0XHRcdGNoaWxkcmVuOiBbXVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBob3RDcmVhdGVSZXF1aXJlKG1vZHVsZUlkKSk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJidWlsZC9cIjtcblxuIFx0Ly8gX193ZWJwYWNrX2hhc2hfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5oID0gZnVuY3Rpb24oKSB7IHJldHVybiBob3RDdXJyZW50SGFzaDsgfTtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gaG90Q3JlYXRlUmVxdWlyZSgwKSgwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIGRhMjAxYjFmOWFiODE5OTE1YzY3XG4gKiovIiwiLy8gaW1wb3J0ICcuL3RhZ3MvY3VydmUtZWRpdG9yLnRhZyc7XG5yZXF1aXJlKCcuLi9jc3MvbWFpbicpO1xuaW1wb3J0IHtyZW5kZXIsIGh9IGZyb20gJ3ByZWFjdCc7XG5pbXBvcnQgQ3VydmVFZGl0b3IgZnJvbSAnLi90YWdzL2N1cnZlLWVkaXRvcic7XG5pbXBvcnQgc3RvcmUgZnJvbSAnLi9zdG9yZSc7XG5cbi8vIFRPRE9cbi8vICAgLSBpbml0IHBvaW50cyB3aXRoIGZ1bmN0aW9uXG4vLyAgIC0gbW92ZSBidW5jaCBvZiBwb2ludHMgYXQgb25jZVxuLy8gICAtIGFkZCBncmlkIGJhY2tncm91bmRcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgcmVuZGVyKDxDdXJ2ZUVkaXRvciBzdGF0ZT17IHN0b3JlLmdldFN0YXRlKCkgfSAgLz4sIGRvY3VtZW50LmJvZHkpO1xuICAvLyBzdG9yZS5zdWJzY3JpYmUocmVuZGVyUm9vdCk7XG59KTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL2pzL2FwcC5iYWJlbC5qc3hcbiAqKi8iLCIvKiogQ29weSBvd24tcHJvcGVydGllcyBmcm9tIGBwcm9wc2Agb250byBgb2JqYC5cbiAqXHRAcmV0dXJucyBvYmpcbiAqXHRAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKG9iaiwgcHJvcHMpIHtcblx0aWYgKHByb3BzKSB7XG5cdFx0Zm9yIChsZXQgaSBpbiBwcm9wcykge1xuXHRcdFx0aWYgKHByb3BzW2ldIT09dW5kZWZpbmVkKSB7XG5cdFx0XHRcdG9ialtpXSA9IHByb3BzW2ldO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gb2JqO1xufVxuXG5cbi8qKiBGYXN0IGNsb25lLiBOb3RlOiBkb2VzIG5vdCBmaWx0ZXIgb3V0IG5vbi1vd24gcHJvcGVydGllcy5cbiAqXHRAc2VlIGh0dHBzOi8vZXNiZW5jaC5jb20vYmVuY2gvNTZiYWEzNGY0NWRmNjg5NTAwMmUwM2I2XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShvYmopIHtcblx0cmV0dXJuIGV4dGVuZCh7fSwgb2JqKTtcbn1cblxuXG4vKiogR2V0IGEgZGVlcCBwcm9wZXJ0eSB2YWx1ZSBmcm9tIHRoZSBnaXZlbiBvYmplY3QsIGV4cHJlc3NlZCBpbiBkb3Qtbm90YXRpb24uXG4gKlx0QHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlbHZlKG9iaiwga2V5KSB7XG5cdGZvciAobGV0IHA9a2V5LnNwbGl0KCcuJyksIGk9MDsgaTxwLmxlbmd0aCAmJiBvYmo7IGkrKykge1xuXHRcdG9iaiA9IG9ialtwW2ldXTtcblx0fVxuXHRyZXR1cm4gb2JqO1xufVxuXG5cbi8qKiBDb252ZXJ0IGFuIEFycmF5LWxpa2Ugb2JqZWN0IHRvIGFuIEFycmF5XG4gKlx0QHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvQXJyYXkob2JqLCBvZmZzZXQpIHtcblx0cmV0dXJuIFtdLnNsaWNlLmNhbGwob2JqLCBvZmZzZXQpO1xufVxuXG5cbi8qKiBAcHJpdmF0ZSBpcyB0aGUgZ2l2ZW4gb2JqZWN0IGEgRnVuY3Rpb24/ICovXG5leHBvcnQgZnVuY3Rpb24gaXNGdW5jdGlvbihvYmopIHtcblx0cmV0dXJuICdmdW5jdGlvbic9PT10eXBlb2Ygb2JqO1xufVxuXG5cbi8qKiBAcHJpdmF0ZSBpcyB0aGUgZ2l2ZW4gb2JqZWN0IGEgU3RyaW5nPyAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU3RyaW5nKG9iaikge1xuXHRyZXR1cm4gJ3N0cmluZyc9PT10eXBlb2Ygb2JqO1xufVxuXG5cbi8qKiBDaGVjayBpZiBhIHZhbHVlIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYC5cbiAqXHRAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZW1wdHkoeCkge1xuXHRyZXR1cm4geD09PXVuZGVmaW5lZCB8fCB4PT09bnVsbDtcbn1cblxuXG4vKiogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBgbnVsbGAsIGB1bmRlZmluZWRgLCBvciBleHBsaWNpdGx5IGBmYWxzZWAuICovXG5leHBvcnQgZnVuY3Rpb24gZmFsc2V5KHZhbHVlKSB7XG5cdHJldHVybiB2YWx1ZT09PWZhbHNlIHx8IGVtcHR5KHZhbHVlKTtcbn1cblxuXG4vKiogQ29udmVydCBhIGhhc2htYXAgb2YgQ1NTIGNsYXNzZXMgdG8gYSBzcGFjZS1kZWxpbWl0ZWQgY2xhc3NOYW1lIHN0cmluZ1xuICpcdEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNoVG9DbGFzc05hbWUoYykge1xuXHRsZXQgc3RyID0gJyc7XG5cdGZvciAobGV0IHByb3AgaW4gYykge1xuXHRcdGlmIChjW3Byb3BdKSB7XG5cdFx0XHRpZiAoc3RyKSBzdHIgKz0gJyAnO1xuXHRcdFx0c3RyICs9IHByb3A7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBzdHI7XG59XG5cblxuLyoqIEp1c3QgYSBtZW1vaXplZCBTdHJpbmcjdG9Mb3dlckNhc2UgKi9cbmxldCBsY0NhY2hlID0ge307XG5leHBvcnQgY29uc3QgdG9Mb3dlckNhc2UgPSBzID0+IGxjQ2FjaGVbc10gfHwgKGxjQ2FjaGVbc10gPSBzLnRvTG93ZXJDYXNlKCkpO1xuXG5cbi8qKiBDYWxsIGEgZnVuY3Rpb24gYXN5bmNocm9ub3VzbHksIGFzIHNvb24gYXMgcG9zc2libGUuXG4gKlx0QHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqL1xubGV0IHJlc29sdmVkID0gdHlwZW9mIFByb21pc2UhPT0ndW5kZWZpbmVkJyAmJiBQcm9taXNlLnJlc29sdmUoKTtcbmV4cG9ydCBjb25zdCBzZXRJbW1lZGlhdGUgPSByZXNvbHZlZCA/IChmID0+IHsgcmVzb2x2ZWQudGhlbihmKTsgfSkgOiBzZXRUaW1lb3V0O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9+L3ByZWFjdC9zcmMvdXRpbC5qc1xuICoqLyIsImltcG9ydCB7IFZOb2RlIH0gZnJvbSAnLi92bm9kZSc7XG5pbXBvcnQgb3B0aW9ucyBmcm9tICcuL29wdGlvbnMnO1xuaW1wb3J0IHsgZmFsc2V5LCBpc0Z1bmN0aW9uLCBpc1N0cmluZywgaGFzaFRvQ2xhc3NOYW1lIH0gZnJvbSAnLi91dGlsJztcblxuXG5jb25zdCBTSEFSRURfVEVNUF9BUlJBWSA9IFtdO1xuXG5cbi8qKiBKU1gvaHlwZXJzY3JpcHQgcmV2aXZlclxuICpcdEBzZWUgaHR0cDovL2phc29uZm9ybWF0LmNvbS93dGYtaXMtanN4XG4gKlx0QHB1YmxpY1xuICogIEBleGFtcGxlXG4gKiAgLyoqIEBqc3ggaCAqXFwvXG4gKiAgaW1wb3J0IHsgcmVuZGVyLCBoIH0gZnJvbSAncHJlYWN0JztcbiAqICByZW5kZXIoPHNwYW4+Zm9vPC9zcGFuPiwgZG9jdW1lbnQuYm9keSk7XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoKG5vZGVOYW1lLCBhdHRyaWJ1dGVzLCBmaXJzdENoaWxkKSB7XG5cdGxldCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLFxuXHRcdGNoaWxkcmVuLCBhcnIsIGxhc3RTaW1wbGU7XG5cblxuXHRpZiAobGVuPjIpIHtcblx0XHRsZXQgdHlwZSA9IHR5cGVvZiBmaXJzdENoaWxkO1xuXHRcdGlmIChsZW49PT0zICYmIHR5cGUhPT0nb2JqZWN0JyAmJiB0eXBlIT09J2Z1bmN0aW9uJykge1xuXHRcdFx0aWYgKCFmYWxzZXkoZmlyc3RDaGlsZCkpIHtcblx0XHRcdFx0Y2hpbGRyZW4gPSBbU3RyaW5nKGZpcnN0Q2hpbGQpXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRjaGlsZHJlbiA9IFtdO1xuXHRcdFx0Zm9yIChsZXQgaT0yOyBpPGxlbjsgaSsrKSB7XG5cdFx0XHRcdGxldCBwID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0XHRpZiAoZmFsc2V5KHApKSBjb250aW51ZTtcblx0XHRcdFx0aWYgKHAuam9pbikgYXJyID0gcDtcblx0XHRcdFx0ZWxzZSAoYXJyID0gU0hBUkVEX1RFTVBfQVJSQVkpWzBdID0gcDtcblx0XHRcdFx0Zm9yIChsZXQgaj0wOyBqPGFyci5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdGxldCBjaGlsZCA9IGFycltqXSxcblx0XHRcdFx0XHRcdHNpbXBsZSA9ICEoZmFsc2V5KGNoaWxkKSB8fCBpc0Z1bmN0aW9uKGNoaWxkKSB8fCBjaGlsZCBpbnN0YW5jZW9mIFZOb2RlKTtcblx0XHRcdFx0XHRpZiAoc2ltcGxlICYmICFpc1N0cmluZyhjaGlsZCkpIGNoaWxkID0gU3RyaW5nKGNoaWxkKTtcblx0XHRcdFx0XHRpZiAoc2ltcGxlICYmIGxhc3RTaW1wbGUpIHtcblx0XHRcdFx0XHRcdGNoaWxkcmVuW2NoaWxkcmVuLmxlbmd0aC0xXSArPSBjaGlsZDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSBpZiAoIWZhbHNleShjaGlsZCkpIHtcblx0XHRcdFx0XHRcdGNoaWxkcmVuLnB1c2goY2hpbGQpO1xuXHRcdFx0XHRcdFx0bGFzdFNpbXBsZSA9IHNpbXBsZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblx0ZWxzZSBpZiAoYXR0cmlidXRlcyAmJiBhdHRyaWJ1dGVzLmNoaWxkcmVuKSB7XG5cdFx0cmV0dXJuIGgobm9kZU5hbWUsIGF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXMuY2hpbGRyZW4pO1xuXHR9XG5cblx0aWYgKGF0dHJpYnV0ZXMpIHtcblx0XHRpZiAoYXR0cmlidXRlcy5jaGlsZHJlbikge1xuXHRcdFx0ZGVsZXRlIGF0dHJpYnV0ZXMuY2hpbGRyZW47XG5cdFx0fVxuXG5cdFx0aWYgKCFpc0Z1bmN0aW9uKG5vZGVOYW1lKSkge1xuXHRcdFx0Ly8gbm9ybWFsaXplIGNsYXNzTmFtZSB0byBjbGFzcy5cblx0XHRcdGlmICgnY2xhc3NOYW1lJyBpbiBhdHRyaWJ1dGVzKSB7XG5cdFx0XHRcdGF0dHJpYnV0ZXMuY2xhc3MgPSBhdHRyaWJ1dGVzLmNsYXNzTmFtZTtcblx0XHRcdFx0ZGVsZXRlIGF0dHJpYnV0ZXMuY2xhc3NOYW1lO1xuXHRcdFx0fVxuXG5cdFx0XHRsYXN0U2ltcGxlID0gYXR0cmlidXRlcy5jbGFzcztcblx0XHRcdGlmIChsYXN0U2ltcGxlICYmICFpc1N0cmluZyhsYXN0U2ltcGxlKSkge1xuXHRcdFx0XHRhdHRyaWJ1dGVzLmNsYXNzID0gaGFzaFRvQ2xhc3NOYW1lKGxhc3RTaW1wbGUpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBsYXN0U2ltcGxlID0gYXR0cmlidXRlcy5zdHlsZTtcblx0XHRcdC8vIGlmIChsYXN0U2ltcGxlICYmICFpc1N0cmluZyhsYXN0U2ltcGxlKSkge1xuXHRcdFx0Ly8gXHRhdHRyaWJ1dGVzLnN0eWxlID0gc3R5bGVPYmpUb0NzcyhsYXN0U2ltcGxlKTtcblx0XHRcdC8vIH1cblx0XHR9XG5cdH1cblxuXHRsZXQgcCA9IG5ldyBWTm9kZShub2RlTmFtZSwgYXR0cmlidXRlcyB8fCB1bmRlZmluZWQsIGNoaWxkcmVuKTtcblx0aWYgKG9wdGlvbnMudm5vZGUpIG9wdGlvbnMudm5vZGUocCk7XG5cdHJldHVybiBwO1xufVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9+L3ByZWFjdC9zcmMvaC5qc1xuICoqLyIsImltcG9ydCB7IGNsb25lLCBleHRlbmQsIHRvQXJyYXkgfSBmcm9tICcuL3V0aWwnO1xuaW1wb3J0IHsgaCB9IGZyb20gJy4vaCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZUVsZW1lbnQodm5vZGUsIHByb3BzKSB7XG5cdHJldHVybiBoKFxuXHRcdHZub2RlLm5vZGVOYW1lLFxuXHRcdGV4dGVuZChjbG9uZSh2bm9kZS5hdHRyaWJ1dGVzKSwgcHJvcHMpLFxuXHRcdGFyZ3VtZW50cy5sZW5ndGg+MiA/IHRvQXJyYXkoYXJndW1lbnRzLCAyKSA6IHZub2RlLmNoaWxkcmVuXG5cdCk7XG59XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL34vcHJlYWN0L3NyYy9jbG9uZS1lbGVtZW50LmpzXG4gKiovIiwiaW1wb3J0IHsgZW1wdHksIGlzU3RyaW5nLCBpc0Z1bmN0aW9uLCBkZWx2ZSB9IGZyb20gJy4vdXRpbCc7XG5cbi8qKiBDcmVhdGUgYW4gRXZlbnQgaGFuZGxlciBmdW5jdGlvbiB0aGF0IHNldHMgYSBnaXZlbiBzdGF0ZSBwcm9wZXJ0eS5cbiAqXHRAcGFyYW0ge0NvbXBvbmVudH0gY29tcG9uZW50XHRUaGUgY29tcG9uZW50IHdob3NlIHN0YXRlIHNob3VsZCBiZSB1cGRhdGVkXG4gKlx0QHBhcmFtIHtzdHJpbmd9IGtleVx0XHRcdFx0QSBkb3Qtbm90YXRlZCBrZXkgcGF0aCB0byB1cGRhdGUgaW4gdGhlIGNvbXBvbmVudCdzIHN0YXRlXG4gKlx0QHBhcmFtIHtzdHJpbmd9IGV2ZW50UGF0aFx0XHRBIGRvdC1ub3RhdGVkIGtleSBwYXRoIHRvIHRoZSB2YWx1ZSB0aGF0IHNob3VsZCBiZSByZXRyaWV2ZWQgZnJvbSB0aGUgRXZlbnQgb3IgY29tcG9uZW50XG4gKlx0QHJldHVybnMge2Z1bmN0aW9ufSBsaW5rZWRTdGF0ZUhhbmRsZXJcbiAqXHRAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTGlua2VkU3RhdGUoY29tcG9uZW50LCBrZXksIGV2ZW50UGF0aCkge1xuXHRsZXQgcGF0aCA9IGtleS5zcGxpdCgnLicpLFxuXHRcdHAwID0gcGF0aFswXTtcblx0cmV0dXJuIGZ1bmN0aW9uKGUpIHtcblx0XHRsZXQgdCA9IGUgJiYgZS5jdXJyZW50VGFyZ2V0IHx8IHRoaXMsXG5cdFx0XHRzID0gY29tcG9uZW50LnN0YXRlLFxuXHRcdFx0b2JqID0gcyxcblx0XHRcdHYsIGk7XG5cdFx0aWYgKGlzU3RyaW5nKGV2ZW50UGF0aCkpIHtcblx0XHRcdHYgPSBkZWx2ZShlLCBldmVudFBhdGgpO1xuXHRcdFx0aWYgKGVtcHR5KHYpICYmICh0PXQuX2NvbXBvbmVudCkpIHtcblx0XHRcdFx0diA9IGRlbHZlKHQsIGV2ZW50UGF0aCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0diA9IHQubm9kZU5hbWUgPyAoKHQubm9kZU5hbWUrdC50eXBlKS5tYXRjaCgvXmlucHV0KGNoZWNrfHJhZCkvaSkgPyB0LmNoZWNrZWQgOiB0LnZhbHVlKSA6IGU7XG5cdFx0fVxuXHRcdGlmIChpc0Z1bmN0aW9uKHYpKSB2ID0gdi5jYWxsKHQpO1xuXHRcdGlmIChwYXRoLmxlbmd0aD4xKSB7XG5cdFx0XHRmb3IgKGk9MDsgaTxwYXRoLmxlbmd0aC0xOyBpKyspIHtcblx0XHRcdFx0b2JqID0gb2JqW3BhdGhbaV1dIHx8IChvYmpbcGF0aFtpXV0gPSB7fSk7XG5cdFx0XHR9XG5cdFx0XHRvYmpbcGF0aFtpXV0gPSB2O1xuXHRcdFx0diA9IHNbcDBdO1xuXHRcdH1cblx0XHRjb21wb25lbnQuc2V0U3RhdGUoeyBbcDBdOiB2IH0pO1xuXHR9O1xufVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9+L3ByZWFjdC9zcmMvbGlua2VkLXN0YXRlLmpzXG4gKiovIiwiaW1wb3J0IG9wdGlvbnMgZnJvbSAnLi9vcHRpb25zJztcbmltcG9ydCB7IHNldEltbWVkaWF0ZSB9IGZyb20gJy4vdXRpbCc7XG5pbXBvcnQgeyByZW5kZXJDb21wb25lbnQgfSBmcm9tICcuL3Zkb20vY29tcG9uZW50JztcblxuLyoqIE1hbmFnZWQgcXVldWUgb2YgZGlydHkgY29tcG9uZW50cyB0byBiZSByZS1yZW5kZXJlZCAqL1xuXG4vLyBpdGVtcy9pdGVtc09mZmxpbmUgc3dhcCBvbiBlYWNoIHJlcmVuZGVyKCkgY2FsbCAoanVzdCBhIHNpbXBsZSBwb29sIHRlY2huaXF1ZSlcbmxldCBpdGVtcyA9IFtdLFxuXHRpdGVtc09mZmxpbmUgPSBbXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGVucXVldWVSZW5kZXIoY29tcG9uZW50KSB7XG5cdGlmIChpdGVtcy5wdXNoKGNvbXBvbmVudCkhPT0xKSByZXR1cm47XG5cblx0KG9wdGlvbnMuZGVib3VuY2VSZW5kZXJpbmcgfHwgc2V0SW1tZWRpYXRlKShyZXJlbmRlcik7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHJlcmVuZGVyKCkge1xuXHRpZiAoIWl0ZW1zLmxlbmd0aCkgcmV0dXJuO1xuXG5cdGxldCBjdXJyZW50SXRlbXMgPSBpdGVtcyxcblx0XHRwO1xuXG5cdC8vIHN3YXAgb25saW5lICYgb2ZmbGluZVxuXHRpdGVtcyA9IGl0ZW1zT2ZmbGluZTtcblx0aXRlbXNPZmZsaW5lID0gY3VycmVudEl0ZW1zO1xuXG5cdHdoaWxlICggKHAgPSBjdXJyZW50SXRlbXMucG9wKCkpICkge1xuXHRcdGlmIChwLl9kaXJ0eSkgcmVuZGVyQ29tcG9uZW50KHApO1xuXHR9XG59XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL34vcHJlYWN0L3NyYy9yZW5kZXItcXVldWUuanNcbiAqKi8iLCJpbXBvcnQgeyBBVFRSX0tFWSwgTk9OX0RJTUVOU0lPTl9QUk9QUyB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgb3B0aW9ucyBmcm9tICcuLi9vcHRpb25zJztcbmltcG9ydCB7IHRvTG93ZXJDYXNlLCBlbXB0eSwgZmFsc2V5LCBpc1N0cmluZywgaXNGdW5jdGlvbiB9IGZyb20gJy4uL3V0aWwnO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVOb2RlRGF0YShub2RlLCBkYXRhKSB7XG5cdHJldHVybiBub2RlW0FUVFJfS0VZXSB8fCAobm9kZVtBVFRSX0tFWV0gPSAoZGF0YSB8fCB7fSkpO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROb2RlVHlwZShub2RlKSB7XG5cdGlmIChub2RlIGluc3RhbmNlb2YgVGV4dCkgcmV0dXJuIDM7XG5cdGlmIChub2RlIGluc3RhbmNlb2YgRWxlbWVudCkgcmV0dXJuIDE7XG5cdHJldHVybiAwO1xufVxuXG5cbi8qKiBSZW1vdmVzIGEgZ2l2ZW4gRE9NIE5vZGUgZnJvbSBpdHMgcGFyZW50LiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSkge1xuXHRsZXQgcCA9IG5vZGUucGFyZW50Tm9kZTtcblx0aWYgKHApIHAucmVtb3ZlQ2hpbGQobm9kZSk7XG59XG5cblxuLyoqIFNldCBhIG5hbWVkIGF0dHJpYnV0ZSBvbiB0aGUgZ2l2ZW4gTm9kZSwgd2l0aCBzcGVjaWFsIGJlaGF2aW9yIGZvciBzb21lIG5hbWVzIGFuZCBldmVudCBoYW5kbGVycy5cbiAqXHRJZiBgdmFsdWVgIGlzIGBudWxsYCwgdGhlIGF0dHJpYnV0ZS9oYW5kbGVyIHdpbGwgYmUgcmVtb3ZlZC5cbiAqXHRAcGFyYW0ge0VsZW1lbnR9IG5vZGVcdEFuIGVsZW1lbnQgdG8gbXV0YXRlXG4gKlx0QHBhcmFtIHtzdHJpbmd9IG5hbWVcdFRoZSBuYW1lL2tleSB0byBzZXQsIHN1Y2ggYXMgYW4gZXZlbnQgb3IgYXR0cmlidXRlIG5hbWVcbiAqXHRAcGFyYW0ge2FueX0gdmFsdWVcdFx0QW4gYXR0cmlidXRlIHZhbHVlLCBzdWNoIGFzIGEgZnVuY3Rpb24gdG8gYmUgdXNlZCBhcyBhbiBldmVudCBoYW5kbGVyXG4gKlx0QHBhcmFtIHthbnl9IHByZXZpb3VzVmFsdWVcdFRoZSBsYXN0IHZhbHVlIHRoYXQgd2FzIHNldCBmb3IgdGhpcyBuYW1lL25vZGUgcGFpclxuICpcdEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRBY2Nlc3Nvcihub2RlLCBuYW1lLCB2YWx1ZSwgb2xkLCBpc1N2Zykge1xuXHRlbnN1cmVOb2RlRGF0YShub2RlKVtuYW1lXSA9IHZhbHVlO1xuXG5cdGlmIChuYW1lPT09J2tleScgfHwgbmFtZT09PSdjaGlsZHJlbicpIHJldHVybjtcblxuXHRpZiAobmFtZT09PSdjbGFzcycgJiYgIWlzU3ZnKSB7XG5cdFx0bm9kZS5jbGFzc05hbWUgPSB2YWx1ZSB8fCAnJztcblx0fVxuXHRlbHNlIGlmIChuYW1lPT09J3N0eWxlJykge1xuXHRcdGlmICghdmFsdWUgfHwgaXNTdHJpbmcodmFsdWUpIHx8IGlzU3RyaW5nKG9sZCkpIHtcblx0XHRcdG5vZGUuc3R5bGUuY3NzVGV4dCA9IHZhbHVlIHx8ICcnO1xuXHRcdH1cblx0XHRpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlPT09J29iamVjdCcpIHtcblx0XHRcdGlmICghaXNTdHJpbmcob2xkKSkge1xuXHRcdFx0XHRmb3IgKGxldCBpIGluIG9sZCkgaWYgKCEoaSBpbiB2YWx1ZSkpIG5vZGUuc3R5bGVbaV0gPSAnJztcblx0XHRcdH1cblx0XHRcdGZvciAobGV0IGkgaW4gdmFsdWUpIHtcblx0XHRcdFx0bm9kZS5zdHlsZVtpXSA9IHR5cGVvZiB2YWx1ZVtpXT09PSdudW1iZXInICYmICFOT05fRElNRU5TSU9OX1BST1BTW2ldID8gKHZhbHVlW2ldKydweCcpIDogdmFsdWVbaV07XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdGVsc2UgaWYgKG5hbWU9PT0nZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwnKSB7XG5cdFx0aWYgKHZhbHVlKSBub2RlLmlubmVySFRNTCA9IHZhbHVlLl9faHRtbDtcblx0fVxuXHRlbHNlIGlmIChuYW1lWzBdPT09J28nICYmIG5hbWVbMV09PT0nbicpIHtcblx0XHRsZXQgbCA9IG5vZGUuX2xpc3RlbmVycyB8fCAobm9kZS5fbGlzdGVuZXJzID0ge30pO1xuXHRcdG5hbWUgPSB0b0xvd2VyQ2FzZShuYW1lLnN1YnN0cmluZygyKSk7XG5cdFx0aWYgKHZhbHVlKSB7XG5cdFx0XHRpZiAoIWxbbmFtZV0pIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBldmVudFByb3h5KTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAobFtuYW1lXSkge1xuXHRcdFx0bm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIGV2ZW50UHJveHkpO1xuXHRcdH1cblx0XHRsW25hbWVdID0gdmFsdWU7XG5cdH1cblx0ZWxzZSBpZiAobmFtZSE9PSd0eXBlJyAmJiAhaXNTdmcgJiYgbmFtZSBpbiBub2RlKSB7XG5cdFx0c2V0UHJvcGVydHkobm9kZSwgbmFtZSwgZW1wdHkodmFsdWUpID8gJycgOiB2YWx1ZSk7XG5cdFx0aWYgKGZhbHNleSh2YWx1ZSkpIG5vZGUucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuXHR9XG5cdGVsc2Uge1xuXHRcdGxldCBucyA9IGlzU3ZnICYmIG5hbWUubWF0Y2goL154bGlua1xcOj8oLispLyk7XG5cdFx0aWYgKGZhbHNleSh2YWx1ZSkpIHtcblx0XHRcdGlmIChucykgbm9kZS5yZW1vdmVBdHRyaWJ1dGVOUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsIHRvTG93ZXJDYXNlKG5zWzFdKSk7XG5cdFx0XHRlbHNlIG5vZGUucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuXHRcdH1cblx0XHRlbHNlIGlmICh0eXBlb2YgdmFsdWUhPT0nb2JqZWN0JyAmJiAhaXNGdW5jdGlvbih2YWx1ZSkpIHtcblx0XHRcdGlmIChucykgbm9kZS5zZXRBdHRyaWJ1dGVOUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsIHRvTG93ZXJDYXNlKG5zWzFdKSwgdmFsdWUpO1xuXHRcdFx0ZWxzZSBub2RlLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG5cdFx0fVxuXHR9XG59XG5cblxuLyoqIEF0dGVtcHQgdG8gc2V0IGEgRE9NIHByb3BlcnR5IHRvIHRoZSBnaXZlbiB2YWx1ZS5cbiAqXHRJRSAmIEZGIHRocm93IGZvciBjZXJ0YWluIHByb3BlcnR5LXZhbHVlIGNvbWJpbmF0aW9ucy5cbiAqL1xuZnVuY3Rpb24gc2V0UHJvcGVydHkobm9kZSwgbmFtZSwgdmFsdWUpIHtcblx0dHJ5IHtcblx0XHRub2RlW25hbWVdID0gdmFsdWU7XG5cdH0gY2F0Y2ggKGUpIHsgfVxufVxuXG5cbi8qKiBQcm94eSBhbiBldmVudCB0byBob29rZWQgZXZlbnQgaGFuZGxlcnNcbiAqXHRAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBldmVudFByb3h5KGUpIHtcblx0cmV0dXJuIHRoaXMuX2xpc3RlbmVyc1tlLnR5cGVdKG9wdGlvbnMuZXZlbnQgJiYgb3B0aW9ucy5ldmVudChlKSB8fCBlKTtcbn1cblxuXG4vKiogR2V0IGEgbm9kZSdzIGF0dHJpYnV0ZXMgYXMgYSBoYXNobWFwLlxuICpcdEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSYXdOb2RlQXR0cmlidXRlcyhub2RlKSB7XG5cdGxldCBhdHRycyA9IHt9O1xuXHRmb3IgKGxldCBpPW5vZGUuYXR0cmlidXRlcy5sZW5ndGg7IGktLTsgKSB7XG5cdFx0YXR0cnNbbm9kZS5hdHRyaWJ1dGVzW2ldLm5hbWVdID0gbm9kZS5hdHRyaWJ1dGVzW2ldLnZhbHVlO1xuXHR9XG5cdHJldHVybiBhdHRycztcbn1cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vfi9wcmVhY3Qvc3JjL2RvbS9pbmRleC5qc1xuICoqLyIsImltcG9ydCB7IGNsb25lLCBleHRlbmQsIGlzU3RyaW5nLCBpc0Z1bmN0aW9uLCB0b0xvd2VyQ2FzZSB9IGZyb20gJy4uL3V0aWwnO1xuaW1wb3J0IHsgaXNGdW5jdGlvbmFsQ29tcG9uZW50IH0gZnJvbSAnLi9mdW5jdGlvbmFsLWNvbXBvbmVudCc7XG5pbXBvcnQgeyBnZXROb2RlVHlwZSB9IGZyb20gJy4uL2RvbS9pbmRleCc7XG5cblxuLyoqIENoZWNrIGlmIHR3byBub2RlcyBhcmUgZXF1aXZhbGVudC5cbiAqXHRAcGFyYW0ge0VsZW1lbnR9IG5vZGVcbiAqXHRAcGFyYW0ge1ZOb2RlfSB2bm9kZVxuICpcdEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1NhbWVOb2RlVHlwZShub2RlLCB2bm9kZSkge1xuXHRpZiAoaXNTdHJpbmcodm5vZGUpKSB7XG5cdFx0cmV0dXJuIGdldE5vZGVUeXBlKG5vZGUpPT09Mztcblx0fVxuXHRpZiAoaXNTdHJpbmcodm5vZGUubm9kZU5hbWUpKSB7XG5cdFx0cmV0dXJuIGlzTmFtZWROb2RlKG5vZGUsIHZub2RlLm5vZGVOYW1lKTtcblx0fVxuXHRpZiAoaXNGdW5jdGlvbih2bm9kZS5ub2RlTmFtZSkpIHtcblx0XHRyZXR1cm4gbm9kZS5fY29tcG9uZW50Q29uc3RydWN0b3I9PT12bm9kZS5ub2RlTmFtZSB8fCBpc0Z1bmN0aW9uYWxDb21wb25lbnQodm5vZGUpO1xuXHR9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTmFtZWROb2RlKG5vZGUsIG5vZGVOYW1lKSB7XG5cdHJldHVybiBub2RlLm5vcm1hbGl6ZWROb2RlTmFtZT09PW5vZGVOYW1lIHx8IHRvTG93ZXJDYXNlKG5vZGUubm9kZU5hbWUpPT09dG9Mb3dlckNhc2Uobm9kZU5hbWUpO1xufVxuXG5cbi8qKlxuICogUmVjb25zdHJ1Y3QgQ29tcG9uZW50LXN0eWxlIGBwcm9wc2AgZnJvbSBhIFZOb2RlLlxuICogRW5zdXJlcyBkZWZhdWx0L2ZhbGxiYWNrIHZhbHVlcyBmcm9tIGBkZWZhdWx0UHJvcHNgOlxuICogT3duLXByb3BlcnRpZXMgb2YgYGRlZmF1bHRQcm9wc2Agbm90IHByZXNlbnQgaW4gYHZub2RlLmF0dHJpYnV0ZXNgIGFyZSBhZGRlZC5cbiAqIEBwYXJhbSB7Vk5vZGV9IHZub2RlXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBwcm9wc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Tm9kZVByb3BzKHZub2RlKSB7XG5cdGxldCBkZWZhdWx0UHJvcHMgPSB2bm9kZS5ub2RlTmFtZS5kZWZhdWx0UHJvcHMsXG5cdFx0cHJvcHMgPSBjbG9uZShkZWZhdWx0UHJvcHMgfHwgdm5vZGUuYXR0cmlidXRlcyk7XG5cblx0aWYgKGRlZmF1bHRQcm9wcykgZXh0ZW5kKHByb3BzLCB2bm9kZS5hdHRyaWJ1dGVzKTtcblxuXHRpZiAodm5vZGUuY2hpbGRyZW4pIHByb3BzLmNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47XG5cblx0cmV0dXJuIHByb3BzO1xufVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9+L3ByZWFjdC9zcmMvdmRvbS9pbmRleC5qc1xuICoqLyIsImltcG9ydCB7IHRvTG93ZXJDYXNlIH0gZnJvbSAnLi4vdXRpbCc7XG5pbXBvcnQgeyBlbnN1cmVOb2RlRGF0YSwgZ2V0Tm9kZVR5cGUsIGdldFJhd05vZGVBdHRyaWJ1dGVzLCByZW1vdmVOb2RlIH0gZnJvbSAnLi9pbmRleCc7XG5cbi8qKiBET00gbm9kZSBwb29sLCBrZXllZCBvbiBub2RlTmFtZS4gKi9cblxuY29uc3Qgbm9kZXMgPSB7fTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbGxlY3ROb2RlKG5vZGUpIHtcblx0Y2xlYW5Ob2RlKG5vZGUpO1xuXHRsZXQgbmFtZSA9IHRvTG93ZXJDYXNlKG5vZGUubm9kZU5hbWUpLFxuXHRcdGxpc3QgPSBub2Rlc1tuYW1lXTtcblx0aWYgKGxpc3QpIGxpc3QucHVzaChub2RlKTtcblx0ZWxzZSBub2Rlc1tuYW1lXSA9IFtub2RlXTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTm9kZShub2RlTmFtZSwgaXNTdmcpIHtcblx0bGV0IG5hbWUgPSB0b0xvd2VyQ2FzZShub2RlTmFtZSksXG5cdFx0bm9kZSA9IG5vZGVzW25hbWVdICYmIG5vZGVzW25hbWVdLnBvcCgpIHx8IChpc1N2ZyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCBub2RlTmFtZSkgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGVOYW1lKSk7XG5cdGVuc3VyZU5vZGVEYXRhKG5vZGUpO1xuXHRub2RlLm5vcm1hbGl6ZWROb2RlTmFtZSA9IG5hbWU7XG5cdHJldHVybiBub2RlO1xufVxuXG5cbmZ1bmN0aW9uIGNsZWFuTm9kZShub2RlKSB7XG5cdHJlbW92ZU5vZGUobm9kZSk7XG5cblx0aWYgKGdldE5vZGVUeXBlKG5vZGUpIT09MSkgcmV0dXJuO1xuXG5cdC8vIFdoZW4gcmVjbGFpbWluZyBleHRlcm5hbGx5IGNyZWF0ZWQgbm9kZXMsIHNlZWQgdGhlIGF0dHJpYnV0ZSBjYWNoZTogKElzc3VlICM5NylcblxuXHRlbnN1cmVOb2RlRGF0YShub2RlLCBnZXRSYXdOb2RlQXR0cmlidXRlcyhub2RlKSk7XG5cblx0bm9kZS5fY29tcG9uZW50ID0gbm9kZS5fY29tcG9uZW50Q29uc3RydWN0b3IgPSBudWxsO1xuXG5cdC8vIGlmIChub2RlLmNoaWxkTm9kZXMubGVuZ3RoPjApIHtcblx0Ly8gXHRjb25zb2xlLnRyYWNlKGBXYXJuaW5nOiBSZWN5Y2xlciBjb2xsZWN0aW5nIDwke25vZGUubm9kZU5hbWV9PiB3aXRoICR7bm9kZS5jaGlsZE5vZGVzLmxlbmd0aH0gY2hpbGRyZW4uYCk7XG5cdC8vIFx0Zm9yIChsZXQgaT1ub2RlLmNoaWxkTm9kZXMubGVuZ3RoOyBpLS07ICkgY29sbGVjdE5vZGUobm9kZS5jaGlsZE5vZGVzW2ldKTtcblx0Ly8gfVxufVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9+L3ByZWFjdC9zcmMvZG9tL3JlY3ljbGVyLmpzXG4gKiovIiwiaW1wb3J0IHsgQVRUUl9LRVkgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgdG9Mb3dlckNhc2UsIGVtcHR5LCBpc1N0cmluZywgaXNGdW5jdGlvbiB9IGZyb20gJy4uL3V0aWwnO1xuaW1wb3J0IHsgaXNTYW1lTm9kZVR5cGUsIGlzTmFtZWROb2RlIH0gZnJvbSAnLi9pbmRleCc7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uYWxDb21wb25lbnQsIGJ1aWxkRnVuY3Rpb25hbENvbXBvbmVudCB9IGZyb20gJy4vZnVuY3Rpb25hbC1jb21wb25lbnQnO1xuaW1wb3J0IHsgYnVpbGRDb21wb25lbnRGcm9tVk5vZGUgfSBmcm9tICcuL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBzZXRBY2Nlc3NvciwgZ2V0UmF3Tm9kZUF0dHJpYnV0ZXMsIGdldE5vZGVUeXBlIH0gZnJvbSAnLi4vZG9tL2luZGV4JztcbmltcG9ydCB7IGNyZWF0ZU5vZGUsIGNvbGxlY3ROb2RlIH0gZnJvbSAnLi4vZG9tL3JlY3ljbGVyJztcbmltcG9ydCB7IHVubW91bnRDb21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudCc7XG5cblxuLyoqIERpZmYgcmVjdXJzaW9uIGNvdW50LCB1c2VkIHRvIHRyYWNrIHRoZSBlbmQgb2YgdGhlIGRpZmYgY3ljbGUuICovXG5leHBvcnQgY29uc3QgbW91bnRzID0gW107XG5cbi8qKiBEaWZmIHJlY3Vyc2lvbiBjb3VudCwgdXNlZCB0byB0cmFjayB0aGUgZW5kIG9mIHRoZSBkaWZmIGN5Y2xlLiAqL1xuZXhwb3J0IGxldCBkaWZmTGV2ZWwgPSAwO1xuXG5sZXQgaXNTdmdNb2RlID0gZmFsc2U7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGZsdXNoTW91bnRzKCkge1xuXHRsZXQgYztcblx0d2hpbGUgKChjPW1vdW50cy5wb3AoKSkpIHtcblx0XHRpZiAoYy5jb21wb25lbnREaWRNb3VudCkgYy5jb21wb25lbnREaWRNb3VudCgpO1xuXHR9XG59XG5cblxuLyoqIEFwcGx5IGRpZmZlcmVuY2VzIGluIGEgZ2l2ZW4gdm5vZGUgKGFuZCBpdCdzIGRlZXAgY2hpbGRyZW4pIHRvIGEgcmVhbCBET00gTm9kZS5cbiAqXHRAcGFyYW0ge0VsZW1lbnR9IFtkb209bnVsbF1cdFx0QSBET00gbm9kZSB0byBtdXRhdGUgaW50byB0aGUgc2hhcGUgb2YgdGhlIGB2bm9kZWBcbiAqXHRAcGFyYW0ge1ZOb2RlfSB2bm9kZVx0XHRcdEEgVk5vZGUgKHdpdGggZGVzY2VuZGFudHMgZm9ybWluZyBhIHRyZWUpIHJlcHJlc2VudGluZyB0aGUgZGVzaXJlZCBET00gc3RydWN0dXJlXG4gKlx0QHJldHVybnMge0VsZW1lbnR9IGRvbVx0XHRcdFRoZSBjcmVhdGVkL211dGF0ZWQgZWxlbWVudFxuICpcdEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaWZmKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsLCBwYXJlbnQpIHtcblx0ZGlmZkxldmVsKys7XG5cdGxldCByZXQgPSBpZGlmZihkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCk7XG5cdGlmIChwYXJlbnQgJiYgcmV0LnBhcmVudE5vZGUhPT1wYXJlbnQpIHBhcmVudC5hcHBlbmRDaGlsZChyZXQpO1xuXHRpZiAoIS0tZGlmZkxldmVsKSBmbHVzaE1vdW50cygpO1xuXHRyZXR1cm4gcmV0O1xufVxuXG5cbmZ1bmN0aW9uIGlkaWZmKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsKSB7XG5cdGxldCBvcmlnaW5hbEF0dHJpYnV0ZXMgPSB2bm9kZSAmJiB2bm9kZS5hdHRyaWJ1dGVzO1xuXG5cdHdoaWxlIChpc0Z1bmN0aW9uYWxDb21wb25lbnQodm5vZGUpKSB7XG5cdFx0dm5vZGUgPSBidWlsZEZ1bmN0aW9uYWxDb21wb25lbnQodm5vZGUsIGNvbnRleHQpO1xuXHR9XG5cblx0aWYgKGVtcHR5KHZub2RlKSkge1xuXHRcdHJldHVybiBkb2N1bWVudC5jcmVhdGVDb21tZW50KCcnKTtcblx0fVxuXG5cdGlmIChpc1N0cmluZyh2bm9kZSkpIHtcblx0XHRpZiAoZG9tKSB7XG5cdFx0XHRpZiAoZ2V0Tm9kZVR5cGUoZG9tKT09PTMgJiYgZG9tLnBhcmVudE5vZGUpIHtcblx0XHRcdFx0aWYgKGRvbS5ub2RlVmFsdWUhPXZub2RlKSB7XG5cdFx0XHRcdFx0ZG9tLm5vZGVWYWx1ZSA9IHZub2RlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBkb207XG5cdFx0XHR9XG5cdFx0XHRjb2xsZWN0Tm9kZShkb20pO1xuXHRcdH1cblx0XHRyZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodm5vZGUpO1xuXHR9XG5cblx0bGV0IG91dCA9IGRvbSxcblx0XHRub2RlTmFtZSA9IHZub2RlLm5vZGVOYW1lLFxuXHRcdHN2Z01vZGU7XG5cblx0aWYgKGlzRnVuY3Rpb24obm9kZU5hbWUpKSB7XG5cdFx0cmV0dXJuIGJ1aWxkQ29tcG9uZW50RnJvbVZOb2RlKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsKTtcblx0fVxuXG5cdGlmICghaXNTdHJpbmcobm9kZU5hbWUpKSB7XG5cdFx0bm9kZU5hbWUgPSBTdHJpbmcobm9kZU5hbWUpO1xuXHR9XG5cblx0c3ZnTW9kZSA9IHRvTG93ZXJDYXNlKG5vZGVOYW1lKT09PSdzdmcnO1xuXG5cdGlmIChzdmdNb2RlKSBpc1N2Z01vZGUgPSB0cnVlO1xuXG5cdGlmICghZG9tKSB7XG5cdFx0b3V0ID0gY3JlYXRlTm9kZShub2RlTmFtZSwgaXNTdmdNb2RlKTtcblx0fVxuXHRlbHNlIGlmICghaXNOYW1lZE5vZGUoZG9tLCBub2RlTmFtZSkpIHtcblx0XHRvdXQgPSBjcmVhdGVOb2RlKG5vZGVOYW1lLCBpc1N2Z01vZGUpO1xuXHRcdC8vIG1vdmUgY2hpbGRyZW4gaW50byB0aGUgcmVwbGFjZW1lbnQgbm9kZVxuXHRcdHdoaWxlIChkb20uZmlyc3RDaGlsZCkgb3V0LmFwcGVuZENoaWxkKGRvbS5maXJzdENoaWxkKTtcblx0XHQvLyByZWNsYWltIGVsZW1lbnQgbm9kZXNcblx0XHRyZWNvbGxlY3ROb2RlVHJlZShkb20pO1xuXHR9XG5cblx0Ly8gZmFzdC1wYXRoIGZvciBlbGVtZW50cyBjb250YWluaW5nIGEgc2luZ2xlIFRleHROb2RlOlxuXHRpZiAodm5vZGUuY2hpbGRyZW4gJiYgdm5vZGUuY2hpbGRyZW4ubGVuZ3RoPT09MSAmJiB0eXBlb2Ygdm5vZGUuY2hpbGRyZW5bMF09PT0nc3RyaW5nJyAmJiBvdXQuY2hpbGROb2Rlcy5sZW5ndGg9PT0xICYmIG91dC5maXJzdENoaWxkIGluc3RhbmNlb2YgVGV4dCkge1xuXHRcdG91dC5maXJzdENoaWxkLm5vZGVWYWx1ZSA9IHZub2RlLmNoaWxkcmVuWzBdO1xuXHR9XG5cdGVsc2UgaWYgKHZub2RlLmNoaWxkcmVuIHx8IG91dC5maXJzdENoaWxkKSB7XG5cdFx0aW5uZXJEaWZmTm9kZShvdXQsIHZub2RlLmNoaWxkcmVuLCBjb250ZXh0LCBtb3VudEFsbCk7XG5cdH1cblxuXHRkaWZmQXR0cmlidXRlcyhvdXQsIHZub2RlLmF0dHJpYnV0ZXMpO1xuXG5cdGlmIChvcmlnaW5hbEF0dHJpYnV0ZXMgJiYgb3JpZ2luYWxBdHRyaWJ1dGVzLnJlZikge1xuXHRcdChvdXRbQVRUUl9LRVldLnJlZiA9IG9yaWdpbmFsQXR0cmlidXRlcy5yZWYpKG91dCk7XG5cdH1cblxuXHRpZiAoc3ZnTW9kZSkgaXNTdmdNb2RlID0gZmFsc2U7XG5cblx0cmV0dXJuIG91dDtcbn1cblxuXG4vKiogQXBwbHkgY2hpbGQgYW5kIGF0dHJpYnV0ZSBjaGFuZ2VzIGJldHdlZW4gYSBWTm9kZSBhbmQgYSBET00gTm9kZSB0byB0aGUgRE9NLiAqL1xuZnVuY3Rpb24gaW5uZXJEaWZmTm9kZShkb20sIHZjaGlsZHJlbiwgY29udGV4dCwgbW91bnRBbGwpIHtcblx0bGV0IG9yaWdpbmFsQ2hpbGRyZW4gPSBkb20uY2hpbGROb2Rlcyxcblx0XHRjaGlsZHJlbiA9IFtdLFxuXHRcdGtleWVkID0ge30sXG5cdFx0a2V5ZWRMZW4gPSAwLFxuXHRcdG1pbiA9IDAsXG5cdFx0bGVuID0gb3JpZ2luYWxDaGlsZHJlbi5sZW5ndGgsXG5cdFx0Y2hpbGRyZW5MZW4gPSAwLFxuXHRcdHZsZW4gPSB2Y2hpbGRyZW4gJiYgdmNoaWxkcmVuLmxlbmd0aCxcblx0XHRqLCBjLCB2Y2hpbGQsIGNoaWxkO1xuXG5cdGlmIChsZW4pIHtcblx0XHRmb3IgKGxldCBpPTA7IGk8bGVuOyBpKyspIHtcblx0XHRcdGxldCBjaGlsZCA9IG9yaWdpbmFsQ2hpbGRyZW5baV0sXG5cdFx0XHRcdGtleSA9IHZsZW4gPyAoKGMgPSBjaGlsZC5fY29tcG9uZW50KSA/IGMuX19rZXkgOiAoYyA9IGNoaWxkW0FUVFJfS0VZXSkgPyBjLmtleSA6IG51bGwpIDogbnVsbDtcblx0XHRcdGlmIChrZXkgfHwga2V5PT09MCkge1xuXHRcdFx0XHRrZXllZExlbisrO1xuXHRcdFx0XHRrZXllZFtrZXldID0gY2hpbGQ7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0Y2hpbGRyZW5bY2hpbGRyZW5MZW4rK10gPSBjaGlsZDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRpZiAodmxlbikge1xuXHRcdGZvciAobGV0IGk9MDsgaTx2bGVuOyBpKyspIHtcblx0XHRcdHZjaGlsZCA9IHZjaGlsZHJlbltpXTtcblx0XHRcdGNoaWxkID0gbnVsbDtcblxuXHRcdFx0Ly8gaWYgKGlzRnVuY3Rpb25hbENvbXBvbmVudCh2Y2hpbGQpKSB7XG5cdFx0XHQvLyBcdHZjaGlsZCA9IGJ1aWxkRnVuY3Rpb25hbENvbXBvbmVudCh2Y2hpbGQpO1xuXHRcdFx0Ly8gfVxuXG5cdFx0XHQvLyBhdHRlbXB0IHRvIGZpbmQgYSBub2RlIGJhc2VkIG9uIGtleSBtYXRjaGluZ1xuXHRcdFx0aWYgKGtleWVkTGVuICYmIHZjaGlsZC5hdHRyaWJ1dGVzKSB7XG5cdFx0XHRcdGxldCBrZXkgPSB2Y2hpbGQua2V5O1xuXHRcdFx0XHRpZiAoIWVtcHR5KGtleSkgJiYga2V5IGluIGtleWVkKSB7XG5cdFx0XHRcdFx0Y2hpbGQgPSBrZXllZFtrZXldO1xuXHRcdFx0XHRcdGtleWVkW2tleV0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0a2V5ZWRMZW4tLTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBhdHRlbXB0IHRvIHBsdWNrIGEgbm9kZSBvZiB0aGUgc2FtZSB0eXBlIGZyb20gdGhlIGV4aXN0aW5nIGNoaWxkcmVuXG5cdFx0XHRpZiAoIWNoaWxkICYmIG1pbjxjaGlsZHJlbkxlbikge1xuXHRcdFx0XHRmb3IgKGo9bWluOyBqPGNoaWxkcmVuTGVuOyBqKyspIHtcblx0XHRcdFx0XHRjID0gY2hpbGRyZW5bal07XG5cdFx0XHRcdFx0aWYgKGMgJiYgaXNTYW1lTm9kZVR5cGUoYywgdmNoaWxkKSkge1xuXHRcdFx0XHRcdFx0Y2hpbGQgPSBjO1xuXHRcdFx0XHRcdFx0Y2hpbGRyZW5bal0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHRpZiAoaj09PWNoaWxkcmVuTGVuLTEpIGNoaWxkcmVuTGVuLS07XG5cdFx0XHRcdFx0XHRpZiAoaj09PW1pbikgbWluKys7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gbW9ycGggdGhlIG1hdGNoZWQvZm91bmQvY3JlYXRlZCBET00gY2hpbGQgdG8gbWF0Y2ggdmNoaWxkIChkZWVwKVxuXHRcdFx0Y2hpbGQgPSBpZGlmZihjaGlsZCwgdmNoaWxkLCBjb250ZXh0LCBtb3VudEFsbCk7XG5cblx0XHRcdGlmIChjaGlsZCE9PW9yaWdpbmFsQ2hpbGRyZW5baV0pIHtcblx0XHRcdFx0ZG9tLmluc2VydEJlZm9yZShjaGlsZCwgb3JpZ2luYWxDaGlsZHJlbltpXSB8fCBudWxsKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXG5cdGlmIChrZXllZExlbikge1xuXHRcdC8qZXNsaW50IGd1YXJkLWZvci1pbjowKi9cblx0XHRmb3IgKGxldCBpIGluIGtleWVkKSBpZiAoa2V5ZWRbaV0pIHtcblx0XHRcdGNoaWxkcmVuW21pbj1jaGlsZHJlbkxlbisrXSA9IGtleWVkW2ldO1xuXHRcdH1cblx0fVxuXG5cdC8vIHJlbW92ZSBvcnBoYW5lZCBjaGlsZHJlblxuXHRpZiAobWluPGNoaWxkcmVuTGVuKSB7XG5cdFx0cmVtb3ZlT3JwaGFuZWRDaGlsZHJlbihjaGlsZHJlbik7XG5cdH1cbn1cblxuXG4vKiogUmVjbGFpbSBjaGlsZHJlbiB0aGF0IHdlcmUgdW5yZWZlcmVuY2VkIGluIHRoZSBkZXNpcmVkIFZUcmVlICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlT3JwaGFuZWRDaGlsZHJlbihjaGlsZHJlbiwgdW5tb3VudE9ubHkpIHtcblx0Zm9yIChsZXQgaT1jaGlsZHJlbi5sZW5ndGg7IGktLTsgKSB7XG5cdFx0bGV0IGNoaWxkID0gY2hpbGRyZW5baV07XG5cdFx0aWYgKGNoaWxkKSB7XG5cdFx0XHRyZWNvbGxlY3ROb2RlVHJlZShjaGlsZCwgdW5tb3VudE9ubHkpO1xuXHRcdH1cblx0fVxufVxuXG5cbi8qKiBSZWNsYWltIGFuIGVudGlyZSB0cmVlIG9mIG5vZGVzLCBzdGFydGluZyBhdCB0aGUgcm9vdC4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWNvbGxlY3ROb2RlVHJlZShub2RlLCB1bm1vdW50T25seSkge1xuXHQvLyBAVE9ETzogTmVlZCB0byBtYWtlIGEgY2FsbCBvbiB3aGV0aGVyIFByZWFjdCBzaG91bGQgcmVtb3ZlIG5vZGVzIG5vdCBjcmVhdGVkIGJ5IGl0c2VsZi5cblx0Ly8gQ3VycmVudGx5IGl0ICpkb2VzKiByZW1vdmUgdGhlbS4gRGlzY3Vzc2lvbjogaHR0cHM6Ly9naXRodWIuY29tL2RldmVsb3BpdC9wcmVhY3QvaXNzdWVzLzM5XG5cdC8vaWYgKCFub2RlW0FUVFJfS0VZXSkgcmV0dXJuO1xuXG5cdGxldCBjb21wb25lbnQgPSBub2RlLl9jb21wb25lbnQ7XG5cdGlmIChjb21wb25lbnQpIHtcblx0XHR1bm1vdW50Q29tcG9uZW50KGNvbXBvbmVudCwgIXVubW91bnRPbmx5KTtcblx0fVxuXHRlbHNlIHtcblx0XHRpZiAobm9kZVtBVFRSX0tFWV0gJiYgbm9kZVtBVFRSX0tFWV0ucmVmKSBub2RlW0FUVFJfS0VZXS5yZWYobnVsbCk7XG5cblx0XHRpZiAoIXVubW91bnRPbmx5KSB7XG5cblx0XHRcdGNvbGxlY3ROb2RlKG5vZGUpO1xuXHRcdH1cblxuXHRcdGlmIChub2RlLmNoaWxkTm9kZXMgJiYgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0cmVtb3ZlT3JwaGFuZWRDaGlsZHJlbihub2RlLmNoaWxkTm9kZXMsIHVubW91bnRPbmx5KTtcblx0XHR9XG5cdH1cbn1cblxuXG4vKiogQXBwbHkgZGlmZmVyZW5jZXMgaW4gYXR0cmlidXRlcyBmcm9tIGEgVk5vZGUgdG8gdGhlIGdpdmVuIERPTSBOb2RlLiAqL1xuZnVuY3Rpb24gZGlmZkF0dHJpYnV0ZXMoZG9tLCBhdHRycykge1xuXHRsZXQgb2xkID0gZG9tW0FUVFJfS0VZXSB8fCBnZXRSYXdOb2RlQXR0cmlidXRlcyhkb20pO1xuXG5cdC8vIHJlbW92ZUF0dHJpYnV0ZXMoZG9tLCBvbGQsIGF0dHJzIHx8IEVNUFRZKTtcblx0Zm9yIChsZXQgbmFtZSBpbiBvbGQpIHtcblx0XHRpZiAoIWF0dHJzIHx8ICEobmFtZSBpbiBhdHRycykpIHtcblx0XHRcdHNldEFjY2Vzc29yKGRvbSwgbmFtZSwgbnVsbCwgb2xkW25hbWVdLCBpc1N2Z01vZGUpO1xuXHRcdH1cblx0fVxuXG5cdC8vIG5ldyAmIHVwZGF0ZWRcblx0aWYgKGF0dHJzKSB7XG5cdFx0Zm9yIChsZXQgbmFtZSBpbiBhdHRycykge1xuXHRcdFx0aWYgKCEobmFtZSBpbiBvbGQpIHx8IGF0dHJzW25hbWVdIT0obmFtZT09PSd2YWx1ZScgfHwgbmFtZT09PSdzZWxlY3RlZCcgfHwgbmFtZT09PSdjaGVja2VkJyA/IGRvbVtuYW1lXSA6IG9sZFtuYW1lXSkpIHtcblx0XHRcdFx0c2V0QWNjZXNzb3IoZG9tLCBuYW1lLCBhdHRyc1tuYW1lXSwgb2xkW25hbWVdLCBpc1N2Z01vZGUpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9+L3ByZWFjdC9zcmMvdmRvbS9kaWZmLmpzXG4gKiovIiwiLyoqIFJldGFpbnMgYSBwb29sIG9mIENvbXBvbmVudHMgZm9yIHJlLXVzZSwga2V5ZWQgb24gY29tcG9uZW50IG5hbWUuXG4gKlx0Tm90ZTogc2luY2UgY29tcG9uZW50IG5hbWVzIGFyZSBub3QgdW5pcXVlIG9yIGV2ZW4gbmVjZXNzYXJpbHkgYXZhaWxhYmxlLCB0aGVzZSBhcmUgcHJpbWFyaWx5IGEgZm9ybSBvZiBzaGFyZGluZy5cbiAqXHRAcHJpdmF0ZVxuICovXG5jb25zdCBjb21wb25lbnRzID0ge307XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbGxlY3RDb21wb25lbnQoY29tcG9uZW50KSB7XG5cdGxldCBuYW1lID0gY29tcG9uZW50LmNvbnN0cnVjdG9yLm5hbWUsXG5cdFx0bGlzdCA9IGNvbXBvbmVudHNbbmFtZV07XG5cdGlmIChsaXN0KSBsaXN0LnB1c2goY29tcG9uZW50KTtcblx0ZWxzZSBjb21wb25lbnRzW25hbWVdID0gW2NvbXBvbmVudF07XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudChDdG9yLCBwcm9wcywgY29udGV4dCkge1xuXHRsZXQgaW5zdCA9IG5ldyBDdG9yKHByb3BzLCBjb250ZXh0KSxcblx0XHRsaXN0ID0gY29tcG9uZW50c1tDdG9yLm5hbWVdO1xuXHRpZiAobGlzdCkge1xuXHRcdGZvciAobGV0IGk9bGlzdC5sZW5ndGg7IGktLTsgKSB7XG5cdFx0XHRpZiAobGlzdFtpXS5jb25zdHJ1Y3Rvcj09PUN0b3IpIHtcblx0XHRcdFx0aW5zdC5uZXh0QmFzZSA9IGxpc3RbaV0ubmV4dEJhc2U7XG5cdFx0XHRcdGxpc3Quc3BsaWNlKGksIDEpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIGluc3Q7XG59XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL34vcHJlYWN0L3NyYy92ZG9tL2NvbXBvbmVudC1yZWN5Y2xlci5qc1xuICoqLyIsImltcG9ydCB7IFNZTkNfUkVOREVSLCBOT19SRU5ERVIsIEZPUkNFX1JFTkRFUiwgQVNZTkNfUkVOREVSLCBBVFRSX0tFWSB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgb3B0aW9ucyBmcm9tICcuLi9vcHRpb25zJztcbmltcG9ydCB7IGlzRnVuY3Rpb24sIGNsb25lLCBleHRlbmQsIGVtcHR5IH0gZnJvbSAnLi4vdXRpbCc7XG5pbXBvcnQgeyBlbnF1ZXVlUmVuZGVyIH0gZnJvbSAnLi4vcmVuZGVyLXF1ZXVlJztcbmltcG9ydCB7IGdldE5vZGVQcm9wcyB9IGZyb20gJy4vaW5kZXgnO1xuaW1wb3J0IHsgZGlmZiwgbW91bnRzLCBkaWZmTGV2ZWwsIGZsdXNoTW91bnRzLCByZW1vdmVPcnBoYW5lZENoaWxkcmVuLCByZWNvbGxlY3ROb2RlVHJlZSB9IGZyb20gJy4vZGlmZic7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uYWxDb21wb25lbnQsIGJ1aWxkRnVuY3Rpb25hbENvbXBvbmVudCB9IGZyb20gJy4vZnVuY3Rpb25hbC1jb21wb25lbnQnO1xuaW1wb3J0IHsgY3JlYXRlQ29tcG9uZW50LCBjb2xsZWN0Q29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnQtcmVjeWNsZXInO1xuaW1wb3J0IHsgcmVtb3ZlTm9kZSB9IGZyb20gJy4uL2RvbS9pbmRleCc7XG5cblxuLyoqIE1hcmsgY29tcG9uZW50IGFzIGRpcnR5IGFuZCBxdWV1ZSB1cCBhIHJlbmRlci5cbiAqXHRAcGFyYW0ge0NvbXBvbmVudH0gY29tcG9uZW50XG4gKlx0QHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyaWdnZXJDb21wb25lbnRSZW5kZXIoY29tcG9uZW50KSB7XG5cdGlmICghY29tcG9uZW50Ll9kaXJ0eSkge1xuXHRcdGNvbXBvbmVudC5fZGlydHkgPSB0cnVlO1xuXHRcdGVucXVldWVSZW5kZXIoY29tcG9uZW50KTtcblx0fVxufVxuXG5cblxuLyoqIFNldCBhIGNvbXBvbmVudCdzIGBwcm9wc2AgKGdlbmVyYWxseSBkZXJpdmVkIGZyb20gSlNYIGF0dHJpYnV0ZXMpLlxuICpcdEBwYXJhbSB7T2JqZWN0fSBwcm9wc1xuICpcdEBwYXJhbSB7T2JqZWN0fSBbb3B0c11cbiAqXHRAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnJlbmRlclN5bmM9ZmFsc2VdXHRJZiBgdHJ1ZWAgYW5kIHtAbGluayBvcHRpb25zLnN5bmNDb21wb25lbnRVcGRhdGVzfSBpcyBgdHJ1ZWAsIHRyaWdnZXJzIHN5bmNocm9ub3VzIHJlbmRlcmluZy5cbiAqXHRAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnJlbmRlcj10cnVlXVx0XHRcdElmIGBmYWxzZWAsIG5vIHJlbmRlciB3aWxsIGJlIHRyaWdnZXJlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldENvbXBvbmVudFByb3BzKGNvbXBvbmVudCwgcHJvcHMsIG9wdHMsIGNvbnRleHQsIG1vdW50QWxsKSB7XG5cdGxldCBiID0gY29tcG9uZW50LmJhc2U7XG5cdGlmIChjb21wb25lbnQuX2Rpc2FibGVSZW5kZXJpbmcpIHJldHVybjtcblx0Y29tcG9uZW50Ll9kaXNhYmxlUmVuZGVyaW5nID0gdHJ1ZTtcblxuXHRpZiAoKGNvbXBvbmVudC5fX3JlZiA9IHByb3BzLnJlZikpIGRlbGV0ZSBwcm9wcy5yZWY7XG5cdGlmICgoY29tcG9uZW50Ll9fa2V5ID0gcHJvcHMua2V5KSkgZGVsZXRlIHByb3BzLmtleTtcblxuXHRpZiAoZW1wdHkoYikgfHwgbW91bnRBbGwpIHtcblx0XHRpZiAoY29tcG9uZW50LmNvbXBvbmVudFdpbGxNb3VudCkgY29tcG9uZW50LmNvbXBvbmVudFdpbGxNb3VudCgpO1xuXHR9XG5cdGVsc2UgaWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKSB7XG5cdFx0Y29tcG9uZW50LmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMocHJvcHMsIGNvbnRleHQpO1xuXHR9XG5cblx0aWYgKGNvbnRleHQgJiYgY29udGV4dCE9PWNvbXBvbmVudC5jb250ZXh0KSB7XG5cdFx0aWYgKCFjb21wb25lbnQucHJldkNvbnRleHQpIGNvbXBvbmVudC5wcmV2Q29udGV4dCA9IGNvbXBvbmVudC5jb250ZXh0O1xuXHRcdGNvbXBvbmVudC5jb250ZXh0ID0gY29udGV4dDtcblx0fVxuXG5cdGlmICghY29tcG9uZW50LnByZXZQcm9wcykgY29tcG9uZW50LnByZXZQcm9wcyA9IGNvbXBvbmVudC5wcm9wcztcblx0Y29tcG9uZW50LnByb3BzID0gcHJvcHM7XG5cblx0Y29tcG9uZW50Ll9kaXNhYmxlUmVuZGVyaW5nID0gZmFsc2U7XG5cblx0aWYgKG9wdHMhPT1OT19SRU5ERVIpIHtcblx0XHRpZiAob3B0cz09PVNZTkNfUkVOREVSIHx8IG9wdGlvbnMuc3luY0NvbXBvbmVudFVwZGF0ZXMhPT1mYWxzZSB8fCAhYikge1xuXHRcdFx0cmVuZGVyQ29tcG9uZW50KGNvbXBvbmVudCwgU1lOQ19SRU5ERVIsIG1vdW50QWxsKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHR0cmlnZ2VyQ29tcG9uZW50UmVuZGVyKGNvbXBvbmVudCk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKGNvbXBvbmVudC5fX3JlZikgY29tcG9uZW50Ll9fcmVmKGNvbXBvbmVudCk7XG59XG5cblxuXG4vKiogUmVuZGVyIGEgQ29tcG9uZW50LCB0cmlnZ2VyaW5nIG5lY2Vzc2FyeSBsaWZlY3ljbGUgZXZlbnRzIGFuZCB0YWtpbmcgSGlnaC1PcmRlciBDb21wb25lbnRzIGludG8gYWNjb3VudC5cbiAqXHRAcGFyYW0ge0NvbXBvbmVudH0gY29tcG9uZW50XG4gKlx0QHBhcmFtIHtPYmplY3R9IFtvcHRzXVxuICpcdEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuYnVpbGQ9ZmFsc2VdXHRcdElmIGB0cnVlYCwgY29tcG9uZW50IHdpbGwgYnVpbGQgYW5kIHN0b3JlIGEgRE9NIG5vZGUgaWYgbm90IGFscmVhZHkgYXNzb2NpYXRlZCB3aXRoIG9uZS5cbiAqXHRAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyQ29tcG9uZW50KGNvbXBvbmVudCwgb3B0cywgbW91bnRBbGwpIHtcblx0aWYgKGNvbXBvbmVudC5fZGlzYWJsZVJlbmRlcmluZykgcmV0dXJuO1xuXG5cdGxldCBza2lwLCByZW5kZXJlZCxcblx0XHRwcm9wcyA9IGNvbXBvbmVudC5wcm9wcyxcblx0XHRzdGF0ZSA9IGNvbXBvbmVudC5zdGF0ZSxcblx0XHRjb250ZXh0ID0gY29tcG9uZW50LmNvbnRleHQsXG5cdFx0cHJldmlvdXNQcm9wcyA9IGNvbXBvbmVudC5wcmV2UHJvcHMgfHwgcHJvcHMsXG5cdFx0cHJldmlvdXNTdGF0ZSA9IGNvbXBvbmVudC5wcmV2U3RhdGUgfHwgc3RhdGUsXG5cdFx0cHJldmlvdXNDb250ZXh0ID0gY29tcG9uZW50LnByZXZDb250ZXh0IHx8IGNvbnRleHQsXG5cdFx0aXNVcGRhdGUgPSBjb21wb25lbnQuYmFzZSxcblx0XHRpbml0aWFsQmFzZSA9IGlzVXBkYXRlIHx8IGNvbXBvbmVudC5uZXh0QmFzZSxcblx0XHRuZXh0U2libGluZyA9IGluaXRpYWxCYXNlICYmIGluaXRpYWxCYXNlLm5leHRTaWJsaW5nLFxuXHRcdGJhc2VQYXJlbnQgPSBpbml0aWFsQmFzZSAmJiBpbml0aWFsQmFzZS5wYXJlbnROb2RlLFxuXHRcdGluaXRpYWxDb21wb25lbnQgPSBpbml0aWFsQmFzZSAmJiBpbml0aWFsQmFzZS5fY29tcG9uZW50LFxuXHRcdGluaXRpYWxDaGlsZENvbXBvbmVudCA9IGNvbXBvbmVudC5fY29tcG9uZW50O1xuXG5cdC8vIGlmIHVwZGF0aW5nXG5cdGlmIChpc1VwZGF0ZSkge1xuXHRcdGNvbXBvbmVudC5wcm9wcyA9IHByZXZpb3VzUHJvcHM7XG5cdFx0Y29tcG9uZW50LnN0YXRlID0gcHJldmlvdXNTdGF0ZTtcblx0XHRjb21wb25lbnQuY29udGV4dCA9IHByZXZpb3VzQ29udGV4dDtcblx0XHRpZiAob3B0cyE9PUZPUkNFX1JFTkRFUlxuXHRcdFx0JiYgY29tcG9uZW50LnNob3VsZENvbXBvbmVudFVwZGF0ZVxuXHRcdFx0JiYgY29tcG9uZW50LnNob3VsZENvbXBvbmVudFVwZGF0ZShwcm9wcywgc3RhdGUsIGNvbnRleHQpID09PSBmYWxzZSkge1xuXHRcdFx0c2tpcCA9IHRydWU7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsVXBkYXRlKSB7XG5cdFx0XHRjb21wb25lbnQuY29tcG9uZW50V2lsbFVwZGF0ZShwcm9wcywgc3RhdGUsIGNvbnRleHQpO1xuXHRcdH1cblx0XHRjb21wb25lbnQucHJvcHMgPSBwcm9wcztcblx0XHRjb21wb25lbnQuc3RhdGUgPSBzdGF0ZTtcblx0XHRjb21wb25lbnQuY29udGV4dCA9IGNvbnRleHQ7XG5cdH1cblxuXHRjb21wb25lbnQucHJldlByb3BzID0gY29tcG9uZW50LnByZXZTdGF0ZSA9IGNvbXBvbmVudC5wcmV2Q29udGV4dCA9IGNvbXBvbmVudC5uZXh0QmFzZSA9IG51bGw7XG5cdGNvbXBvbmVudC5fZGlydHkgPSBmYWxzZTtcblxuXHRpZiAoIXNraXApIHtcblx0XHRpZiAoY29tcG9uZW50LnJlbmRlcikgcmVuZGVyZWQgPSBjb21wb25lbnQucmVuZGVyKHByb3BzLCBzdGF0ZSwgY29udGV4dCk7XG5cblx0XHQvLyBjb250ZXh0IHRvIHBhc3MgdG8gdGhlIGNoaWxkLCBjYW4gYmUgdXBkYXRlZCB2aWEgKGdyYW5kLSlwYXJlbnQgY29tcG9uZW50XG5cdFx0aWYgKGNvbXBvbmVudC5nZXRDaGlsZENvbnRleHQpIHtcblx0XHRcdGNvbnRleHQgPSBleHRlbmQoY2xvbmUoY29udGV4dCksIGNvbXBvbmVudC5nZXRDaGlsZENvbnRleHQoKSk7XG5cdFx0fVxuXG5cdFx0d2hpbGUgKGlzRnVuY3Rpb25hbENvbXBvbmVudChyZW5kZXJlZCkpIHtcblx0XHRcdHJlbmRlcmVkID0gYnVpbGRGdW5jdGlvbmFsQ29tcG9uZW50KHJlbmRlcmVkLCBjb250ZXh0KTtcblx0XHR9XG5cblx0XHRsZXQgY2hpbGRDb21wb25lbnQgPSByZW5kZXJlZCAmJiByZW5kZXJlZC5ub2RlTmFtZSxcblx0XHRcdHRvVW5tb3VudCwgYmFzZTtcblxuXHRcdGlmIChpc0Z1bmN0aW9uKGNoaWxkQ29tcG9uZW50KSAmJiBjaGlsZENvbXBvbmVudC5wcm90b3R5cGUucmVuZGVyKSB7XG5cdFx0XHQvLyBzZXQgdXAgaGlnaCBvcmRlciBjb21wb25lbnQgbGlua1xuXG5cdFx0XHRsZXQgaW5zdCA9IGluaXRpYWxDaGlsZENvbXBvbmVudCxcblx0XHRcdFx0Y2hpbGRQcm9wcyA9IGdldE5vZGVQcm9wcyhyZW5kZXJlZCk7XG5cblx0XHRcdGlmIChpbnN0ICYmIGluc3QuY29uc3RydWN0b3I9PT1jaGlsZENvbXBvbmVudCkge1xuXHRcdFx0XHRzZXRDb21wb25lbnRQcm9wcyhpbnN0LCBjaGlsZFByb3BzLCBTWU5DX1JFTkRFUiwgY29udGV4dCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0dG9Vbm1vdW50ID0gaW5zdDtcblx0XHRcdFx0aW5zdCA9IGNyZWF0ZUNvbXBvbmVudChjaGlsZENvbXBvbmVudCwgY2hpbGRQcm9wcywgY29udGV4dCk7XG5cdFx0XHRcdGluc3QuX3BhcmVudENvbXBvbmVudCA9IGNvbXBvbmVudDtcblx0XHRcdFx0Y29tcG9uZW50Ll9jb21wb25lbnQgPSBpbnN0O1xuXHRcdFx0XHRzZXRDb21wb25lbnRQcm9wcyhpbnN0LCBjaGlsZFByb3BzLCBOT19SRU5ERVIsIGNvbnRleHQpO1xuXHRcdFx0XHRyZW5kZXJDb21wb25lbnQoaW5zdCwgU1lOQ19SRU5ERVIpO1xuXHRcdFx0fVxuXG5cdFx0XHRiYXNlID0gaW5zdC5iYXNlO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGxldCBjYmFzZSA9IGluaXRpYWxCYXNlO1xuXG5cdFx0XHQvLyBkZXN0cm95IGhpZ2ggb3JkZXIgY29tcG9uZW50IGxpbmtcblx0XHRcdHRvVW5tb3VudCA9IGluaXRpYWxDaGlsZENvbXBvbmVudDtcblx0XHRcdGlmICh0b1VubW91bnQpIHtcblx0XHRcdFx0Y2Jhc2UgPSBjb21wb25lbnQuX2NvbXBvbmVudCA9IG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpbml0aWFsQmFzZSB8fCBvcHRzPT09U1lOQ19SRU5ERVIpIHtcblx0XHRcdFx0aWYgKGNiYXNlKSBjYmFzZS5fY29tcG9uZW50ID0gbnVsbDtcblx0XHRcdFx0YmFzZSA9IGRpZmYoY2Jhc2UsIHJlbmRlcmVkLCBjb250ZXh0LCBtb3VudEFsbCB8fCAhaXNVcGRhdGUpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChpbml0aWFsQmFzZSAmJiBiYXNlIT09aW5pdGlhbEJhc2UpIHtcblx0XHRcdGlmIChiYXNlUGFyZW50ICYmIGJhc2UhPT1iYXNlUGFyZW50KSBiYXNlUGFyZW50Lmluc2VydEJlZm9yZShiYXNlLCBuZXh0U2libGluZyB8fCBudWxsKTtcblx0XHRcdGlmICghdG9Vbm1vdW50ICYmIGluaXRpYWxDb21wb25lbnQ9PT1jb21wb25lbnQgJiYgIWluaXRpYWxDaGlsZENvbXBvbmVudCAmJiBpbml0aWFsQmFzZS5wYXJlbnROb2RlKSB7XG5cdFx0XHRcdGluaXRpYWxCYXNlLl9jb21wb25lbnQgPSBudWxsO1xuXHRcdFx0XHRyZWNvbGxlY3ROb2RlVHJlZShpbml0aWFsQmFzZSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHRvVW5tb3VudCkge1xuXHRcdFx0dW5tb3VudENvbXBvbmVudCh0b1VubW91bnQsIHRydWUpO1xuXHRcdH1cblxuXHRcdGNvbXBvbmVudC5iYXNlID0gYmFzZTtcblx0XHRpZiAoYmFzZSkge1xuXHRcdFx0bGV0IGNvbXBvbmVudFJlZiA9IGNvbXBvbmVudCxcblx0XHRcdFx0dCA9IGNvbXBvbmVudDtcblx0XHRcdHdoaWxlICgodD10Ll9wYXJlbnRDb21wb25lbnQpKSB7IGNvbXBvbmVudFJlZiA9IHQ7IH1cblx0XHRcdGJhc2UuX2NvbXBvbmVudCA9IGNvbXBvbmVudFJlZjtcblx0XHRcdGJhc2UuX2NvbXBvbmVudENvbnN0cnVjdG9yID0gY29tcG9uZW50UmVmLmNvbnN0cnVjdG9yO1xuXHRcdH1cblxuXHR9XG5cblx0aWYgKCFpc1VwZGF0ZSB8fCBtb3VudEFsbCkge1xuXHRcdG1vdW50cy51bnNoaWZ0KGNvbXBvbmVudCk7XG5cdFx0aWYgKCFkaWZmTGV2ZWwpIGZsdXNoTW91bnRzKCk7XG5cdH1cblx0ZWxzZSBpZiAoIXNraXAgJiYgY29tcG9uZW50LmNvbXBvbmVudERpZFVwZGF0ZSkge1xuXHRcdGNvbXBvbmVudC5jb21wb25lbnREaWRVcGRhdGUocHJldmlvdXNQcm9wcywgcHJldmlvdXNTdGF0ZSwgcHJldmlvdXNDb250ZXh0KTtcblx0fVxuXG5cdGxldCBjYiA9IGNvbXBvbmVudC5fcmVuZGVyQ2FsbGJhY2tzLCBmbjtcblx0aWYgKGNiKSB3aGlsZSAoIChmbiA9IGNiLnBvcCgpKSApIGZuLmNhbGwoY29tcG9uZW50KTtcblxuXHRyZXR1cm4gcmVuZGVyZWQ7XG59XG5cblxuXG4vKiogQXBwbHkgdGhlIENvbXBvbmVudCByZWZlcmVuY2VkIGJ5IGEgVk5vZGUgdG8gdGhlIERPTS5cbiAqXHRAcGFyYW0ge0VsZW1lbnR9IGRvbVx0VGhlIERPTSBub2RlIHRvIG11dGF0ZVxuICpcdEBwYXJhbSB7Vk5vZGV9IHZub2RlXHRBIENvbXBvbmVudC1yZWZlcmVuY2luZyBWTm9kZVxuICpcdEByZXR1cm5zIHtFbGVtZW50fSBkb21cdFRoZSBjcmVhdGVkL211dGF0ZWQgZWxlbWVudFxuICpcdEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBidWlsZENvbXBvbmVudEZyb21WTm9kZShkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCkge1xuXHRsZXQgYyA9IGRvbSAmJiBkb20uX2NvbXBvbmVudCxcblx0XHRvbGREb20gPSBkb20sXG5cdFx0aXNEaXJlY3RPd25lciA9IGMgJiYgZG9tLl9jb21wb25lbnRDb25zdHJ1Y3Rvcj09PXZub2RlLm5vZGVOYW1lLFxuXHRcdGlzT3duZXIgPSBpc0RpcmVjdE93bmVyLFxuXHRcdHByb3BzID0gZ2V0Tm9kZVByb3BzKHZub2RlKTtcblx0d2hpbGUgKGMgJiYgIWlzT3duZXIgJiYgKGM9Yy5fcGFyZW50Q29tcG9uZW50KSkge1xuXHRcdGlzT3duZXIgPSBjLmNvbnN0cnVjdG9yPT09dm5vZGUubm9kZU5hbWU7XG5cdH1cblxuXHRpZiAoaXNPd25lciAmJiAoIW1vdW50QWxsIHx8IGMuX2NvbXBvbmVudCkpIHtcblx0XHRzZXRDb21wb25lbnRQcm9wcyhjLCBwcm9wcywgQVNZTkNfUkVOREVSLCBjb250ZXh0LCBtb3VudEFsbCk7XG5cdFx0ZG9tID0gYy5iYXNlO1xuXHR9XG5cdGVsc2Uge1xuXHRcdGlmIChjICYmICFpc0RpcmVjdE93bmVyKSB7XG5cdFx0XHR1bm1vdW50Q29tcG9uZW50KGMsIHRydWUpO1xuXHRcdFx0ZG9tID0gb2xkRG9tID0gbnVsbDtcblx0XHR9XG5cblx0XHRjID0gY3JlYXRlQ29tcG9uZW50KHZub2RlLm5vZGVOYW1lLCBwcm9wcywgY29udGV4dCk7XG5cdFx0aWYgKGRvbSAmJiAhYy5uZXh0QmFzZSkgYy5uZXh0QmFzZSA9IGRvbTtcblx0XHRzZXRDb21wb25lbnRQcm9wcyhjLCBwcm9wcywgU1lOQ19SRU5ERVIsIGNvbnRleHQsIG1vdW50QWxsKTtcblx0XHRkb20gPSBjLmJhc2U7XG5cblx0XHRpZiAob2xkRG9tICYmIGRvbSE9PW9sZERvbSkge1xuXHRcdFx0b2xkRG9tLl9jb21wb25lbnQgPSBudWxsO1xuXHRcdFx0cmVjb2xsZWN0Tm9kZVRyZWUob2xkRG9tKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZG9tO1xufVxuXG5cblxuLyoqIFJlbW92ZSBhIGNvbXBvbmVudCBmcm9tIHRoZSBET00gYW5kIHJlY3ljbGUgaXQuXG4gKlx0QHBhcmFtIHtFbGVtZW50fSBkb21cdFx0XHRBIERPTSBub2RlIGZyb20gd2hpY2ggdG8gdW5tb3VudCB0aGUgZ2l2ZW4gQ29tcG9uZW50XG4gKlx0QHBhcmFtIHtDb21wb25lbnR9IGNvbXBvbmVudFx0VGhlIENvbXBvbmVudCBpbnN0YW5jZSB0byB1bm1vdW50XG4gKlx0QHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVubW91bnRDb21wb25lbnQoY29tcG9uZW50LCByZW1vdmUpIHtcblx0Ly8gY29uc29sZS5sb2coYCR7cmVtb3ZlPydSZW1vdmluZyc6J1VubW91bnRpbmcnfSBjb21wb25lbnQ6ICR7Y29tcG9uZW50LmNvbnN0cnVjdG9yLm5hbWV9YCk7XG5cdGxldCBiYXNlID0gY29tcG9uZW50LmJhc2U7XG5cblx0Y29tcG9uZW50Ll9kaXNhYmxlUmVuZGVyaW5nID0gdHJ1ZTtcblxuXHRpZiAoY29tcG9uZW50LmNvbXBvbmVudFdpbGxVbm1vdW50KSBjb21wb25lbnQuY29tcG9uZW50V2lsbFVubW91bnQoKTtcblxuXHRjb21wb25lbnQuYmFzZSA9IG51bGw7XG5cblx0Ly8gcmVjdXJzaXZlbHkgdGVhciBkb3duICYgcmVjb2xsZWN0IGhpZ2gtb3JkZXIgY29tcG9uZW50IGNoaWxkcmVuOlxuXHRsZXQgaW5uZXIgPSBjb21wb25lbnQuX2NvbXBvbmVudDtcblx0aWYgKGlubmVyKSB7XG5cdFx0dW5tb3VudENvbXBvbmVudChpbm5lciwgcmVtb3ZlKTtcblx0fVxuXHRlbHNlIGlmIChiYXNlKSB7XG5cdFx0aWYgKGJhc2VbQVRUUl9LRVldICYmIGJhc2VbQVRUUl9LRVldLnJlZikgYmFzZVtBVFRSX0tFWV0ucmVmKG51bGwpO1xuXG5cdFx0Y29tcG9uZW50Lm5leHRCYXNlID0gYmFzZTtcblxuXHRcdGlmIChyZW1vdmUpIHtcblx0XHRcdHJlbW92ZU5vZGUoYmFzZSk7XG5cdFx0XHRjb2xsZWN0Q29tcG9uZW50KGNvbXBvbmVudCk7XG5cdFx0fVxuXHRcdHJlbW92ZU9ycGhhbmVkQ2hpbGRyZW4oYmFzZS5jaGlsZE5vZGVzLCAhcmVtb3ZlKTtcblx0fVxuXG5cdGlmIChjb21wb25lbnQuX19yZWYpIGNvbXBvbmVudC5fX3JlZihudWxsKTtcblx0aWYgKGNvbXBvbmVudC5jb21wb25lbnREaWRVbm1vdW50KSBjb21wb25lbnQuY29tcG9uZW50RGlkVW5tb3VudCgpO1xufVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9+L3ByZWFjdC9zcmMvdmRvbS9jb21wb25lbnQuanNcbiAqKi8iLCJpbXBvcnQgeyBGT1JDRV9SRU5ERVIgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBleHRlbmQsIGNsb25lLCBpc0Z1bmN0aW9uIH0gZnJvbSAnLi91dGlsJztcbmltcG9ydCB7IGNyZWF0ZUxpbmtlZFN0YXRlIH0gZnJvbSAnLi9saW5rZWQtc3RhdGUnO1xuaW1wb3J0IHsgdHJpZ2dlckNvbXBvbmVudFJlbmRlciwgcmVuZGVyQ29tcG9uZW50IH0gZnJvbSAnLi92ZG9tL2NvbXBvbmVudCc7XG5cbi8qKiBCYXNlIENvbXBvbmVudCBjbGFzcywgZm9yIGhlIEVTNiBDbGFzcyBtZXRob2Qgb2YgY3JlYXRpbmcgQ29tcG9uZW50c1xuICpcdEBwdWJsaWNcbiAqXG4gKlx0QGV4YW1wbGVcbiAqXHRjbGFzcyBNeUZvbyBleHRlbmRzIENvbXBvbmVudCB7XG4gKlx0XHRyZW5kZXIocHJvcHMsIHN0YXRlKSB7XG4gKlx0XHRcdHJldHVybiA8ZGl2IC8+O1xuICpcdFx0fVxuICpcdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIENvbXBvbmVudChwcm9wcywgY29udGV4dCkge1xuXHQvKiogQHByaXZhdGUgKi9cblx0dGhpcy5fZGlydHkgPSB0cnVlO1xuXHQvKiogQHB1YmxpYyAqL1xuXHR0aGlzLl9kaXNhYmxlUmVuZGVyaW5nID0gZmFsc2U7XG5cdC8qKiBAcHVibGljICovXG5cdHRoaXMucHJldlN0YXRlID0gdGhpcy5wcmV2UHJvcHMgPSB0aGlzLnByZXZDb250ZXh0ID0gdGhpcy5iYXNlID0gdGhpcy5uZXh0QmFzZSA9IHRoaXMuX3BhcmVudENvbXBvbmVudCA9IHRoaXMuX2NvbXBvbmVudCA9IHRoaXMuX19yZWYgPSB0aGlzLl9fa2V5ID0gdGhpcy5fbGlua2VkU3RhdGVzID0gdGhpcy5fcmVuZGVyQ2FsbGJhY2tzID0gbnVsbDtcblx0LyoqIEBwdWJsaWMgKi9cblx0dGhpcy5jb250ZXh0ID0gY29udGV4dCB8fCB7fTtcblx0LyoqIEB0eXBlIHtvYmplY3R9ICovXG5cdHRoaXMucHJvcHMgPSBwcm9wcztcblx0LyoqIEB0eXBlIHtvYmplY3R9ICovXG5cdHRoaXMuc3RhdGUgPSB0aGlzLmdldEluaXRpYWxTdGF0ZSAmJiB0aGlzLmdldEluaXRpYWxTdGF0ZSgpIHx8IHt9O1xufVxuXG5cbmV4dGVuZChDb21wb25lbnQucHJvdG90eXBlLCB7XG5cblx0LyoqIFJldHVybnMgYSBgYm9vbGVhbmAgdmFsdWUgaW5kaWNhdGluZyBpZiB0aGUgY29tcG9uZW50IHNob3VsZCByZS1yZW5kZXIgd2hlbiByZWNlaXZpbmcgdGhlIGdpdmVuIGBwcm9wc2AgYW5kIGBzdGF0ZWAuXG5cdCAqXHRAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG5cdCAqXHRAcGFyYW0ge29iamVjdH0gbmV4dFN0YXRlXG5cdCAqXHRAcGFyYW0ge29iamVjdH0gbmV4dENvbnRleHRcblx0ICpcdEByZXR1cm5zIHtCb29sZWFufSBzaG91bGQgdGhlIGNvbXBvbmVudCByZS1yZW5kZXJcblx0ICpcdEBuYW1lIHNob3VsZENvbXBvbmVudFVwZGF0ZVxuXHQgKlx0QGZ1bmN0aW9uXG5cdCAqL1xuXHQvLyBzaG91bGRDb21wb25lbnRVcGRhdGUoKSB7XG5cdC8vIFx0cmV0dXJuIHRydWU7XG5cdC8vIH0sXG5cblxuXHQvKiogUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgc2V0cyBhIHN0YXRlIHByb3BlcnR5IHdoZW4gY2FsbGVkLlxuXHQgKlx0Q2FsbGluZyBsaW5rU3RhdGUoKSByZXBlYXRlZGx5IHdpdGggdGhlIHNhbWUgYXJndW1lbnRzIHJldHVybnMgYSBjYWNoZWQgbGluayBmdW5jdGlvbi5cblx0ICpcblx0ICpcdFByb3ZpZGVzIHNvbWUgYnVpbHQtaW4gc3BlY2lhbCBjYXNlczpcblx0ICpcdFx0LSBDaGVja2JveGVzIGFuZCByYWRpbyBidXR0b25zIGxpbmsgdGhlaXIgYm9vbGVhbiBgY2hlY2tlZGAgdmFsdWVcblx0ICpcdFx0LSBJbnB1dHMgYXV0b21hdGljYWxseSBsaW5rIHRoZWlyIGB2YWx1ZWAgcHJvcGVydHlcblx0ICpcdFx0LSBFdmVudCBwYXRocyBmYWxsIGJhY2sgdG8gYW55IGFzc29jaWF0ZWQgQ29tcG9uZW50IGlmIG5vdCBmb3VuZCBvbiBhbiBlbGVtZW50XG5cdCAqXHRcdC0gSWYgbGlua2VkIHZhbHVlIGlzIGEgZnVuY3Rpb24sIHdpbGwgaW52b2tlIGl0IGFuZCB1c2UgdGhlIHJlc3VsdFxuXHQgKlxuXHQgKlx0QHBhcmFtIHtzdHJpbmd9IGtleVx0XHRcdFx0VGhlIHBhdGggdG8gc2V0IC0gY2FuIGJlIGEgZG90LW5vdGF0ZWQgZGVlcCBrZXlcblx0ICpcdEBwYXJhbSB7c3RyaW5nfSBbZXZlbnRQYXRoXVx0XHRJZiBzZXQsIGF0dGVtcHRzIHRvIGZpbmQgdGhlIG5ldyBzdGF0ZSB2YWx1ZSBhdCBhIGdpdmVuIGRvdC1ub3RhdGVkIHBhdGggd2l0aGluIHRoZSBvYmplY3QgcGFzc2VkIHRvIHRoZSBsaW5rZWRTdGF0ZSBzZXR0ZXIuXG5cdCAqXHRAcmV0dXJucyB7ZnVuY3Rpb259IGxpbmtTdGF0ZVNldHRlcihlKVxuXHQgKlxuXHQgKlx0QGV4YW1wbGUgVXBkYXRlIGEgXCJ0ZXh0XCIgc3RhdGUgdmFsdWUgd2hlbiBhbiBpbnB1dCBjaGFuZ2VzOlxuXHQgKlx0XHQ8aW5wdXQgb25DaGFuZ2U9eyB0aGlzLmxpbmtTdGF0ZSgndGV4dCcpIH0gLz5cblx0ICpcblx0ICpcdEBleGFtcGxlIFNldCBhIGRlZXAgc3RhdGUgdmFsdWUgb24gY2xpY2tcblx0ICpcdFx0PGJ1dHRvbiBvbkNsaWNrPXsgdGhpcy5saW5rU3RhdGUoJ3RvdWNoLmNvb3JkcycsICd0b3VjaGVzLjAnKSB9PlRhcDwvYnV0dG9uXG5cdCAqL1xuXHRsaW5rU3RhdGUoa2V5LCBldmVudFBhdGgpIHtcblx0XHRsZXQgYyA9IHRoaXMuX2xpbmtlZFN0YXRlcyB8fCAodGhpcy5fbGlua2VkU3RhdGVzID0ge30pLFxuXHRcdFx0Y2FjaGVLZXkgPSBrZXkgKyAnfCcgKyBldmVudFBhdGg7XG5cdFx0cmV0dXJuIGNbY2FjaGVLZXldIHx8IChjW2NhY2hlS2V5XSA9IGNyZWF0ZUxpbmtlZFN0YXRlKHRoaXMsIGtleSwgZXZlbnRQYXRoKSk7XG5cdH0sXG5cblxuXHQvKiogVXBkYXRlIGNvbXBvbmVudCBzdGF0ZSBieSBjb3B5aW5nIHByb3BlcnRpZXMgZnJvbSBgc3RhdGVgIHRvIGB0aGlzLnN0YXRlYC5cblx0ICpcdEBwYXJhbSB7b2JqZWN0fSBzdGF0ZVx0XHRBIGhhc2ggb2Ygc3RhdGUgcHJvcGVydGllcyB0byB1cGRhdGUgd2l0aCBuZXcgdmFsdWVzXG5cdCAqL1xuXHRzZXRTdGF0ZShzdGF0ZSwgY2FsbGJhY2spIHtcblx0XHRsZXQgcyA9IHRoaXMuc3RhdGU7XG5cdFx0aWYgKCF0aGlzLnByZXZTdGF0ZSkgdGhpcy5wcmV2U3RhdGUgPSBjbG9uZShzKTtcblx0XHRleHRlbmQocywgaXNGdW5jdGlvbihzdGF0ZSkgPyBzdGF0ZShzLCB0aGlzLnByb3BzKSA6IHN0YXRlKTtcblx0XHRpZiAoY2FsbGJhY2spICh0aGlzLl9yZW5kZXJDYWxsYmFja3MgPSAodGhpcy5fcmVuZGVyQ2FsbGJhY2tzIHx8IFtdKSkucHVzaChjYWxsYmFjayk7XG5cdFx0dHJpZ2dlckNvbXBvbmVudFJlbmRlcih0aGlzKTtcblx0fSxcblxuXG5cdC8qKiBJbW1lZGlhdGVseSBwZXJmb3JtIGEgc3luY2hyb25vdXMgcmUtcmVuZGVyIG9mIHRoZSBjb21wb25lbnQuXG5cdCAqXHRAcHJpdmF0ZVxuXHQgKi9cblx0Zm9yY2VVcGRhdGUoKSB7XG5cdFx0cmVuZGVyQ29tcG9uZW50KHRoaXMsIEZPUkNFX1JFTkRFUik7XG5cdH0sXG5cblxuXHQvKiogQWNjZXB0cyBgcHJvcHNgIGFuZCBgc3RhdGVgLCBhbmQgcmV0dXJucyBhIG5ldyBWaXJ0dWFsIERPTSB0cmVlIHRvIGJ1aWxkLlxuXHQgKlx0VmlydHVhbCBET00gaXMgZ2VuZXJhbGx5IGNvbnN0cnVjdGVkIHZpYSBbSlNYXShodHRwOi8vamFzb25mb3JtYXQuY29tL3d0Zi1pcy1qc3gpLlxuXHQgKlx0QHBhcmFtIHtvYmplY3R9IHByb3BzXHRcdFByb3BzIChlZzogSlNYIGF0dHJpYnV0ZXMpIHJlY2VpdmVkIGZyb20gcGFyZW50IGVsZW1lbnQvY29tcG9uZW50XG5cdCAqXHRAcGFyYW0ge29iamVjdH0gc3RhdGVcdFx0VGhlIGNvbXBvbmVudCdzIGN1cnJlbnQgc3RhdGVcblx0ICpcdEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XHRcdENvbnRleHQgb2JqZWN0IChpZiBhIHBhcmVudCBjb21wb25lbnQgaGFzIHByb3ZpZGVkIGNvbnRleHQpXG5cdCAqXHRAcmV0dXJucyBWTm9kZVxuXHQgKi9cblx0cmVuZGVyKCkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cbn0pO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9+L3ByZWFjdC9zcmMvY29tcG9uZW50LmpzXG4gKiovIiwiLy8gcmVuZGVyIG1vZGVzXG5cbmV4cG9ydCBjb25zdCBOT19SRU5ERVIgPSAwO1xuZXhwb3J0IGNvbnN0IFNZTkNfUkVOREVSID0gMTtcbmV4cG9ydCBjb25zdCBGT1JDRV9SRU5ERVIgPSAyO1xuZXhwb3J0IGNvbnN0IEFTWU5DX1JFTkRFUiA9IDM7XG5cbmV4cG9ydCBjb25zdCBFTVBUWSA9IHt9O1xuXG5leHBvcnQgY29uc3QgQVRUUl9LRVkgPSB0eXBlb2YgU3ltYm9sIT09J3VuZGVmaW5lZCcgPyBTeW1ib2wuZm9yKCdwcmVhY3RhdHRyJykgOiAnX19wcmVhY3RhdHRyXyc7XG5cbi8vIERPTSBwcm9wZXJ0aWVzIHRoYXQgc2hvdWxkIE5PVCBoYXZlIFwicHhcIiBhZGRlZCB3aGVuIG51bWVyaWNcbmV4cG9ydCBjb25zdCBOT05fRElNRU5TSU9OX1BST1BTID0ge1xuXHRib3hGbGV4OjEsIGJveEZsZXhHcm91cDoxLCBjb2x1bW5Db3VudDoxLCBmaWxsT3BhY2l0eToxLCBmbGV4OjEsIGZsZXhHcm93OjEsXG5cdGZsZXhQb3NpdGl2ZToxLCBmbGV4U2hyaW5rOjEsIGZsZXhOZWdhdGl2ZToxLCBmb250V2VpZ2h0OjEsIGxpbmVDbGFtcDoxLCBsaW5lSGVpZ2h0OjEsXG5cdG9wYWNpdHk6MSwgb3JkZXI6MSwgb3JwaGFuczoxLCBzdHJva2VPcGFjaXR5OjEsIHdpZG93czoxLCB6SW5kZXg6MSwgem9vbToxXG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9+L3ByZWFjdC9zcmMvY29uc3RhbnRzLmpzXG4gKiovIiwiaW1wb3J0IHsgZGlmZiB9IGZyb20gJy4vdmRvbS9kaWZmJztcblxuLyoqIFJlbmRlciBKU1ggaW50byBhIGBwYXJlbnRgIEVsZW1lbnQuXG4gKlx0QHBhcmFtIHtWTm9kZX0gdm5vZGVcdFx0QSAoSlNYKSBWTm9kZSB0byByZW5kZXJcbiAqXHRAcGFyYW0ge0VsZW1lbnR9IHBhcmVudFx0XHRET00gZWxlbWVudCB0byByZW5kZXIgaW50b1xuICpcdEBwYXJhbSB7RWxlbWVudH0gW21lcmdlXVx0QXR0ZW1wdCB0byByZS11c2UgYW4gZXhpc3RpbmcgRE9NIHRyZWUgcm9vdGVkIGF0IGBtZXJnZWBcbiAqXHRAcHVibGljXG4gKlxuICpcdEBleGFtcGxlXG4gKlx0Ly8gcmVuZGVyIGEgZGl2IGludG8gPGJvZHk+OlxuICpcdHJlbmRlcig8ZGl2IGlkPVwiaGVsbG9cIj5oZWxsbyE8L2Rpdj4sIGRvY3VtZW50LmJvZHkpO1xuICpcbiAqXHRAZXhhbXBsZVxuICpcdC8vIHJlbmRlciBhIFwiVGhpbmdcIiBjb21wb25lbnQgaW50byAjZm9vOlxuICpcdGNvbnN0IFRoaW5nID0gKHsgbmFtZSB9KSA9PiA8c3Bhbj57IG5hbWUgfTwvc3Bhbj47XG4gKlx0cmVuZGVyKDxUaGluZyBuYW1lPVwib25lXCIgLz4sIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb28nKSk7XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXIodm5vZGUsIHBhcmVudCwgbWVyZ2UpIHtcblx0cmV0dXJuIGRpZmYobWVyZ2UsIHZub2RlLCB7fSwgZmFsc2UsIHBhcmVudCk7XG59XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL34vcHJlYWN0L3NyYy9yZW5kZXIuanNcbiAqKi8iLCJ2YXIgbmV4dFRpY2sgPSByZXF1aXJlKCdwcm9jZXNzL2Jyb3dzZXIuanMnKS5uZXh0VGljaztcbnZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcbnZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcbnZhciBpbW1lZGlhdGVJZHMgPSB7fTtcbnZhciBuZXh0SW1tZWRpYXRlSWQgPSAwO1xuXG4vLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXG5leHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpO1xufTtcbmV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG59O1xuZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24odGltZW91dCkgeyB0aW1lb3V0LmNsb3NlKCk7IH07XG5cbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcbiAgdGhpcy5faWQgPSBpZDtcbiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG59XG5UaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5UaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG59O1xuXG4vLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cbmV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSwgbXNlY3MpIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xufTtcblxuZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IC0xO1xufTtcblxuZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXG4gIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuICBpZiAobXNlY3MgPj0gMCkge1xuICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcbiAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpXG4gICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuICAgIH0sIG1zZWNzKTtcbiAgfVxufTtcblxuLy8gVGhhdCdzIG5vdCBob3cgbm9kZS5qcyBpbXBsZW1lbnRzIGl0IGJ1dCB0aGUgZXhwb3NlZCBhcGkgaXMgdGhlIHNhbWUuXG5leHBvcnRzLnNldEltbWVkaWF0ZSA9IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHNldEltbWVkaWF0ZSA6IGZ1bmN0aW9uKGZuKSB7XG4gIHZhciBpZCA9IG5leHRJbW1lZGlhdGVJZCsrO1xuICB2YXIgYXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPCAyID8gZmFsc2UgOiBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cbiAgaW1tZWRpYXRlSWRzW2lkXSA9IHRydWU7XG5cbiAgbmV4dFRpY2soZnVuY3Rpb24gb25OZXh0VGljaygpIHtcbiAgICBpZiAoaW1tZWRpYXRlSWRzW2lkXSkge1xuICAgICAgLy8gZm4uY2FsbCgpIGlzIGZhc3RlciBzbyB3ZSBvcHRpbWl6ZSBmb3IgdGhlIGNvbW1vbiB1c2UtY2FzZVxuICAgICAgLy8gQHNlZSBodHRwOi8vanNwZXJmLmNvbS9jYWxsLWFwcGx5LXNlZ3VcbiAgICAgIGlmIChhcmdzKSB7XG4gICAgICAgIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm4uY2FsbChudWxsKTtcbiAgICAgIH1cbiAgICAgIC8vIFByZXZlbnQgaWRzIGZyb20gbGVha2luZ1xuICAgICAgZXhwb3J0cy5jbGVhckltbWVkaWF0ZShpZCk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gaWQ7XG59O1xuXG5leHBvcnRzLmNsZWFySW1tZWRpYXRlID0gdHlwZW9mIGNsZWFySW1tZWRpYXRlID09PSBcImZ1bmN0aW9uXCIgPyBjbGVhckltbWVkaWF0ZSA6IGZ1bmN0aW9uKGlkKSB7XG4gIGRlbGV0ZSBpbW1lZGlhdGVJZHNbaWRdO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzXG4gKiogbW9kdWxlIGlkID0gM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuKGZ1bmN0aW9uICgpIHtcbiAgdHJ5IHtcbiAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNhY2hlZFNldFRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaXMgbm90IGRlZmluZWQnKTtcbiAgICB9XG4gIH1cbiAgdHJ5IHtcbiAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBpcyBub3QgZGVmaW5lZCcpO1xuICAgIH1cbiAgfVxufSAoKSlcbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgdGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZHJhaW5RdWV1ZSwgMCk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9wcm9jZXNzL2Jyb3dzZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJpbXBvcnQgeyBoLCBDb21wb25lbnQgfSBmcm9tICdwcmVhY3QnO1xuaW1wb3J0IHN0b3JlIGZyb20gJy4uL3N0b3JlJztcbmltcG9ydCBDIGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgSGFtbWVyIGZyb20gJ2hhbW1lcmpzJztcbmltcG9ydCBwcm9wYWdhdGluZyBmcm9tICdwcm9wYWdhdGluZy1oYW1tZXJqcyc7XG5pbXBvcnQgeyBBY3Rpb25DcmVhdG9ycyB9IGZyb20gJ3JlZHV4LXVuZG8nO1xuaW1wb3J0IG1vZCBmcm9tICcuLi9oZWxwZXJzL3Jlc2l6ZS1tb2QnO1xucmVxdWlyZSgnLi4vLi4vY3NzL2Jsb2Nrcy9jdXJ2ZS1lZGl0b3InKTtcblxuY2xhc3MgQ3VydmVFZGl0b3IgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgdmFyIGhhbW1lcnRpbWUgPSBwcm9wYWdhdGluZyhuZXcgSGFtbWVyKHRoaXMuYmFzZSkpXG4gICAgICAub24oJ3BhbicsIChldikgPT4ge1xuICAgICAgICB0aGlzLnggPSBldi5kZWx0YVg7IHRoaXMueSA9IGV2LmRlbHRhWTtcbiAgICAgICAgc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiAnRURJVE9SX1RSQU5TTEFURScsIGRhdGE6IHsgeDogZXYuZGVsdGFYLCB5OiBldi5kZWx0YVkgfSB9KVxuICAgICAgICAvLyB0aGlzLnJlbmRlcigpO1xuICAgICAgfSlcbiAgICAgIC5vbigncGFuZW5kJywgKGV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHggPSBldi5kZWx0YVgsXG4gICAgICAgICAgICAgIHkgPSBldi5kZWx0YVksXG4gICAgICAgICAgICAgIHt0cmFuc2xhdGV9ID0gc3RvcmUuZ2V0U3RhdGUoKS5yZXNpemU7XG5cbiAgICAgICAgdGhpcy54ID0gdGhpcy55ID0gMDtcbiAgICAgICAgc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiAnRURJVE9SX1RSQU5TTEFURScsIGRhdGE6IHsgeDogdHJhbnNsYXRlLnggKyB4LCB5OiB0cmFuc2xhdGUueSArIHkgfSB9KVxuICAgICAgfSlcbiAgICAgIC5vbigndGFwJywgKGV2KSA9PiB7XG4gICAgICAgIHN0b3JlLmRpc3BhdGNoKHsgdHlwZTogJ1BPSU5UX0RFU0VMRUNUX0FMTCcgfSk7XG4gICAgICB9KTtcbiAgICB0aGlzLl9hZGRLZXlVcCgpO1xuICAgIHN0b3JlLnN1YnNjcmliZSggKCkgPT4geyB0aGlzLnJlbmRlcigpOyB9KTtcbiAgfVxuXG4gIF9hZGRLZXlVcCAoKSB7IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5fb25LZXlVcCk7IH1cblxuICBfb25LZXlVcCAoZSkge1xuICAgIGlmICggIWUuYWx0S2V5ICkgeyByZXR1cm47IH1cbiAgICBzd2l0Y2ggKGUud2hpY2gpIHtcbiAgICAgIGNhc2UgOTA6IHsgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKEFjdGlvbkNyZWF0b3JzLnVuZG8oKSk7IH1cbiAgICAgIGNhc2UgODg6IHsgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKEFjdGlvbkNyZWF0b3JzLnJlZG8oKSk7IH1cbiAgICAgIGNhc2UgNjg6IHsgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKHsgdHlwZTogJ1BPSU5UX0RFTEVURScgfSk7IH1cbiAgICB9XG4gIH1cblxuICBfZ2V0U3R5bGUgKCkge1xuICAgIGNvbnN0IHtzdGF0ZX0gID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICB7cmVzaXplfSA9IHN0YXRlO1xuICAgIGxldCB7dGVtcF90b3AsIHRlbXBfYm90dG9tLCB0ZW1wX3JpZ2h0LCB0cmFuc2xhdGV9ID0gcmVzaXplO1xuXG4gICAgdGVtcF90b3AgICAgKz0gcmVzaXplLnRvcDtcbiAgICB0ZW1wX2JvdHRvbSArPSByZXNpemUuYm90dG9tO1xuICAgIHRlbXBfcmlnaHQgICs9IHJlc2l6ZS5yaWdodDtcblxuICAgIGNvbnN0IFhfU0laRSA9IEMuQ1VSVkVfU0laRSArIDUzLFxuICAgICAgICAgIFlfU0laRSA9IEMuQ1VSVkVfU0laRSArIDIqQy5DVVJWRV9QQURESU5HO1xuXG4gICAgLy8gY29uc3RyYWluIG1pbiBoZWlnaHRcbiAgICBpZiAoWV9TSVpFIC0gdGVtcF90b3AgPCBZX1NJWkUpIHsgdGVtcF90b3AgPSAwOyB9XG4gICAgaWYgKFlfU0laRSArIHRlbXBfYm90dG9tIDwgWV9TSVpFKSB7IHRlbXBfYm90dG9tID0gMDsgfVxuICAgIGlmIChYX1NJWkUgKyB0ZW1wX3JpZ2h0IDwgWF9TSVpFKSB7IHRlbXBfcmlnaHQgPSAwOyB9XG5cbiAgICB0ZW1wX3RvcCAgICA9IG1vZCggdGVtcF90b3AsIC0xICk7XG4gICAgdGVtcF9ib3R0b20gPSBtb2QoIHRlbXBfYm90dG9tICk7XG5cbiAgICBjb25zdCBoZWlnaHQgPSBgaGVpZ2h0OiAke1lfU0laRSAtIHRlbXBfdG9wICsgdGVtcF9ib3R0b219cHhgLFxuICAgICAgICAgIHdpZHRoICA9IGB3aWR0aDogJHtYX1NJWkUgKyB0ZW1wX3JpZ2h0fXB4YCxcbiAgICAgICAgICB4ID0gKHRoaXMueCB8fCAwKSArIHRyYW5zbGF0ZS54LFxuICAgICAgICAgIHkgPSAodGhpcy55IHx8IDApICsgdHJhbnNsYXRlLnksXG4gICAgICAgICAgdHJhbnNmb3JtID0gYHRyYW5zZm9ybTogdHJhbnNsYXRlKCR7eH1weCwgJHt5ICsgdGVtcF90b3B9cHgpYDtcblxuICAgIHJldHVybiBgJHttb2pzLmgucHJlZml4LmNzc30ke3RyYW5zZm9ybX07ICR7dHJhbnNmb3JtfTsgJHt3aWR0aH07ICR7aGVpZ2h0fTtgO1xuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCBDTEFTU0VTICA9IHJlcXVpcmUoJy4uLy4uL2Nzcy9ibG9ja3MvY3VydmUtZWRpdG9yLnBvc3Rjc3MuY3NzLmpzb24nKSxcbiAgICAgICAgICB7c3RhdGV9ICA9IHRoaXMucHJvcHMsXG4gICAgICAgICAge3Jlc2l6ZX0gPSBzdGF0ZTtcblxuICAgIGNvbnN0IHN0eWxlID0gdGhpcy5fZ2V0U3R5bGUoKTtcbiAgICByZXR1cm4gICg8ZGl2IGNsYXNzTmFtZT17Q0xBU1NFU1snY3VydmUtZWRpdG9yJ119IHN0eWxlPXsgc3R5bGUgfSA+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtDTEFTU0VTWydjdXJ2ZS1lZGl0b3JfX2xlZnQnXX0+PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtDTEFTU0VTWydjdXJ2ZS1lZGl0b3JfX3JpZ2h0J119PjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+KTtcbiAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IEN1cnZlRWRpdG9yO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvanMvdGFncy9jdXJ2ZS1lZGl0b3IuYmFiZWwuanN4XG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtcHJvdG90eXBlLW9mXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mLmpzXG4gKiogbW9kdWxlIGlkID0gNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwicmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1wcm90b3R5cGUtb2YnKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9fY29yZScpLk9iamVjdC5nZXRQcm90b3R5cGVPZjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1wcm90b3R5cGUtb2YuanNcbiAqKiBtb2R1bGUgaWQgPSA3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyAxOS4xLjIuOSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTylcbnZhciB0b09iamVjdCAgICAgICAgPSByZXF1aXJlKCcuL190by1vYmplY3QnKVxuICAsICRnZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJy4vX29iamVjdC1ncG8nKTtcblxucmVxdWlyZSgnLi9fb2JqZWN0LXNhcCcpKCdnZXRQcm90b3R5cGVPZicsIGZ1bmN0aW9uKCl7XG4gIHJldHVybiBmdW5jdGlvbiBnZXRQcm90b3R5cGVPZihpdCl7XG4gICAgcmV0dXJuICRnZXRQcm90b3R5cGVPZih0b09iamVjdChpdCkpO1xuICB9O1xufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtcHJvdG90eXBlLW9mLmpzXG4gKiogbW9kdWxlIGlkID0gOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gNy4xLjEzIFRvT2JqZWN0KGFyZ3VtZW50KVxudmFyIGRlZmluZWQgPSByZXF1aXJlKCcuL19kZWZpbmVkJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIE9iamVjdChkZWZpbmVkKGl0KSk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL190by1vYmplY3QuanNcbiAqKiBtb2R1bGUgaWQgPSA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIGlmKGl0ID09IHVuZGVmaW5lZCl0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgXCIgKyBpdCk7XG4gIHJldHVybiBpdDtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2RlZmluZWQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gMTkuMS4yLjkgLyAxNS4yLjMuMiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTylcbnZhciBoYXMgICAgICAgICA9IHJlcXVpcmUoJy4vX2hhcycpXG4gICwgdG9PYmplY3QgICAgPSByZXF1aXJlKCcuL190by1vYmplY3QnKVxuICAsIElFX1BST1RPICAgID0gcmVxdWlyZSgnLi9fc2hhcmVkLWtleScpKCdJRV9QUk9UTycpXG4gICwgT2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbihPKXtcbiAgTyA9IHRvT2JqZWN0KE8pO1xuICBpZihoYXMoTywgSUVfUFJPVE8pKXJldHVybiBPW0lFX1BST1RPXTtcbiAgaWYodHlwZW9mIE8uY29uc3RydWN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBPIGluc3RhbmNlb2YgTy5jb25zdHJ1Y3Rvcil7XG4gICAgcmV0dXJuIE8uY29uc3RydWN0b3IucHJvdG90eXBlO1xuICB9IHJldHVybiBPIGluc3RhbmNlb2YgT2JqZWN0ID8gT2JqZWN0UHJvdG8gOiBudWxsO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fb2JqZWN0LWdwby5qc1xuICoqIG1vZHVsZSBpZCA9IDExXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaGFzT3duUHJvcGVydHkgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIGtleSl7XG4gIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGl0LCBrZXkpO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9faGFzLmpzXG4gKiogbW9kdWxlIGlkID0gMTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBzaGFyZWQgPSByZXF1aXJlKCcuL19zaGFyZWQnKSgna2V5cycpXG4gICwgdWlkICAgID0gcmVxdWlyZSgnLi9fdWlkJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7XG4gIHJldHVybiBzaGFyZWRba2V5XSB8fCAoc2hhcmVkW2tleV0gPSB1aWQoa2V5KSk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19zaGFyZWQta2V5LmpzXG4gKiogbW9kdWxlIGlkID0gMTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnbG9iYWwgPSByZXF1aXJlKCcuL19nbG9iYWwnKVxuICAsIFNIQVJFRCA9ICdfX2NvcmUtanNfc2hhcmVkX18nXG4gICwgc3RvcmUgID0gZ2xvYmFsW1NIQVJFRF0gfHwgKGdsb2JhbFtTSEFSRURdID0ge30pO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpe1xuICByZXR1cm4gc3RvcmVba2V5XSB8fCAoc3RvcmVba2V5XSA9IHt9KTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3NoYXJlZC5qc1xuICoqIG1vZHVsZSBpZCA9IDE0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOFxudmFyIGdsb2JhbCA9IG1vZHVsZS5leHBvcnRzID0gdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PSBNYXRoXG4gID8gd2luZG93IDogdHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09IE1hdGggPyBzZWxmIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbmlmKHR5cGVvZiBfX2cgPT0gJ251bWJlcicpX19nID0gZ2xvYmFsOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2dsb2JhbC5qc1xuICoqIG1vZHVsZSBpZCA9IDE1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaWQgPSAwXG4gICwgcHggPSBNYXRoLnJhbmRvbSgpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpe1xuICByZXR1cm4gJ1N5bWJvbCgnLmNvbmNhdChrZXkgPT09IHVuZGVmaW5lZCA/ICcnIDoga2V5LCAnKV8nLCAoKytpZCArIHB4KS50b1N0cmluZygzNikpO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fdWlkLmpzXG4gKiogbW9kdWxlIGlkID0gMTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIG1vc3QgT2JqZWN0IG1ldGhvZHMgYnkgRVM2IHNob3VsZCBhY2NlcHQgcHJpbWl0aXZlc1xudmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIGNvcmUgICAgPSByZXF1aXJlKCcuL19jb3JlJylcbiAgLCBmYWlscyAgID0gcmVxdWlyZSgnLi9fZmFpbHMnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oS0VZLCBleGVjKXtcbiAgdmFyIGZuICA9IChjb3JlLk9iamVjdCB8fCB7fSlbS0VZXSB8fCBPYmplY3RbS0VZXVxuICAgICwgZXhwID0ge307XG4gIGV4cFtLRVldID0gZXhlYyhmbik7XG4gICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogZmFpbHMoZnVuY3Rpb24oKXsgZm4oMSk7IH0pLCAnT2JqZWN0JywgZXhwKTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1zYXAuanNcbiAqKiBtb2R1bGUgaWQgPSAxN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdsb2JhbCAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpXG4gICwgY29yZSAgICAgID0gcmVxdWlyZSgnLi9fY29yZScpXG4gICwgY3R4ICAgICAgID0gcmVxdWlyZSgnLi9fY3R4JylcbiAgLCBoaWRlICAgICAgPSByZXF1aXJlKCcuL19oaWRlJylcbiAgLCBQUk9UT1RZUEUgPSAncHJvdG90eXBlJztcblxudmFyICRleHBvcnQgPSBmdW5jdGlvbih0eXBlLCBuYW1lLCBzb3VyY2Upe1xuICB2YXIgSVNfRk9SQ0VEID0gdHlwZSAmICRleHBvcnQuRlxuICAgICwgSVNfR0xPQkFMID0gdHlwZSAmICRleHBvcnQuR1xuICAgICwgSVNfU1RBVElDID0gdHlwZSAmICRleHBvcnQuU1xuICAgICwgSVNfUFJPVE8gID0gdHlwZSAmICRleHBvcnQuUFxuICAgICwgSVNfQklORCAgID0gdHlwZSAmICRleHBvcnQuQlxuICAgICwgSVNfV1JBUCAgID0gdHlwZSAmICRleHBvcnQuV1xuICAgICwgZXhwb3J0cyAgID0gSVNfR0xPQkFMID8gY29yZSA6IGNvcmVbbmFtZV0gfHwgKGNvcmVbbmFtZV0gPSB7fSlcbiAgICAsIGV4cFByb3RvICA9IGV4cG9ydHNbUFJPVE9UWVBFXVxuICAgICwgdGFyZ2V0ICAgID0gSVNfR0xPQkFMID8gZ2xvYmFsIDogSVNfU1RBVElDID8gZ2xvYmFsW25hbWVdIDogKGdsb2JhbFtuYW1lXSB8fCB7fSlbUFJPVE9UWVBFXVxuICAgICwga2V5LCBvd24sIG91dDtcbiAgaWYoSVNfR0xPQkFMKXNvdXJjZSA9IG5hbWU7XG4gIGZvcihrZXkgaW4gc291cmNlKXtcbiAgICAvLyBjb250YWlucyBpbiBuYXRpdmVcbiAgICBvd24gPSAhSVNfRk9SQ0VEICYmIHRhcmdldCAmJiB0YXJnZXRba2V5XSAhPT0gdW5kZWZpbmVkO1xuICAgIGlmKG93biAmJiBrZXkgaW4gZXhwb3J0cyljb250aW51ZTtcbiAgICAvLyBleHBvcnQgbmF0aXZlIG9yIHBhc3NlZFxuICAgIG91dCA9IG93biA/IHRhcmdldFtrZXldIDogc291cmNlW2tleV07XG4gICAgLy8gcHJldmVudCBnbG9iYWwgcG9sbHV0aW9uIGZvciBuYW1lc3BhY2VzXG4gICAgZXhwb3J0c1trZXldID0gSVNfR0xPQkFMICYmIHR5cGVvZiB0YXJnZXRba2V5XSAhPSAnZnVuY3Rpb24nID8gc291cmNlW2tleV1cbiAgICAvLyBiaW5kIHRpbWVycyB0byBnbG9iYWwgZm9yIGNhbGwgZnJvbSBleHBvcnQgY29udGV4dFxuICAgIDogSVNfQklORCAmJiBvd24gPyBjdHgob3V0LCBnbG9iYWwpXG4gICAgLy8gd3JhcCBnbG9iYWwgY29uc3RydWN0b3JzIGZvciBwcmV2ZW50IGNoYW5nZSB0aGVtIGluIGxpYnJhcnlcbiAgICA6IElTX1dSQVAgJiYgdGFyZ2V0W2tleV0gPT0gb3V0ID8gKGZ1bmN0aW9uKEMpe1xuICAgICAgdmFyIEYgPSBmdW5jdGlvbihhLCBiLCBjKXtcbiAgICAgICAgaWYodGhpcyBpbnN0YW5jZW9mIEMpe1xuICAgICAgICAgIHN3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtcbiAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIG5ldyBDO1xuICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gbmV3IEMoYSk7XG4gICAgICAgICAgICBjYXNlIDI6IHJldHVybiBuZXcgQyhhLCBiKTtcbiAgICAgICAgICB9IHJldHVybiBuZXcgQyhhLCBiLCBjKTtcbiAgICAgICAgfSByZXR1cm4gQy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICAgIEZbUFJPVE9UWVBFXSA9IENbUFJPVE9UWVBFXTtcbiAgICAgIHJldHVybiBGO1xuICAgIC8vIG1ha2Ugc3RhdGljIHZlcnNpb25zIGZvciBwcm90b3R5cGUgbWV0aG9kc1xuICAgIH0pKG91dCkgOiBJU19QUk9UTyAmJiB0eXBlb2Ygb3V0ID09ICdmdW5jdGlvbicgPyBjdHgoRnVuY3Rpb24uY2FsbCwgb3V0KSA6IG91dDtcbiAgICAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUubWV0aG9kcy4lTkFNRSVcbiAgICBpZihJU19QUk9UTyl7XG4gICAgICAoZXhwb3J0cy52aXJ0dWFsIHx8IChleHBvcnRzLnZpcnR1YWwgPSB7fSkpW2tleV0gPSBvdXQ7XG4gICAgICAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUucHJvdG90eXBlLiVOQU1FJVxuICAgICAgaWYodHlwZSAmICRleHBvcnQuUiAmJiBleHBQcm90byAmJiAhZXhwUHJvdG9ba2V5XSloaWRlKGV4cFByb3RvLCBrZXksIG91dCk7XG4gICAgfVxuICB9XG59O1xuLy8gdHlwZSBiaXRtYXBcbiRleHBvcnQuRiA9IDE7ICAgLy8gZm9yY2VkXG4kZXhwb3J0LkcgPSAyOyAgIC8vIGdsb2JhbFxuJGV4cG9ydC5TID0gNDsgICAvLyBzdGF0aWNcbiRleHBvcnQuUCA9IDg7ICAgLy8gcHJvdG9cbiRleHBvcnQuQiA9IDE2OyAgLy8gYmluZFxuJGV4cG9ydC5XID0gMzI7ICAvLyB3cmFwXG4kZXhwb3J0LlUgPSA2NDsgIC8vIHNhZmVcbiRleHBvcnQuUiA9IDEyODsgLy8gcmVhbCBwcm90byBtZXRob2QgZm9yIGBsaWJyYXJ5YCBcbm1vZHVsZS5leHBvcnRzID0gJGV4cG9ydDtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fZXhwb3J0LmpzXG4gKiogbW9kdWxlIGlkID0gMThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBjb3JlID0gbW9kdWxlLmV4cG9ydHMgPSB7dmVyc2lvbjogJzIuNC4wJ307XG5pZih0eXBlb2YgX19lID09ICdudW1iZXInKV9fZSA9IGNvcmU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fY29yZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBvcHRpb25hbCAvIHNpbXBsZSBjb250ZXh0IGJpbmRpbmdcbnZhciBhRnVuY3Rpb24gPSByZXF1aXJlKCcuL19hLWZ1bmN0aW9uJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCB0aGF0LCBsZW5ndGgpe1xuICBhRnVuY3Rpb24oZm4pO1xuICBpZih0aGF0ID09PSB1bmRlZmluZWQpcmV0dXJuIGZuO1xuICBzd2l0Y2gobGVuZ3RoKXtcbiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbihhKXtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEpO1xuICAgIH07XG4gICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24oYSwgYil7XG4gICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiKTtcbiAgICB9O1xuICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKGEsIGIsIGMpe1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYiwgYyk7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24oLyogLi4uYXJncyAqLyl7XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7XG4gIH07XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19jdHguanNcbiAqKiBtb2R1bGUgaWQgPSAyMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIGlmKHR5cGVvZiBpdCAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGEgZnVuY3Rpb24hJyk7XG4gIHJldHVybiBpdDtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2EtZnVuY3Rpb24uanNcbiAqKiBtb2R1bGUgaWQgPSAyMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGRQICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKVxuICAsIGNyZWF0ZURlc2MgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgPyBmdW5jdGlvbihvYmplY3QsIGtleSwgdmFsdWUpe1xuICByZXR1cm4gZFAuZihvYmplY3QsIGtleSwgY3JlYXRlRGVzYygxLCB2YWx1ZSkpO1xufSA6IGZ1bmN0aW9uKG9iamVjdCwga2V5LCB2YWx1ZSl7XG4gIG9iamVjdFtrZXldID0gdmFsdWU7XG4gIHJldHVybiBvYmplY3Q7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19oaWRlLmpzXG4gKiogbW9kdWxlIGlkID0gMjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBhbk9iamVjdCAgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgSUU4X0RPTV9ERUZJTkUgPSByZXF1aXJlKCcuL19pZTgtZG9tLWRlZmluZScpXG4gICwgdG9QcmltaXRpdmUgICAgPSByZXF1aXJlKCcuL190by1wcmltaXRpdmUnKVxuICAsIGRQICAgICAgICAgICAgID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xuXG5leHBvcnRzLmYgPSByZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpID8gT2JqZWN0LmRlZmluZVByb3BlcnR5IDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcyl7XG4gIGFuT2JqZWN0KE8pO1xuICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7XG4gIGFuT2JqZWN0KEF0dHJpYnV0ZXMpO1xuICBpZihJRThfRE9NX0RFRklORSl0cnkge1xuICAgIHJldHVybiBkUChPLCBQLCBBdHRyaWJ1dGVzKTtcbiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfVxuICBpZignZ2V0JyBpbiBBdHRyaWJ1dGVzIHx8ICdzZXQnIGluIEF0dHJpYnV0ZXMpdGhyb3cgVHlwZUVycm9yKCdBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEnKTtcbiAgaWYoJ3ZhbHVlJyBpbiBBdHRyaWJ1dGVzKU9bUF0gPSBBdHRyaWJ1dGVzLnZhbHVlO1xuICByZXR1cm4gTztcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1kcC5qc1xuICoqIG1vZHVsZSBpZCA9IDIzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICBpZighaXNPYmplY3QoaXQpKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGFuIG9iamVjdCEnKTtcbiAgcmV0dXJuIGl0O1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fYW4tb2JqZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gMjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gdHlwZW9mIGl0ID09PSAnb2JqZWN0JyA/IGl0ICE9PSBudWxsIDogdHlwZW9mIGl0ID09PSAnZnVuY3Rpb24nO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9faXMtb2JqZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gMjVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gIXJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgJiYgIXJlcXVpcmUoJy4vX2ZhaWxzJykoZnVuY3Rpb24oKXtcbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXF1aXJlKCcuL19kb20tY3JlYXRlJykoJ2RpdicpLCAnYScsIHtnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiA3OyB9fSkuYSAhPSA3O1xufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2llOC1kb20tZGVmaW5lLmpzXG4gKiogbW9kdWxlIGlkID0gMjZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIFRoYW5rJ3MgSUU4IGZvciBoaXMgZnVubnkgZGVmaW5lUHJvcGVydHlcbm1vZHVsZS5leHBvcnRzID0gIXJlcXVpcmUoJy4vX2ZhaWxzJykoZnVuY3Rpb24oKXtcbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ2EnLCB7Z2V0OiBmdW5jdGlvbigpeyByZXR1cm4gNzsgfX0pLmEgIT0gNztcbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19kZXNjcmlwdG9ycy5qc1xuICoqIG1vZHVsZSBpZCA9IDI3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMpe1xuICB0cnkge1xuICAgIHJldHVybiAhIWV4ZWMoKTtcbiAgfSBjYXRjaChlKXtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fZmFpbHMuanNcbiAqKiBtb2R1bGUgaWQgPSAyOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0JylcbiAgLCBkb2N1bWVudCA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpLmRvY3VtZW50XG4gIC8vIGluIG9sZCBJRSB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBpcyAnb2JqZWN0J1xuICAsIGlzID0gaXNPYmplY3QoZG9jdW1lbnQpICYmIGlzT2JqZWN0KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHJldHVybiBpcyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaXQpIDoge307XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19kb20tY3JlYXRlLmpzXG4gKiogbW9kdWxlIGlkID0gMjlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIDcuMS4xIFRvUHJpbWl0aXZlKGlucHV0IFssIFByZWZlcnJlZFR5cGVdKVxudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0Jyk7XG4vLyBpbnN0ZWFkIG9mIHRoZSBFUzYgc3BlYyB2ZXJzaW9uLCB3ZSBkaWRuJ3QgaW1wbGVtZW50IEBAdG9QcmltaXRpdmUgY2FzZVxuLy8gYW5kIHRoZSBzZWNvbmQgYXJndW1lbnQgLSBmbGFnIC0gcHJlZmVycmVkIHR5cGUgaXMgYSBzdHJpbmdcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIFMpe1xuICBpZighaXNPYmplY3QoaXQpKXJldHVybiBpdDtcbiAgdmFyIGZuLCB2YWw7XG4gIGlmKFMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDtcbiAgaWYodHlwZW9mIChmbiA9IGl0LnZhbHVlT2YpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsO1xuICBpZighUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsO1xuICB0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWVcIik7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL190by1wcmltaXRpdmUuanNcbiAqKiBtb2R1bGUgaWQgPSAzMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihiaXRtYXAsIHZhbHVlKXtcbiAgcmV0dXJuIHtcbiAgICBlbnVtZXJhYmxlICA6ICEoYml0bWFwICYgMSksXG4gICAgY29uZmlndXJhYmxlOiAhKGJpdG1hcCAmIDIpLFxuICAgIHdyaXRhYmxlICAgIDogIShiaXRtYXAgJiA0KSxcbiAgICB2YWx1ZSAgICAgICA6IHZhbHVlXG4gIH07XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19wcm9wZXJ0eS1kZXNjLmpzXG4gKiogbW9kdWxlIGlkID0gMzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9iYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2suanNcbiAqKiBtb2R1bGUgaWQgPSAzMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfZGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKFwiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5XCIpO1xuXG52YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluZVByb3BlcnR5KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgICByZXR1cm4gQ29uc3RydWN0b3I7XG4gIH07XG59KCk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzLmpzXG4gKiogbW9kdWxlIGlkID0gMzNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5XCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHkuanNcbiAqKiBtb2R1bGUgaWQgPSAzNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwicmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmRlZmluZS1wcm9wZXJ0eScpO1xudmFyICRPYmplY3QgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzL19jb3JlJykuT2JqZWN0O1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBkZXNjKXtcbiAgcmV0dXJuICRPYmplY3QuZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgZGVzYyk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5LmpzXG4gKiogbW9kdWxlIGlkID0gMzVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7XG4vLyAxOS4xLjIuNCAvIDE1LjIuMy42IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKVxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKSwgJ09iamVjdCcsIHtkZWZpbmVQcm9wZXJ0eTogcmVxdWlyZSgnLi9fb2JqZWN0LWRwJykuZn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5vYmplY3QuZGVmaW5lLXByb3BlcnR5LmpzXG4gKiogbW9kdWxlIGlkID0gMzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX3R5cGVvZjIgPSByZXF1aXJlKFwiLi4vaGVscGVycy90eXBlb2ZcIik7XG5cbnZhciBfdHlwZW9mMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3R5cGVvZjIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoc2VsZiwgY2FsbCkge1xuICBpZiAoIXNlbGYpIHtcbiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG4gIH1cblxuICByZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6ICgwLCBfdHlwZW9mMy5kZWZhdWx0KShjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4uanNcbiAqKiBtb2R1bGUgaWQgPSAzN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfaXRlcmF0b3IgPSByZXF1aXJlKFwiLi4vY29yZS1qcy9zeW1ib2wvaXRlcmF0b3JcIik7XG5cbnZhciBfaXRlcmF0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaXRlcmF0b3IpO1xuXG52YXIgX3N5bWJvbCA9IHJlcXVpcmUoXCIuLi9jb3JlLWpzL3N5bWJvbFwiKTtcblxudmFyIF9zeW1ib2wyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3ltYm9sKTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBfaXRlcmF0b3IyLmRlZmF1bHQgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBfc3ltYm9sMi5kZWZhdWx0ID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBfc3ltYm9sMi5kZWZhdWx0ID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuZGVmYXVsdCA9IHR5cGVvZiBfc3ltYm9sMi5kZWZhdWx0ID09PSBcImZ1bmN0aW9uXCIgJiYgX3R5cGVvZihfaXRlcmF0b3IyLmRlZmF1bHQpID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKG9iaik7XG59IDogZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gb2JqICYmIHR5cGVvZiBfc3ltYm9sMi5kZWZhdWx0ID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBfc3ltYm9sMi5kZWZhdWx0ID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihvYmopO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9iYWJlbC1ydW50aW1lL2hlbHBlcnMvdHlwZW9mLmpzXG4gKiogbW9kdWxlIGlkID0gMzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wvaXRlcmF0b3JcIiksIF9fZXNNb2R1bGU6IHRydWUgfTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9iYWJlbC1ydW50aW1lL2NvcmUtanMvc3ltYm9sL2l0ZXJhdG9yLmpzXG4gKiogbW9kdWxlIGlkID0gMzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvcicpO1xucmVxdWlyZSgnLi4vLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvX3drcy1leHQnKS5mKCdpdGVyYXRvcicpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wvaXRlcmF0b3IuanNcbiAqKiBtb2R1bGUgaWQgPSA0MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyICRhdCAgPSByZXF1aXJlKCcuL19zdHJpbmctYXQnKSh0cnVlKTtcblxuLy8gMjEuMS4zLjI3IFN0cmluZy5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKVxucmVxdWlyZSgnLi9faXRlci1kZWZpbmUnKShTdHJpbmcsICdTdHJpbmcnLCBmdW5jdGlvbihpdGVyYXRlZCl7XG4gIHRoaXMuX3QgPSBTdHJpbmcoaXRlcmF0ZWQpOyAvLyB0YXJnZXRcbiAgdGhpcy5faSA9IDA7ICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXhcbi8vIDIxLjEuNS4yLjEgJVN0cmluZ0l0ZXJhdG9yUHJvdG90eXBlJS5uZXh0KClcbn0sIGZ1bmN0aW9uKCl7XG4gIHZhciBPICAgICA9IHRoaXMuX3RcbiAgICAsIGluZGV4ID0gdGhpcy5faVxuICAgICwgcG9pbnQ7XG4gIGlmKGluZGV4ID49IE8ubGVuZ3RoKXJldHVybiB7dmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZX07XG4gIHBvaW50ID0gJGF0KE8sIGluZGV4KTtcbiAgdGhpcy5faSArPSBwb2ludC5sZW5ndGg7XG4gIHJldHVybiB7dmFsdWU6IHBvaW50LCBkb25lOiBmYWxzZX07XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yLmpzXG4gKiogbW9kdWxlIGlkID0gNDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciB0b0ludGVnZXIgPSByZXF1aXJlKCcuL190by1pbnRlZ2VyJylcbiAgLCBkZWZpbmVkICAgPSByZXF1aXJlKCcuL19kZWZpbmVkJyk7XG4vLyB0cnVlICAtPiBTdHJpbmcjYXRcbi8vIGZhbHNlIC0+IFN0cmluZyNjb2RlUG9pbnRBdFxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihUT19TVFJJTkcpe1xuICByZXR1cm4gZnVuY3Rpb24odGhhdCwgcG9zKXtcbiAgICB2YXIgcyA9IFN0cmluZyhkZWZpbmVkKHRoYXQpKVxuICAgICAgLCBpID0gdG9JbnRlZ2VyKHBvcylcbiAgICAgICwgbCA9IHMubGVuZ3RoXG4gICAgICAsIGEsIGI7XG4gICAgaWYoaSA8IDAgfHwgaSA+PSBsKXJldHVybiBUT19TVFJJTkcgPyAnJyA6IHVuZGVmaW5lZDtcbiAgICBhID0gcy5jaGFyQ29kZUF0KGkpO1xuICAgIHJldHVybiBhIDwgMHhkODAwIHx8IGEgPiAweGRiZmYgfHwgaSArIDEgPT09IGwgfHwgKGIgPSBzLmNoYXJDb2RlQXQoaSArIDEpKSA8IDB4ZGMwMCB8fCBiID4gMHhkZmZmXG4gICAgICA/IFRPX1NUUklORyA/IHMuY2hhckF0KGkpIDogYVxuICAgICAgOiBUT19TVFJJTkcgPyBzLnNsaWNlKGksIGkgKyAyKSA6IChhIC0gMHhkODAwIDw8IDEwKSArIChiIC0gMHhkYzAwKSArIDB4MTAwMDA7XG4gIH07XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19zdHJpbmctYXQuanNcbiAqKiBtb2R1bGUgaWQgPSA0MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gNy4xLjQgVG9JbnRlZ2VyXG52YXIgY2VpbCAgPSBNYXRoLmNlaWxcbiAgLCBmbG9vciA9IE1hdGguZmxvb3I7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIGlzTmFOKGl0ID0gK2l0KSA/IDAgOiAoaXQgPiAwID8gZmxvb3IgOiBjZWlsKShpdCk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL190by1pbnRlZ2VyLmpzXG4gKiogbW9kdWxlIGlkID0gNDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciBMSUJSQVJZICAgICAgICA9IHJlcXVpcmUoJy4vX2xpYnJhcnknKVxuICAsICRleHBvcnQgICAgICAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCByZWRlZmluZSAgICAgICA9IHJlcXVpcmUoJy4vX3JlZGVmaW5lJylcbiAgLCBoaWRlICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2hpZGUnKVxuICAsIGhhcyAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faGFzJylcbiAgLCBJdGVyYXRvcnMgICAgICA9IHJlcXVpcmUoJy4vX2l0ZXJhdG9ycycpXG4gICwgJGl0ZXJDcmVhdGUgICAgPSByZXF1aXJlKCcuL19pdGVyLWNyZWF0ZScpXG4gICwgc2V0VG9TdHJpbmdUYWcgPSByZXF1aXJlKCcuL19zZXQtdG8tc3RyaW5nLXRhZycpXG4gICwgZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCcuL19vYmplY3QtZ3BvJylcbiAgLCBJVEVSQVRPUiAgICAgICA9IHJlcXVpcmUoJy4vX3drcycpKCdpdGVyYXRvcicpXG4gICwgQlVHR1kgICAgICAgICAgPSAhKFtdLmtleXMgJiYgJ25leHQnIGluIFtdLmtleXMoKSkgLy8gU2FmYXJpIGhhcyBidWdneSBpdGVyYXRvcnMgdy9vIGBuZXh0YFxuICAsIEZGX0lURVJBVE9SICAgID0gJ0BAaXRlcmF0b3InXG4gICwgS0VZUyAgICAgICAgICAgPSAna2V5cydcbiAgLCBWQUxVRVMgICAgICAgICA9ICd2YWx1ZXMnO1xuXG52YXIgcmV0dXJuVGhpcyA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzOyB9O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEJhc2UsIE5BTUUsIENvbnN0cnVjdG9yLCBuZXh0LCBERUZBVUxULCBJU19TRVQsIEZPUkNFRCl7XG4gICRpdGVyQ3JlYXRlKENvbnN0cnVjdG9yLCBOQU1FLCBuZXh0KTtcbiAgdmFyIGdldE1ldGhvZCA9IGZ1bmN0aW9uKGtpbmQpe1xuICAgIGlmKCFCVUdHWSAmJiBraW5kIGluIHByb3RvKXJldHVybiBwcm90b1traW5kXTtcbiAgICBzd2l0Y2goa2luZCl7XG4gICAgICBjYXNlIEtFWVM6IHJldHVybiBmdW5jdGlvbiBrZXlzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07XG4gICAgICBjYXNlIFZBTFVFUzogcmV0dXJuIGZ1bmN0aW9uIHZhbHVlcygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9O1xuICAgIH0gcmV0dXJuIGZ1bmN0aW9uIGVudHJpZXMoKXsgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsgfTtcbiAgfTtcbiAgdmFyIFRBRyAgICAgICAgPSBOQU1FICsgJyBJdGVyYXRvcidcbiAgICAsIERFRl9WQUxVRVMgPSBERUZBVUxUID09IFZBTFVFU1xuICAgICwgVkFMVUVTX0JVRyA9IGZhbHNlXG4gICAgLCBwcm90byAgICAgID0gQmFzZS5wcm90b3R5cGVcbiAgICAsICRuYXRpdmUgICAgPSBwcm90b1tJVEVSQVRPUl0gfHwgcHJvdG9bRkZfSVRFUkFUT1JdIHx8IERFRkFVTFQgJiYgcHJvdG9bREVGQVVMVF1cbiAgICAsICRkZWZhdWx0ICAgPSAkbmF0aXZlIHx8IGdldE1ldGhvZChERUZBVUxUKVxuICAgICwgJGVudHJpZXMgICA9IERFRkFVTFQgPyAhREVGX1ZBTFVFUyA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKCdlbnRyaWVzJykgOiB1bmRlZmluZWRcbiAgICAsICRhbnlOYXRpdmUgPSBOQU1FID09ICdBcnJheScgPyBwcm90by5lbnRyaWVzIHx8ICRuYXRpdmUgOiAkbmF0aXZlXG4gICAgLCBtZXRob2RzLCBrZXksIEl0ZXJhdG9yUHJvdG90eXBlO1xuICAvLyBGaXggbmF0aXZlXG4gIGlmKCRhbnlOYXRpdmUpe1xuICAgIEl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG90eXBlT2YoJGFueU5hdGl2ZS5jYWxsKG5ldyBCYXNlKSk7XG4gICAgaWYoSXRlcmF0b3JQcm90b3R5cGUgIT09IE9iamVjdC5wcm90b3R5cGUpe1xuICAgICAgLy8gU2V0IEBAdG9TdHJpbmdUYWcgdG8gbmF0aXZlIGl0ZXJhdG9yc1xuICAgICAgc2V0VG9TdHJpbmdUYWcoSXRlcmF0b3JQcm90b3R5cGUsIFRBRywgdHJ1ZSk7XG4gICAgICAvLyBmaXggZm9yIHNvbWUgb2xkIGVuZ2luZXNcbiAgICAgIGlmKCFMSUJSQVJZICYmICFoYXMoSXRlcmF0b3JQcm90b3R5cGUsIElURVJBVE9SKSloaWRlKEl0ZXJhdG9yUHJvdG90eXBlLCBJVEVSQVRPUiwgcmV0dXJuVGhpcyk7XG4gICAgfVxuICB9XG4gIC8vIGZpeCBBcnJheSN7dmFsdWVzLCBAQGl0ZXJhdG9yfS5uYW1lIGluIFY4IC8gRkZcbiAgaWYoREVGX1ZBTFVFUyAmJiAkbmF0aXZlICYmICRuYXRpdmUubmFtZSAhPT0gVkFMVUVTKXtcbiAgICBWQUxVRVNfQlVHID0gdHJ1ZTtcbiAgICAkZGVmYXVsdCA9IGZ1bmN0aW9uIHZhbHVlcygpeyByZXR1cm4gJG5hdGl2ZS5jYWxsKHRoaXMpOyB9O1xuICB9XG4gIC8vIERlZmluZSBpdGVyYXRvclxuICBpZigoIUxJQlJBUlkgfHwgRk9SQ0VEKSAmJiAoQlVHR1kgfHwgVkFMVUVTX0JVRyB8fCAhcHJvdG9bSVRFUkFUT1JdKSl7XG4gICAgaGlkZShwcm90bywgSVRFUkFUT1IsICRkZWZhdWx0KTtcbiAgfVxuICAvLyBQbHVnIGZvciBsaWJyYXJ5XG4gIEl0ZXJhdG9yc1tOQU1FXSA9ICRkZWZhdWx0O1xuICBJdGVyYXRvcnNbVEFHXSAgPSByZXR1cm5UaGlzO1xuICBpZihERUZBVUxUKXtcbiAgICBtZXRob2RzID0ge1xuICAgICAgdmFsdWVzOiAgREVGX1ZBTFVFUyA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKFZBTFVFUyksXG4gICAgICBrZXlzOiAgICBJU19TRVQgICAgID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoS0VZUyksXG4gICAgICBlbnRyaWVzOiAkZW50cmllc1xuICAgIH07XG4gICAgaWYoRk9SQ0VEKWZvcihrZXkgaW4gbWV0aG9kcyl7XG4gICAgICBpZighKGtleSBpbiBwcm90bykpcmVkZWZpbmUocHJvdG8sIGtleSwgbWV0aG9kc1trZXldKTtcbiAgICB9IGVsc2UgJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAoQlVHR1kgfHwgVkFMVUVTX0JVRyksIE5BTUUsIG1ldGhvZHMpO1xuICB9XG4gIHJldHVybiBtZXRob2RzO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9faXRlci1kZWZpbmUuanNcbiAqKiBtb2R1bGUgaWQgPSA0NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSB0cnVlO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19saWJyYXJ5LmpzXG4gKiogbW9kdWxlIGlkID0gNDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9faGlkZScpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19yZWRlZmluZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19pdGVyYXRvcnMuanNcbiAqKiBtb2R1bGUgaWQgPSA0N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGNyZWF0ZSAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWNyZWF0ZScpXG4gICwgZGVzY3JpcHRvciAgICAgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJylcbiAgLCBzZXRUb1N0cmluZ1RhZyA9IHJlcXVpcmUoJy4vX3NldC10by1zdHJpbmctdGFnJylcbiAgLCBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuXG4vLyAyNS4xLjIuMS4xICVJdGVyYXRvclByb3RvdHlwZSVbQEBpdGVyYXRvcl0oKVxucmVxdWlyZSgnLi9faGlkZScpKEl0ZXJhdG9yUHJvdG90eXBlLCByZXF1aXJlKCcuL193a3MnKSgnaXRlcmF0b3InKSwgZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKENvbnN0cnVjdG9yLCBOQU1FLCBuZXh0KXtcbiAgQ29uc3RydWN0b3IucHJvdG90eXBlID0gY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlLCB7bmV4dDogZGVzY3JpcHRvcigxLCBuZXh0KX0pO1xuICBzZXRUb1N0cmluZ1RhZyhDb25zdHJ1Y3RvciwgTkFNRSArICcgSXRlcmF0b3InKTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2l0ZXItY3JlYXRlLmpzXG4gKiogbW9kdWxlIGlkID0gNDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIDE5LjEuMi4yIC8gMTUuMi4zLjUgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKVxudmFyIGFuT2JqZWN0ICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JylcbiAgLCBkUHMgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1kcHMnKVxuICAsIGVudW1CdWdLZXlzID0gcmVxdWlyZSgnLi9fZW51bS1idWcta2V5cycpXG4gICwgSUVfUFJPVE8gICAgPSByZXF1aXJlKCcuL19zaGFyZWQta2V5JykoJ0lFX1BST1RPJylcbiAgLCBFbXB0eSAgICAgICA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH1cbiAgLCBQUk9UT1RZUEUgICA9ICdwcm90b3R5cGUnO1xuXG4vLyBDcmVhdGUgb2JqZWN0IHdpdGggZmFrZSBgbnVsbGAgcHJvdG90eXBlOiB1c2UgaWZyYW1lIE9iamVjdCB3aXRoIGNsZWFyZWQgcHJvdG90eXBlXG52YXIgY3JlYXRlRGljdCA9IGZ1bmN0aW9uKCl7XG4gIC8vIFRocmFzaCwgd2FzdGUgYW5kIHNvZG9teTogSUUgR0MgYnVnXG4gIHZhciBpZnJhbWUgPSByZXF1aXJlKCcuL19kb20tY3JlYXRlJykoJ2lmcmFtZScpXG4gICAgLCBpICAgICAgPSBlbnVtQnVnS2V5cy5sZW5ndGhcbiAgICAsIGx0ICAgICA9ICc8J1xuICAgICwgZ3QgICAgID0gJz4nXG4gICAgLCBpZnJhbWVEb2N1bWVudDtcbiAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIHJlcXVpcmUoJy4vX2h0bWwnKS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICBpZnJhbWUuc3JjID0gJ2phdmFzY3JpcHQ6JzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zY3JpcHQtdXJsXG4gIC8vIGNyZWF0ZURpY3QgPSBpZnJhbWUuY29udGVudFdpbmRvdy5PYmplY3Q7XG4gIC8vIGh0bWwucmVtb3ZlQ2hpbGQoaWZyYW1lKTtcbiAgaWZyYW1lRG9jdW1lbnQgPSBpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDtcbiAgaWZyYW1lRG9jdW1lbnQub3BlbigpO1xuICBpZnJhbWVEb2N1bWVudC53cml0ZShsdCArICdzY3JpcHQnICsgZ3QgKyAnZG9jdW1lbnQuRj1PYmplY3QnICsgbHQgKyAnL3NjcmlwdCcgKyBndCk7XG4gIGlmcmFtZURvY3VtZW50LmNsb3NlKCk7XG4gIGNyZWF0ZURpY3QgPSBpZnJhbWVEb2N1bWVudC5GO1xuICB3aGlsZShpLS0pZGVsZXRlIGNyZWF0ZURpY3RbUFJPVE9UWVBFXVtlbnVtQnVnS2V5c1tpXV07XG4gIHJldHVybiBjcmVhdGVEaWN0KCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24gY3JlYXRlKE8sIFByb3BlcnRpZXMpe1xuICB2YXIgcmVzdWx0O1xuICBpZihPICE9PSBudWxsKXtcbiAgICBFbXB0eVtQUk9UT1RZUEVdID0gYW5PYmplY3QoTyk7XG4gICAgcmVzdWx0ID0gbmV3IEVtcHR5O1xuICAgIEVtcHR5W1BST1RPVFlQRV0gPSBudWxsO1xuICAgIC8vIGFkZCBcIl9fcHJvdG9fX1wiIGZvciBPYmplY3QuZ2V0UHJvdG90eXBlT2YgcG9seWZpbGxcbiAgICByZXN1bHRbSUVfUFJPVE9dID0gTztcbiAgfSBlbHNlIHJlc3VsdCA9IGNyZWF0ZURpY3QoKTtcbiAgcmV0dXJuIFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IGRQcyhyZXN1bHQsIFByb3BlcnRpZXMpO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19vYmplY3QtY3JlYXRlLmpzXG4gKiogbW9kdWxlIGlkID0gNDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBkUCAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpXG4gICwgYW5PYmplY3QgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKVxuICAsIGdldEtleXMgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWtleXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMgOiBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpe1xuICBhbk9iamVjdChPKTtcbiAgdmFyIGtleXMgICA9IGdldEtleXMoUHJvcGVydGllcylcbiAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoXG4gICAgLCBpID0gMFxuICAgICwgUDtcbiAgd2hpbGUobGVuZ3RoID4gaSlkUC5mKE8sIFAgPSBrZXlzW2krK10sIFByb3BlcnRpZXNbUF0pO1xuICByZXR1cm4gTztcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1kcHMuanNcbiAqKiBtb2R1bGUgaWQgPSA1MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gMTkuMS4yLjE0IC8gMTUuMi4zLjE0IE9iamVjdC5rZXlzKE8pXG52YXIgJGtleXMgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3Qta2V5cy1pbnRlcm5hbCcpXG4gICwgZW51bUJ1Z0tleXMgPSByZXF1aXJlKCcuL19lbnVtLWJ1Zy1rZXlzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24ga2V5cyhPKXtcbiAgcmV0dXJuICRrZXlzKE8sIGVudW1CdWdLZXlzKTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1rZXlzLmpzXG4gKiogbW9kdWxlIGlkID0gNTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBoYXMgICAgICAgICAgPSByZXF1aXJlKCcuL19oYXMnKVxuICAsIHRvSU9iamVjdCAgICA9IHJlcXVpcmUoJy4vX3RvLWlvYmplY3QnKVxuICAsIGFycmF5SW5kZXhPZiA9IHJlcXVpcmUoJy4vX2FycmF5LWluY2x1ZGVzJykoZmFsc2UpXG4gICwgSUVfUFJPVE8gICAgID0gcmVxdWlyZSgnLi9fc2hhcmVkLWtleScpKCdJRV9QUk9UTycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iamVjdCwgbmFtZXMpe1xuICB2YXIgTyAgICAgID0gdG9JT2JqZWN0KG9iamVjdClcbiAgICAsIGkgICAgICA9IDBcbiAgICAsIHJlc3VsdCA9IFtdXG4gICAgLCBrZXk7XG4gIGZvcihrZXkgaW4gTylpZihrZXkgIT0gSUVfUFJPVE8paGFzKE8sIGtleSkgJiYgcmVzdWx0LnB1c2goa2V5KTtcbiAgLy8gRG9uJ3QgZW51bSBidWcgJiBoaWRkZW4ga2V5c1xuICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKWlmKGhhcyhPLCBrZXkgPSBuYW1lc1tpKytdKSl7XG4gICAgfmFycmF5SW5kZXhPZihyZXN1bHQsIGtleSkgfHwgcmVzdWx0LnB1c2goa2V5KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fb2JqZWN0LWtleXMtaW50ZXJuYWwuanNcbiAqKiBtb2R1bGUgaWQgPSA1MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gdG8gaW5kZXhlZCBvYmplY3QsIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzXG52YXIgSU9iamVjdCA9IHJlcXVpcmUoJy4vX2lvYmplY3QnKVxuICAsIGRlZmluZWQgPSByZXF1aXJlKCcuL19kZWZpbmVkJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIElPYmplY3QoZGVmaW5lZChpdCkpO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fdG8taW9iamVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDUzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBmYWxsYmFjayBmb3Igbm9uLWFycmF5LWxpa2UgRVMzIGFuZCBub24tZW51bWVyYWJsZSBvbGQgVjggc3RyaW5nc1xudmFyIGNvZiA9IHJlcXVpcmUoJy4vX2NvZicpO1xubW9kdWxlLmV4cG9ydHMgPSBPYmplY3QoJ3onKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKSA/IE9iamVjdCA6IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIGNvZihpdCkgPT0gJ1N0cmluZycgPyBpdC5zcGxpdCgnJykgOiBPYmplY3QoaXQpO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9faW9iamVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDU0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGl0KS5zbGljZSg4LCAtMSk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19jb2YuanNcbiAqKiBtb2R1bGUgaWQgPSA1NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gZmFsc2UgLT4gQXJyYXkjaW5kZXhPZlxuLy8gdHJ1ZSAgLT4gQXJyYXkjaW5jbHVkZXNcbnZhciB0b0lPYmplY3QgPSByZXF1aXJlKCcuL190by1pb2JqZWN0JylcbiAgLCB0b0xlbmd0aCAgPSByZXF1aXJlKCcuL190by1sZW5ndGgnKVxuICAsIHRvSW5kZXggICA9IHJlcXVpcmUoJy4vX3RvLWluZGV4Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKElTX0lOQ0xVREVTKXtcbiAgcmV0dXJuIGZ1bmN0aW9uKCR0aGlzLCBlbCwgZnJvbUluZGV4KXtcbiAgICB2YXIgTyAgICAgID0gdG9JT2JqZWN0KCR0aGlzKVxuICAgICAgLCBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aClcbiAgICAgICwgaW5kZXggID0gdG9JbmRleChmcm9tSW5kZXgsIGxlbmd0aClcbiAgICAgICwgdmFsdWU7XG4gICAgLy8gQXJyYXkjaW5jbHVkZXMgdXNlcyBTYW1lVmFsdWVaZXJvIGVxdWFsaXR5IGFsZ29yaXRobVxuICAgIGlmKElTX0lOQ0xVREVTICYmIGVsICE9IGVsKXdoaWxlKGxlbmd0aCA+IGluZGV4KXtcbiAgICAgIHZhbHVlID0gT1tpbmRleCsrXTtcbiAgICAgIGlmKHZhbHVlICE9IHZhbHVlKXJldHVybiB0cnVlO1xuICAgIC8vIEFycmF5I3RvSW5kZXggaWdub3JlcyBob2xlcywgQXJyYXkjaW5jbHVkZXMgLSBub3RcbiAgICB9IGVsc2UgZm9yKDtsZW5ndGggPiBpbmRleDsgaW5kZXgrKylpZihJU19JTkNMVURFUyB8fCBpbmRleCBpbiBPKXtcbiAgICAgIGlmKE9baW5kZXhdID09PSBlbClyZXR1cm4gSVNfSU5DTFVERVMgfHwgaW5kZXggfHwgMDtcbiAgICB9IHJldHVybiAhSVNfSU5DTFVERVMgJiYgLTE7XG4gIH07XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19hcnJheS1pbmNsdWRlcy5qc1xuICoqIG1vZHVsZSBpZCA9IDU2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyA3LjEuMTUgVG9MZW5ndGhcbnZhciB0b0ludGVnZXIgPSByZXF1aXJlKCcuL190by1pbnRlZ2VyJylcbiAgLCBtaW4gICAgICAgPSBNYXRoLm1pbjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gaXQgPiAwID8gbWluKHRvSW50ZWdlcihpdCksIDB4MWZmZmZmZmZmZmZmZmYpIDogMDsgLy8gcG93KDIsIDUzKSAtIDEgPT0gOTAwNzE5OTI1NDc0MDk5MVxufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fdG8tbGVuZ3RoLmpzXG4gKiogbW9kdWxlIGlkID0gNTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciB0b0ludGVnZXIgPSByZXF1aXJlKCcuL190by1pbnRlZ2VyJylcbiAgLCBtYXggICAgICAgPSBNYXRoLm1heFxuICAsIG1pbiAgICAgICA9IE1hdGgubWluO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpbmRleCwgbGVuZ3RoKXtcbiAgaW5kZXggPSB0b0ludGVnZXIoaW5kZXgpO1xuICByZXR1cm4gaW5kZXggPCAwID8gbWF4KGluZGV4ICsgbGVuZ3RoLCAwKSA6IG1pbihpbmRleCwgbGVuZ3RoKTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3RvLWluZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gNThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIElFIDgtIGRvbid0IGVudW0gYnVnIGtleXNcbm1vZHVsZS5leHBvcnRzID0gKFxuICAnY29uc3RydWN0b3IsaGFzT3duUHJvcGVydHksaXNQcm90b3R5cGVPZixwcm9wZXJ0eUlzRW51bWVyYWJsZSx0b0xvY2FsZVN0cmluZyx0b1N0cmluZyx2YWx1ZU9mJ1xuKS5zcGxpdCgnLCcpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19lbnVtLWJ1Zy1rZXlzLmpzXG4gKiogbW9kdWxlIGlkID0gNTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9fZ2xvYmFsJykuZG9jdW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19odG1sLmpzXG4gKiogbW9kdWxlIGlkID0gNjBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBkZWYgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKS5mXG4gICwgaGFzID0gcmVxdWlyZSgnLi9faGFzJylcbiAgLCBUQUcgPSByZXF1aXJlKCcuL193a3MnKSgndG9TdHJpbmdUYWcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwgdGFnLCBzdGF0KXtcbiAgaWYoaXQgJiYgIWhhcyhpdCA9IHN0YXQgPyBpdCA6IGl0LnByb3RvdHlwZSwgVEFHKSlkZWYoaXQsIFRBRywge2NvbmZpZ3VyYWJsZTogdHJ1ZSwgdmFsdWU6IHRhZ30pO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fc2V0LXRvLXN0cmluZy10YWcuanNcbiAqKiBtb2R1bGUgaWQgPSA2MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIHN0b3JlICAgICAgPSByZXF1aXJlKCcuL19zaGFyZWQnKSgnd2tzJylcbiAgLCB1aWQgICAgICAgID0gcmVxdWlyZSgnLi9fdWlkJylcbiAgLCBTeW1ib2wgICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJykuU3ltYm9sXG4gICwgVVNFX1NZTUJPTCA9IHR5cGVvZiBTeW1ib2wgPT0gJ2Z1bmN0aW9uJztcblxudmFyICRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuYW1lKXtcbiAgcmV0dXJuIHN0b3JlW25hbWVdIHx8IChzdG9yZVtuYW1lXSA9XG4gICAgVVNFX1NZTUJPTCAmJiBTeW1ib2xbbmFtZV0gfHwgKFVTRV9TWU1CT0wgPyBTeW1ib2wgOiB1aWQpKCdTeW1ib2wuJyArIG5hbWUpKTtcbn07XG5cbiRleHBvcnRzLnN0b3JlID0gc3RvcmU7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3drcy5qc1xuICoqIG1vZHVsZSBpZCA9IDYyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJyZXF1aXJlKCcuL2VzNi5hcnJheS5pdGVyYXRvcicpO1xudmFyIGdsb2JhbCAgICAgICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKVxuICAsIGhpZGUgICAgICAgICAgPSByZXF1aXJlKCcuL19oaWRlJylcbiAgLCBJdGVyYXRvcnMgICAgID0gcmVxdWlyZSgnLi9faXRlcmF0b3JzJylcbiAgLCBUT19TVFJJTkdfVEFHID0gcmVxdWlyZSgnLi9fd2tzJykoJ3RvU3RyaW5nVGFnJyk7XG5cbmZvcih2YXIgY29sbGVjdGlvbnMgPSBbJ05vZGVMaXN0JywgJ0RPTVRva2VuTGlzdCcsICdNZWRpYUxpc3QnLCAnU3R5bGVTaGVldExpc3QnLCAnQ1NTUnVsZUxpc3QnXSwgaSA9IDA7IGkgPCA1OyBpKyspe1xuICB2YXIgTkFNRSAgICAgICA9IGNvbGxlY3Rpb25zW2ldXG4gICAgLCBDb2xsZWN0aW9uID0gZ2xvYmFsW05BTUVdXG4gICAgLCBwcm90byAgICAgID0gQ29sbGVjdGlvbiAmJiBDb2xsZWN0aW9uLnByb3RvdHlwZTtcbiAgaWYocHJvdG8gJiYgIXByb3RvW1RPX1NUUklOR19UQUddKWhpZGUocHJvdG8sIFRPX1NUUklOR19UQUcsIE5BTUUpO1xuICBJdGVyYXRvcnNbTkFNRV0gPSBJdGVyYXRvcnMuQXJyYXk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDYzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgYWRkVG9VbnNjb3BhYmxlcyA9IHJlcXVpcmUoJy4vX2FkZC10by11bnNjb3BhYmxlcycpXG4gICwgc3RlcCAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2l0ZXItc3RlcCcpXG4gICwgSXRlcmF0b3JzICAgICAgICA9IHJlcXVpcmUoJy4vX2l0ZXJhdG9ycycpXG4gICwgdG9JT2JqZWN0ICAgICAgICA9IHJlcXVpcmUoJy4vX3RvLWlvYmplY3QnKTtcblxuLy8gMjIuMS4zLjQgQXJyYXkucHJvdG90eXBlLmVudHJpZXMoKVxuLy8gMjIuMS4zLjEzIEFycmF5LnByb3RvdHlwZS5rZXlzKClcbi8vIDIyLjEuMy4yOSBBcnJheS5wcm90b3R5cGUudmFsdWVzKClcbi8vIDIyLjEuMy4zMCBBcnJheS5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKVxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19pdGVyLWRlZmluZScpKEFycmF5LCAnQXJyYXknLCBmdW5jdGlvbihpdGVyYXRlZCwga2luZCl7XG4gIHRoaXMuX3QgPSB0b0lPYmplY3QoaXRlcmF0ZWQpOyAvLyB0YXJnZXRcbiAgdGhpcy5faSA9IDA7ICAgICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXhcbiAgdGhpcy5fayA9IGtpbmQ7ICAgICAgICAgICAgICAgIC8vIGtpbmRcbi8vIDIyLjEuNS4yLjEgJUFycmF5SXRlcmF0b3JQcm90b3R5cGUlLm5leHQoKVxufSwgZnVuY3Rpb24oKXtcbiAgdmFyIE8gICAgID0gdGhpcy5fdFxuICAgICwga2luZCAgPSB0aGlzLl9rXG4gICAgLCBpbmRleCA9IHRoaXMuX2krKztcbiAgaWYoIU8gfHwgaW5kZXggPj0gTy5sZW5ndGgpe1xuICAgIHRoaXMuX3QgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHN0ZXAoMSk7XG4gIH1cbiAgaWYoa2luZCA9PSAna2V5cycgIClyZXR1cm4gc3RlcCgwLCBpbmRleCk7XG4gIGlmKGtpbmQgPT0gJ3ZhbHVlcycpcmV0dXJuIHN0ZXAoMCwgT1tpbmRleF0pO1xuICByZXR1cm4gc3RlcCgwLCBbaW5kZXgsIE9baW5kZXhdXSk7XG59LCAndmFsdWVzJyk7XG5cbi8vIGFyZ3VtZW50c0xpc3RbQEBpdGVyYXRvcl0gaXMgJUFycmF5UHJvdG9fdmFsdWVzJSAoOS40LjQuNiwgOS40LjQuNylcbkl0ZXJhdG9ycy5Bcmd1bWVudHMgPSBJdGVyYXRvcnMuQXJyYXk7XG5cbmFkZFRvVW5zY29wYWJsZXMoJ2tleXMnKTtcbmFkZFRvVW5zY29wYWJsZXMoJ3ZhbHVlcycpO1xuYWRkVG9VbnNjb3BhYmxlcygnZW50cmllcycpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5hcnJheS5pdGVyYXRvci5qc1xuICoqIG1vZHVsZSBpZCA9IDY0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2FkZC10by11bnNjb3BhYmxlcy5qc1xuICoqIG1vZHVsZSBpZCA9IDY1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRvbmUsIHZhbHVlKXtcbiAgcmV0dXJuIHt2YWx1ZTogdmFsdWUsIGRvbmU6ICEhZG9uZX07XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19pdGVyLXN0ZXAuanNcbiAqKiBtb2R1bGUgaWQgPSA2NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cy5mID0gcmVxdWlyZSgnLi9fd2tzJyk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX3drcy1leHQuanNcbiAqKiBtb2R1bGUgaWQgPSA2N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbFwiKSwgX19lc01vZHVsZTogdHJ1ZSB9O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9zeW1ib2wuanNcbiAqKiBtb2R1bGUgaWQgPSA2OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwicmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYuc3ltYm9sJyk7XG5yZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nJyk7XG5yZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNy5zeW1ib2wuYXN5bmMtaXRlcmF0b3InKTtcbnJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM3LnN5bWJvbC5vYnNlcnZhYmxlJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvX2NvcmUnKS5TeW1ib2w7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbC9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDY5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG4vLyBFQ01BU2NyaXB0IDYgc3ltYm9scyBzaGltXG52YXIgZ2xvYmFsICAgICAgICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKVxuICAsIGhhcyAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faGFzJylcbiAgLCBERVNDUklQVE9SUyAgICA9IHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJylcbiAgLCAkZXhwb3J0ICAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgcmVkZWZpbmUgICAgICAgPSByZXF1aXJlKCcuL19yZWRlZmluZScpXG4gICwgTUVUQSAgICAgICAgICAgPSByZXF1aXJlKCcuL19tZXRhJykuS0VZXG4gICwgJGZhaWxzICAgICAgICAgPSByZXF1aXJlKCcuL19mYWlscycpXG4gICwgc2hhcmVkICAgICAgICAgPSByZXF1aXJlKCcuL19zaGFyZWQnKVxuICAsIHNldFRvU3RyaW5nVGFnID0gcmVxdWlyZSgnLi9fc2V0LXRvLXN0cmluZy10YWcnKVxuICAsIHVpZCAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fdWlkJylcbiAgLCB3a3MgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3drcycpXG4gICwgd2tzRXh0ICAgICAgICAgPSByZXF1aXJlKCcuL193a3MtZXh0JylcbiAgLCB3a3NEZWZpbmUgICAgICA9IHJlcXVpcmUoJy4vX3drcy1kZWZpbmUnKVxuICAsIGtleU9mICAgICAgICAgID0gcmVxdWlyZSgnLi9fa2V5b2YnKVxuICAsIGVudW1LZXlzICAgICAgID0gcmVxdWlyZSgnLi9fZW51bS1rZXlzJylcbiAgLCBpc0FycmF5ICAgICAgICA9IHJlcXVpcmUoJy4vX2lzLWFycmF5JylcbiAgLCBhbk9iamVjdCAgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgdG9JT2JqZWN0ICAgICAgPSByZXF1aXJlKCcuL190by1pb2JqZWN0JylcbiAgLCB0b1ByaW1pdGl2ZSAgICA9IHJlcXVpcmUoJy4vX3RvLXByaW1pdGl2ZScpXG4gICwgY3JlYXRlRGVzYyAgICAgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJylcbiAgLCBfY3JlYXRlICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1jcmVhdGUnKVxuICAsIGdPUE5FeHQgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcG4tZXh0JylcbiAgLCAkR09QRCAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BkJylcbiAgLCAkRFAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpXG4gICwgJGtleXMgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3Qta2V5cycpXG4gICwgZ09QRCAgICAgICAgICAgPSAkR09QRC5mXG4gICwgZFAgICAgICAgICAgICAgPSAkRFAuZlxuICAsIGdPUE4gICAgICAgICAgID0gZ09QTkV4dC5mXG4gICwgJFN5bWJvbCAgICAgICAgPSBnbG9iYWwuU3ltYm9sXG4gICwgJEpTT04gICAgICAgICAgPSBnbG9iYWwuSlNPTlxuICAsIF9zdHJpbmdpZnkgICAgID0gJEpTT04gJiYgJEpTT04uc3RyaW5naWZ5XG4gICwgUFJPVE9UWVBFICAgICAgPSAncHJvdG90eXBlJ1xuICAsIEhJRERFTiAgICAgICAgID0gd2tzKCdfaGlkZGVuJylcbiAgLCBUT19QUklNSVRJVkUgICA9IHdrcygndG9QcmltaXRpdmUnKVxuICAsIGlzRW51bSAgICAgICAgID0ge30ucHJvcGVydHlJc0VudW1lcmFibGVcbiAgLCBTeW1ib2xSZWdpc3RyeSA9IHNoYXJlZCgnc3ltYm9sLXJlZ2lzdHJ5JylcbiAgLCBBbGxTeW1ib2xzICAgICA9IHNoYXJlZCgnc3ltYm9scycpXG4gICwgT1BTeW1ib2xzICAgICAgPSBzaGFyZWQoJ29wLXN5bWJvbHMnKVxuICAsIE9iamVjdFByb3RvICAgID0gT2JqZWN0W1BST1RPVFlQRV1cbiAgLCBVU0VfTkFUSVZFICAgICA9IHR5cGVvZiAkU3ltYm9sID09ICdmdW5jdGlvbidcbiAgLCBRT2JqZWN0ICAgICAgICA9IGdsb2JhbC5RT2JqZWN0O1xuLy8gRG9uJ3QgdXNlIHNldHRlcnMgaW4gUXQgU2NyaXB0LCBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvMTczXG52YXIgc2V0dGVyID0gIVFPYmplY3QgfHwgIVFPYmplY3RbUFJPVE9UWVBFXSB8fCAhUU9iamVjdFtQUk9UT1RZUEVdLmZpbmRDaGlsZDtcblxuLy8gZmFsbGJhY2sgZm9yIG9sZCBBbmRyb2lkLCBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9Njg3XG52YXIgc2V0U3ltYm9sRGVzYyA9IERFU0NSSVBUT1JTICYmICRmYWlscyhmdW5jdGlvbigpe1xuICByZXR1cm4gX2NyZWF0ZShkUCh7fSwgJ2EnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gZFAodGhpcywgJ2EnLCB7dmFsdWU6IDd9KS5hOyB9XG4gIH0pKS5hICE9IDc7XG59KSA/IGZ1bmN0aW9uKGl0LCBrZXksIEQpe1xuICB2YXIgcHJvdG9EZXNjID0gZ09QRChPYmplY3RQcm90bywga2V5KTtcbiAgaWYocHJvdG9EZXNjKWRlbGV0ZSBPYmplY3RQcm90b1trZXldO1xuICBkUChpdCwga2V5LCBEKTtcbiAgaWYocHJvdG9EZXNjICYmIGl0ICE9PSBPYmplY3RQcm90bylkUChPYmplY3RQcm90bywga2V5LCBwcm90b0Rlc2MpO1xufSA6IGRQO1xuXG52YXIgd3JhcCA9IGZ1bmN0aW9uKHRhZyl7XG4gIHZhciBzeW0gPSBBbGxTeW1ib2xzW3RhZ10gPSBfY3JlYXRlKCRTeW1ib2xbUFJPVE9UWVBFXSk7XG4gIHN5bS5fayA9IHRhZztcbiAgcmV0dXJuIHN5bTtcbn07XG5cbnZhciBpc1N5bWJvbCA9IFVTRV9OQVRJVkUgJiYgdHlwZW9mICRTeW1ib2wuaXRlcmF0b3IgPT0gJ3N5bWJvbCcgPyBmdW5jdGlvbihpdCl7XG4gIHJldHVybiB0eXBlb2YgaXQgPT0gJ3N5bWJvbCc7XG59IDogZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gaXQgaW5zdGFuY2VvZiAkU3ltYm9sO1xufTtcblxudmFyICRkZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KGl0LCBrZXksIEQpe1xuICBpZihpdCA9PT0gT2JqZWN0UHJvdG8pJGRlZmluZVByb3BlcnR5KE9QU3ltYm9scywga2V5LCBEKTtcbiAgYW5PYmplY3QoaXQpO1xuICBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpO1xuICBhbk9iamVjdChEKTtcbiAgaWYoaGFzKEFsbFN5bWJvbHMsIGtleSkpe1xuICAgIGlmKCFELmVudW1lcmFibGUpe1xuICAgICAgaWYoIWhhcyhpdCwgSElEREVOKSlkUChpdCwgSElEREVOLCBjcmVhdGVEZXNjKDEsIHt9KSk7XG4gICAgICBpdFtISURERU5dW2tleV0gPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZihoYXMoaXQsIEhJRERFTikgJiYgaXRbSElEREVOXVtrZXldKWl0W0hJRERFTl1ba2V5XSA9IGZhbHNlO1xuICAgICAgRCA9IF9jcmVhdGUoRCwge2VudW1lcmFibGU6IGNyZWF0ZURlc2MoMCwgZmFsc2UpfSk7XG4gICAgfSByZXR1cm4gc2V0U3ltYm9sRGVzYyhpdCwga2V5LCBEKTtcbiAgfSByZXR1cm4gZFAoaXQsIGtleSwgRCk7XG59O1xudmFyICRkZWZpbmVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhpdCwgUCl7XG4gIGFuT2JqZWN0KGl0KTtcbiAgdmFyIGtleXMgPSBlbnVtS2V5cyhQID0gdG9JT2JqZWN0KFApKVxuICAgICwgaSAgICA9IDBcbiAgICAsIGwgPSBrZXlzLmxlbmd0aFxuICAgICwga2V5O1xuICB3aGlsZShsID4gaSkkZGVmaW5lUHJvcGVydHkoaXQsIGtleSA9IGtleXNbaSsrXSwgUFtrZXldKTtcbiAgcmV0dXJuIGl0O1xufTtcbnZhciAkY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGl0LCBQKXtcbiAgcmV0dXJuIFAgPT09IHVuZGVmaW5lZCA/IF9jcmVhdGUoaXQpIDogJGRlZmluZVByb3BlcnRpZXMoX2NyZWF0ZShpdCksIFApO1xufTtcbnZhciAkcHJvcGVydHlJc0VudW1lcmFibGUgPSBmdW5jdGlvbiBwcm9wZXJ0eUlzRW51bWVyYWJsZShrZXkpe1xuICB2YXIgRSA9IGlzRW51bS5jYWxsKHRoaXMsIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSkpO1xuICBpZih0aGlzID09PSBPYmplY3RQcm90byAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhaGFzKE9QU3ltYm9scywga2V5KSlyZXR1cm4gZmFsc2U7XG4gIHJldHVybiBFIHx8ICFoYXModGhpcywga2V5KSB8fCAhaGFzKEFsbFN5bWJvbHMsIGtleSkgfHwgaGFzKHRoaXMsIEhJRERFTikgJiYgdGhpc1tISURERU5dW2tleV0gPyBFIDogdHJ1ZTtcbn07XG52YXIgJGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXtcbiAgaXQgID0gdG9JT2JqZWN0KGl0KTtcbiAga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKTtcbiAgaWYoaXQgPT09IE9iamVjdFByb3RvICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICFoYXMoT1BTeW1ib2xzLCBrZXkpKXJldHVybjtcbiAgdmFyIEQgPSBnT1BEKGl0LCBrZXkpO1xuICBpZihEICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICEoaGFzKGl0LCBISURERU4pICYmIGl0W0hJRERFTl1ba2V5XSkpRC5lbnVtZXJhYmxlID0gdHJ1ZTtcbiAgcmV0dXJuIEQ7XG59O1xudmFyICRnZXRPd25Qcm9wZXJ0eU5hbWVzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhpdCl7XG4gIHZhciBuYW1lcyAgPSBnT1BOKHRvSU9iamVjdChpdCkpXG4gICAgLCByZXN1bHQgPSBbXVxuICAgICwgaSAgICAgID0gMFxuICAgICwga2V5O1xuICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKXtcbiAgICBpZighaGFzKEFsbFN5bWJvbHMsIGtleSA9IG5hbWVzW2krK10pICYmIGtleSAhPSBISURERU4gJiYga2V5ICE9IE1FVEEpcmVzdWx0LnB1c2goa2V5KTtcbiAgfSByZXR1cm4gcmVzdWx0O1xufTtcbnZhciAkZ2V0T3duUHJvcGVydHlTeW1ib2xzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlTeW1ib2xzKGl0KXtcbiAgdmFyIElTX09QICA9IGl0ID09PSBPYmplY3RQcm90b1xuICAgICwgbmFtZXMgID0gZ09QTihJU19PUCA/IE9QU3ltYm9scyA6IHRvSU9iamVjdChpdCkpXG4gICAgLCByZXN1bHQgPSBbXVxuICAgICwgaSAgICAgID0gMFxuICAgICwga2V5O1xuICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKXtcbiAgICBpZihoYXMoQWxsU3ltYm9scywga2V5ID0gbmFtZXNbaSsrXSkgJiYgKElTX09QID8gaGFzKE9iamVjdFByb3RvLCBrZXkpIDogdHJ1ZSkpcmVzdWx0LnB1c2goQWxsU3ltYm9sc1trZXldKTtcbiAgfSByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8gMTkuNC4xLjEgU3ltYm9sKFtkZXNjcmlwdGlvbl0pXG5pZighVVNFX05BVElWRSl7XG4gICRTeW1ib2wgPSBmdW5jdGlvbiBTeW1ib2woKXtcbiAgICBpZih0aGlzIGluc3RhbmNlb2YgJFN5bWJvbCl0aHJvdyBUeXBlRXJyb3IoJ1N5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciEnKTtcbiAgICB2YXIgdGFnID0gdWlkKGFyZ3VtZW50cy5sZW5ndGggPiAwID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkKTtcbiAgICB2YXIgJHNldCA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgIGlmKHRoaXMgPT09IE9iamVjdFByb3RvKSRzZXQuY2FsbChPUFN5bWJvbHMsIHZhbHVlKTtcbiAgICAgIGlmKGhhcyh0aGlzLCBISURERU4pICYmIGhhcyh0aGlzW0hJRERFTl0sIHRhZykpdGhpc1tISURERU5dW3RhZ10gPSBmYWxzZTtcbiAgICAgIHNldFN5bWJvbERlc2ModGhpcywgdGFnLCBjcmVhdGVEZXNjKDEsIHZhbHVlKSk7XG4gICAgfTtcbiAgICBpZihERVNDUklQVE9SUyAmJiBzZXR0ZXIpc2V0U3ltYm9sRGVzYyhPYmplY3RQcm90bywgdGFnLCB7Y29uZmlndXJhYmxlOiB0cnVlLCBzZXQ6ICRzZXR9KTtcbiAgICByZXR1cm4gd3JhcCh0YWcpO1xuICB9O1xuICByZWRlZmluZSgkU3ltYm9sW1BST1RPVFlQRV0sICd0b1N0cmluZycsIGZ1bmN0aW9uIHRvU3RyaW5nKCl7XG4gICAgcmV0dXJuIHRoaXMuX2s7XG4gIH0pO1xuXG4gICRHT1BELmYgPSAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuICAkRFAuZiAgID0gJGRlZmluZVByb3BlcnR5O1xuICByZXF1aXJlKCcuL19vYmplY3QtZ29wbicpLmYgPSBnT1BORXh0LmYgPSAkZ2V0T3duUHJvcGVydHlOYW1lcztcbiAgcmVxdWlyZSgnLi9fb2JqZWN0LXBpZScpLmYgID0gJHByb3BlcnR5SXNFbnVtZXJhYmxlO1xuICByZXF1aXJlKCcuL19vYmplY3QtZ29wcycpLmYgPSAkZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xuXG4gIGlmKERFU0NSSVBUT1JTICYmICFyZXF1aXJlKCcuL19saWJyYXJ5Jykpe1xuICAgIHJlZGVmaW5lKE9iamVjdFByb3RvLCAncHJvcGVydHlJc0VudW1lcmFibGUnLCAkcHJvcGVydHlJc0VudW1lcmFibGUsIHRydWUpO1xuICB9XG5cbiAgd2tzRXh0LmYgPSBmdW5jdGlvbihuYW1lKXtcbiAgICByZXR1cm4gd3JhcCh3a3MobmFtZSkpO1xuICB9XG59XG5cbiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIHtTeW1ib2w6ICRTeW1ib2x9KTtcblxuZm9yKHZhciBzeW1ib2xzID0gKFxuICAvLyAxOS40LjIuMiwgMTkuNC4yLjMsIDE5LjQuMi40LCAxOS40LjIuNiwgMTkuNC4yLjgsIDE5LjQuMi45LCAxOS40LjIuMTAsIDE5LjQuMi4xMSwgMTkuNC4yLjEyLCAxOS40LjIuMTMsIDE5LjQuMi4xNFxuICAnaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXMnXG4pLnNwbGl0KCcsJyksIGkgPSAwOyBzeW1ib2xzLmxlbmd0aCA+IGk7ICl3a3Moc3ltYm9sc1tpKytdKTtcblxuZm9yKHZhciBzeW1ib2xzID0gJGtleXMod2tzLnN0b3JlKSwgaSA9IDA7IHN5bWJvbHMubGVuZ3RoID4gaTsgKXdrc0RlZmluZShzeW1ib2xzW2krK10pO1xuXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCAnU3ltYm9sJywge1xuICAvLyAxOS40LjIuMSBTeW1ib2wuZm9yKGtleSlcbiAgJ2Zvcic6IGZ1bmN0aW9uKGtleSl7XG4gICAgcmV0dXJuIGhhcyhTeW1ib2xSZWdpc3RyeSwga2V5ICs9ICcnKVxuICAgICAgPyBTeW1ib2xSZWdpc3RyeVtrZXldXG4gICAgICA6IFN5bWJvbFJlZ2lzdHJ5W2tleV0gPSAkU3ltYm9sKGtleSk7XG4gIH0sXG4gIC8vIDE5LjQuMi41IFN5bWJvbC5rZXlGb3Ioc3ltKVxuICBrZXlGb3I6IGZ1bmN0aW9uIGtleUZvcihrZXkpe1xuICAgIGlmKGlzU3ltYm9sKGtleSkpcmV0dXJuIGtleU9mKFN5bWJvbFJlZ2lzdHJ5LCBrZXkpO1xuICAgIHRocm93IFR5cGVFcnJvcihrZXkgKyAnIGlzIG5vdCBhIHN5bWJvbCEnKTtcbiAgfSxcbiAgdXNlU2V0dGVyOiBmdW5jdGlvbigpeyBzZXR0ZXIgPSB0cnVlOyB9LFxuICB1c2VTaW1wbGU6IGZ1bmN0aW9uKCl7IHNldHRlciA9IGZhbHNlOyB9XG59KTtcblxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgJ09iamVjdCcsIHtcbiAgLy8gMTkuMS4yLjIgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKVxuICBjcmVhdGU6ICRjcmVhdGUsXG4gIC8vIDE5LjEuMi40IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKVxuICBkZWZpbmVQcm9wZXJ0eTogJGRlZmluZVByb3BlcnR5LFxuICAvLyAxOS4xLjIuMyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKVxuICBkZWZpbmVQcm9wZXJ0aWVzOiAkZGVmaW5lUHJvcGVydGllcyxcbiAgLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKVxuICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsXG4gIC8vIDE5LjEuMi43IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pXG4gIGdldE93blByb3BlcnR5TmFtZXM6ICRnZXRPd25Qcm9wZXJ0eU5hbWVzLFxuICAvLyAxOS4xLjIuOCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKE8pXG4gIGdldE93blByb3BlcnR5U3ltYm9sczogJGdldE93blByb3BlcnR5U3ltYm9sc1xufSk7XG5cbi8vIDI0LjMuMiBKU09OLnN0cmluZ2lmeSh2YWx1ZSBbLCByZXBsYWNlciBbLCBzcGFjZV1dKVxuJEpTT04gJiYgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoIVVTRV9OQVRJVkUgfHwgJGZhaWxzKGZ1bmN0aW9uKCl7XG4gIHZhciBTID0gJFN5bWJvbCgpO1xuICAvLyBNUyBFZGdlIGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyB7fVxuICAvLyBXZWJLaXQgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIG51bGxcbiAgLy8gVjggdGhyb3dzIG9uIGJveGVkIHN5bWJvbHNcbiAgcmV0dXJuIF9zdHJpbmdpZnkoW1NdKSAhPSAnW251bGxdJyB8fCBfc3RyaW5naWZ5KHthOiBTfSkgIT0gJ3t9JyB8fCBfc3RyaW5naWZ5KE9iamVjdChTKSkgIT0gJ3t9Jztcbn0pKSwgJ0pTT04nLCB7XG4gIHN0cmluZ2lmeTogZnVuY3Rpb24gc3RyaW5naWZ5KGl0KXtcbiAgICBpZihpdCA9PT0gdW5kZWZpbmVkIHx8IGlzU3ltYm9sKGl0KSlyZXR1cm47IC8vIElFOCByZXR1cm5zIHN0cmluZyBvbiB1bmRlZmluZWRcbiAgICB2YXIgYXJncyA9IFtpdF1cbiAgICAgICwgaSAgICA9IDFcbiAgICAgICwgcmVwbGFjZXIsICRyZXBsYWNlcjtcbiAgICB3aGlsZShhcmd1bWVudHMubGVuZ3RoID4gaSlhcmdzLnB1c2goYXJndW1lbnRzW2krK10pO1xuICAgIHJlcGxhY2VyID0gYXJnc1sxXTtcbiAgICBpZih0eXBlb2YgcmVwbGFjZXIgPT0gJ2Z1bmN0aW9uJykkcmVwbGFjZXIgPSByZXBsYWNlcjtcbiAgICBpZigkcmVwbGFjZXIgfHwgIWlzQXJyYXkocmVwbGFjZXIpKXJlcGxhY2VyID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XG4gICAgICBpZigkcmVwbGFjZXIpdmFsdWUgPSAkcmVwbGFjZXIuY2FsbCh0aGlzLCBrZXksIHZhbHVlKTtcbiAgICAgIGlmKCFpc1N5bWJvbCh2YWx1ZSkpcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gICAgYXJnc1sxXSA9IHJlcGxhY2VyO1xuICAgIHJldHVybiBfc3RyaW5naWZ5LmFwcGx5KCRKU09OLCBhcmdzKTtcbiAgfVxufSk7XG5cbi8vIDE5LjQuMy40IFN5bWJvbC5wcm90b3R5cGVbQEB0b1ByaW1pdGl2ZV0oaGludClcbiRTeW1ib2xbUFJPVE9UWVBFXVtUT19QUklNSVRJVkVdIHx8IHJlcXVpcmUoJy4vX2hpZGUnKSgkU3ltYm9sW1BST1RPVFlQRV0sIFRPX1BSSU1JVElWRSwgJFN5bWJvbFtQUk9UT1RZUEVdLnZhbHVlT2YpO1xuLy8gMTkuNC4zLjUgU3ltYm9sLnByb3RvdHlwZVtAQHRvU3RyaW5nVGFnXVxuc2V0VG9TdHJpbmdUYWcoJFN5bWJvbCwgJ1N5bWJvbCcpO1xuLy8gMjAuMi4xLjkgTWF0aFtAQHRvU3RyaW5nVGFnXVxuc2V0VG9TdHJpbmdUYWcoTWF0aCwgJ01hdGgnLCB0cnVlKTtcbi8vIDI0LjMuMyBKU09OW0BAdG9TdHJpbmdUYWddXG5zZXRUb1N0cmluZ1RhZyhnbG9iYWwuSlNPTiwgJ0pTT04nLCB0cnVlKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9lczYuc3ltYm9sLmpzXG4gKiogbW9kdWxlIGlkID0gNzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBNRVRBICAgICA9IHJlcXVpcmUoJy4vX3VpZCcpKCdtZXRhJylcbiAgLCBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpXG4gICwgaGFzICAgICAgPSByZXF1aXJlKCcuL19oYXMnKVxuICAsIHNldERlc2MgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJykuZlxuICAsIGlkICAgICAgID0gMDtcbnZhciBpc0V4dGVuc2libGUgPSBPYmplY3QuaXNFeHRlbnNpYmxlIHx8IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0cnVlO1xufTtcbnZhciBGUkVFWkUgPSAhcmVxdWlyZSgnLi9fZmFpbHMnKShmdW5jdGlvbigpe1xuICByZXR1cm4gaXNFeHRlbnNpYmxlKE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh7fSkpO1xufSk7XG52YXIgc2V0TWV0YSA9IGZ1bmN0aW9uKGl0KXtcbiAgc2V0RGVzYyhpdCwgTUVUQSwge3ZhbHVlOiB7XG4gICAgaTogJ08nICsgKytpZCwgLy8gb2JqZWN0IElEXG4gICAgdzoge30gICAgICAgICAgLy8gd2VhayBjb2xsZWN0aW9ucyBJRHNcbiAgfX0pO1xufTtcbnZhciBmYXN0S2V5ID0gZnVuY3Rpb24oaXQsIGNyZWF0ZSl7XG4gIC8vIHJldHVybiBwcmltaXRpdmUgd2l0aCBwcmVmaXhcbiAgaWYoIWlzT2JqZWN0KGl0KSlyZXR1cm4gdHlwZW9mIGl0ID09ICdzeW1ib2wnID8gaXQgOiAodHlwZW9mIGl0ID09ICdzdHJpbmcnID8gJ1MnIDogJ1AnKSArIGl0O1xuICBpZighaGFzKGl0LCBNRVRBKSl7XG4gICAgLy8gY2FuJ3Qgc2V0IG1ldGFkYXRhIHRvIHVuY2F1Z2h0IGZyb3plbiBvYmplY3RcbiAgICBpZighaXNFeHRlbnNpYmxlKGl0KSlyZXR1cm4gJ0YnO1xuICAgIC8vIG5vdCBuZWNlc3NhcnkgdG8gYWRkIG1ldGFkYXRhXG4gICAgaWYoIWNyZWF0ZSlyZXR1cm4gJ0UnO1xuICAgIC8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhXG4gICAgc2V0TWV0YShpdCk7XG4gIC8vIHJldHVybiBvYmplY3QgSURcbiAgfSByZXR1cm4gaXRbTUVUQV0uaTtcbn07XG52YXIgZ2V0V2VhayA9IGZ1bmN0aW9uKGl0LCBjcmVhdGUpe1xuICBpZighaGFzKGl0LCBNRVRBKSl7XG4gICAgLy8gY2FuJ3Qgc2V0IG1ldGFkYXRhIHRvIHVuY2F1Z2h0IGZyb3plbiBvYmplY3RcbiAgICBpZighaXNFeHRlbnNpYmxlKGl0KSlyZXR1cm4gdHJ1ZTtcbiAgICAvLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YVxuICAgIGlmKCFjcmVhdGUpcmV0dXJuIGZhbHNlO1xuICAgIC8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhXG4gICAgc2V0TWV0YShpdCk7XG4gIC8vIHJldHVybiBoYXNoIHdlYWsgY29sbGVjdGlvbnMgSURzXG4gIH0gcmV0dXJuIGl0W01FVEFdLnc7XG59O1xuLy8gYWRkIG1ldGFkYXRhIG9uIGZyZWV6ZS1mYW1pbHkgbWV0aG9kcyBjYWxsaW5nXG52YXIgb25GcmVlemUgPSBmdW5jdGlvbihpdCl7XG4gIGlmKEZSRUVaRSAmJiBtZXRhLk5FRUQgJiYgaXNFeHRlbnNpYmxlKGl0KSAmJiAhaGFzKGl0LCBNRVRBKSlzZXRNZXRhKGl0KTtcbiAgcmV0dXJuIGl0O1xufTtcbnZhciBtZXRhID0gbW9kdWxlLmV4cG9ydHMgPSB7XG4gIEtFWTogICAgICBNRVRBLFxuICBORUVEOiAgICAgZmFsc2UsXG4gIGZhc3RLZXk6ICBmYXN0S2V5LFxuICBnZXRXZWFrOiAgZ2V0V2VhayxcbiAgb25GcmVlemU6IG9uRnJlZXplXG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19tZXRhLmpzXG4gKiogbW9kdWxlIGlkID0gNzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnbG9iYWwgICAgICAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpXG4gICwgY29yZSAgICAgICAgICAgPSByZXF1aXJlKCcuL19jb3JlJylcbiAgLCBMSUJSQVJZICAgICAgICA9IHJlcXVpcmUoJy4vX2xpYnJhcnknKVxuICAsIHdrc0V4dCAgICAgICAgID0gcmVxdWlyZSgnLi9fd2tzLWV4dCcpXG4gICwgZGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKS5mO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuYW1lKXtcbiAgdmFyICRTeW1ib2wgPSBjb3JlLlN5bWJvbCB8fCAoY29yZS5TeW1ib2wgPSBMSUJSQVJZID8ge30gOiBnbG9iYWwuU3ltYm9sIHx8IHt9KTtcbiAgaWYobmFtZS5jaGFyQXQoMCkgIT0gJ18nICYmICEobmFtZSBpbiAkU3ltYm9sKSlkZWZpbmVQcm9wZXJ0eSgkU3ltYm9sLCBuYW1lLCB7dmFsdWU6IHdrc0V4dC5mKG5hbWUpfSk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL193a3MtZGVmaW5lLmpzXG4gKiogbW9kdWxlIGlkID0gNzJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnZXRLZXlzICAgPSByZXF1aXJlKCcuL19vYmplY3Qta2V5cycpXG4gICwgdG9JT2JqZWN0ID0gcmVxdWlyZSgnLi9fdG8taW9iamVjdCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmplY3QsIGVsKXtcbiAgdmFyIE8gICAgICA9IHRvSU9iamVjdChvYmplY3QpXG4gICAgLCBrZXlzICAgPSBnZXRLZXlzKE8pXG4gICAgLCBsZW5ndGggPSBrZXlzLmxlbmd0aFxuICAgICwgaW5kZXggID0gMFxuICAgICwga2V5O1xuICB3aGlsZShsZW5ndGggPiBpbmRleClpZihPW2tleSA9IGtleXNbaW5kZXgrK11dID09PSBlbClyZXR1cm4ga2V5O1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fa2V5b2YuanNcbiAqKiBtb2R1bGUgaWQgPSA3M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gYWxsIGVudW1lcmFibGUgb2JqZWN0IGtleXMsIGluY2x1ZGVzIHN5bWJvbHNcbnZhciBnZXRLZXlzID0gcmVxdWlyZSgnLi9fb2JqZWN0LWtleXMnKVxuICAsIGdPUFMgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wcycpXG4gICwgcElFICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1waWUnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICB2YXIgcmVzdWx0ICAgICA9IGdldEtleXMoaXQpXG4gICAgLCBnZXRTeW1ib2xzID0gZ09QUy5mO1xuICBpZihnZXRTeW1ib2xzKXtcbiAgICB2YXIgc3ltYm9scyA9IGdldFN5bWJvbHMoaXQpXG4gICAgICAsIGlzRW51bSAgPSBwSUUuZlxuICAgICAgLCBpICAgICAgID0gMFxuICAgICAgLCBrZXk7XG4gICAgd2hpbGUoc3ltYm9scy5sZW5ndGggPiBpKWlmKGlzRW51bS5jYWxsKGl0LCBrZXkgPSBzeW1ib2xzW2krK10pKXJlc3VsdC5wdXNoKGtleSk7XG4gIH0gcmV0dXJuIHJlc3VsdDtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2VudW0ta2V5cy5qc1xuICoqIG1vZHVsZSBpZCA9IDc0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19vYmplY3QtZ29wcy5qc1xuICoqIG1vZHVsZSBpZCA9IDc1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzLmYgPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fb2JqZWN0LXBpZS5qc1xuICoqIG1vZHVsZSBpZCA9IDc2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyA3LjIuMiBJc0FycmF5KGFyZ3VtZW50KVxudmFyIGNvZiA9IHJlcXVpcmUoJy4vX2NvZicpO1xubW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIGlzQXJyYXkoYXJnKXtcbiAgcmV0dXJuIGNvZihhcmcpID09ICdBcnJheSc7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19pcy1hcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDc3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBmYWxsYmFjayBmb3IgSUUxMSBidWdneSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB3aXRoIGlmcmFtZSBhbmQgd2luZG93XG52YXIgdG9JT2JqZWN0ID0gcmVxdWlyZSgnLi9fdG8taW9iamVjdCcpXG4gICwgZ09QTiAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcG4nKS5mXG4gICwgdG9TdHJpbmcgID0ge30udG9TdHJpbmc7XG5cbnZhciB3aW5kb3dOYW1lcyA9IHR5cGVvZiB3aW5kb3cgPT0gJ29iamVjdCcgJiYgd2luZG93ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzXG4gID8gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KSA6IFtdO1xuXG52YXIgZ2V0V2luZG93TmFtZXMgPSBmdW5jdGlvbihpdCl7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGdPUE4oaXQpO1xuICB9IGNhdGNoKGUpe1xuICAgIHJldHVybiB3aW5kb3dOYW1lcy5zbGljZSgpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cy5mID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhpdCl7XG4gIHJldHVybiB3aW5kb3dOYW1lcyAmJiB0b1N0cmluZy5jYWxsKGl0KSA9PSAnW29iamVjdCBXaW5kb3ddJyA/IGdldFdpbmRvd05hbWVzKGl0KSA6IGdPUE4odG9JT2JqZWN0KGl0KSk7XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1nb3BuLWV4dC5qc1xuICoqIG1vZHVsZSBpZCA9IDc4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyAxOS4xLjIuNyAvIDE1LjIuMy40IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pXG52YXIgJGtleXMgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1rZXlzLWludGVybmFsJylcbiAgLCBoaWRkZW5LZXlzID0gcmVxdWlyZSgnLi9fZW51bS1idWcta2V5cycpLmNvbmNhdCgnbGVuZ3RoJywgJ3Byb3RvdHlwZScpO1xuXG5leHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKE8pe1xuICByZXR1cm4gJGtleXMoTywgaGlkZGVuS2V5cyk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19vYmplY3QtZ29wbi5qc1xuICoqIG1vZHVsZSBpZCA9IDc5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgcElFICAgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtcGllJylcbiAgLCBjcmVhdGVEZXNjICAgICA9IHJlcXVpcmUoJy4vX3Byb3BlcnR5LWRlc2MnKVxuICAsIHRvSU9iamVjdCAgICAgID0gcmVxdWlyZSgnLi9fdG8taW9iamVjdCcpXG4gICwgdG9QcmltaXRpdmUgICAgPSByZXF1aXJlKCcuL190by1wcmltaXRpdmUnKVxuICAsIGhhcyAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faGFzJylcbiAgLCBJRThfRE9NX0RFRklORSA9IHJlcXVpcmUoJy4vX2llOC1kb20tZGVmaW5lJylcbiAgLCBnT1BEICAgICAgICAgICA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG5cbmV4cG9ydHMuZiA9IHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgPyBnT1BEIDogZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApe1xuICBPID0gdG9JT2JqZWN0KE8pO1xuICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7XG4gIGlmKElFOF9ET01fREVGSU5FKXRyeSB7XG4gICAgcmV0dXJuIGdPUEQoTywgUCk7XG4gIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH1cbiAgaWYoaGFzKE8sIFApKXJldHVybiBjcmVhdGVEZXNjKCFwSUUuZi5jYWxsKE8sIFApLCBPW1BdKTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX29iamVjdC1nb3BkLmpzXG4gKiogbW9kdWxlIGlkID0gODBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInJlcXVpcmUoJy4vX3drcy1kZWZpbmUnKSgnYXN5bmNJdGVyYXRvcicpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNy5zeW1ib2wuYXN5bmMtaXRlcmF0b3IuanNcbiAqKiBtb2R1bGUgaWQgPSA4MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwicmVxdWlyZSgnLi9fd2tzLWRlZmluZScpKCdvYnNlcnZhYmxlJyk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM3LnN5bWJvbC5vYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gODNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX3NldFByb3RvdHlwZU9mID0gcmVxdWlyZShcIi4uL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2ZcIik7XG5cbnZhciBfc2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2V0UHJvdG90eXBlT2YpO1xuXG52YXIgX2NyZWF0ZSA9IHJlcXVpcmUoXCIuLi9jb3JlLWpzL29iamVjdC9jcmVhdGVcIik7XG5cbnZhciBfY3JlYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZSk7XG5cbnZhciBfdHlwZW9mMiA9IHJlcXVpcmUoXCIuLi9oZWxwZXJzL3R5cGVvZlwiKTtcblxudmFyIF90eXBlb2YzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHlwZW9mMik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogKDAsIF90eXBlb2YzLmRlZmF1bHQpKHN1cGVyQ2xhc3MpKSk7XG4gIH1cblxuICBzdWJDbGFzcy5wcm90b3R5cGUgPSAoMCwgX2NyZWF0ZTIuZGVmYXVsdCkoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfVxuICB9KTtcbiAgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZjIuZGVmYXVsdCA/ICgwLCBfc2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2JhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cy5qc1xuICoqIG1vZHVsZSBpZCA9IDg0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IHsgXCJkZWZhdWx0XCI6IHJlcXVpcmUoXCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L3NldC1wcm90b3R5cGUtb2ZcIiksIF9fZXNNb2R1bGU6IHRydWUgfTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9iYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YuanNcbiAqKiBtb2R1bGUgaWQgPSA4NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwicmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YnKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9fY29yZScpLk9iamVjdC5zZXRQcm90b3R5cGVPZjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L3NldC1wcm90b3R5cGUtb2YuanNcbiAqKiBtb2R1bGUgaWQgPSA4NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gMTkuMS4zLjE5IE9iamVjdC5zZXRQcm90b3R5cGVPZihPLCBwcm90bylcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7XG4kZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHtzZXRQcm90b3R5cGVPZjogcmVxdWlyZSgnLi9fc2V0LXByb3RvJykuc2V0fSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC5zZXQtcHJvdG90eXBlLW9mLmpzXG4gKiogbW9kdWxlIGlkID0gODdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIFdvcmtzIHdpdGggX19wcm90b19fIG9ubHkuIE9sZCB2OCBjYW4ndCB3b3JrIHdpdGggbnVsbCBwcm90byBvYmplY3RzLlxuLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpXG4gICwgYW5PYmplY3QgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKTtcbnZhciBjaGVjayA9IGZ1bmN0aW9uKE8sIHByb3RvKXtcbiAgYW5PYmplY3QoTyk7XG4gIGlmKCFpc09iamVjdChwcm90bykgJiYgcHJvdG8gIT09IG51bGwpdGhyb3cgVHlwZUVycm9yKHByb3RvICsgXCI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhXCIpO1xufTtcbm1vZHVsZS5leHBvcnRzID0ge1xuICBzZXQ6IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCAoJ19fcHJvdG9fXycgaW4ge30gPyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgZnVuY3Rpb24odGVzdCwgYnVnZ3ksIHNldCl7XG4gICAgICB0cnkge1xuICAgICAgICBzZXQgPSByZXF1aXJlKCcuL19jdHgnKShGdW5jdGlvbi5jYWxsLCByZXF1aXJlKCcuL19vYmplY3QtZ29wZCcpLmYoT2JqZWN0LnByb3RvdHlwZSwgJ19fcHJvdG9fXycpLnNldCwgMik7XG4gICAgICAgIHNldCh0ZXN0LCBbXSk7XG4gICAgICAgIGJ1Z2d5ID0gISh0ZXN0IGluc3RhbmNlb2YgQXJyYXkpO1xuICAgICAgfSBjYXRjaChlKXsgYnVnZ3kgPSB0cnVlOyB9XG4gICAgICByZXR1cm4gZnVuY3Rpb24gc2V0UHJvdG90eXBlT2YoTywgcHJvdG8pe1xuICAgICAgICBjaGVjayhPLCBwcm90byk7XG4gICAgICAgIGlmKGJ1Z2d5KU8uX19wcm90b19fID0gcHJvdG87XG4gICAgICAgIGVsc2Ugc2V0KE8sIHByb3RvKTtcbiAgICAgICAgcmV0dXJuIE87XG4gICAgICB9O1xuICAgIH0oe30sIGZhbHNlKSA6IHVuZGVmaW5lZCksXG4gIGNoZWNrOiBjaGVja1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fc2V0LXByb3RvLmpzXG4gKiogbW9kdWxlIGlkID0gODhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9jcmVhdGUuanNcbiAqKiBtb2R1bGUgaWQgPSA4OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwicmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmNyZWF0ZScpO1xudmFyICRPYmplY3QgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzL19jb3JlJykuT2JqZWN0O1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGUoUCwgRCl7XG4gIHJldHVybiAkT2JqZWN0LmNyZWF0ZShQLCBEKTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9jcmVhdGUuanNcbiAqKiBtb2R1bGUgaWQgPSA5MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pXG4kZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHtjcmVhdGU6IHJlcXVpcmUoJy4vX29iamVjdC1jcmVhdGUnKX0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5vYmplY3QuY3JlYXRlLmpzXG4gKiogbW9kdWxlIGlkID0gOTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImltcG9ydCB7Y3JlYXRlU3RvcmV9IGZyb20gJ3JlZHV4Jztcbi8vIGltcG9ydCByZWR1Y2VyXG5pbXBvcnQgcmVkdWNlciBmcm9tICcuL3JlZHVjZXJzL2luZGV4LXJlZHVjZXInO1xuXG5jb25zdCBzdG9yZSA9IGNyZWF0ZVN0b3JlKCByZWR1Y2VyICk7XG5cbmV4cG9ydCBkZWZhdWx0IHN0b3JlO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL2pzL3N0b3JlLmJhYmVsLmpzXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5jb21wb3NlID0gZXhwb3J0cy5hcHBseU1pZGRsZXdhcmUgPSBleHBvcnRzLmJpbmRBY3Rpb25DcmVhdG9ycyA9IGV4cG9ydHMuY29tYmluZVJlZHVjZXJzID0gZXhwb3J0cy5jcmVhdGVTdG9yZSA9IHVuZGVmaW5lZDtcblxudmFyIF9jcmVhdGVTdG9yZSA9IHJlcXVpcmUoJy4vY3JlYXRlU3RvcmUnKTtcblxudmFyIF9jcmVhdGVTdG9yZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVTdG9yZSk7XG5cbnZhciBfY29tYmluZVJlZHVjZXJzID0gcmVxdWlyZSgnLi9jb21iaW5lUmVkdWNlcnMnKTtcblxudmFyIF9jb21iaW5lUmVkdWNlcnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tYmluZVJlZHVjZXJzKTtcblxudmFyIF9iaW5kQWN0aW9uQ3JlYXRvcnMgPSByZXF1aXJlKCcuL2JpbmRBY3Rpb25DcmVhdG9ycycpO1xuXG52YXIgX2JpbmRBY3Rpb25DcmVhdG9yczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iaW5kQWN0aW9uQ3JlYXRvcnMpO1xuXG52YXIgX2FwcGx5TWlkZGxld2FyZSA9IHJlcXVpcmUoJy4vYXBwbHlNaWRkbGV3YXJlJyk7XG5cbnZhciBfYXBwbHlNaWRkbGV3YXJlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FwcGx5TWlkZGxld2FyZSk7XG5cbnZhciBfY29tcG9zZSA9IHJlcXVpcmUoJy4vY29tcG9zZScpO1xuXG52YXIgX2NvbXBvc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tcG9zZSk7XG5cbnZhciBfd2FybmluZyA9IHJlcXVpcmUoJy4vdXRpbHMvd2FybmluZycpO1xuXG52YXIgX3dhcm5pbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2FybmluZyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXG4vKlxuKiBUaGlzIGlzIGEgZHVtbXkgZnVuY3Rpb24gdG8gY2hlY2sgaWYgdGhlIGZ1bmN0aW9uIG5hbWUgaGFzIGJlZW4gYWx0ZXJlZCBieSBtaW5pZmljYXRpb24uXG4qIElmIHRoZSBmdW5jdGlvbiBoYXMgYmVlbiBtaW5pZmllZCBhbmQgTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJywgd2FybiB0aGUgdXNlci5cbiovXG5mdW5jdGlvbiBpc0NydXNoZWQoKSB7fVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0eXBlb2YgaXNDcnVzaGVkLm5hbWUgPT09ICdzdHJpbmcnICYmIGlzQ3J1c2hlZC5uYW1lICE9PSAnaXNDcnVzaGVkJykge1xuICAoMCwgX3dhcm5pbmcyW1wiZGVmYXVsdFwiXSkoJ1lvdSBhcmUgY3VycmVudGx5IHVzaW5nIG1pbmlmaWVkIGNvZGUgb3V0c2lkZSBvZiBOT0RFX0VOViA9PT0gXFwncHJvZHVjdGlvblxcJy4gJyArICdUaGlzIG1lYW5zIHRoYXQgeW91IGFyZSBydW5uaW5nIGEgc2xvd2VyIGRldmVsb3BtZW50IGJ1aWxkIG9mIFJlZHV4LiAnICsgJ1lvdSBjYW4gdXNlIGxvb3NlLWVudmlmeSAoaHR0cHM6Ly9naXRodWIuY29tL3plcnRvc2gvbG9vc2UtZW52aWZ5KSBmb3IgYnJvd3NlcmlmeSAnICsgJ29yIERlZmluZVBsdWdpbiBmb3Igd2VicGFjayAoaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zMDAzMDAzMSkgJyArICd0byBlbnN1cmUgeW91IGhhdmUgdGhlIGNvcnJlY3QgY29kZSBmb3IgeW91ciBwcm9kdWN0aW9uIGJ1aWxkLicpO1xufVxuXG5leHBvcnRzLmNyZWF0ZVN0b3JlID0gX2NyZWF0ZVN0b3JlMltcImRlZmF1bHRcIl07XG5leHBvcnRzLmNvbWJpbmVSZWR1Y2VycyA9IF9jb21iaW5lUmVkdWNlcnMyW1wiZGVmYXVsdFwiXTtcbmV4cG9ydHMuYmluZEFjdGlvbkNyZWF0b3JzID0gX2JpbmRBY3Rpb25DcmVhdG9yczJbXCJkZWZhdWx0XCJdO1xuZXhwb3J0cy5hcHBseU1pZGRsZXdhcmUgPSBfYXBwbHlNaWRkbGV3YXJlMltcImRlZmF1bHRcIl07XG5leHBvcnRzLmNvbXBvc2UgPSBfY29tcG9zZTJbXCJkZWZhdWx0XCJdO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlZHV4L2xpYi9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDkzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLkFjdGlvblR5cGVzID0gdW5kZWZpbmVkO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBjcmVhdGVTdG9yZTtcblxudmFyIF9pc1BsYWluT2JqZWN0ID0gcmVxdWlyZSgnbG9kYXNoL2lzUGxhaW5PYmplY3QnKTtcblxudmFyIF9pc1BsYWluT2JqZWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2lzUGxhaW5PYmplY3QpO1xuXG52YXIgX3N5bWJvbE9ic2VydmFibGUgPSByZXF1aXJlKCdzeW1ib2wtb2JzZXJ2YWJsZScpO1xuXG52YXIgX3N5bWJvbE9ic2VydmFibGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3ltYm9sT2JzZXJ2YWJsZSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXG4vKipcbiAqIFRoZXNlIGFyZSBwcml2YXRlIGFjdGlvbiB0eXBlcyByZXNlcnZlZCBieSBSZWR1eC5cbiAqIEZvciBhbnkgdW5rbm93biBhY3Rpb25zLCB5b3UgbXVzdCByZXR1cm4gdGhlIGN1cnJlbnQgc3RhdGUuXG4gKiBJZiB0aGUgY3VycmVudCBzdGF0ZSBpcyB1bmRlZmluZWQsIHlvdSBtdXN0IHJldHVybiB0aGUgaW5pdGlhbCBzdGF0ZS5cbiAqIERvIG5vdCByZWZlcmVuY2UgdGhlc2UgYWN0aW9uIHR5cGVzIGRpcmVjdGx5IGluIHlvdXIgY29kZS5cbiAqL1xudmFyIEFjdGlvblR5cGVzID0gZXhwb3J0cy5BY3Rpb25UeXBlcyA9IHtcbiAgSU5JVDogJ0BAcmVkdXgvSU5JVCdcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIFJlZHV4IHN0b3JlIHRoYXQgaG9sZHMgdGhlIHN0YXRlIHRyZWUuXG4gKiBUaGUgb25seSB3YXkgdG8gY2hhbmdlIHRoZSBkYXRhIGluIHRoZSBzdG9yZSBpcyB0byBjYWxsIGBkaXNwYXRjaCgpYCBvbiBpdC5cbiAqXG4gKiBUaGVyZSBzaG91bGQgb25seSBiZSBhIHNpbmdsZSBzdG9yZSBpbiB5b3VyIGFwcC4gVG8gc3BlY2lmeSBob3cgZGlmZmVyZW50XG4gKiBwYXJ0cyBvZiB0aGUgc3RhdGUgdHJlZSByZXNwb25kIHRvIGFjdGlvbnMsIHlvdSBtYXkgY29tYmluZSBzZXZlcmFsIHJlZHVjZXJzXG4gKiBpbnRvIGEgc2luZ2xlIHJlZHVjZXIgZnVuY3Rpb24gYnkgdXNpbmcgYGNvbWJpbmVSZWR1Y2Vyc2AuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVkdWNlciBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbmV4dCBzdGF0ZSB0cmVlLCBnaXZlblxuICogdGhlIGN1cnJlbnQgc3RhdGUgdHJlZSBhbmQgdGhlIGFjdGlvbiB0byBoYW5kbGUuXG4gKlxuICogQHBhcmFtIHthbnl9IFtpbml0aWFsU3RhdGVdIFRoZSBpbml0aWFsIHN0YXRlLiBZb3UgbWF5IG9wdGlvbmFsbHkgc3BlY2lmeSBpdFxuICogdG8gaHlkcmF0ZSB0aGUgc3RhdGUgZnJvbSB0aGUgc2VydmVyIGluIHVuaXZlcnNhbCBhcHBzLCBvciB0byByZXN0b3JlIGFcbiAqIHByZXZpb3VzbHkgc2VyaWFsaXplZCB1c2VyIHNlc3Npb24uXG4gKiBJZiB5b3UgdXNlIGBjb21iaW5lUmVkdWNlcnNgIHRvIHByb2R1Y2UgdGhlIHJvb3QgcmVkdWNlciBmdW5jdGlvbiwgdGhpcyBtdXN0IGJlXG4gKiBhbiBvYmplY3Qgd2l0aCB0aGUgc2FtZSBzaGFwZSBhcyBgY29tYmluZVJlZHVjZXJzYCBrZXlzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVuaGFuY2VyIFRoZSBzdG9yZSBlbmhhbmNlci4gWW91IG1heSBvcHRpb25hbGx5IHNwZWNpZnkgaXRcbiAqIHRvIGVuaGFuY2UgdGhlIHN0b3JlIHdpdGggdGhpcmQtcGFydHkgY2FwYWJpbGl0aWVzIHN1Y2ggYXMgbWlkZGxld2FyZSxcbiAqIHRpbWUgdHJhdmVsLCBwZXJzaXN0ZW5jZSwgZXRjLiBUaGUgb25seSBzdG9yZSBlbmhhbmNlciB0aGF0IHNoaXBzIHdpdGggUmVkdXhcbiAqIGlzIGBhcHBseU1pZGRsZXdhcmUoKWAuXG4gKlxuICogQHJldHVybnMge1N0b3JlfSBBIFJlZHV4IHN0b3JlIHRoYXQgbGV0cyB5b3UgcmVhZCB0aGUgc3RhdGUsIGRpc3BhdGNoIGFjdGlvbnNcbiAqIGFuZCBzdWJzY3JpYmUgdG8gY2hhbmdlcy5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlU3RvcmUocmVkdWNlciwgaW5pdGlhbFN0YXRlLCBlbmhhbmNlcikge1xuICB2YXIgX3JlZjI7XG5cbiAgaWYgKHR5cGVvZiBpbml0aWFsU3RhdGUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGVuaGFuY2VyID09PSAndW5kZWZpbmVkJykge1xuICAgIGVuaGFuY2VyID0gaW5pdGlhbFN0YXRlO1xuICAgIGluaXRpYWxTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZW5oYW5jZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKHR5cGVvZiBlbmhhbmNlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB0aGUgZW5oYW5jZXIgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZW5oYW5jZXIoY3JlYXRlU3RvcmUpKHJlZHVjZXIsIGluaXRpYWxTdGF0ZSk7XG4gIH1cblxuICBpZiAodHlwZW9mIHJlZHVjZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHRoZSByZWR1Y2VyIHRvIGJlIGEgZnVuY3Rpb24uJyk7XG4gIH1cblxuICB2YXIgY3VycmVudFJlZHVjZXIgPSByZWR1Y2VyO1xuICB2YXIgY3VycmVudFN0YXRlID0gaW5pdGlhbFN0YXRlO1xuICB2YXIgY3VycmVudExpc3RlbmVycyA9IFtdO1xuICB2YXIgbmV4dExpc3RlbmVycyA9IGN1cnJlbnRMaXN0ZW5lcnM7XG4gIHZhciBpc0Rpc3BhdGNoaW5nID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gZW5zdXJlQ2FuTXV0YXRlTmV4dExpc3RlbmVycygpIHtcbiAgICBpZiAobmV4dExpc3RlbmVycyA9PT0gY3VycmVudExpc3RlbmVycykge1xuICAgICAgbmV4dExpc3RlbmVycyA9IGN1cnJlbnRMaXN0ZW5lcnMuc2xpY2UoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVhZHMgdGhlIHN0YXRlIHRyZWUgbWFuYWdlZCBieSB0aGUgc3RvcmUuXG4gICAqXG4gICAqIEByZXR1cm5zIHthbnl9IFRoZSBjdXJyZW50IHN0YXRlIHRyZWUgb2YgeW91ciBhcHBsaWNhdGlvbi5cbiAgICovXG4gIGZ1bmN0aW9uIGdldFN0YXRlKCkge1xuICAgIHJldHVybiBjdXJyZW50U3RhdGU7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIGNoYW5nZSBsaXN0ZW5lci4gSXQgd2lsbCBiZSBjYWxsZWQgYW55IHRpbWUgYW4gYWN0aW9uIGlzIGRpc3BhdGNoZWQsXG4gICAqIGFuZCBzb21lIHBhcnQgb2YgdGhlIHN0YXRlIHRyZWUgbWF5IHBvdGVudGlhbGx5IGhhdmUgY2hhbmdlZC4gWW91IG1heSB0aGVuXG4gICAqIGNhbGwgYGdldFN0YXRlKClgIHRvIHJlYWQgdGhlIGN1cnJlbnQgc3RhdGUgdHJlZSBpbnNpZGUgdGhlIGNhbGxiYWNrLlxuICAgKlxuICAgKiBZb3UgbWF5IGNhbGwgYGRpc3BhdGNoKClgIGZyb20gYSBjaGFuZ2UgbGlzdGVuZXIsIHdpdGggdGhlIGZvbGxvd2luZ1xuICAgKiBjYXZlYXRzOlxuICAgKlxuICAgKiAxLiBUaGUgc3Vic2NyaXB0aW9ucyBhcmUgc25hcHNob3R0ZWQganVzdCBiZWZvcmUgZXZlcnkgYGRpc3BhdGNoKClgIGNhbGwuXG4gICAqIElmIHlvdSBzdWJzY3JpYmUgb3IgdW5zdWJzY3JpYmUgd2hpbGUgdGhlIGxpc3RlbmVycyBhcmUgYmVpbmcgaW52b2tlZCwgdGhpc1xuICAgKiB3aWxsIG5vdCBoYXZlIGFueSBlZmZlY3Qgb24gdGhlIGBkaXNwYXRjaCgpYCB0aGF0IGlzIGN1cnJlbnRseSBpbiBwcm9ncmVzcy5cbiAgICogSG93ZXZlciwgdGhlIG5leHQgYGRpc3BhdGNoKClgIGNhbGwsIHdoZXRoZXIgbmVzdGVkIG9yIG5vdCwgd2lsbCB1c2UgYSBtb3JlXG4gICAqIHJlY2VudCBzbmFwc2hvdCBvZiB0aGUgc3Vic2NyaXB0aW9uIGxpc3QuXG4gICAqXG4gICAqIDIuIFRoZSBsaXN0ZW5lciBzaG91bGQgbm90IGV4cGVjdCB0byBzZWUgYWxsIHN0YXRlIGNoYW5nZXMsIGFzIHRoZSBzdGF0ZVxuICAgKiBtaWdodCBoYXZlIGJlZW4gdXBkYXRlZCBtdWx0aXBsZSB0aW1lcyBkdXJpbmcgYSBuZXN0ZWQgYGRpc3BhdGNoKClgIGJlZm9yZVxuICAgKiB0aGUgbGlzdGVuZXIgaXMgY2FsbGVkLiBJdCBpcywgaG93ZXZlciwgZ3VhcmFudGVlZCB0aGF0IGFsbCBzdWJzY3JpYmVyc1xuICAgKiByZWdpc3RlcmVkIGJlZm9yZSB0aGUgYGRpc3BhdGNoKClgIHN0YXJ0ZWQgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgbGF0ZXN0XG4gICAqIHN0YXRlIGJ5IHRoZSB0aW1lIGl0IGV4aXRzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBBIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgb24gZXZlcnkgZGlzcGF0Y2guXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiB0byByZW1vdmUgdGhpcyBjaGFuZ2UgbGlzdGVuZXIuXG4gICAqL1xuICBmdW5jdGlvbiBzdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIGxpc3RlbmVyIHRvIGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgdmFyIGlzU3Vic2NyaWJlZCA9IHRydWU7XG5cbiAgICBlbnN1cmVDYW5NdXRhdGVOZXh0TGlzdGVuZXJzKCk7XG4gICAgbmV4dExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiB1bnN1YnNjcmliZSgpIHtcbiAgICAgIGlmICghaXNTdWJzY3JpYmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaXNTdWJzY3JpYmVkID0gZmFsc2U7XG5cbiAgICAgIGVuc3VyZUNhbk11dGF0ZU5leHRMaXN0ZW5lcnMoKTtcbiAgICAgIHZhciBpbmRleCA9IG5leHRMaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICBuZXh0TGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwYXRjaGVzIGFuIGFjdGlvbi4gSXQgaXMgdGhlIG9ubHkgd2F5IHRvIHRyaWdnZXIgYSBzdGF0ZSBjaGFuZ2UuXG4gICAqXG4gICAqIFRoZSBgcmVkdWNlcmAgZnVuY3Rpb24sIHVzZWQgdG8gY3JlYXRlIHRoZSBzdG9yZSwgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGVcbiAgICogY3VycmVudCBzdGF0ZSB0cmVlIGFuZCB0aGUgZ2l2ZW4gYGFjdGlvbmAuIEl0cyByZXR1cm4gdmFsdWUgd2lsbFxuICAgKiBiZSBjb25zaWRlcmVkIHRoZSAqKm5leHQqKiBzdGF0ZSBvZiB0aGUgdHJlZSwgYW5kIHRoZSBjaGFuZ2UgbGlzdGVuZXJzXG4gICAqIHdpbGwgYmUgbm90aWZpZWQuXG4gICAqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9ubHkgc3VwcG9ydHMgcGxhaW4gb2JqZWN0IGFjdGlvbnMuIElmIHlvdSB3YW50IHRvXG4gICAqIGRpc3BhdGNoIGEgUHJvbWlzZSwgYW4gT2JzZXJ2YWJsZSwgYSB0aHVuaywgb3Igc29tZXRoaW5nIGVsc2UsIHlvdSBuZWVkIHRvXG4gICAqIHdyYXAgeW91ciBzdG9yZSBjcmVhdGluZyBmdW5jdGlvbiBpbnRvIHRoZSBjb3JyZXNwb25kaW5nIG1pZGRsZXdhcmUuIEZvclxuICAgKiBleGFtcGxlLCBzZWUgdGhlIGRvY3VtZW50YXRpb24gZm9yIHRoZSBgcmVkdXgtdGh1bmtgIHBhY2thZ2UuIEV2ZW4gdGhlXG4gICAqIG1pZGRsZXdhcmUgd2lsbCBldmVudHVhbGx5IGRpc3BhdGNoIHBsYWluIG9iamVjdCBhY3Rpb25zIHVzaW5nIHRoaXMgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYWN0aW9uIEEgcGxhaW4gb2JqZWN0IHJlcHJlc2VudGluZyDigJx3aGF0IGNoYW5nZWTigJ0uIEl0IGlzXG4gICAqIGEgZ29vZCBpZGVhIHRvIGtlZXAgYWN0aW9ucyBzZXJpYWxpemFibGUgc28geW91IGNhbiByZWNvcmQgYW5kIHJlcGxheSB1c2VyXG4gICAqIHNlc3Npb25zLCBvciB1c2UgdGhlIHRpbWUgdHJhdmVsbGluZyBgcmVkdXgtZGV2dG9vbHNgLiBBbiBhY3Rpb24gbXVzdCBoYXZlXG4gICAqIGEgYHR5cGVgIHByb3BlcnR5IHdoaWNoIG1heSBub3QgYmUgYHVuZGVmaW5lZGAuIEl0IGlzIGEgZ29vZCBpZGVhIHRvIHVzZVxuICAgKiBzdHJpbmcgY29uc3RhbnRzIGZvciBhY3Rpb24gdHlwZXMuXG4gICAqXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IEZvciBjb252ZW5pZW5jZSwgdGhlIHNhbWUgYWN0aW9uIG9iamVjdCB5b3UgZGlzcGF0Y2hlZC5cbiAgICpcbiAgICogTm90ZSB0aGF0LCBpZiB5b3UgdXNlIGEgY3VzdG9tIG1pZGRsZXdhcmUsIGl0IG1heSB3cmFwIGBkaXNwYXRjaCgpYCB0b1xuICAgKiByZXR1cm4gc29tZXRoaW5nIGVsc2UgKGZvciBleGFtcGxlLCBhIFByb21pc2UgeW91IGNhbiBhd2FpdCkuXG4gICAqL1xuICBmdW5jdGlvbiBkaXNwYXRjaChhY3Rpb24pIHtcbiAgICBpZiAoISgwLCBfaXNQbGFpbk9iamVjdDJbXCJkZWZhdWx0XCJdKShhY3Rpb24pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FjdGlvbnMgbXVzdCBiZSBwbGFpbiBvYmplY3RzLiAnICsgJ1VzZSBjdXN0b20gbWlkZGxld2FyZSBmb3IgYXN5bmMgYWN0aW9ucy4nKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGFjdGlvbi50eXBlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBY3Rpb25zIG1heSBub3QgaGF2ZSBhbiB1bmRlZmluZWQgXCJ0eXBlXCIgcHJvcGVydHkuICcgKyAnSGF2ZSB5b3UgbWlzc3BlbGxlZCBhIGNvbnN0YW50PycpO1xuICAgIH1cblxuICAgIGlmIChpc0Rpc3BhdGNoaW5nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlZHVjZXJzIG1heSBub3QgZGlzcGF0Y2ggYWN0aW9ucy4nKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgaXNEaXNwYXRjaGluZyA9IHRydWU7XG4gICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50UmVkdWNlcihjdXJyZW50U3RhdGUsIGFjdGlvbik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlzRGlzcGF0Y2hpbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgbGlzdGVuZXJzID0gY3VycmVudExpc3RlbmVycyA9IG5leHRMaXN0ZW5lcnM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxpc3RlbmVyc1tpXSgpO1xuICAgIH1cblxuICAgIHJldHVybiBhY3Rpb247XG4gIH1cblxuICAvKipcbiAgICogUmVwbGFjZXMgdGhlIHJlZHVjZXIgY3VycmVudGx5IHVzZWQgYnkgdGhlIHN0b3JlIHRvIGNhbGN1bGF0ZSB0aGUgc3RhdGUuXG4gICAqXG4gICAqIFlvdSBtaWdodCBuZWVkIHRoaXMgaWYgeW91ciBhcHAgaW1wbGVtZW50cyBjb2RlIHNwbGl0dGluZyBhbmQgeW91IHdhbnQgdG9cbiAgICogbG9hZCBzb21lIG9mIHRoZSByZWR1Y2VycyBkeW5hbWljYWxseS4gWW91IG1pZ2h0IGFsc28gbmVlZCB0aGlzIGlmIHlvdVxuICAgKiBpbXBsZW1lbnQgYSBob3QgcmVsb2FkaW5nIG1lY2hhbmlzbSBmb3IgUmVkdXguXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRSZWR1Y2VyIFRoZSByZWR1Y2VyIGZvciB0aGUgc3RvcmUgdG8gdXNlIGluc3RlYWQuXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgZnVuY3Rpb24gcmVwbGFjZVJlZHVjZXIobmV4dFJlZHVjZXIpIHtcbiAgICBpZiAodHlwZW9mIG5leHRSZWR1Y2VyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHRoZSBuZXh0UmVkdWNlciB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICAgIH1cblxuICAgIGN1cnJlbnRSZWR1Y2VyID0gbmV4dFJlZHVjZXI7XG4gICAgZGlzcGF0Y2goeyB0eXBlOiBBY3Rpb25UeXBlcy5JTklUIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEludGVyb3BlcmFiaWxpdHkgcG9pbnQgZm9yIG9ic2VydmFibGUvcmVhY3RpdmUgbGlicmFyaWVzLlxuICAgKiBAcmV0dXJucyB7b2JzZXJ2YWJsZX0gQSBtaW5pbWFsIG9ic2VydmFibGUgb2Ygc3RhdGUgY2hhbmdlcy5cbiAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZSB0aGUgb2JzZXJ2YWJsZSBwcm9wb3NhbDpcbiAgICogaHR0cHM6Ly9naXRodWIuY29tL3plbnBhcnNpbmcvZXMtb2JzZXJ2YWJsZVxuICAgKi9cbiAgZnVuY3Rpb24gb2JzZXJ2YWJsZSgpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBvdXRlclN1YnNjcmliZSA9IHN1YnNjcmliZTtcbiAgICByZXR1cm4gX3JlZiA9IHtcbiAgICAgIC8qKlxuICAgICAgICogVGhlIG1pbmltYWwgb2JzZXJ2YWJsZSBzdWJzY3JpcHRpb24gbWV0aG9kLlxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9ic2VydmVyIEFueSBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCBhcyBhbiBvYnNlcnZlci5cbiAgICAgICAqIFRoZSBvYnNlcnZlciBvYmplY3Qgc2hvdWxkIGhhdmUgYSBgbmV4dGAgbWV0aG9kLlxuICAgICAgICogQHJldHVybnMge3N1YnNjcmlwdGlvbn0gQW4gb2JqZWN0IHdpdGggYW4gYHVuc3Vic2NyaWJlYCBtZXRob2QgdGhhdCBjYW5cbiAgICAgICAqIGJlIHVzZWQgdG8gdW5zdWJzY3JpYmUgdGhlIG9ic2VydmFibGUgZnJvbSB0aGUgc3RvcmUsIGFuZCBwcmV2ZW50IGZ1cnRoZXJcbiAgICAgICAqIGVtaXNzaW9uIG9mIHZhbHVlcyBmcm9tIHRoZSBvYnNlcnZhYmxlLlxuICAgICAgICovXG5cbiAgICAgIHN1YnNjcmliZTogZnVuY3Rpb24gc3Vic2NyaWJlKG9ic2VydmVyKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb2JzZXJ2ZXIgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgdGhlIG9ic2VydmVyIHRvIGJlIGFuIG9iamVjdC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9ic2VydmVTdGF0ZSgpIHtcbiAgICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChnZXRTdGF0ZSgpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBvYnNlcnZlU3RhdGUoKTtcbiAgICAgICAgdmFyIHVuc3Vic2NyaWJlID0gb3V0ZXJTdWJzY3JpYmUob2JzZXJ2ZVN0YXRlKTtcbiAgICAgICAgcmV0dXJuIHsgdW5zdWJzY3JpYmU6IHVuc3Vic2NyaWJlIH07XG4gICAgICB9XG4gICAgfSwgX3JlZltfc3ltYm9sT2JzZXJ2YWJsZTJbXCJkZWZhdWx0XCJdXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sIF9yZWY7XG4gIH1cblxuICAvLyBXaGVuIGEgc3RvcmUgaXMgY3JlYXRlZCwgYW4gXCJJTklUXCIgYWN0aW9uIGlzIGRpc3BhdGNoZWQgc28gdGhhdCBldmVyeVxuICAvLyByZWR1Y2VyIHJldHVybnMgdGhlaXIgaW5pdGlhbCBzdGF0ZS4gVGhpcyBlZmZlY3RpdmVseSBwb3B1bGF0ZXNcbiAgLy8gdGhlIGluaXRpYWwgc3RhdGUgdHJlZS5cbiAgZGlzcGF0Y2goeyB0eXBlOiBBY3Rpb25UeXBlcy5JTklUIH0pO1xuXG4gIHJldHVybiBfcmVmMiA9IHtcbiAgICBkaXNwYXRjaDogZGlzcGF0Y2gsXG4gICAgc3Vic2NyaWJlOiBzdWJzY3JpYmUsXG4gICAgZ2V0U3RhdGU6IGdldFN0YXRlLFxuICAgIHJlcGxhY2VSZWR1Y2VyOiByZXBsYWNlUmVkdWNlclxuICB9LCBfcmVmMltfc3ltYm9sT2JzZXJ2YWJsZTJbXCJkZWZhdWx0XCJdXSA9IG9ic2VydmFibGUsIF9yZWYyO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlZHV4L2xpYi9jcmVhdGVTdG9yZS5qc1xuICoqIG1vZHVsZSBpZCA9IDk0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0UHJvdG90eXBlID0gcmVxdWlyZSgnLi9fZ2V0UHJvdG90eXBlJyksXG4gICAgaXNIb3N0T2JqZWN0ID0gcmVxdWlyZSgnLi9faXNIb3N0T2JqZWN0JyksXG4gICAgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi9pc09iamVjdExpa2UnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG52YXIgZnVuY1RvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKiogVXNlZCB0byBpbmZlciB0aGUgYE9iamVjdGAgY29uc3RydWN0b3IuICovXG52YXIgb2JqZWN0Q3RvclN0cmluZyA9IGZ1bmNUb1N0cmluZy5jYWxsKE9iamVjdCk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCB0aGF0IGlzLCBhbiBvYmplY3QgY3JlYXRlZCBieSB0aGVcbiAqIGBPYmplY3RgIGNvbnN0cnVjdG9yIG9yIG9uZSB3aXRoIGEgYFtbUHJvdG90eXBlXV1gIG9mIGBudWxsYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuOC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHBsYWluIG9iamVjdCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5hID0gMTtcbiAqIH1cbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QobmV3IEZvbyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNQbGFpbk9iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QoeyAneCc6IDAsICd5JzogMCB9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QoT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgaWYgKCFpc09iamVjdExpa2UodmFsdWUpIHx8XG4gICAgICBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSAhPSBvYmplY3RUYWcgfHwgaXNIb3N0T2JqZWN0KHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgcHJvdG8gPSBnZXRQcm90b3R5cGUodmFsdWUpO1xuICBpZiAocHJvdG8gPT09IG51bGwpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICB2YXIgQ3RvciA9IGhhc093blByb3BlcnR5LmNhbGwocHJvdG8sICdjb25zdHJ1Y3RvcicpICYmIHByb3RvLmNvbnN0cnVjdG9yO1xuICByZXR1cm4gKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiZcbiAgICBDdG9yIGluc3RhbmNlb2YgQ3RvciAmJiBmdW5jVG9TdHJpbmcuY2FsbChDdG9yKSA9PSBvYmplY3RDdG9yU3RyaW5nKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1BsYWluT2JqZWN0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzUGxhaW5PYmplY3QuanNcbiAqKiBtb2R1bGUgaWQgPSA5NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIG92ZXJBcmcgPSByZXF1aXJlKCcuL19vdmVyQXJnJyk7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVHZXRQcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG5cbi8qKlxuICogR2V0cyB0aGUgYFtbUHJvdG90eXBlXV1gIG9mIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge251bGx8T2JqZWN0fSBSZXR1cm5zIHRoZSBgW1tQcm90b3R5cGVdXWAuXG4gKi9cbnZhciBnZXRQcm90b3R5cGUgPSBvdmVyQXJnKG5hdGl2ZUdldFByb3RvdHlwZSwgT2JqZWN0KTtcblxubW9kdWxlLmV4cG9ydHMgPSBnZXRQcm90b3R5cGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2dldFByb3RvdHlwZS5qc1xuICoqIG1vZHVsZSBpZCA9IDk2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggaXRzIGZpcnN0IGFyZ3VtZW50IHRyYW5zZm9ybWVkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gdHJhbnNmb3JtIFRoZSBhcmd1bWVudCB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gb3ZlckFyZyhmdW5jLCB0cmFuc2Zvcm0pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiBmdW5jKHRyYW5zZm9ybShhcmcpKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBvdmVyQXJnO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19vdmVyQXJnLmpzXG4gKiogbW9kdWxlIGlkID0gOTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBob3N0IG9iamVjdCBpbiBJRSA8IDkuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBob3N0IG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0hvc3RPYmplY3QodmFsdWUpIHtcbiAgLy8gTWFueSBob3N0IG9iamVjdHMgYXJlIGBPYmplY3RgIG9iamVjdHMgdGhhdCBjYW4gY29lcmNlIHRvIHN0cmluZ3NcbiAgLy8gZGVzcGl0ZSBoYXZpbmcgaW1wcm9wZXJseSBkZWZpbmVkIGB0b1N0cmluZ2AgbWV0aG9kcy5cbiAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuICBpZiAodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUudG9TdHJpbmcgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRyeSB7XG4gICAgICByZXN1bHQgPSAhISh2YWx1ZSArICcnKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNIb3N0T2JqZWN0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19pc0hvc3RPYmplY3QuanNcbiAqKiBtb2R1bGUgaWQgPSA5OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNPYmplY3RMaWtlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzT2JqZWN0TGlrZS5qc1xuICoqIG1vZHVsZSBpZCA9IDk5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiBnbG9iYWwgd2luZG93ICovXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9wb255ZmlsbCcpKGdsb2JhbCB8fCB3aW5kb3cgfHwgdGhpcyk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9zeW1ib2wtb2JzZXJ2YWJsZS9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDEwMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN5bWJvbE9ic2VydmFibGVQb255ZmlsbChyb290KSB7XG5cdHZhciByZXN1bHQ7XG5cdHZhciBTeW1ib2wgPSByb290LlN5bWJvbDtcblxuXHRpZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdGlmIChTeW1ib2wub2JzZXJ2YWJsZSkge1xuXHRcdFx0cmVzdWx0ID0gU3ltYm9sLm9ic2VydmFibGU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc3VsdCA9IFN5bWJvbCgnb2JzZXJ2YWJsZScpO1xuXHRcdFx0U3ltYm9sLm9ic2VydmFibGUgPSByZXN1bHQ7XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdHJlc3VsdCA9ICdAQG9ic2VydmFibGUnO1xuXHR9XG5cblx0cmV0dXJuIHJlc3VsdDtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9zeW1ib2wtb2JzZXJ2YWJsZS9wb255ZmlsbC5qc1xuICoqIG1vZHVsZSBpZCA9IDEwMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBjb21iaW5lUmVkdWNlcnM7XG5cbnZhciBfY3JlYXRlU3RvcmUgPSByZXF1aXJlKCcuL2NyZWF0ZVN0b3JlJyk7XG5cbnZhciBfaXNQbGFpbk9iamVjdCA9IHJlcXVpcmUoJ2xvZGFzaC9pc1BsYWluT2JqZWN0Jyk7XG5cbnZhciBfaXNQbGFpbk9iamVjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pc1BsYWluT2JqZWN0KTtcblxudmFyIF93YXJuaW5nID0gcmVxdWlyZSgnLi91dGlscy93YXJuaW5nJyk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGdldFVuZGVmaW5lZFN0YXRlRXJyb3JNZXNzYWdlKGtleSwgYWN0aW9uKSB7XG4gIHZhciBhY3Rpb25UeXBlID0gYWN0aW9uICYmIGFjdGlvbi50eXBlO1xuICB2YXIgYWN0aW9uTmFtZSA9IGFjdGlvblR5cGUgJiYgJ1wiJyArIGFjdGlvblR5cGUudG9TdHJpbmcoKSArICdcIicgfHwgJ2FuIGFjdGlvbic7XG5cbiAgcmV0dXJuICdHaXZlbiBhY3Rpb24gJyArIGFjdGlvbk5hbWUgKyAnLCByZWR1Y2VyIFwiJyArIGtleSArICdcIiByZXR1cm5lZCB1bmRlZmluZWQuICcgKyAnVG8gaWdub3JlIGFuIGFjdGlvbiwgeW91IG11c3QgZXhwbGljaXRseSByZXR1cm4gdGhlIHByZXZpb3VzIHN0YXRlLic7XG59XG5cbmZ1bmN0aW9uIGdldFVuZXhwZWN0ZWRTdGF0ZVNoYXBlV2FybmluZ01lc3NhZ2UoaW5wdXRTdGF0ZSwgcmVkdWNlcnMsIGFjdGlvbikge1xuICB2YXIgcmVkdWNlcktleXMgPSBPYmplY3Qua2V5cyhyZWR1Y2Vycyk7XG4gIHZhciBhcmd1bWVudE5hbWUgPSBhY3Rpb24gJiYgYWN0aW9uLnR5cGUgPT09IF9jcmVhdGVTdG9yZS5BY3Rpb25UeXBlcy5JTklUID8gJ2luaXRpYWxTdGF0ZSBhcmd1bWVudCBwYXNzZWQgdG8gY3JlYXRlU3RvcmUnIDogJ3ByZXZpb3VzIHN0YXRlIHJlY2VpdmVkIGJ5IHRoZSByZWR1Y2VyJztcblxuICBpZiAocmVkdWNlcktleXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICdTdG9yZSBkb2VzIG5vdCBoYXZlIGEgdmFsaWQgcmVkdWNlci4gTWFrZSBzdXJlIHRoZSBhcmd1bWVudCBwYXNzZWQgJyArICd0byBjb21iaW5lUmVkdWNlcnMgaXMgYW4gb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgcmVkdWNlcnMuJztcbiAgfVxuXG4gIGlmICghKDAsIF9pc1BsYWluT2JqZWN0MltcImRlZmF1bHRcIl0pKGlucHV0U3RhdGUpKSB7XG4gICAgcmV0dXJuICdUaGUgJyArIGFyZ3VtZW50TmFtZSArICcgaGFzIHVuZXhwZWN0ZWQgdHlwZSBvZiBcIicgKyB7fS50b1N0cmluZy5jYWxsKGlucHV0U3RhdGUpLm1hdGNoKC9cXHMoW2EtenxBLVpdKykvKVsxXSArICdcIi4gRXhwZWN0ZWQgYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyAnICsgKCdrZXlzOiBcIicgKyByZWR1Y2VyS2V5cy5qb2luKCdcIiwgXCInKSArICdcIicpO1xuICB9XG5cbiAgdmFyIHVuZXhwZWN0ZWRLZXlzID0gT2JqZWN0LmtleXMoaW5wdXRTdGF0ZSkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gIXJlZHVjZXJzLmhhc093blByb3BlcnR5KGtleSk7XG4gIH0pO1xuXG4gIGlmICh1bmV4cGVjdGVkS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuICdVbmV4cGVjdGVkICcgKyAodW5leHBlY3RlZEtleXMubGVuZ3RoID4gMSA/ICdrZXlzJyA6ICdrZXknKSArICcgJyArICgnXCInICsgdW5leHBlY3RlZEtleXMuam9pbignXCIsIFwiJykgKyAnXCIgZm91bmQgaW4gJyArIGFyZ3VtZW50TmFtZSArICcuICcpICsgJ0V4cGVjdGVkIHRvIGZpbmQgb25lIG9mIHRoZSBrbm93biByZWR1Y2VyIGtleXMgaW5zdGVhZDogJyArICgnXCInICsgcmVkdWNlcktleXMuam9pbignXCIsIFwiJykgKyAnXCIuIFVuZXhwZWN0ZWQga2V5cyB3aWxsIGJlIGlnbm9yZWQuJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYXNzZXJ0UmVkdWNlclNhbml0eShyZWR1Y2Vycykge1xuICBPYmplY3Qua2V5cyhyZWR1Y2VycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIHJlZHVjZXIgPSByZWR1Y2Vyc1trZXldO1xuICAgIHZhciBpbml0aWFsU3RhdGUgPSByZWR1Y2VyKHVuZGVmaW5lZCwgeyB0eXBlOiBfY3JlYXRlU3RvcmUuQWN0aW9uVHlwZXMuSU5JVCB9KTtcblxuICAgIGlmICh0eXBlb2YgaW5pdGlhbFN0YXRlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWR1Y2VyIFwiJyArIGtleSArICdcIiByZXR1cm5lZCB1bmRlZmluZWQgZHVyaW5nIGluaXRpYWxpemF0aW9uLiAnICsgJ0lmIHRoZSBzdGF0ZSBwYXNzZWQgdG8gdGhlIHJlZHVjZXIgaXMgdW5kZWZpbmVkLCB5b3UgbXVzdCAnICsgJ2V4cGxpY2l0bHkgcmV0dXJuIHRoZSBpbml0aWFsIHN0YXRlLiBUaGUgaW5pdGlhbCBzdGF0ZSBtYXkgJyArICdub3QgYmUgdW5kZWZpbmVkLicpO1xuICAgIH1cblxuICAgIHZhciB0eXBlID0gJ0BAcmVkdXgvUFJPQkVfVU5LTk9XTl9BQ1RJT05fJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KS5zcGxpdCgnJykuam9pbignLicpO1xuICAgIGlmICh0eXBlb2YgcmVkdWNlcih1bmRlZmluZWQsIHsgdHlwZTogdHlwZSB9KSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVkdWNlciBcIicgKyBrZXkgKyAnXCIgcmV0dXJuZWQgdW5kZWZpbmVkIHdoZW4gcHJvYmVkIHdpdGggYSByYW5kb20gdHlwZS4gJyArICgnRG9uXFwndCB0cnkgdG8gaGFuZGxlICcgKyBfY3JlYXRlU3RvcmUuQWN0aW9uVHlwZXMuSU5JVCArICcgb3Igb3RoZXIgYWN0aW9ucyBpbiBcInJlZHV4LypcIiAnKSArICduYW1lc3BhY2UuIFRoZXkgYXJlIGNvbnNpZGVyZWQgcHJpdmF0ZS4gSW5zdGVhZCwgeW91IG11c3QgcmV0dXJuIHRoZSAnICsgJ2N1cnJlbnQgc3RhdGUgZm9yIGFueSB1bmtub3duIGFjdGlvbnMsIHVubGVzcyBpdCBpcyB1bmRlZmluZWQsICcgKyAnaW4gd2hpY2ggY2FzZSB5b3UgbXVzdCByZXR1cm4gdGhlIGluaXRpYWwgc3RhdGUsIHJlZ2FyZGxlc3Mgb2YgdGhlICcgKyAnYWN0aW9uIHR5cGUuIFRoZSBpbml0aWFsIHN0YXRlIG1heSBub3QgYmUgdW5kZWZpbmVkLicpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogVHVybnMgYW4gb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgZGlmZmVyZW50IHJlZHVjZXIgZnVuY3Rpb25zLCBpbnRvIGEgc2luZ2xlXG4gKiByZWR1Y2VyIGZ1bmN0aW9uLiBJdCB3aWxsIGNhbGwgZXZlcnkgY2hpbGQgcmVkdWNlciwgYW5kIGdhdGhlciB0aGVpciByZXN1bHRzXG4gKiBpbnRvIGEgc2luZ2xlIHN0YXRlIG9iamVjdCwgd2hvc2Uga2V5cyBjb3JyZXNwb25kIHRvIHRoZSBrZXlzIG9mIHRoZSBwYXNzZWRcbiAqIHJlZHVjZXIgZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSByZWR1Y2VycyBBbiBvYmplY3Qgd2hvc2UgdmFsdWVzIGNvcnJlc3BvbmQgdG8gZGlmZmVyZW50XG4gKiByZWR1Y2VyIGZ1bmN0aW9ucyB0aGF0IG5lZWQgdG8gYmUgY29tYmluZWQgaW50byBvbmUuIE9uZSBoYW5keSB3YXkgdG8gb2J0YWluXG4gKiBpdCBpcyB0byB1c2UgRVM2IGBpbXBvcnQgKiBhcyByZWR1Y2Vyc2Agc3ludGF4LiBUaGUgcmVkdWNlcnMgbWF5IG5ldmVyIHJldHVyblxuICogdW5kZWZpbmVkIGZvciBhbnkgYWN0aW9uLiBJbnN0ZWFkLCB0aGV5IHNob3VsZCByZXR1cm4gdGhlaXIgaW5pdGlhbCBzdGF0ZVxuICogaWYgdGhlIHN0YXRlIHBhc3NlZCB0byB0aGVtIHdhcyB1bmRlZmluZWQsIGFuZCB0aGUgY3VycmVudCBzdGF0ZSBmb3IgYW55XG4gKiB1bnJlY29nbml6ZWQgYWN0aW9uLlxuICpcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSByZWR1Y2VyIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBldmVyeSByZWR1Y2VyIGluc2lkZSB0aGVcbiAqIHBhc3NlZCBvYmplY3QsIGFuZCBidWlsZHMgYSBzdGF0ZSBvYmplY3Qgd2l0aCB0aGUgc2FtZSBzaGFwZS5cbiAqL1xuZnVuY3Rpb24gY29tYmluZVJlZHVjZXJzKHJlZHVjZXJzKSB7XG4gIHZhciByZWR1Y2VyS2V5cyA9IE9iamVjdC5rZXlzKHJlZHVjZXJzKTtcbiAgdmFyIGZpbmFsUmVkdWNlcnMgPSB7fTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWR1Y2VyS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBrZXkgPSByZWR1Y2VyS2V5c1tpXTtcbiAgICBpZiAodHlwZW9mIHJlZHVjZXJzW2tleV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGZpbmFsUmVkdWNlcnNba2V5XSA9IHJlZHVjZXJzW2tleV07XG4gICAgfVxuICB9XG4gIHZhciBmaW5hbFJlZHVjZXJLZXlzID0gT2JqZWN0LmtleXMoZmluYWxSZWR1Y2Vycyk7XG5cbiAgdmFyIHNhbml0eUVycm9yO1xuICB0cnkge1xuICAgIGFzc2VydFJlZHVjZXJTYW5pdHkoZmluYWxSZWR1Y2Vycyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBzYW5pdHlFcnJvciA9IGU7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gY29tYmluYXRpb24oKSB7XG4gICAgdmFyIHN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMF07XG4gICAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50c1sxXTtcblxuICAgIGlmIChzYW5pdHlFcnJvcikge1xuICAgICAgdGhyb3cgc2FuaXR5RXJyb3I7XG4gICAgfVxuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciB3YXJuaW5nTWVzc2FnZSA9IGdldFVuZXhwZWN0ZWRTdGF0ZVNoYXBlV2FybmluZ01lc3NhZ2Uoc3RhdGUsIGZpbmFsUmVkdWNlcnMsIGFjdGlvbik7XG4gICAgICBpZiAod2FybmluZ01lc3NhZ2UpIHtcbiAgICAgICAgKDAsIF93YXJuaW5nMltcImRlZmF1bHRcIl0pKHdhcm5pbmdNZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgaGFzQ2hhbmdlZCA9IGZhbHNlO1xuICAgIHZhciBuZXh0U3RhdGUgPSB7fTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbmFsUmVkdWNlcktleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBmaW5hbFJlZHVjZXJLZXlzW2ldO1xuICAgICAgdmFyIHJlZHVjZXIgPSBmaW5hbFJlZHVjZXJzW2tleV07XG4gICAgICB2YXIgcHJldmlvdXNTdGF0ZUZvcktleSA9IHN0YXRlW2tleV07XG4gICAgICB2YXIgbmV4dFN0YXRlRm9yS2V5ID0gcmVkdWNlcihwcmV2aW91c1N0YXRlRm9yS2V5LCBhY3Rpb24pO1xuICAgICAgaWYgKHR5cGVvZiBuZXh0U3RhdGVGb3JLZXkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBnZXRVbmRlZmluZWRTdGF0ZUVycm9yTWVzc2FnZShrZXksIGFjdGlvbik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgbmV4dFN0YXRlW2tleV0gPSBuZXh0U3RhdGVGb3JLZXk7XG4gICAgICBoYXNDaGFuZ2VkID0gaGFzQ2hhbmdlZCB8fCBuZXh0U3RhdGVGb3JLZXkgIT09IHByZXZpb3VzU3RhdGVGb3JLZXk7XG4gICAgfVxuICAgIHJldHVybiBoYXNDaGFuZ2VkID8gbmV4dFN0YXRlIDogc3RhdGU7XG4gIH07XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVkdXgvbGliL2NvbWJpbmVSZWR1Y2Vycy5qc1xuICoqIG1vZHVsZSBpZCA9IDEwMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSB3YXJuaW5nO1xuLyoqXG4gKiBQcmludHMgYSB3YXJuaW5nIGluIHRoZSBjb25zb2xlIGlmIGl0IGV4aXN0cy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBUaGUgd2FybmluZyBtZXNzYWdlLlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHdhcm5pbmcobWVzc2FnZSkge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXG4gIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGNvbnNvbGUuZXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICB9XG4gIC8qIGVzbGludC1lbmFibGUgbm8tY29uc29sZSAqL1xuICB0cnkge1xuICAgIC8vIFRoaXMgZXJyb3Igd2FzIHRocm93biBhcyBhIGNvbnZlbmllbmNlIHNvIHRoYXQgaWYgeW91IGVuYWJsZVxuICAgIC8vIFwiYnJlYWsgb24gYWxsIGV4Y2VwdGlvbnNcIiBpbiB5b3VyIGNvbnNvbGUsXG4gICAgLy8gaXQgd291bGQgcGF1c2UgdGhlIGV4ZWN1dGlvbiBhdCB0aGlzIGxpbmUuXG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gIH0gY2F0Y2ggKGUpIHt9XG4gIC8qIGVzbGludC1lbmFibGUgbm8tZW1wdHkgKi9cbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWR1eC9saWIvdXRpbHMvd2FybmluZy5qc1xuICoqIG1vZHVsZSBpZCA9IDEwM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBiaW5kQWN0aW9uQ3JlYXRvcnM7XG5mdW5jdGlvbiBiaW5kQWN0aW9uQ3JlYXRvcihhY3Rpb25DcmVhdG9yLCBkaXNwYXRjaCkge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBkaXNwYXRjaChhY3Rpb25DcmVhdG9yLmFwcGx5KHVuZGVmaW5lZCwgYXJndW1lbnRzKSk7XG4gIH07XG59XG5cbi8qKlxuICogVHVybnMgYW4gb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgYWN0aW9uIGNyZWF0b3JzLCBpbnRvIGFuIG9iamVjdCB3aXRoIHRoZVxuICogc2FtZSBrZXlzLCBidXQgd2l0aCBldmVyeSBmdW5jdGlvbiB3cmFwcGVkIGludG8gYSBgZGlzcGF0Y2hgIGNhbGwgc28gdGhleVxuICogbWF5IGJlIGludm9rZWQgZGlyZWN0bHkuIFRoaXMgaXMganVzdCBhIGNvbnZlbmllbmNlIG1ldGhvZCwgYXMgeW91IGNhbiBjYWxsXG4gKiBgc3RvcmUuZGlzcGF0Y2goTXlBY3Rpb25DcmVhdG9ycy5kb1NvbWV0aGluZygpKWAgeW91cnNlbGYganVzdCBmaW5lLlxuICpcbiAqIEZvciBjb252ZW5pZW5jZSwgeW91IGNhbiBhbHNvIHBhc3MgYSBzaW5nbGUgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50LFxuICogYW5kIGdldCBhIGZ1bmN0aW9uIGluIHJldHVybi5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdH0gYWN0aW9uQ3JlYXRvcnMgQW4gb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgYWN0aW9uXG4gKiBjcmVhdG9yIGZ1bmN0aW9ucy4gT25lIGhhbmR5IHdheSB0byBvYnRhaW4gaXQgaXMgdG8gdXNlIEVTNiBgaW1wb3J0ICogYXNgXG4gKiBzeW50YXguIFlvdSBtYXkgYWxzbyBwYXNzIGEgc2luZ2xlIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGRpc3BhdGNoIFRoZSBgZGlzcGF0Y2hgIGZ1bmN0aW9uIGF2YWlsYWJsZSBvbiB5b3VyIFJlZHV4XG4gKiBzdG9yZS5cbiAqXG4gKiBAcmV0dXJucyB7RnVuY3Rpb258T2JqZWN0fSBUaGUgb2JqZWN0IG1pbWlja2luZyB0aGUgb3JpZ2luYWwgb2JqZWN0LCBidXQgd2l0aFxuICogZXZlcnkgYWN0aW9uIGNyZWF0b3Igd3JhcHBlZCBpbnRvIHRoZSBgZGlzcGF0Y2hgIGNhbGwuIElmIHlvdSBwYXNzZWQgYVxuICogZnVuY3Rpb24gYXMgYGFjdGlvbkNyZWF0b3JzYCwgdGhlIHJldHVybiB2YWx1ZSB3aWxsIGFsc28gYmUgYSBzaW5nbGVcbiAqIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiaW5kQWN0aW9uQ3JlYXRvcnMoYWN0aW9uQ3JlYXRvcnMsIGRpc3BhdGNoKSB7XG4gIGlmICh0eXBlb2YgYWN0aW9uQ3JlYXRvcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gYmluZEFjdGlvbkNyZWF0b3IoYWN0aW9uQ3JlYXRvcnMsIGRpc3BhdGNoKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgYWN0aW9uQ3JlYXRvcnMgIT09ICdvYmplY3QnIHx8IGFjdGlvbkNyZWF0b3JzID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdiaW5kQWN0aW9uQ3JlYXRvcnMgZXhwZWN0ZWQgYW4gb2JqZWN0IG9yIGEgZnVuY3Rpb24sIGluc3RlYWQgcmVjZWl2ZWQgJyArIChhY3Rpb25DcmVhdG9ycyA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBhY3Rpb25DcmVhdG9ycykgKyAnLiAnICsgJ0RpZCB5b3Ugd3JpdGUgXCJpbXBvcnQgQWN0aW9uQ3JlYXRvcnMgZnJvbVwiIGluc3RlYWQgb2YgXCJpbXBvcnQgKiBhcyBBY3Rpb25DcmVhdG9ycyBmcm9tXCI/Jyk7XG4gIH1cblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFjdGlvbkNyZWF0b3JzKTtcbiAgdmFyIGJvdW5kQWN0aW9uQ3JlYXRvcnMgPSB7fTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgdmFyIGFjdGlvbkNyZWF0b3IgPSBhY3Rpb25DcmVhdG9yc1trZXldO1xuICAgIGlmICh0eXBlb2YgYWN0aW9uQ3JlYXRvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgYm91bmRBY3Rpb25DcmVhdG9yc1trZXldID0gYmluZEFjdGlvbkNyZWF0b3IoYWN0aW9uQ3JlYXRvciwgZGlzcGF0Y2gpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYm91bmRBY3Rpb25DcmVhdG9ycztcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWR1eC9saWIvYmluZEFjdGlvbkNyZWF0b3JzLmpzXG4gKiogbW9kdWxlIGlkID0gMTA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gYXBwbHlNaWRkbGV3YXJlO1xuXG52YXIgX2NvbXBvc2UgPSByZXF1aXJlKCcuL2NvbXBvc2UnKTtcblxudmFyIF9jb21wb3NlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbXBvc2UpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBcImRlZmF1bHRcIjogb2JqIH07IH1cblxuLyoqXG4gKiBDcmVhdGVzIGEgc3RvcmUgZW5oYW5jZXIgdGhhdCBhcHBsaWVzIG1pZGRsZXdhcmUgdG8gdGhlIGRpc3BhdGNoIG1ldGhvZFxuICogb2YgdGhlIFJlZHV4IHN0b3JlLiBUaGlzIGlzIGhhbmR5IGZvciBhIHZhcmlldHkgb2YgdGFza3MsIHN1Y2ggYXMgZXhwcmVzc2luZ1xuICogYXN5bmNocm9ub3VzIGFjdGlvbnMgaW4gYSBjb25jaXNlIG1hbm5lciwgb3IgbG9nZ2luZyBldmVyeSBhY3Rpb24gcGF5bG9hZC5cbiAqXG4gKiBTZWUgYHJlZHV4LXRodW5rYCBwYWNrYWdlIGFzIGFuIGV4YW1wbGUgb2YgdGhlIFJlZHV4IG1pZGRsZXdhcmUuXG4gKlxuICogQmVjYXVzZSBtaWRkbGV3YXJlIGlzIHBvdGVudGlhbGx5IGFzeW5jaHJvbm91cywgdGhpcyBzaG91bGQgYmUgdGhlIGZpcnN0XG4gKiBzdG9yZSBlbmhhbmNlciBpbiB0aGUgY29tcG9zaXRpb24gY2hhaW4uXG4gKlxuICogTm90ZSB0aGF0IGVhY2ggbWlkZGxld2FyZSB3aWxsIGJlIGdpdmVuIHRoZSBgZGlzcGF0Y2hgIGFuZCBgZ2V0U3RhdGVgIGZ1bmN0aW9uc1xuICogYXMgbmFtZWQgYXJndW1lbnRzLlxuICpcbiAqIEBwYXJhbSB7Li4uRnVuY3Rpb259IG1pZGRsZXdhcmVzIFRoZSBtaWRkbGV3YXJlIGNoYWluIHRvIGJlIGFwcGxpZWQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgc3RvcmUgZW5oYW5jZXIgYXBwbHlpbmcgdGhlIG1pZGRsZXdhcmUuXG4gKi9cbmZ1bmN0aW9uIGFwcGx5TWlkZGxld2FyZSgpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG1pZGRsZXdhcmVzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgbWlkZGxld2FyZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKGNyZWF0ZVN0b3JlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyZWR1Y2VyLCBpbml0aWFsU3RhdGUsIGVuaGFuY2VyKSB7XG4gICAgICB2YXIgc3RvcmUgPSBjcmVhdGVTdG9yZShyZWR1Y2VyLCBpbml0aWFsU3RhdGUsIGVuaGFuY2VyKTtcbiAgICAgIHZhciBfZGlzcGF0Y2ggPSBzdG9yZS5kaXNwYXRjaDtcbiAgICAgIHZhciBjaGFpbiA9IFtdO1xuXG4gICAgICB2YXIgbWlkZGxld2FyZUFQSSA9IHtcbiAgICAgICAgZ2V0U3RhdGU6IHN0b3JlLmdldFN0YXRlLFxuICAgICAgICBkaXNwYXRjaDogZnVuY3Rpb24gZGlzcGF0Y2goYWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIF9kaXNwYXRjaChhY3Rpb24pO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgY2hhaW4gPSBtaWRkbGV3YXJlcy5tYXAoZnVuY3Rpb24gKG1pZGRsZXdhcmUpIHtcbiAgICAgICAgcmV0dXJuIG1pZGRsZXdhcmUobWlkZGxld2FyZUFQSSk7XG4gICAgICB9KTtcbiAgICAgIF9kaXNwYXRjaCA9IF9jb21wb3NlMltcImRlZmF1bHRcIl0uYXBwbHkodW5kZWZpbmVkLCBjaGFpbikoc3RvcmUuZGlzcGF0Y2gpO1xuXG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIHN0b3JlLCB7XG4gICAgICAgIGRpc3BhdGNoOiBfZGlzcGF0Y2hcbiAgICAgIH0pO1xuICAgIH07XG4gIH07XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVkdXgvbGliL2FwcGx5TWlkZGxld2FyZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEwNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IGNvbXBvc2U7XG4vKipcbiAqIENvbXBvc2VzIHNpbmdsZS1hcmd1bWVudCBmdW5jdGlvbnMgZnJvbSByaWdodCB0byBsZWZ0LiBUaGUgcmlnaHRtb3N0XG4gKiBmdW5jdGlvbiBjYW4gdGFrZSBtdWx0aXBsZSBhcmd1bWVudHMgYXMgaXQgcHJvdmlkZXMgdGhlIHNpZ25hdHVyZSBmb3JcbiAqIHRoZSByZXN1bHRpbmcgY29tcG9zaXRlIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7Li4uRnVuY3Rpb259IGZ1bmNzIFRoZSBmdW5jdGlvbnMgdG8gY29tcG9zZS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiBvYnRhaW5lZCBieSBjb21wb3NpbmcgdGhlIGFyZ3VtZW50IGZ1bmN0aW9uc1xuICogZnJvbSByaWdodCB0byBsZWZ0LiBGb3IgZXhhbXBsZSwgY29tcG9zZShmLCBnLCBoKSBpcyBpZGVudGljYWwgdG8gZG9pbmdcbiAqICguLi5hcmdzKSA9PiBmKGcoaCguLi5hcmdzKSkpLlxuICovXG5cbmZ1bmN0aW9uIGNvbXBvc2UoKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBmdW5jcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGZ1bmNzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgaWYgKGZ1bmNzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICByZXR1cm4gYXJnO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbGFzdCA9IGZ1bmNzW2Z1bmNzLmxlbmd0aCAtIDFdO1xuICAgICAgdmFyIHJlc3QgPSBmdW5jcy5zbGljZSgwLCAtMSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2OiBmdW5jdGlvbiB2KCkge1xuICAgICAgICAgIHJldHVybiByZXN0LnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChjb21wb3NlZCwgZikge1xuICAgICAgICAgICAgcmV0dXJuIGYoY29tcG9zZWQpO1xuICAgICAgICAgIH0sIGxhc3QuYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KCk7XG5cbiAgICBpZiAodHlwZW9mIF9yZXQgPT09IFwib2JqZWN0XCIpIHJldHVybiBfcmV0LnY7XG4gIH1cbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWR1eC9saWIvY29tcG9zZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEwNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gUmVkdXggdXRpbGl0eSBmdW5jdGlvbnNcbmltcG9ydCB7IGNvbWJpbmVSZWR1Y2VycyB9IGZyb20gJ3JlZHV4Jztcbi8vIHJlZHV4LXVuZG8gaGlnaGVyLW9yZGVyIHJlZHVjZXJcbmltcG9ydCB1bmRvYWJsZSBmcm9tICdyZWR1eC11bmRvJztcblxuaW1wb3J0IHJlc2l6ZVJlZHVjZXIgICAgZnJvbSAnLi9yZXNpemUtcmVkdWNlcic7XG5pbXBvcnQgcG9pbnRzUmVkdWNlciAgICBmcm9tICcuL3BvaW50cy1yZWR1Y2VyJztcbmltcG9ydCBwb2ludENvbnRyb2xzUmVkdWNlciAgZnJvbSAnLi9wb2ludC1jb250cm9scy1yZWR1Y2VyJztcblxuY29uc3QgVU5ET0FCTEVfT1BUUyA9IHtcbiAgbGltaXQ6IDEwLFxuICBmaWx0ZXI6IGZ1bmN0aW9uIGZpbHRlckFjdGlvbnMoYWN0aW9uLCBjdXJyU3RhdGUsIGhpc3RvcnkpIHtcbiAgICByZXR1cm4gYWN0aW9uLmlzUmVjb3JkOyAvLyBvbmx5IGFkZCB0byBoaXN0b3J5IGlmIGlzUmVjb3JkIHNldCBvbiBhY3Rpb25cbiAgfSxcbiAgZGVidWc6IGZhbHNlXG59O1xuXG5jb25zdCByZWR1Y2VyID0gY29tYmluZVJlZHVjZXJzKHtcbiAgcG9pbnRDb250cm9sczogdW5kb2FibGUocG9pbnRDb250cm9sc1JlZHVjZXIsIHsgLi4uVU5ET0FCTEVfT1BUUyB9KSxcbiAgcmVzaXplOiAgICAgICAgcmVzaXplUmVkdWNlcixcbiAgcG9pbnRzOiAgICAgICAgdW5kb2FibGUocG9pbnRzUmVkdWNlciwgeyAuLi5VTkRPQUJMRV9PUFRTIH0pXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgcmVkdWNlcjtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9qcy9yZWR1Y2Vycy9pbmRleC1yZWR1Y2VyLmJhYmVsLmpzXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfYXNzaWduID0gcmVxdWlyZShcIi4uL2NvcmUtanMvb2JqZWN0L2Fzc2lnblwiKTtcblxudmFyIF9hc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXNzaWduKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZXhwb3J0cy5kZWZhdWx0ID0gX2Fzc2lnbjIuZGVmYXVsdCB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcblxuICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9oZWxwZXJzL2V4dGVuZHMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvYXNzaWduXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9hc3NpZ24uanNcbiAqKiBtb2R1bGUgaWQgPSAxMDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5hc3NpZ24nKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9fY29yZScpLk9iamVjdC5hc3NpZ247XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9hc3NpZ24uanNcbiAqKiBtb2R1bGUgaWQgPSAxMTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIDE5LjEuMy4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UpXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiwgJ09iamVjdCcsIHthc3NpZ246IHJlcXVpcmUoJy4vX29iamVjdC1hc3NpZ24nKX0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5vYmplY3QuYXNzaWduLmpzXG4gKiogbW9kdWxlIGlkID0gMTExXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG4vLyAxOS4xLjIuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlLCAuLi4pXG52YXIgZ2V0S2V5cyAgPSByZXF1aXJlKCcuL19vYmplY3Qta2V5cycpXG4gICwgZ09QUyAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wcycpXG4gICwgcElFICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtcGllJylcbiAgLCB0b09iamVjdCA9IHJlcXVpcmUoJy4vX3RvLW9iamVjdCcpXG4gICwgSU9iamVjdCAgPSByZXF1aXJlKCcuL19pb2JqZWN0JylcbiAgLCAkYXNzaWduICA9IE9iamVjdC5hc3NpZ247XG5cbi8vIHNob3VsZCB3b3JrIHdpdGggc3ltYm9scyBhbmQgc2hvdWxkIGhhdmUgZGV0ZXJtaW5pc3RpYyBwcm9wZXJ0eSBvcmRlciAoVjggYnVnKVxubW9kdWxlLmV4cG9ydHMgPSAhJGFzc2lnbiB8fCByZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uKCl7XG4gIHZhciBBID0ge31cbiAgICAsIEIgPSB7fVxuICAgICwgUyA9IFN5bWJvbCgpXG4gICAgLCBLID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0JztcbiAgQVtTXSA9IDc7XG4gIEsuc3BsaXQoJycpLmZvckVhY2goZnVuY3Rpb24oayl7IEJba10gPSBrOyB9KTtcbiAgcmV0dXJuICRhc3NpZ24oe30sIEEpW1NdICE9IDcgfHwgT2JqZWN0LmtleXMoJGFzc2lnbih7fSwgQikpLmpvaW4oJycpICE9IEs7XG59KSA/IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQsIHNvdXJjZSl7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgdmFyIFQgICAgID0gdG9PYmplY3QodGFyZ2V0KVxuICAgICwgYUxlbiAgPSBhcmd1bWVudHMubGVuZ3RoXG4gICAgLCBpbmRleCA9IDFcbiAgICAsIGdldFN5bWJvbHMgPSBnT1BTLmZcbiAgICAsIGlzRW51bSAgICAgPSBwSUUuZjtcbiAgd2hpbGUoYUxlbiA+IGluZGV4KXtcbiAgICB2YXIgUyAgICAgID0gSU9iamVjdChhcmd1bWVudHNbaW5kZXgrK10pXG4gICAgICAsIGtleXMgICA9IGdldFN5bWJvbHMgPyBnZXRLZXlzKFMpLmNvbmNhdChnZXRTeW1ib2xzKFMpKSA6IGdldEtleXMoUylcbiAgICAgICwgbGVuZ3RoID0ga2V5cy5sZW5ndGhcbiAgICAgICwgaiAgICAgID0gMFxuICAgICAgLCBrZXk7XG4gICAgd2hpbGUobGVuZ3RoID4gailpZihpc0VudW0uY2FsbChTLCBrZXkgPSBrZXlzW2orK10pKVRba2V5XSA9IFNba2V5XTtcbiAgfSByZXR1cm4gVDtcbn0gOiAkYXNzaWduO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19vYmplY3QtYXNzaWduLmpzXG4gKiogbW9kdWxlIGlkID0gMTEyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmV4cG9ydHMucGFyc2VBY3Rpb25zID0gcGFyc2VBY3Rpb25zO1xuZXhwb3J0cy5kZWZhdWx0ID0gdW5kb2FibGU7XG5leHBvcnRzLmRpc3RpbmN0U3RhdGUgPSBkaXN0aW5jdFN0YXRlO1xuZXhwb3J0cy5pbmNsdWRlQWN0aW9uID0gaW5jbHVkZUFjdGlvbjtcbmV4cG9ydHMuaWZBY3Rpb24gPSBpZkFjdGlvbjtcbmV4cG9ydHMuZXhjbHVkZUFjdGlvbiA9IGV4Y2x1ZGVBY3Rpb247XG5cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gZWxzZSB7IHJldHVybiBBcnJheS5mcm9tKGFycik7IH0gfVxuXG4vLyBkZWJ1ZyBvdXRwdXRcbnZhciBfX0RFQlVHX18gPSB1bmRlZmluZWQ7XG5mdW5jdGlvbiBkZWJ1ZygpIHtcbiAgaWYgKF9fREVCVUdfXykge1xuICAgIHZhciBfY29uc29sZTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIGlmICghY29uc29sZS5ncm91cCkge1xuICAgICAgYXJncy51bnNoaWZ0KCclY3JlZHV4LXVuZG8nLCAnZm9udC1zdHlsZTogaXRhbGljJyk7XG4gICAgfVxuICAgIChfY29uc29sZSA9IGNvbnNvbGUpLmxvZy5hcHBseShfY29uc29sZSwgYXJncyk7XG4gIH1cbn1cbmZ1bmN0aW9uIGRlYnVnU3RhcnQoYWN0aW9uLCBzdGF0ZSkge1xuICBpZiAoX19ERUJVR19fKSB7XG4gICAgdmFyIGFyZ3MgPSBbJ2FjdGlvbicsIGFjdGlvbi50eXBlXTtcbiAgICBpZiAoY29uc29sZS5ncm91cCkge1xuICAgICAgdmFyIF9jb25zb2xlMjtcblxuICAgICAgYXJncy51bnNoaWZ0KCclY3JlZHV4LXVuZG8nLCAnZm9udC1zdHlsZTogaXRhbGljJyk7XG4gICAgICAoX2NvbnNvbGUyID0gY29uc29sZSkuZ3JvdXBDb2xsYXBzZWQuYXBwbHkoX2NvbnNvbGUyLCBhcmdzKTtcbiAgICAgIGNvbnNvbGUubG9nKCdyZWNlaXZlZCcsIHsgc3RhdGU6IHN0YXRlLCBhY3Rpb246IGFjdGlvbiB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWcuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGRlYnVnRW5kKCkge1xuICBpZiAoX19ERUJVR19fKSB7XG4gICAgcmV0dXJuIGNvbnNvbGUuZ3JvdXBFbmQgJiYgY29uc29sZS5ncm91cEVuZCgpO1xuICB9XG59XG4vLyAvZGVidWcgb3V0cHV0XG5cbi8vIGFjdGlvbiB0eXBlc1xudmFyIEFjdGlvblR5cGVzID0gZXhwb3J0cy5BY3Rpb25UeXBlcyA9IHtcbiAgVU5ETzogJ0BAcmVkdXgtdW5kby9VTkRPJyxcbiAgUkVETzogJ0BAcmVkdXgtdW5kby9SRURPJyxcbiAgSlVNUF9UT19GVVRVUkU6ICdAQHJlZHV4LXVuZG8vSlVNUF9UT19GVVRVUkUnLFxuICBKVU1QX1RPX1BBU1Q6ICdAQHJlZHV4LXVuZG8vSlVNUF9UT19QQVNUJ1xufTtcbi8vIC9hY3Rpb24gdHlwZXNcblxuLy8gYWN0aW9uIGNyZWF0b3JzIHRvIGNoYW5nZSB0aGUgc3RhdGVcbnZhciBBY3Rpb25DcmVhdG9ycyA9IGV4cG9ydHMuQWN0aW9uQ3JlYXRvcnMgPSB7XG4gIHVuZG86IGZ1bmN0aW9uIHVuZG8oKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogQWN0aW9uVHlwZXMuVU5ETyB9O1xuICB9LFxuICByZWRvOiBmdW5jdGlvbiByZWRvKCkge1xuICAgIHJldHVybiB7IHR5cGU6IEFjdGlvblR5cGVzLlJFRE8gfTtcbiAgfSxcbiAganVtcFRvRnV0dXJlOiBmdW5jdGlvbiBqdW1wVG9GdXR1cmUoaW5kZXgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBBY3Rpb25UeXBlcy5KVU1QX1RPX0ZVVFVSRSwgaW5kZXg6IGluZGV4IH07XG4gIH0sXG4gIGp1bXBUb1Bhc3Q6IGZ1bmN0aW9uIGp1bXBUb1Bhc3QoaW5kZXgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBBY3Rpb25UeXBlcy5KVU1QX1RPX1BBU1QsIGluZGV4OiBpbmRleCB9O1xuICB9XG59O1xuLy8gL2FjdGlvbiBjcmVhdG9yc1xuXG4vLyBsZW5ndGg6IGdldCBsZW5ndGggb2YgaGlzdG9yeVxuZnVuY3Rpb24gbGVuZ3RoKGhpc3RvcnkpIHtcbiAgdmFyIHBhc3QgPSBoaXN0b3J5LnBhc3Q7XG4gIHZhciBmdXR1cmUgPSBoaXN0b3J5LmZ1dHVyZTtcblxuICByZXR1cm4gcGFzdC5sZW5ndGggKyAxICsgZnV0dXJlLmxlbmd0aDtcbn1cbi8vIC9sZW5ndGhcblxuLy8gaW5zZXJ0OiBpbnNlcnQgYHN0YXRlYCBpbnRvIGhpc3RvcnksIHdoaWNoIG1lYW5zIGFkZGluZyB0aGUgY3VycmVudCBzdGF0ZVxuLy8gICAgICAgICBpbnRvIGBwYXN0YCwgc2V0dGluZyB0aGUgbmV3IGBzdGF0ZWAgYXMgYHByZXNlbnRgIGFuZCBlcmFzaW5nXG4vLyAgICAgICAgIHRoZSBgZnV0dXJlYC5cbmZ1bmN0aW9uIGluc2VydChoaXN0b3J5LCBzdGF0ZSwgbGltaXQpIHtcbiAgZGVidWcoJ2luc2VydCcsIHsgc3RhdGU6IHN0YXRlLCBoaXN0b3J5OiBoaXN0b3J5LCBmcmVlOiBsaW1pdCAtIGxlbmd0aChoaXN0b3J5KSB9KTtcblxuICB2YXIgcGFzdCA9IGhpc3RvcnkucGFzdDtcbiAgdmFyIHByZXNlbnQgPSBoaXN0b3J5LnByZXNlbnQ7XG5cbiAgdmFyIGhpc3RvcnlPdmVyZmxvdyA9IGxpbWl0ICYmIGxlbmd0aChoaXN0b3J5KSA+PSBsaW1pdDtcblxuICBpZiAocHJlc2VudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gaW5pdCBoaXN0b3J5XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhc3Q6IFtdLFxuICAgICAgcHJlc2VudDogc3RhdGUsXG4gICAgICBmdXR1cmU6IFtdXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcGFzdDogW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShwYXN0LnNsaWNlKGhpc3RvcnlPdmVyZmxvdyA/IDEgOiAwKSksIFtwcmVzZW50XSksXG4gICAgcHJlc2VudDogc3RhdGUsXG4gICAgZnV0dXJlOiBbXVxuICB9O1xufVxuLy8gL2luc2VydFxuXG4vLyB1bmRvOiBnbyBiYWNrIHRvIHRoZSBwcmV2aW91cyBwb2ludCBpbiBoaXN0b3J5XG5mdW5jdGlvbiB1bmRvKGhpc3RvcnkpIHtcbiAgZGVidWcoJ3VuZG8nLCB7IGhpc3Rvcnk6IGhpc3RvcnkgfSk7XG5cbiAgdmFyIHBhc3QgPSBoaXN0b3J5LnBhc3Q7XG4gIHZhciBwcmVzZW50ID0gaGlzdG9yeS5wcmVzZW50O1xuICB2YXIgZnV0dXJlID0gaGlzdG9yeS5mdXR1cmU7XG5cblxuICBpZiAocGFzdC5sZW5ndGggPD0gMCkgcmV0dXJuIGhpc3Rvcnk7XG5cbiAgcmV0dXJuIHtcbiAgICBwYXN0OiBwYXN0LnNsaWNlKDAsIHBhc3QubGVuZ3RoIC0gMSksIC8vIHJlbW92ZSBsYXN0IGVsZW1lbnQgZnJvbSBwYXN0XG4gICAgcHJlc2VudDogcGFzdFtwYXN0Lmxlbmd0aCAtIDFdLCAvLyBzZXQgZWxlbWVudCBhcyBuZXcgcHJlc2VudFxuICAgIGZ1dHVyZTogW3ByZXNlbnRdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZnV0dXJlKSlcbiAgfTtcbn1cbi8vIC91bmRvXG5cbi8vIHJlZG86IGdvIHRvIHRoZSBuZXh0IHBvaW50IGluIGhpc3RvcnlcbmZ1bmN0aW9uIHJlZG8oaGlzdG9yeSkge1xuICBkZWJ1ZygncmVkbycsIHsgaGlzdG9yeTogaGlzdG9yeSB9KTtcblxuICB2YXIgcGFzdCA9IGhpc3RvcnkucGFzdDtcbiAgdmFyIHByZXNlbnQgPSBoaXN0b3J5LnByZXNlbnQ7XG4gIHZhciBmdXR1cmUgPSBoaXN0b3J5LmZ1dHVyZTtcblxuXG4gIGlmIChmdXR1cmUubGVuZ3RoIDw9IDApIHJldHVybiBoaXN0b3J5O1xuXG4gIHJldHVybiB7XG4gICAgZnV0dXJlOiBmdXR1cmUuc2xpY2UoMSwgZnV0dXJlLmxlbmd0aCksIC8vIHJlbW92ZSBlbGVtZW50IGZyb20gZnV0dXJlXG4gICAgcHJlc2VudDogZnV0dXJlWzBdLCAvLyBzZXQgZWxlbWVudCBhcyBuZXcgcHJlc2VudFxuICAgIHBhc3Q6IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocGFzdCksIFtwcmVzZW50IC8vIG9sZCBwcmVzZW50IHN0YXRlIGlzIGluIHRoZSBwYXN0IG5vd1xuICAgIF0pXG4gIH07XG59XG4vLyAvcmVkb1xuXG4vLyBqdW1wVG9GdXR1cmU6IGp1bXAgdG8gcmVxdWVzdGVkIGluZGV4IGluIGZ1dHVyZSBoaXN0b3J5XG5mdW5jdGlvbiBqdW1wVG9GdXR1cmUoaGlzdG9yeSwgaW5kZXgpIHtcbiAgaWYgKGluZGV4ID09PSAwKSByZXR1cm4gcmVkbyhoaXN0b3J5KTtcblxuICB2YXIgcGFzdCA9IGhpc3RvcnkucGFzdDtcbiAgdmFyIHByZXNlbnQgPSBoaXN0b3J5LnByZXNlbnQ7XG4gIHZhciBmdXR1cmUgPSBoaXN0b3J5LmZ1dHVyZTtcblxuXG4gIHJldHVybiB7XG4gICAgZnV0dXJlOiBmdXR1cmUuc2xpY2UoaW5kZXggKyAxKSxcbiAgICBwcmVzZW50OiBmdXR1cmVbaW5kZXhdLFxuICAgIHBhc3Q6IHBhc3QuY29uY2F0KFtwcmVzZW50XSkuY29uY2F0KGZ1dHVyZS5zbGljZSgwLCBpbmRleCkpXG4gIH07XG59XG4vLyAvanVtcFRvRnV0dXJlXG5cbi8vIGp1bXBUb1Bhc3Q6IGp1bXAgdG8gcmVxdWVzdGVkIGluZGV4IGluIHBhc3QgaGlzdG9yeVxuZnVuY3Rpb24ganVtcFRvUGFzdChoaXN0b3J5LCBpbmRleCkge1xuICBpZiAoaW5kZXggPT09IGhpc3RvcnkucGFzdC5sZW5ndGggLSAxKSByZXR1cm4gdW5kbyhoaXN0b3J5KTtcblxuICB2YXIgcGFzdCA9IGhpc3RvcnkucGFzdDtcbiAgdmFyIHByZXNlbnQgPSBoaXN0b3J5LnByZXNlbnQ7XG4gIHZhciBmdXR1cmUgPSBoaXN0b3J5LmZ1dHVyZTtcblxuXG4gIHJldHVybiB7XG4gICAgZnV0dXJlOiBwYXN0LnNsaWNlKGluZGV4ICsgMSkuY29uY2F0KFtwcmVzZW50XSkuY29uY2F0KGZ1dHVyZSksXG4gICAgcHJlc2VudDogcGFzdFtpbmRleF0sXG4gICAgcGFzdDogcGFzdC5zbGljZSgwLCBpbmRleClcbiAgfTtcbn1cbi8vIC9qdW1wVG9QYXN0XG5cbi8vIHdyYXBTdGF0ZTogZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHRvIDAuNFxuZnVuY3Rpb24gd3JhcFN0YXRlKHN0YXRlKSB7XG4gIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUsIHtcbiAgICBoaXN0b3J5OiBzdGF0ZVxuICB9KTtcbn1cbi8vIC93cmFwU3RhdGVcblxuLy8gdXBkYXRlU3RhdGVcbmZ1bmN0aW9uIHVwZGF0ZVN0YXRlKHN0YXRlLCBoaXN0b3J5KSB7XG4gIHJldHVybiB3cmFwU3RhdGUoX2V4dGVuZHMoe30sIHN0YXRlLCBoaXN0b3J5KSk7XG59XG4vLyAvdXBkYXRlU3RhdGVcblxuLy8gY3JlYXRlSGlzdG9yeVxuZnVuY3Rpb24gY3JlYXRlSGlzdG9yeShzdGF0ZSkge1xuICByZXR1cm4ge1xuICAgIHBhc3Q6IFtdLFxuICAgIHByZXNlbnQ6IHN0YXRlLFxuICAgIGZ1dHVyZTogW11cbiAgfTtcbn1cbi8vIC9jcmVhdGVIaXN0b3J5XG5cbi8vIHBhcnNlQWN0aW9uc1xuZnVuY3Rpb24gcGFyc2VBY3Rpb25zKHJhd0FjdGlvbnMpIHtcbiAgdmFyIGRlZmF1bHRWYWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IFtdIDogYXJndW1lbnRzWzFdO1xuXG4gIGlmIChBcnJheS5pc0FycmF5KHJhd0FjdGlvbnMpKSB7XG4gICAgcmV0dXJuIHJhd0FjdGlvbnM7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHJhd0FjdGlvbnMgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIFtyYXdBY3Rpb25zXTtcbiAgfVxuICByZXR1cm4gZGVmYXVsdFZhbHVlO1xufVxuLy8gL3BhcnNlQWN0aW9uc1xuXG4vLyByZWR1eC11bmRvIGhpZ2hlciBvcmRlciByZWR1Y2VyXG5mdW5jdGlvbiB1bmRvYWJsZShyZWR1Y2VyKSB7XG4gIHZhciByYXdDb25maWcgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1sxXTtcblxuICBfX0RFQlVHX18gPSByYXdDb25maWcuZGVidWc7XG5cbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBpbml0aWFsU3RhdGU6IHJhd0NvbmZpZy5pbml0aWFsU3RhdGUsXG4gICAgaW5pdFR5cGVzOiBwYXJzZUFjdGlvbnMocmF3Q29uZmlnLmluaXRUeXBlcywgWydAQHJlZHV4L0lOSVQnLCAnQEBJTklUJ10pLFxuICAgIGxpbWl0OiByYXdDb25maWcubGltaXQsXG4gICAgZmlsdGVyOiByYXdDb25maWcuZmlsdGVyIHx8IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgdW5kb1R5cGU6IHJhd0NvbmZpZy51bmRvVHlwZSB8fCBBY3Rpb25UeXBlcy5VTkRPLFxuICAgIHJlZG9UeXBlOiByYXdDb25maWcucmVkb1R5cGUgfHwgQWN0aW9uVHlwZXMuUkVETyxcbiAgICBqdW1wVG9QYXN0VHlwZTogcmF3Q29uZmlnLmp1bXBUb1Bhc3RUeXBlIHx8IEFjdGlvblR5cGVzLkpVTVBfVE9fUEFTVCxcbiAgICBqdW1wVG9GdXR1cmVUeXBlOiByYXdDb25maWcuanVtcFRvRnV0dXJlVHlwZSB8fCBBY3Rpb25UeXBlcy5KVU1QX1RPX0ZVVFVSRVxuICB9O1xuICBjb25maWcuaGlzdG9yeSA9IHJhd0NvbmZpZy5pbml0aWFsSGlzdG9yeSB8fCBjcmVhdGVIaXN0b3J5KGNvbmZpZy5pbml0aWFsU3RhdGUpO1xuXG4gIGlmIChjb25maWcuaW5pdFR5cGVzLmxlbmd0aCA9PT0gMCkge1xuICAgIGNvbnNvbGUud2FybigncmVkdXgtdW5kbzogc3VwcGx5IGF0IGxlYXN0IG9uZSBhY3Rpb24gdHlwZSBpbiBpbml0VHlwZXMgdG8gZW5zdXJlIGluaXRpYWwgc3RhdGUnKTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgIGRlYnVnU3RhcnQoYWN0aW9uLCBzdGF0ZSk7XG4gICAgdmFyIHJlcyA9IHVuZGVmaW5lZDtcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICBjYXNlIGNvbmZpZy51bmRvVHlwZTpcbiAgICAgICAgcmVzID0gdW5kbyhzdGF0ZSk7XG4gICAgICAgIGRlYnVnKCdhZnRlciB1bmRvJywgcmVzKTtcbiAgICAgICAgZGVidWdFbmQoKTtcbiAgICAgICAgcmV0dXJuIHJlcyA/IHVwZGF0ZVN0YXRlKHN0YXRlLCByZXMpIDogc3RhdGU7XG5cbiAgICAgIGNhc2UgY29uZmlnLnJlZG9UeXBlOlxuICAgICAgICByZXMgPSByZWRvKHN0YXRlKTtcbiAgICAgICAgZGVidWcoJ2FmdGVyIHJlZG8nLCByZXMpO1xuICAgICAgICBkZWJ1Z0VuZCgpO1xuICAgICAgICByZXR1cm4gcmVzID8gdXBkYXRlU3RhdGUoc3RhdGUsIHJlcykgOiBzdGF0ZTtcblxuICAgICAgY2FzZSBjb25maWcuanVtcFRvUGFzdFR5cGU6XG4gICAgICAgIHJlcyA9IGp1bXBUb1Bhc3Qoc3RhdGUsIGFjdGlvbi5pbmRleCk7XG4gICAgICAgIGRlYnVnKCdhZnRlciBqdW1wVG9QYXN0JywgcmVzKTtcbiAgICAgICAgZGVidWdFbmQoKTtcbiAgICAgICAgcmV0dXJuIHJlcyA/IHVwZGF0ZVN0YXRlKHN0YXRlLCByZXMpIDogc3RhdGU7XG5cbiAgICAgIGNhc2UgY29uZmlnLmp1bXBUb0Z1dHVyZVR5cGU6XG4gICAgICAgIHJlcyA9IGp1bXBUb0Z1dHVyZShzdGF0ZSwgYWN0aW9uLmluZGV4KTtcbiAgICAgICAgZGVidWcoJ2FmdGVyIGp1bXBUb0Z1dHVyZScsIHJlcyk7XG4gICAgICAgIGRlYnVnRW5kKCk7XG4gICAgICAgIHJldHVybiByZXMgPyB1cGRhdGVTdGF0ZShzdGF0ZSwgcmVzKSA6IHN0YXRlO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXMgPSByZWR1Y2VyKHN0YXRlICYmIHN0YXRlLnByZXNlbnQsIGFjdGlvbik7XG5cbiAgICAgICAgaWYgKGNvbmZpZy5pbml0VHlwZXMuc29tZShmdW5jdGlvbiAoYWN0aW9uVHlwZSkge1xuICAgICAgICAgIHJldHVybiBhY3Rpb25UeXBlID09PSBhY3Rpb24udHlwZTtcbiAgICAgICAgfSkpIHtcbiAgICAgICAgICBkZWJ1ZygncmVzZXQgaGlzdG9yeSBkdWUgdG8gaW5pdCBhY3Rpb24nKTtcbiAgICAgICAgICBkZWJ1Z0VuZCgpO1xuICAgICAgICAgIHJldHVybiB3cmFwU3RhdGUoX2V4dGVuZHMoe30sIHN0YXRlLCBjcmVhdGVIaXN0b3J5KHJlcykpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb25maWcuZmlsdGVyICYmIHR5cGVvZiBjb25maWcuZmlsdGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgaWYgKCFjb25maWcuZmlsdGVyKGFjdGlvbiwgcmVzLCBzdGF0ZSAmJiBzdGF0ZS5wcmVzZW50KSkge1xuICAgICAgICAgICAgZGVidWcoJ2ZpbHRlciBwcmV2ZW50ZWQgYWN0aW9uLCBub3Qgc3RvcmluZyBpdCcpO1xuICAgICAgICAgICAgZGVidWdFbmQoKTtcbiAgICAgICAgICAgIHJldHVybiB3cmFwU3RhdGUoX2V4dGVuZHMoe30sIHN0YXRlLCB7XG4gICAgICAgICAgICAgIHByZXNlbnQ6IHJlc1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoaXN0b3J5ID0gc3RhdGUgJiYgc3RhdGUucHJlc2VudCAhPT0gdW5kZWZpbmVkID8gc3RhdGUgOiBjb25maWcuaGlzdG9yeTtcbiAgICAgICAgdmFyIHVwZGF0ZWRIaXN0b3J5ID0gaW5zZXJ0KGhpc3RvcnksIHJlcywgY29uZmlnLmxpbWl0KTtcbiAgICAgICAgZGVidWcoJ2FmdGVyIGluc2VydCcsIHsgaGlzdG9yeTogdXBkYXRlZEhpc3RvcnksIGZyZWU6IGNvbmZpZy5saW1pdCAtIGxlbmd0aCh1cGRhdGVkSGlzdG9yeSkgfSk7XG4gICAgICAgIGRlYnVnRW5kKCk7XG5cbiAgICAgICAgcmV0dXJuIHdyYXBTdGF0ZShfZXh0ZW5kcyh7fSwgc3RhdGUsIHVwZGF0ZWRIaXN0b3J5KSk7XG4gICAgfVxuICB9O1xufVxuLy8gL3JlZHV4LXVuZG9cblxuLy8gZGlzdGluY3RTdGF0ZSBoZWxwZXJcbmZ1bmN0aW9uIGRpc3RpbmN0U3RhdGUoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uLCBjdXJyZW50U3RhdGUsIHByZXZpb3VzU3RhdGUpIHtcbiAgICByZXR1cm4gY3VycmVudFN0YXRlICE9PSBwcmV2aW91c1N0YXRlO1xuICB9O1xufVxuLy8gL2Rpc3RpbmN0U3RhdGVcblxuLy8gaW5jbHVkZUFjdGlvbiBoZWxwZXJcbmZ1bmN0aW9uIGluY2x1ZGVBY3Rpb24ocmF3QWN0aW9ucykge1xuICB2YXIgYWN0aW9ucyA9IHBhcnNlQWN0aW9ucyhyYXdBY3Rpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICByZXR1cm4gYWN0aW9ucy5pbmRleE9mKGFjdGlvbi50eXBlKSA+PSAwO1xuICB9O1xufVxuLy8gL2luY2x1ZGVBY3Rpb25cblxuLy8gZGVwcmVjYXRlZCBpZkFjdGlvbiBoZWxwZXJcbmZ1bmN0aW9uIGlmQWN0aW9uKHJhd0FjdGlvbnMpIHtcbiAgY29uc29sZS5lcnJvcignRGVwcmVjYXRpb24gV2FybmluZzogUGxlYXNlIGNoYW5nZSBgaWZBY3Rpb25gIHRvIGBpbmNsdWRlQWN0aW9uYCcpO1xuICByZXR1cm4gaW5jbHVkZUFjdGlvbihyYXdBY3Rpb25zKTtcbn1cbi8vIC9pZkFjdGlvblxuXG4vLyBleGNsdWRlQWN0aW9uIGhlbHBlclxuZnVuY3Rpb24gZXhjbHVkZUFjdGlvbigpIHtcbiAgdmFyIHJhd0FjdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyBbXSA6IGFyZ3VtZW50c1swXTtcblxuICB2YXIgYWN0aW9ucyA9IHBhcnNlQWN0aW9ucyhyYXdBY3Rpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICByZXR1cm4gYWN0aW9ucy5pbmRleE9mKGFjdGlvbi50eXBlKSA8IDA7XG4gIH07XG59XG4vLyAvZXhjbHVkZUFjdGlvblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlZHV4LXVuZG8vbGliL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMTEzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJpbXBvcnQgQyBmcm9tICcuLi9jb25zdGFudHMnO1xuXG5jb25zdCBJTklUSUFMX1NUQVRFID0ge1xuICB0cmFuc2xhdGU6ICAgIHsgeDogMTUwLCB5OiAxMDAgfSxcbiAgdG9wOiAgICAgICAgICAwLFxuICB0ZW1wX3RvcDogICAgIDAsXG5cbiAgcmlnaHQ6ICAgICAgICAwLFxuICB0ZW1wX3JpZ2h0OiAgIDAsXG5cbiAgYm90dG9tOiAgICAgICAwLFxuICB0ZW1wX2JvdHRvbTogIDAsXG4gIHNjYWxlclg6ICAgICAgQy5DVVJWRV9QRVJDRU5UXG59XG5cbmNvbnN0IHJlc2l6ZVJlZHVjZXIgPSAoc3RhdGUgPSBJTklUSUFMX1NUQVRFLCBhY3Rpb24pID0+IHtcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgJ0VESVRPUl9SRVNJWkUnOiB7XG4gICAgICBjb25zdCB7ZGF0YX0gPSBhY3Rpb24sXG4gICAgICAgICAgICB7dHlwZX0gPSBkYXRhLFxuICAgICAgICAgICAgZGVsdGEgID0gKCB0eXBlID09PSAndG9wJyB8fCB0eXBlID09PSAnYm90dG9tJyApID8gZGF0YS55IDogZGF0YS54O1xuXG4gICAgICBjb25zdCBuZXdTdGF0ZSA9IHsgLi4uc3RhdGUsIFtgdGVtcF8ke3R5cGV9YF06IGRlbHRhIH07XG4gICAgICAvLyBpZiBgcmlnaHRgc2l6ZSBjaGFuZ2VkIC0gY2FsY3VsYXRlIHRoZSBzY2FsZXIgZm9yIHggYXhpc1xuICAgICAgaWYgKCB0eXBlID09PSAncmlnaHQnICkge1xuICAgICAgICBuZXdTdGF0ZVsgJ3NjYWxlclgnIF0gPSAoQy5DVVJWRV9TSVpFICsgTWF0aC5tYXgoIHN0YXRlLnJpZ2h0ICsgZGVsdGEsIDAgKSkvMTAwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgIH1cblxuICAgIGNhc2UgJ0VESVRPUl9SRVNJWkVfRU5EJzoge1xuICAgICAgY29uc3Qge2RhdGF9ID0gYWN0aW9uO1xuICAgICAgY29uc3Qge3R5cGV9ID0gZGF0YTtcbiAgICAgIGNvbnN0IGRlbHRhID0gKCB0eXBlID09PSAndG9wJyB8fCB0eXBlID09PSAnYm90dG9tJyApID8gZGF0YS55IDogZGF0YS54O1xuICAgICAgLy8gZ2V0IHRoZSB0b3RhbCByZXNpemUgdmFsdWUgKCB0ZW1wb3JhcnkgKyBhY3R1YWwgKVxuICAgICAgY29uc3QgcmVzaXplID0gc3RhdGVbYCR7YWN0aW9uLmRhdGEudHlwZX1gXSArIGRlbHRhO1xuICAgICAgLy8gaWYgdGhlIHR5cGUgaWYgdG8gLSBpdCBoYXMgdGhlIGAtYCBhcyBiYXNlIHNvIHdlIG5lZWQgdG8gc3dhcCBtZXRob2RzXG4gICAgICBjb25zdCBtYXRoTWV0aG9kID0gKCB0eXBlID09PSAndG9wJyApID8gJ21pbicgOiAnbWF4JztcbiAgICAgIGNvbnN0IG5ld1N0YXRlID0geyAuLi5zdGF0ZSxcbiAgICAgICAgW2Ake2FjdGlvbi5kYXRhLnR5cGV9YF06IE1hdGhbbWF0aE1ldGhvZF0oMCwgcmVzaXplKSxcbiAgICAgICAgW2B0ZW1wXyR7YWN0aW9uLmRhdGEudHlwZX1gXTogMFxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgIH1cblxuICAgIGNhc2UgJ0VESVRPUl9UUkFOU0xBVEUnOiB7IHJldHVybiB7IC4uLnN0YXRlLCB0cmFuc2xhdGU6IGFjdGlvbi5kYXRhIH07IH1cbiAgfVxuICByZXR1cm4gc3RhdGU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHJlc2l6ZVJlZHVjZXI7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvanMvcmVkdWNlcnMvcmVzaXplLXJlZHVjZXIuYmFiZWwuanNcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF9kZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoXCIuLi9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHlcIik7XG5cbnZhciBfZGVmaW5lUHJvcGVydHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmaW5lUHJvcGVydHkpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9ialtrZXldID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gb2JqO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9iYWJlbC1ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHkuanNcbiAqKiBtb2R1bGUgaWQgPSAxMTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlxuY29uc3QgQ1VSVkVfU0laRSA9IDM1MDtcbmV4cG9ydCBkZWZhdWx0IHtcbiAgQ1VSVkVfU0laRSxcbiAgQ1VSVkVfUEVSQ0VOVDogQ1VSVkVfU0laRS8xMDAsXG4gIENVUlZFX1BBRERJTkc6IDEwXG59XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvanMvY29uc3RhbnRzLmJhYmVsLmpzXG4gKiovIiwiaW1wb3J0IG1ha2VQb2ludCBmcm9tICcuLi9oZWxwZXJzL21ha2UtcG9pbnQnO1xuaW1wb3J0IEMgZnJvbSAnLi4vY29uc3RhbnRzJztcblxuY29uc3QgSU5JVElBTF9TVEFURSA9IFtcbiAgICBtYWtlUG9pbnQoeyB4OiAwLCAgIHk6IEMuQ1VSVkVfU0laRSwgaXNMb2NrZWRYOiB0cnVlLCB0eXBlOiAnc3RyYWlnaHQnIH0pLFxuICAgIG1ha2VQb2ludCh7IHg6IDUwLCAgeTogQy5DVVJWRV9TSVpFLzIsIHR5cGU6ICdtaXJyb3JlZCcgfSksXG4gICAgbWFrZVBvaW50KHsgeDogMTAwLCB5OiAwLCBpc0xvY2tlZFg6IHRydWUgfSlcbiAgXTtcblxuY29uc3QgZGVzbGVjdEFsbCA9IChzdGF0ZSkgPT4ge1xuICBjb25zdCBuZXdTdGF0ZSA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlLmxlbmd0aDsgaSsrKSB7XG4gICAgbmV3U3RhdGUucHVzaCh7IC4uLnN0YXRlW2ldLCBpc1NlbGVjdGVkOiBmYWxzZSB9KTtcbiAgfVxuICByZXR1cm4gbmV3U3RhdGU7XG59XG5cbmNvbnN0IGZpbmRTZWxlY3RlZEluZGVjaWVzID0gKHN0YXRlKSA9PiB7XG4gIGNvbnN0IGluZGVjaWVzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGUubGVuZ3RoOyBpKyspIHtcbiAgICBzdGF0ZVtpXS5pc1NlbGVjdGVkICYmIGluZGVjaWVzLnB1c2goIGkgKTtcbiAgfVxuICByZXR1cm4gaW5kZWNpZXM7XG59XG5cbmNvbnN0IHBvaW50c1JlZHVjZXIgPSAoc3RhdGUgPSBJTklUSUFMX1NUQVRFLCBhY3Rpb24pID0+IHtcbiAgc3dpdGNoKCBhY3Rpb24udHlwZSApIHtcbiAgICBjYXNlICdQT0lOVF9UUkFOU0xBVEUnOiB7XG4gICAgICBjb25zdCB7ZGF0YX0gICA9IGFjdGlvbixcbiAgICAgICAgICAgIHtpbmRleH0gID0gZGF0YSxcbiAgICAgICAgICAgIG9sZFBvaW50ID0gc3RhdGVbaW5kZXhdLFxuICAgICAgICAgICAgbmV3U3RhdGUgPSBbIC4uLnN0YXRlIF07XG5cbiAgICAgIG5ld1N0YXRlWyBkYXRhLmluZGV4IF0gPSB7IC4uLm9sZFBvaW50LCB0ZW1wWDogZGF0YS54LCB0ZW1wWTogZGF0YS55IH1cbiAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICB9XG5cbiAgICBjYXNlICdQT0lOVF9UUkFOU0xBVEVfRU5EJzoge1xuICAgICAgY29uc3QgaW5kZXggICAgPSBhY3Rpb24uZGF0YSxcbiAgICAgICAgICAgIG9sZFBvaW50ID0gc3RhdGVbaW5kZXhdLFxuICAgICAgICAgICAgbmV3U3RhdGUgPSBbIC4uLnN0YXRlIF07XG5cbiAgICAgIG5ld1N0YXRlWyBpbmRleCBdID0ge1xuICAgICAgICAgIC4uLm9sZFBvaW50LFxuICAgICAgICAgIHg6IG9sZFBvaW50LnggKyBvbGRQb2ludC50ZW1wWCxcbiAgICAgICAgICB5OiBvbGRQb2ludC55ICsgb2xkUG9pbnQudGVtcFksXG4gICAgICAgICAgdGVtcFg6IDAsIHRlbXBZOiAwXG4gICAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgIH1cbiAgICBcbiAgICBjYXNlICdQT0lOVF9TRUxFQ1QnOiB7XG4gICAgICBjb25zdCB7ZGF0YX0gICAgICAgID0gYWN0aW9uLFxuICAgICAgICAgICAge2luZGV4fSAgICAgICA9IGRhdGEsXG4gICAgICAgICAgICB7aXNEZXNlbGVjdH0gID0gZGF0YSxcbiAgICAgICAgICAgIC8vIGlmIHNob3VsZCBkZSBzZWxlY3QgYWxsIG90aGVyIHBvaW50c1xuICAgICAgICAgICAgbmV3U3RhdGUgICAgICA9IChpc0Rlc2VsZWN0KSA/IGRlc2xlY3RBbGwoIHN0YXRlICkgOiBbIC4uLnN0YXRlIF07XG5cbiAgICAgIGNvbnN0IHBvaW50ID0gbmV3U3RhdGVbaW5kZXhdO1xuICAgICAgY29uc3Qgc2liUG9pbnQgPSAoaW5kZXggPT09IG5ld1N0YXRlLmxlbmd0aC0xKVxuICAgICAgICAgICAgICA/IG5ld1N0YXRlW2luZGV4LTFdIDogbmV3U3RhdGVbaW5kZXgrMV07XG5cbiAgICAgIGNvbnN0IGhhbmRsZUluZGV4ID0gKGluZGV4ID09PSBuZXdTdGF0ZS5sZW5ndGgtMSkgPyAxIDogMjtcblxuICAgICAgY29uc3QgaGFuZGxlTmFtZSA9IGBoYW5kbGUke2hhbmRsZUluZGV4fWA7XG4gICAgICBjb25zdCBzaWJIYW5kbGVJbmRleCA9IChoYW5kbGVJbmRleCA9PT0gMSkgPyAyIDogMTtcbiAgICAgIGNvbnN0IHNpYkhhbmRsZU5hbWUgPSBgaGFuZGxlJHtzaWJIYW5kbGVJbmRleH1gO1xuICAgICAgY29uc3QgaGFuZGxlID0geyAuLi5wb2ludFtoYW5kbGVOYW1lXSB9O1xuICAgICAgY29uc3Qgc2liSGFuZGxlID0geyAuLi5wb2ludFtzaWJIYW5kbGVOYW1lXSB9O1xuICAgICAgcG9pbnRbaGFuZGxlTmFtZV0gPSBoYW5kbGU7XG4gICAgICBwb2ludFtzaWJIYW5kbGVOYW1lXSA9IHNpYkhhbmRsZTtcblxuICAgICAgY29uc3Qgd2FzbnRTZXQgPSBoYW5kbGUuYW5nbGUgPT0gbnVsbCB8fCBoYW5kbGUucmFkaXVzID09IG51bGw7XG4gICAgICBjb25zdCB0eXBlID0gcG9pbnQudHlwZTtcbiAgICAgIGlmICggd2FzbnRTZXQgKSB7XG4gICAgICAgIGhhbmRsZS5yYWRpdXMgPSA1MDtcblxuICAgICAgICBjb25zdCBkeSA9IChzaWJQb2ludC55IC0gcG9pbnQueSkgLyBDLkNVUlZFX1BFUkNFTlQ7XG4gICAgICAgIGNvbnN0IGR4ID0gc2liUG9pbnQueCAtIHBvaW50Lng7XG4gICAgICAgIGxldCBhbmdsZSA9IE1hdGguYXRhbiggZHkvZHggKSAqICgxODAvTWF0aC5QSSkgLSA5MDtcbiAgICAgICAgaWYgKCBkeCA+IDAgKSB7IGFuZ2xlID0gYW5nbGUgLSAxODAgfTtcbiAgICAgICAgaGFuZGxlLmFuZ2xlID0gYW5nbGU7XG5cbiAgICAgICAgc2liSGFuZGxlLnJhZGl1cyA9IGhhbmRsZS5yYWRpdXM7XG4gICAgICAgIHNpYkhhbmRsZS5hbmdsZSAgPSBoYW5kbGUuYW5nbGUgLSAxODA7XG4gICAgICB9XG5cbiAgICAgIHBvaW50LmlzU2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgIH1cblxuICAgIGNhc2UgJ1BPSU5UX0FERCc6IHtcbiAgICAgIGNvbnN0IHtkYXRhfSAgICAgICAgPSBhY3Rpb24sXG4gICAgICAgICAgICB7eCwgeSwgaW5kZXh9ID0gZGF0YTtcblxuICAgICAgY29uc3QgZGVzZWxlY3RlZCA9IGRlc2xlY3RBbGwoIHN0YXRlICk7XG5cbiAgICAgIHJldHVybiBbXG4gICAgICAgIC4uLmRlc2VsZWN0ZWQuc2xpY2UoIDAsIGluZGV4ICksXG4gICAgICAgIG1ha2VQb2ludCh7IHgsIHksIGlzU2VsZWN0ZWQ6IHRydWUgfSksXG4gICAgICAgIC4uLmRlc2VsZWN0ZWQuc2xpY2UoIGluZGV4IClcbiAgICAgIF1cbiAgICB9XG4gICAgY2FzZSAnUE9JTlRfREVMRVRFJzoge1xuICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBmaW5kU2VsZWN0ZWRJbmRlY2llcyhzdGF0ZSk7XG5cbiAgICAgIGNvbnN0IG5ld1N0YXRlID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBzdGF0ZVtpXTtcbiAgICAgICAgKCBzZWxlY3RlZC5pbmRleE9mKGkpID09PSAtMSB8fCBpdGVtLmlzTG9ja2VkWCApICYmIG5ld1N0YXRlLnB1c2goIGl0ZW0gKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgIH1cblxuICAgIGNhc2UgJ1BPSU5UX0NIQU5HRV9UWVBFJzoge1xuICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBmaW5kU2VsZWN0ZWRJbmRlY2llcyhzdGF0ZSk7XG5cbiAgICAgIGNvbnN0IG5ld1N0YXRlID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBzdGF0ZVtpXTtcbiAgICAgICAgY29uc3QgdHlwZSA9IGFjdGlvbi5kYXRhO1xuICAgICAgICAvLyBjb3B5IGFsbCBpdGVtcyBmcm9tIHByZXZpb3VzIHN0YXRlXG4gICAgICAgIG5ld1N0YXRlLnB1c2goIHsgLi4uaXRlbSB9ICk7XG4gICAgICAgIC8vIGlmIGl0ZW0gd2FzIHNlbGVjdGVkIC0gc2V0IHRoZSBuZXcgYHR5cGVgXG4gICAgICAgICggc2VsZWN0ZWQuaW5kZXhPZihpKSAhPT0gLTEgKSAmJiAobmV3U3RhdGVbaV0udHlwZSA9IHR5cGUpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaW5kZXggPSBpO1xuICAgICAgICBjb25zdCBwb2ludCA9IG5ld1N0YXRlW2luZGV4XTtcbiAgICAgICAgY29uc3Qgc2liUG9pbnQgPSAoaW5kZXggPT09IG5ld1N0YXRlLmxlbmd0aC0xKVxuICAgICAgICAgICAgICAgID8gbmV3U3RhdGVbaW5kZXgtMV0gOiBuZXdTdGF0ZVtpbmRleCsxXTtcblxuICAgICAgICBjb25zdCBoYW5kbGVJbmRleCA9IChpbmRleCA9PT0gbmV3U3RhdGUubGVuZ3RoLTEpID8gMSA6IDI7XG4gICAgICAgIGNvbnN0IHNpYkhhbmRsZUluZGV4ID0gKGhhbmRsZUluZGV4ID09PSAxKSA/IDIgOiAxO1xuICAgICAgICBjb25zdCBoYW5kbGVOYW1lID0gYGhhbmRsZSR7aGFuZGxlSW5kZXh9YDtcbiAgICAgICAgY29uc3Qgc2liSGFuZGxlTmFtZSA9IGBoYW5kbGUke3NpYkhhbmRsZUluZGV4fWA7XG4gICAgICAgIGNvbnN0IGhhbmRsZSA9IHsgLi4ucG9pbnRbaGFuZGxlTmFtZV0gfTtcbiAgICAgICAgY29uc3Qgc2liSGFuZGxlID0geyAuLi5wb2ludFtzaWJIYW5kbGVOYW1lXSB9O1xuICAgICAgICBwb2ludFtoYW5kbGVOYW1lXSA9IGhhbmRsZTtcbiAgICAgICAgcG9pbnRbc2liSGFuZGxlTmFtZV0gPSBzaWJIYW5kbGU7XG5cbiAgICAgICAgaWYgKCB0eXBlID09PSAnbWlycm9yZWQnIHx8IHR5cGUgPT09ICdhc3ltbWV0cmljJyApIHtcbiAgICAgICAgICBzaWJIYW5kbGUuYW5nbGUgPSBoYW5kbGUuYW5nbGUgLSAxODA7XG4gICAgICAgICAgaWYgKCB0eXBlID09PSAnbWlycm9yZWQnICkgeyBzaWJIYW5kbGUucmFkaXVzID0gaGFuZGxlLnJhZGl1czsgfVxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgIH1cbiAgICBcbiAgICBjYXNlICdQT0lOVF9ERVNFTEVDVF9BTEwnOiB7XG4gICAgICByZXR1cm4gZGVzbGVjdEFsbCggc3RhdGUgKTtcbiAgICB9XG5cblxuICAgIC8vIEhBTkRMRVNcbiAgICBjYXNlICdIQU5ETEVfVFJBTlNMQVRFJzoge1xuICAgICAgY29uc3Qge2RhdGF9ID0gYWN0aW9uO1xuICAgICAgLy8gY3JlYXRlIG5ldyBzdGF0ZSBhbmQgY29weSB0aGUgbmV3IHBvaW50IGludG8gaXRcbiAgICAgIGNvbnN0IG5ld1N0YXRlID0gWy4uLnN0YXRlXTtcbiAgICAgIGNvbnN0IG5ld1BvaW50ID0geyAuLi5uZXdTdGF0ZVtkYXRhLnBhcmVudEluZGV4XSB9O1xuICAgICAgbmV3U3RhdGVbZGF0YS5wYXJlbnRJbmRleF0gPSBuZXdQb2ludDtcbiAgICAgIC8vIGNyZWF0ZSBoYW5kbGUgYW5kIGNvcHkgaXQgaW50byB0aGUgbmV3IHBvaW50XG4gICAgICBjb25zdCBoYW5kbGVOYW1lID0gYGhhbmRsZSR7ZGF0YS5pbmRleH1gO1xuICAgICAgY29uc3QgbmV3SGFuZGxlID0geyAuLi5uZXdQb2ludFtoYW5kbGVOYW1lXSB9O1xuICAgICAgbmV3UG9pbnRbIGhhbmRsZU5hbWUgXSA9IG5ld0hhbmRsZTtcbiAgICAgIC8vIGZpbmFsbHkgYWRkIGFuZ2xlIGFuZCByYWRpdXNcbiAgICAgIG5ld0hhbmRsZS5hbmdsZSAgPSBkYXRhLmFuZ2xlO1xuICAgICAgbmV3SGFuZGxlLnJhZGl1cyA9IGRhdGEucmFkaXVzO1xuICAgICAgXG4gICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgfVxuICB9XG4gIHJldHVybiBzdGF0ZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgcG9pbnRzUmVkdWNlcjtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9qcy9yZWR1Y2Vycy9wb2ludHMtcmVkdWNlci5iYWJlbC5qc1xuICoqLyIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2Zyb20gPSByZXF1aXJlKFwiLi4vY29yZS1qcy9hcnJheS9mcm9tXCIpO1xuXG52YXIgX2Zyb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZnJvbSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFycjJbaV0gPSBhcnJbaV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGFycjI7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICgwLCBfZnJvbTIuZGVmYXVsdCkoYXJyKTtcbiAgfVxufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9iYWJlbC1ydW50aW1lL2hlbHBlcnMvdG9Db25zdW1hYmxlQXJyYXkuanNcbiAqKiBtb2R1bGUgaWQgPSAxMThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9hcnJheS9mcm9tXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9jb3JlLWpzL2FycmF5L2Zyb20uanNcbiAqKiBtb2R1bGUgaWQgPSAxMTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvcicpO1xucmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYuYXJyYXkuZnJvbScpO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzL19jb3JlJykuQXJyYXkuZnJvbTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvZm4vYXJyYXkvZnJvbS5qc1xuICoqIG1vZHVsZSBpZCA9IDEyMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGN0eCAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fY3R4JylcbiAgLCAkZXhwb3J0ICAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgdG9PYmplY3QgICAgICAgPSByZXF1aXJlKCcuL190by1vYmplY3QnKVxuICAsIGNhbGwgICAgICAgICAgID0gcmVxdWlyZSgnLi9faXRlci1jYWxsJylcbiAgLCBpc0FycmF5SXRlciAgICA9IHJlcXVpcmUoJy4vX2lzLWFycmF5LWl0ZXInKVxuICAsIHRvTGVuZ3RoICAgICAgID0gcmVxdWlyZSgnLi9fdG8tbGVuZ3RoJylcbiAgLCBjcmVhdGVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vX2NyZWF0ZS1wcm9wZXJ0eScpXG4gICwgZ2V0SXRlckZuICAgICAgPSByZXF1aXJlKCcuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFyZXF1aXJlKCcuL19pdGVyLWRldGVjdCcpKGZ1bmN0aW9uKGl0ZXIpeyBBcnJheS5mcm9tKGl0ZXIpOyB9KSwgJ0FycmF5Jywge1xuICAvLyAyMi4xLjIuMSBBcnJheS5mcm9tKGFycmF5TGlrZSwgbWFwZm4gPSB1bmRlZmluZWQsIHRoaXNBcmcgPSB1bmRlZmluZWQpXG4gIGZyb206IGZ1bmN0aW9uIGZyb20oYXJyYXlMaWtlLyosIG1hcGZuID0gdW5kZWZpbmVkLCB0aGlzQXJnID0gdW5kZWZpbmVkKi8pe1xuICAgIHZhciBPICAgICAgID0gdG9PYmplY3QoYXJyYXlMaWtlKVxuICAgICAgLCBDICAgICAgID0gdHlwZW9mIHRoaXMgPT0gJ2Z1bmN0aW9uJyA/IHRoaXMgOiBBcnJheVxuICAgICAgLCBhTGVuICAgID0gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgLCBtYXBmbiAgID0gYUxlbiA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWRcbiAgICAgICwgbWFwcGluZyA9IG1hcGZuICE9PSB1bmRlZmluZWRcbiAgICAgICwgaW5kZXggICA9IDBcbiAgICAgICwgaXRlckZuICA9IGdldEl0ZXJGbihPKVxuICAgICAgLCBsZW5ndGgsIHJlc3VsdCwgc3RlcCwgaXRlcmF0b3I7XG4gICAgaWYobWFwcGluZyltYXBmbiA9IGN0eChtYXBmbiwgYUxlbiA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQsIDIpO1xuICAgIC8vIGlmIG9iamVjdCBpc24ndCBpdGVyYWJsZSBvciBpdCdzIGFycmF5IHdpdGggZGVmYXVsdCBpdGVyYXRvciAtIHVzZSBzaW1wbGUgY2FzZVxuICAgIGlmKGl0ZXJGbiAhPSB1bmRlZmluZWQgJiYgIShDID09IEFycmF5ICYmIGlzQXJyYXlJdGVyKGl0ZXJGbikpKXtcbiAgICAgIGZvcihpdGVyYXRvciA9IGl0ZXJGbi5jYWxsKE8pLCByZXN1bHQgPSBuZXcgQzsgIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lOyBpbmRleCsrKXtcbiAgICAgICAgY3JlYXRlUHJvcGVydHkocmVzdWx0LCBpbmRleCwgbWFwcGluZyA/IGNhbGwoaXRlcmF0b3IsIG1hcGZuLCBbc3RlcC52YWx1ZSwgaW5kZXhdLCB0cnVlKSA6IHN0ZXAudmFsdWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCk7XG4gICAgICBmb3IocmVzdWx0ID0gbmV3IEMobGVuZ3RoKTsgbGVuZ3RoID4gaW5kZXg7IGluZGV4Kyspe1xuICAgICAgICBjcmVhdGVQcm9wZXJ0eShyZXN1bHQsIGluZGV4LCBtYXBwaW5nID8gbWFwZm4oT1tpbmRleF0sIGluZGV4KSA6IE9baW5kZXhdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmVzdWx0Lmxlbmd0aCA9IGluZGV4O1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn0pO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2LmFycmF5LmZyb20uanNcbiAqKiBtb2R1bGUgaWQgPSAxMjFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIGNhbGwgc29tZXRoaW5nIG9uIGl0ZXJhdG9yIHN0ZXAgd2l0aCBzYWZlIGNsb3Npbmcgb24gZXJyb3JcbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdGVyYXRvciwgZm4sIHZhbHVlLCBlbnRyaWVzKXtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZW50cmllcyA/IGZuKGFuT2JqZWN0KHZhbHVlKVswXSwgdmFsdWVbMV0pIDogZm4odmFsdWUpO1xuICAvLyA3LjQuNiBJdGVyYXRvckNsb3NlKGl0ZXJhdG9yLCBjb21wbGV0aW9uKVxuICB9IGNhdGNoKGUpe1xuICAgIHZhciByZXQgPSBpdGVyYXRvclsncmV0dXJuJ107XG4gICAgaWYocmV0ICE9PSB1bmRlZmluZWQpYW5PYmplY3QocmV0LmNhbGwoaXRlcmF0b3IpKTtcbiAgICB0aHJvdyBlO1xuICB9XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL19pdGVyLWNhbGwuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIGNoZWNrIG9uIGRlZmF1bHQgQXJyYXkgaXRlcmF0b3JcbnZhciBJdGVyYXRvcnMgID0gcmVxdWlyZSgnLi9faXRlcmF0b3JzJylcbiAgLCBJVEVSQVRPUiAgID0gcmVxdWlyZSgnLi9fd2tzJykoJ2l0ZXJhdG9yJylcbiAgLCBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIGl0ICE9PSB1bmRlZmluZWQgJiYgKEl0ZXJhdG9ycy5BcnJheSA9PT0gaXQgfHwgQXJyYXlQcm90b1tJVEVSQVRPUl0gPT09IGl0KTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2lzLWFycmF5LWl0ZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciAkZGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKVxuICAsIGNyZWF0ZURlc2MgICAgICA9IHJlcXVpcmUoJy4vX3Byb3BlcnR5LWRlc2MnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmplY3QsIGluZGV4LCB2YWx1ZSl7XG4gIGlmKGluZGV4IGluIG9iamVjdCkkZGVmaW5lUHJvcGVydHkuZihvYmplY3QsIGluZGV4LCBjcmVhdGVEZXNjKDAsIHZhbHVlKSk7XG4gIGVsc2Ugb2JqZWN0W2luZGV4XSA9IHZhbHVlO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9fY3JlYXRlLXByb3BlcnR5LmpzXG4gKiogbW9kdWxlIGlkID0gMTI0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgY2xhc3NvZiAgID0gcmVxdWlyZSgnLi9fY2xhc3NvZicpXG4gICwgSVRFUkFUT1IgID0gcmVxdWlyZSgnLi9fd2tzJykoJ2l0ZXJhdG9yJylcbiAgLCBJdGVyYXRvcnMgPSByZXF1aXJlKCcuL19pdGVyYXRvcnMnKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9fY29yZScpLmdldEl0ZXJhdG9yTWV0aG9kID0gZnVuY3Rpb24oaXQpe1xuICBpZihpdCAhPSB1bmRlZmluZWQpcmV0dXJuIGl0W0lURVJBVE9SXVxuICAgIHx8IGl0WydAQGl0ZXJhdG9yJ11cbiAgICB8fCBJdGVyYXRvcnNbY2xhc3NvZihpdCldO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIGdldHRpbmcgdGFnIGZyb20gMTkuMS4zLjYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZygpXG52YXIgY29mID0gcmVxdWlyZSgnLi9fY29mJylcbiAgLCBUQUcgPSByZXF1aXJlKCcuL193a3MnKSgndG9TdHJpbmdUYWcnKVxuICAvLyBFUzMgd3JvbmcgaGVyZVxuICAsIEFSRyA9IGNvZihmdW5jdGlvbigpeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpID09ICdBcmd1bWVudHMnO1xuXG4vLyBmYWxsYmFjayBmb3IgSUUxMSBTY3JpcHQgQWNjZXNzIERlbmllZCBlcnJvclxudmFyIHRyeUdldCA9IGZ1bmN0aW9uKGl0LCBrZXkpe1xuICB0cnkge1xuICAgIHJldHVybiBpdFtrZXldO1xuICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgdmFyIE8sIFQsIEI7XG4gIHJldHVybiBpdCA9PT0gdW5kZWZpbmVkID8gJ1VuZGVmaW5lZCcgOiBpdCA9PT0gbnVsbCA/ICdOdWxsJ1xuICAgIC8vIEBAdG9TdHJpbmdUYWcgY2FzZVxuICAgIDogdHlwZW9mIChUID0gdHJ5R2V0KE8gPSBPYmplY3QoaXQpLCBUQUcpKSA9PSAnc3RyaW5nJyA/IFRcbiAgICAvLyBidWlsdGluVGFnIGNhc2VcbiAgICA6IEFSRyA/IGNvZihPKVxuICAgIC8vIEVTMyBhcmd1bWVudHMgZmFsbGJhY2tcbiAgICA6IChCID0gY29mKE8pKSA9PSAnT2JqZWN0JyAmJiB0eXBlb2YgTy5jYWxsZWUgPT0gJ2Z1bmN0aW9uJyA/ICdBcmd1bWVudHMnIDogQjtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2NsYXNzb2YuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBJVEVSQVRPUiAgICAgPSByZXF1aXJlKCcuL193a3MnKSgnaXRlcmF0b3InKVxuICAsIFNBRkVfQ0xPU0lORyA9IGZhbHNlO1xuXG50cnkge1xuICB2YXIgcml0ZXIgPSBbN11bSVRFUkFUT1JdKCk7XG4gIHJpdGVyWydyZXR1cm4nXSA9IGZ1bmN0aW9uKCl7IFNBRkVfQ0xPU0lORyA9IHRydWU7IH07XG4gIEFycmF5LmZyb20ocml0ZXIsIGZ1bmN0aW9uKCl7IHRocm93IDI7IH0pO1xufSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMsIHNraXBDbG9zaW5nKXtcbiAgaWYoIXNraXBDbG9zaW5nICYmICFTQUZFX0NMT1NJTkcpcmV0dXJuIGZhbHNlO1xuICB2YXIgc2FmZSA9IGZhbHNlO1xuICB0cnkge1xuICAgIHZhciBhcnIgID0gWzddXG4gICAgICAsIGl0ZXIgPSBhcnJbSVRFUkFUT1JdKCk7XG4gICAgaXRlci5uZXh0ID0gZnVuY3Rpb24oKXsgcmV0dXJuIHtkb25lOiBzYWZlID0gdHJ1ZX07IH07XG4gICAgYXJyW0lURVJBVE9SXSA9IGZ1bmN0aW9uKCl7IHJldHVybiBpdGVyOyB9O1xuICAgIGV4ZWMoYXJyKTtcbiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfVxuICByZXR1cm4gc2FmZTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvX2l0ZXItZGV0ZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gMTI3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcbmNvbnN0IGZhbGxiYWNrID0gKCB2YWx1ZSwgZmFsbGJhY2sgKSA9PiB7XG4gIHJldHVybiAoIHZhbHVlICE9IG51bGwgKSA/IHZhbHVlIDogZmFsbGJhY2s7XG59XG5cblxuY29uc3QgbWFrZUhhbmRsZVBvaW50ID0gKG89e30pID0+IHtcbiAgcmV0dXJuIHtcbiAgICBpbmRleDogICAgZmFsbGJhY2soIG8uaW5kZXgsIDAgKSxcbiAgICAvLyBjb29yZGluYXRlc1xuICAgIGFuZ2xlOiAgICBmYWxsYmFjayggby5hbmdsZSwgIG51bGwgKSxcbiAgICByYWRpdXM6ICAgZmFsbGJhY2soIG8ucmFkaXVzLCBudWxsICksXG4gICAgLy8gc3RhdGVcbiAgICBpc1RvdWNoZWQ6ICBmYWxsYmFjayggby5pc1RvdWNoZWQsIGZhbHNlICksXG4gICAgaXNTZWxlY3RlZDogZmFsbGJhY2soIG8uaXNTZWxlY3RlZCwgZmFsc2UgKSxcbiAgfTtcbn1cblxuY29uc3QgbWFrZVBvc2l0aW9uUG9pbnQgPSAobz17fSkgPT4ge1xuICByZXR1cm4ge1xuICAgIC8vIGNvb3JkaW5hdGVzXG4gICAgeDogICAgZmFsbGJhY2soIG8ueCwgMCApLFxuICAgIHk6ICAgIGZhbGxiYWNrKCBvLnksIDAgKSxcbiAgICAvLyB0ZW1wb3JhcnkgY29vcmRpbmF0ZXMgKHdoZW4gdXNlciBtb3ZlcyB0aGUgcG9pbnQpIC1cbiAgICAvLyBzaG91bGQgbm90IGJlIGluIGhpc3RvcnlcbiAgICB0ZW1wWDogZmFsbGJhY2soIG8udGVtcFgsIDAgKSxcbiAgICB0ZW1wWTogZmFsbGJhY2soIG8udGVtcFksIDAgKSxcbiAgICAvLyBzdGF0ZVxuICAgIGlzVG91Y2hlZDogIGZhbGxiYWNrKCBvLmlzVG91Y2hlZCwgZmFsc2UgKSxcbiAgICBpc1NlbGVjdGVkOiBmYWxsYmFjayggby5pc1NlbGVjdGVkLCBmYWxzZSApLFxuICB9O1xufVxuXG5jb25zdCBtYWtlUG9pbnQgPSAobyA9IHt9KSA9PiB7XG4gIHJldHVybiB7XG4gICAgLy8gc3RhdGVcbiAgICAvLyBpc09uZUhhbmRsZTogZmFsbGJhY2soIG8uaXNPbmVIYW5kbGUsIGZhbHNlICksXG4gICAgaXNMb2NrZWRYOiAgIGZhbGxiYWNrKCBvLmlzTG9ja2VkWCwgZmFsc2UgKSxcbiAgICBpc0xvY2tlZFk6ICAgZmFsbGJhY2soIG8uaXNMb2NrZWRZLCBmYWxzZSApLFxuICAgIC8vIHR5cGUgb2YgdGhlIHBvaW50OlxuICAgIC8vICAgJ3N0cmFpZ2h0JyB8fCAnbWlycm9yZWQnIHx8ICdkaXNjb25uZWN0ZWQnIHx8ICdhc3ltZXRyaWMnXG4gICAgdHlwZTogICAgICAgZmFsbGJhY2soIG8udHlwZSwgJ3N0cmFpZ2h0JyApLFxuICAgIC8vIGFkZCBwb3NpdGlvbiBhdHRyaWJ1dGVzIHRvIHNlbGZcbiAgICAuLi5tYWtlUG9zaXRpb25Qb2ludChvKSxcbiAgICAvLyBhZGQgY3VydmUgaGFuZGxlc1xuICAgIGhhbmRsZTE6IG1ha2VIYW5kbGVQb2ludChvLmhhbmRsZTEgfHwgeyBpbmRleDogMSB9KSxcbiAgICBoYW5kbGUyOiBtYWtlSGFuZGxlUG9pbnQoby5oYW5kbGUyIHx8IHsgaW5kZXg6IDIgfSlcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbWFrZVBvaW50O1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL2pzL2hlbHBlcnMvbWFrZS1wb2ludC5iYWJlbC5qc1xuICoqLyIsIlxuY29uc3QgSU5JVElBTF9TVEFURSA9IHtcbiAgaXNTaG93OiBmYWxzZSxcbiAgdHlwZTogICAnc3RyYWlnaHQnXG59XG5cbmNvbnN0IHBvaW50Q29udHJvbHMgPSAoc3RhdGUgPSBJTklUSUFMX1NUQVRFLCBhY3Rpb24pID0+IHtcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIC8vIHByb2JhYmx5IHJlZHVuZGFudFxuICAgIC8vIGNhc2UgJ1BPSU5UX0FERCc6IHtcbiAgICAvLyAgIHJldHVybiB7IC4uLnN0YXRlLCBpc1Nob3c6IHRydWUsIHR5cGU6ICdzdHJhaWdodCcgfTtcbiAgICAvLyB9XG4gICAgY2FzZSAnUE9JTlRfU0VMRUNUJzoge1xuICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGlzU2hvdzogIWFjdGlvbi5pc0Rlc2VsZWN0LCB0eXBlOiBhY3Rpb24uZGF0YS50eXBlIH07XG4gICAgfVxuICAgIGNhc2UgJ1BPSU5UX0NIQU5HRV9UWVBFJzoge1xuICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIHR5cGU6IGFjdGlvbi5kYXRhIH07IFxuICAgIH1cbiAgICBjYXNlICdQT0lOVF9ERVNFTEVDVF9BTEwnOiB7XG4gICAgICByZXR1cm4geyAuLi5zdGF0ZSwgaXNTaG93OiBmYWxzZSB9O1xuICAgIH1cbiAgfVxuICByZXR1cm4gc3RhdGU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHBvaW50Q29udHJvbHM7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvanMvcmVkdWNlcnMvcG9pbnQtY29udHJvbHMtcmVkdWNlci5iYWJlbC5qc1xuICoqLyIsIi8qISBIYW1tZXIuSlMgLSB2Mi4wLjcgLSAyMDE2LTA0LTIyXG4gKiBodHRwOi8vaGFtbWVyanMuZ2l0aHViLmlvL1xuICpcbiAqIENvcHlyaWdodCAoYykgMjAxNiBKb3JpayBUYW5nZWxkZXI7XG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgKi9cbihmdW5jdGlvbih3aW5kb3csIGRvY3VtZW50LCBleHBvcnROYW1lLCB1bmRlZmluZWQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG52YXIgVkVORE9SX1BSRUZJWEVTID0gWycnLCAnd2Via2l0JywgJ01veicsICdNUycsICdtcycsICdvJ107XG52YXIgVEVTVF9FTEVNRU5UID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbnZhciBUWVBFX0ZVTkNUSU9OID0gJ2Z1bmN0aW9uJztcblxudmFyIHJvdW5kID0gTWF0aC5yb3VuZDtcbnZhciBhYnMgPSBNYXRoLmFicztcbnZhciBub3cgPSBEYXRlLm5vdztcblxuLyoqXG4gKiBzZXQgYSB0aW1lb3V0IHdpdGggYSBnaXZlbiBzY29wZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lb3V0XG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dFxuICogQHJldHVybnMge251bWJlcn1cbiAqL1xuZnVuY3Rpb24gc2V0VGltZW91dENvbnRleHQoZm4sIHRpbWVvdXQsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gc2V0VGltZW91dChiaW5kRm4oZm4sIGNvbnRleHQpLCB0aW1lb3V0KTtcbn1cblxuLyoqXG4gKiBpZiB0aGUgYXJndW1lbnQgaXMgYW4gYXJyYXksIHdlIHdhbnQgdG8gZXhlY3V0ZSB0aGUgZm4gb24gZWFjaCBlbnRyeVxuICogaWYgaXQgYWludCBhbiBhcnJheSB3ZSBkb24ndCB3YW50IHRvIGRvIGEgdGhpbmcuXG4gKiB0aGlzIGlzIHVzZWQgYnkgYWxsIHRoZSBtZXRob2RzIHRoYXQgYWNjZXB0IGEgc2luZ2xlIGFuZCBhcnJheSBhcmd1bWVudC5cbiAqIEBwYXJhbSB7KnxBcnJheX0gYXJnXG4gKiBAcGFyYW0ge1N0cmluZ30gZm5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbY29udGV4dF1cbiAqIEByZXR1cm5zIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpbnZva2VBcnJheUFyZyhhcmcsIGZuLCBjb250ZXh0KSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuICAgICAgICBlYWNoKGFyZywgY29udGV4dFtmbl0sIGNvbnRleHQpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIHdhbGsgb2JqZWN0cyBhbmQgYXJyYXlzXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRvclxuICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRcbiAqL1xuZnVuY3Rpb24gZWFjaChvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgdmFyIGk7XG5cbiAgICBpZiAoIW9iaikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG9iai5mb3JFYWNoKSB7XG4gICAgICAgIG9iai5mb3JFYWNoKGl0ZXJhdG9yLCBjb250ZXh0KTtcbiAgICB9IGVsc2UgaWYgKG9iai5sZW5ndGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCBvYmoubGVuZ3RoKSB7XG4gICAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtpXSwgaSwgb2JqKTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoaSBpbiBvYmopIHtcbiAgICAgICAgICAgIG9iai5oYXNPd25Qcm9wZXJ0eShpKSAmJiBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtpXSwgaSwgb2JqKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiB3cmFwIGEgbWV0aG9kIHdpdGggYSBkZXByZWNhdGlvbiB3YXJuaW5nIGFuZCBzdGFjayB0cmFjZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gbWV0aG9kXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBuZXcgZnVuY3Rpb24gd3JhcHBpbmcgdGhlIHN1cHBsaWVkIG1ldGhvZC5cbiAqL1xuZnVuY3Rpb24gZGVwcmVjYXRlKG1ldGhvZCwgbmFtZSwgbWVzc2FnZSkge1xuICAgIHZhciBkZXByZWNhdGlvbk1lc3NhZ2UgPSAnREVQUkVDQVRFRCBNRVRIT0Q6ICcgKyBuYW1lICsgJ1xcbicgKyBtZXNzYWdlICsgJyBBVCBcXG4nO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGUgPSBuZXcgRXJyb3IoJ2dldC1zdGFjay10cmFjZScpO1xuICAgICAgICB2YXIgc3RhY2sgPSBlICYmIGUuc3RhY2sgPyBlLnN0YWNrLnJlcGxhY2UoL15bXlxcKF0rP1tcXG4kXS9nbSwgJycpXG4gICAgICAgICAgICAucmVwbGFjZSgvXlxccythdFxccysvZ20sICcnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL15PYmplY3QuPGFub255bW91cz5cXHMqXFwoL2dtLCAne2Fub255bW91c30oKUAnKSA6ICdVbmtub3duIFN0YWNrIFRyYWNlJztcblxuICAgICAgICB2YXIgbG9nID0gd2luZG93LmNvbnNvbGUgJiYgKHdpbmRvdy5jb25zb2xlLndhcm4gfHwgd2luZG93LmNvbnNvbGUubG9nKTtcbiAgICAgICAgaWYgKGxvZykge1xuICAgICAgICAgICAgbG9nLmNhbGwod2luZG93LmNvbnNvbGUsIGRlcHJlY2F0aW9uTWVzc2FnZSwgc3RhY2spO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xufVxuXG4vKipcbiAqIGV4dGVuZCBvYmplY3QuXG4gKiBtZWFucyB0aGF0IHByb3BlcnRpZXMgaW4gZGVzdCB3aWxsIGJlIG92ZXJ3cml0dGVuIGJ5IHRoZSBvbmVzIGluIHNyYy5cbiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRcbiAqIEBwYXJhbSB7Li4uT2JqZWN0fSBvYmplY3RzX3RvX2Fzc2lnblxuICogQHJldHVybnMge09iamVjdH0gdGFyZ2V0XG4gKi9cbnZhciBhc3NpZ247XG5pZiAodHlwZW9mIE9iamVjdC5hc3NpZ24gIT09ICdmdW5jdGlvbicpIHtcbiAgICBhc3NpZ24gPSBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0KSB7XG4gICAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCB8fCB0YXJnZXQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG91dHB1dCA9IE9iamVjdCh0YXJnZXQpO1xuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgICAgICAgICBpZiAoc291cmNlICE9PSB1bmRlZmluZWQgJiYgc291cmNlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbmV4dEtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShuZXh0S2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W25leHRLZXldID0gc291cmNlW25leHRLZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfTtcbn0gZWxzZSB7XG4gICAgYXNzaWduID0gT2JqZWN0LmFzc2lnbjtcbn1cblxuLyoqXG4gKiBleHRlbmQgb2JqZWN0LlxuICogbWVhbnMgdGhhdCBwcm9wZXJ0aWVzIGluIGRlc3Qgd2lsbCBiZSBvdmVyd3JpdHRlbiBieSB0aGUgb25lcyBpbiBzcmMuXG4gKiBAcGFyYW0ge09iamVjdH0gZGVzdFxuICogQHBhcmFtIHtPYmplY3R9IHNyY1xuICogQHBhcmFtIHtCb29sZWFufSBbbWVyZ2U9ZmFsc2VdXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBkZXN0XG4gKi9cbnZhciBleHRlbmQgPSBkZXByZWNhdGUoZnVuY3Rpb24gZXh0ZW5kKGRlc3QsIHNyYywgbWVyZ2UpIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHNyYyk7XG4gICAgdmFyIGkgPSAwO1xuICAgIHdoaWxlIChpIDwga2V5cy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKCFtZXJnZSB8fCAobWVyZ2UgJiYgZGVzdFtrZXlzW2ldXSA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgZGVzdFtrZXlzW2ldXSA9IHNyY1trZXlzW2ldXTtcbiAgICAgICAgfVxuICAgICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybiBkZXN0O1xufSwgJ2V4dGVuZCcsICdVc2UgYGFzc2lnbmAuJyk7XG5cbi8qKlxuICogbWVyZ2UgdGhlIHZhbHVlcyBmcm9tIHNyYyBpbiB0aGUgZGVzdC5cbiAqIG1lYW5zIHRoYXQgcHJvcGVydGllcyB0aGF0IGV4aXN0IGluIGRlc3Qgd2lsbCBub3QgYmUgb3ZlcndyaXR0ZW4gYnkgc3JjXG4gKiBAcGFyYW0ge09iamVjdH0gZGVzdFxuICogQHBhcmFtIHtPYmplY3R9IHNyY1xuICogQHJldHVybnMge09iamVjdH0gZGVzdFxuICovXG52YXIgbWVyZ2UgPSBkZXByZWNhdGUoZnVuY3Rpb24gbWVyZ2UoZGVzdCwgc3JjKSB7XG4gICAgcmV0dXJuIGV4dGVuZChkZXN0LCBzcmMsIHRydWUpO1xufSwgJ21lcmdlJywgJ1VzZSBgYXNzaWduYC4nKTtcblxuLyoqXG4gKiBzaW1wbGUgY2xhc3MgaW5oZXJpdGFuY2VcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNoaWxkXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBiYXNlXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXNdXG4gKi9cbmZ1bmN0aW9uIGluaGVyaXQoY2hpbGQsIGJhc2UsIHByb3BlcnRpZXMpIHtcbiAgICB2YXIgYmFzZVAgPSBiYXNlLnByb3RvdHlwZSxcbiAgICAgICAgY2hpbGRQO1xuXG4gICAgY2hpbGRQID0gY2hpbGQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShiYXNlUCk7XG4gICAgY2hpbGRQLmNvbnN0cnVjdG9yID0gY2hpbGQ7XG4gICAgY2hpbGRQLl9zdXBlciA9IGJhc2VQO1xuXG4gICAgaWYgKHByb3BlcnRpZXMpIHtcbiAgICAgICAgYXNzaWduKGNoaWxkUCwgcHJvcGVydGllcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIHNpbXBsZSBmdW5jdGlvbiBiaW5kXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gYmluZEZuKGZuLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGJvdW5kRm4oKSB7XG4gICAgICAgIHJldHVybiBmbi5hcHBseShjb250ZXh0LCBhcmd1bWVudHMpO1xuICAgIH07XG59XG5cbi8qKlxuICogbGV0IGEgYm9vbGVhbiB2YWx1ZSBhbHNvIGJlIGEgZnVuY3Rpb24gdGhhdCBtdXN0IHJldHVybiBhIGJvb2xlYW5cbiAqIHRoaXMgZmlyc3QgaXRlbSBpbiBhcmdzIHdpbGwgYmUgdXNlZCBhcyB0aGUgY29udGV4dFxuICogQHBhcmFtIHtCb29sZWFufEZ1bmN0aW9ufSB2YWxcbiAqIEBwYXJhbSB7QXJyYXl9IFthcmdzXVxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGJvb2xPckZuKHZhbCwgYXJncykge1xuICAgIGlmICh0eXBlb2YgdmFsID09IFRZUEVfRlVOQ1RJT04pIHtcbiAgICAgICAgcmV0dXJuIHZhbC5hcHBseShhcmdzID8gYXJnc1swXSB8fCB1bmRlZmluZWQgOiB1bmRlZmluZWQsIGFyZ3MpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsO1xufVxuXG4vKipcbiAqIHVzZSB0aGUgdmFsMiB3aGVuIHZhbDEgaXMgdW5kZWZpbmVkXG4gKiBAcGFyYW0geyp9IHZhbDFcbiAqIEBwYXJhbSB7Kn0gdmFsMlxuICogQHJldHVybnMgeyp9XG4gKi9cbmZ1bmN0aW9uIGlmVW5kZWZpbmVkKHZhbDEsIHZhbDIpIHtcbiAgICByZXR1cm4gKHZhbDEgPT09IHVuZGVmaW5lZCkgPyB2YWwyIDogdmFsMTtcbn1cblxuLyoqXG4gKiBhZGRFdmVudExpc3RlbmVyIHdpdGggbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2VcbiAqIEBwYXJhbSB7RXZlbnRUYXJnZXR9IHRhcmdldFxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gKi9cbmZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXJzKHRhcmdldCwgdHlwZXMsIGhhbmRsZXIpIHtcbiAgICBlYWNoKHNwbGl0U3RyKHR5cGVzKSwgZnVuY3Rpb24odHlwZSkge1xuICAgICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCBmYWxzZSk7XG4gICAgfSk7XG59XG5cbi8qKlxuICogcmVtb3ZlRXZlbnRMaXN0ZW5lciB3aXRoIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlXG4gKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fSB0YXJnZXRcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuICovXG5mdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVycyh0YXJnZXQsIHR5cGVzLCBoYW5kbGVyKSB7XG4gICAgZWFjaChzcGxpdFN0cih0eXBlcyksIGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlciwgZmFsc2UpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIGZpbmQgaWYgYSBub2RlIGlzIGluIHRoZSBnaXZlbiBwYXJlbnRcbiAqIEBtZXRob2QgaGFzUGFyZW50XG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBub2RlXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBwYXJlbnRcbiAqIEByZXR1cm4ge0Jvb2xlYW59IGZvdW5kXG4gKi9cbmZ1bmN0aW9uIGhhc1BhcmVudChub2RlLCBwYXJlbnQpIHtcbiAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICBpZiAobm9kZSA9PSBwYXJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBzbWFsbCBpbmRleE9mIHdyYXBwZXJcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaW5kXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gZm91bmRcbiAqL1xuZnVuY3Rpb24gaW5TdHIoc3RyLCBmaW5kKSB7XG4gICAgcmV0dXJuIHN0ci5pbmRleE9mKGZpbmQpID4gLTE7XG59XG5cbi8qKlxuICogc3BsaXQgc3RyaW5nIG9uIHdoaXRlc3BhY2VcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm5zIHtBcnJheX0gd29yZHNcbiAqL1xuZnVuY3Rpb24gc3BsaXRTdHIoc3RyKSB7XG4gICAgcmV0dXJuIHN0ci50cmltKCkuc3BsaXQoL1xccysvZyk7XG59XG5cbi8qKlxuICogZmluZCBpZiBhIGFycmF5IGNvbnRhaW5zIHRoZSBvYmplY3QgdXNpbmcgaW5kZXhPZiBvciBhIHNpbXBsZSBwb2x5RmlsbFxuICogQHBhcmFtIHtBcnJheX0gc3JjXG4gKiBAcGFyYW0ge1N0cmluZ30gZmluZFxuICogQHBhcmFtIHtTdHJpbmd9IFtmaW5kQnlLZXldXG4gKiBAcmV0dXJuIHtCb29sZWFufE51bWJlcn0gZmFsc2Ugd2hlbiBub3QgZm91bmQsIG9yIHRoZSBpbmRleFxuICovXG5mdW5jdGlvbiBpbkFycmF5KHNyYywgZmluZCwgZmluZEJ5S2V5KSB7XG4gICAgaWYgKHNyYy5pbmRleE9mICYmICFmaW5kQnlLZXkpIHtcbiAgICAgICAgcmV0dXJuIHNyYy5pbmRleE9mKGZpbmQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCBzcmMubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoKGZpbmRCeUtleSAmJiBzcmNbaV1bZmluZEJ5S2V5XSA9PSBmaW5kKSB8fCAoIWZpbmRCeUtleSAmJiBzcmNbaV0gPT09IGZpbmQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbn1cblxuLyoqXG4gKiBjb252ZXJ0IGFycmF5LWxpa2Ugb2JqZWN0cyB0byByZWFsIGFycmF5c1xuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybnMge0FycmF5fVxuICovXG5mdW5jdGlvbiB0b0FycmF5KG9iaikge1xuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChvYmosIDApO1xufVxuXG4vKipcbiAqIHVuaXF1ZSBhcnJheSB3aXRoIG9iamVjdHMgYmFzZWQgb24gYSBrZXkgKGxpa2UgJ2lkJykgb3IganVzdCBieSB0aGUgYXJyYXkncyB2YWx1ZVxuICogQHBhcmFtIHtBcnJheX0gc3JjIFt7aWQ6MX0se2lkOjJ9LHtpZDoxfV1cbiAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuICogQHBhcmFtIHtCb29sZWFufSBbc29ydD1GYWxzZV1cbiAqIEByZXR1cm5zIHtBcnJheX0gW3tpZDoxfSx7aWQ6Mn1dXG4gKi9cbmZ1bmN0aW9uIHVuaXF1ZUFycmF5KHNyYywga2V5LCBzb3J0KSB7XG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICB2YXIgdmFsdWVzID0gW107XG4gICAgdmFyIGkgPSAwO1xuXG4gICAgd2hpbGUgKGkgPCBzcmMubGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWwgPSBrZXkgPyBzcmNbaV1ba2V5XSA6IHNyY1tpXTtcbiAgICAgICAgaWYgKGluQXJyYXkodmFsdWVzLCB2YWwpIDwgMCkge1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHNyY1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWVzW2ldID0gdmFsO1xuICAgICAgICBpKys7XG4gICAgfVxuXG4gICAgaWYgKHNvcnQpIHtcbiAgICAgICAgaWYgKCFrZXkpIHtcbiAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLnNvcnQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLnNvcnQoZnVuY3Rpb24gc29ydFVuaXF1ZUFycmF5KGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYVtrZXldID4gYltrZXldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbn1cblxuLyoqXG4gKiBnZXQgdGhlIHByZWZpeGVkIHByb3BlcnR5XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlcbiAqIEByZXR1cm5zIHtTdHJpbmd8VW5kZWZpbmVkfSBwcmVmaXhlZFxuICovXG5mdW5jdGlvbiBwcmVmaXhlZChvYmosIHByb3BlcnR5KSB7XG4gICAgdmFyIHByZWZpeCwgcHJvcDtcbiAgICB2YXIgY2FtZWxQcm9wID0gcHJvcGVydHlbMF0udG9VcHBlckNhc2UoKSArIHByb3BlcnR5LnNsaWNlKDEpO1xuXG4gICAgdmFyIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgVkVORE9SX1BSRUZJWEVTLmxlbmd0aCkge1xuICAgICAgICBwcmVmaXggPSBWRU5ET1JfUFJFRklYRVNbaV07XG4gICAgICAgIHByb3AgPSAocHJlZml4KSA/IHByZWZpeCArIGNhbWVsUHJvcCA6IHByb3BlcnR5O1xuXG4gICAgICAgIGlmIChwcm9wIGluIG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIHByb3A7XG4gICAgICAgIH1cbiAgICAgICAgaSsrO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIGdldCBhIHVuaXF1ZSBpZFxuICogQHJldHVybnMge251bWJlcn0gdW5pcXVlSWRcbiAqL1xudmFyIF91bmlxdWVJZCA9IDE7XG5mdW5jdGlvbiB1bmlxdWVJZCgpIHtcbiAgICByZXR1cm4gX3VuaXF1ZUlkKys7XG59XG5cbi8qKlxuICogZ2V0IHRoZSB3aW5kb3cgb2JqZWN0IG9mIGFuIGVsZW1lbnRcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm5zIHtEb2N1bWVudFZpZXd8V2luZG93fVxuICovXG5mdW5jdGlvbiBnZXRXaW5kb3dGb3JFbGVtZW50KGVsZW1lbnQpIHtcbiAgICB2YXIgZG9jID0gZWxlbWVudC5vd25lckRvY3VtZW50IHx8IGVsZW1lbnQ7XG4gICAgcmV0dXJuIChkb2MuZGVmYXVsdFZpZXcgfHwgZG9jLnBhcmVudFdpbmRvdyB8fCB3aW5kb3cpO1xufVxuXG52YXIgTU9CSUxFX1JFR0VYID0gL21vYmlsZXx0YWJsZXR8aXAoYWR8aG9uZXxvZCl8YW5kcm9pZC9pO1xuXG52YXIgU1VQUE9SVF9UT1VDSCA9ICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpO1xudmFyIFNVUFBPUlRfUE9JTlRFUl9FVkVOVFMgPSBwcmVmaXhlZCh3aW5kb3csICdQb2ludGVyRXZlbnQnKSAhPT0gdW5kZWZpbmVkO1xudmFyIFNVUFBPUlRfT05MWV9UT1VDSCA9IFNVUFBPUlRfVE9VQ0ggJiYgTU9CSUxFX1JFR0VYLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5cbnZhciBJTlBVVF9UWVBFX1RPVUNIID0gJ3RvdWNoJztcbnZhciBJTlBVVF9UWVBFX1BFTiA9ICdwZW4nO1xudmFyIElOUFVUX1RZUEVfTU9VU0UgPSAnbW91c2UnO1xudmFyIElOUFVUX1RZUEVfS0lORUNUID0gJ2tpbmVjdCc7XG5cbnZhciBDT01QVVRFX0lOVEVSVkFMID0gMjU7XG5cbnZhciBJTlBVVF9TVEFSVCA9IDE7XG52YXIgSU5QVVRfTU9WRSA9IDI7XG52YXIgSU5QVVRfRU5EID0gNDtcbnZhciBJTlBVVF9DQU5DRUwgPSA4O1xuXG52YXIgRElSRUNUSU9OX05PTkUgPSAxO1xudmFyIERJUkVDVElPTl9MRUZUID0gMjtcbnZhciBESVJFQ1RJT05fUklHSFQgPSA0O1xudmFyIERJUkVDVElPTl9VUCA9IDg7XG52YXIgRElSRUNUSU9OX0RPV04gPSAxNjtcblxudmFyIERJUkVDVElPTl9IT1JJWk9OVEFMID0gRElSRUNUSU9OX0xFRlQgfCBESVJFQ1RJT05fUklHSFQ7XG52YXIgRElSRUNUSU9OX1ZFUlRJQ0FMID0gRElSRUNUSU9OX1VQIHwgRElSRUNUSU9OX0RPV047XG52YXIgRElSRUNUSU9OX0FMTCA9IERJUkVDVElPTl9IT1JJWk9OVEFMIHwgRElSRUNUSU9OX1ZFUlRJQ0FMO1xuXG52YXIgUFJPUFNfWFkgPSBbJ3gnLCAneSddO1xudmFyIFBST1BTX0NMSUVOVF9YWSA9IFsnY2xpZW50WCcsICdjbGllbnRZJ107XG5cbi8qKlxuICogY3JlYXRlIG5ldyBpbnB1dCB0eXBlIG1hbmFnZXJcbiAqIEBwYXJhbSB7TWFuYWdlcn0gbWFuYWdlclxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm5zIHtJbnB1dH1cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBJbnB1dChtYW5hZ2VyLCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLm1hbmFnZXIgPSBtYW5hZ2VyO1xuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB0aGlzLmVsZW1lbnQgPSBtYW5hZ2VyLmVsZW1lbnQ7XG4gICAgdGhpcy50YXJnZXQgPSBtYW5hZ2VyLm9wdGlvbnMuaW5wdXRUYXJnZXQ7XG5cbiAgICAvLyBzbWFsbGVyIHdyYXBwZXIgYXJvdW5kIHRoZSBoYW5kbGVyLCBmb3IgdGhlIHNjb3BlIGFuZCB0aGUgZW5hYmxlZCBzdGF0ZSBvZiB0aGUgbWFuYWdlcixcbiAgICAvLyBzbyB3aGVuIGRpc2FibGVkIHRoZSBpbnB1dCBldmVudHMgYXJlIGNvbXBsZXRlbHkgYnlwYXNzZWQuXG4gICAgdGhpcy5kb21IYW5kbGVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgaWYgKGJvb2xPckZuKG1hbmFnZXIub3B0aW9ucy5lbmFibGUsIFttYW5hZ2VyXSkpIHtcbiAgICAgICAgICAgIHNlbGYuaGFuZGxlcihldik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5pbml0KCk7XG5cbn1cblxuSW5wdXQucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIHNob3VsZCBoYW5kbGUgdGhlIGlucHV0RXZlbnQgZGF0YSBhbmQgdHJpZ2dlciB0aGUgY2FsbGJhY2tcbiAgICAgKiBAdmlydHVhbFxuICAgICAqL1xuICAgIGhhbmRsZXI6IGZ1bmN0aW9uKCkgeyB9LFxuXG4gICAgLyoqXG4gICAgICogYmluZCB0aGUgZXZlbnRzXG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZXZFbCAmJiBhZGRFdmVudExpc3RlbmVycyh0aGlzLmVsZW1lbnQsIHRoaXMuZXZFbCwgdGhpcy5kb21IYW5kbGVyKTtcbiAgICAgICAgdGhpcy5ldlRhcmdldCAmJiBhZGRFdmVudExpc3RlbmVycyh0aGlzLnRhcmdldCwgdGhpcy5ldlRhcmdldCwgdGhpcy5kb21IYW5kbGVyKTtcbiAgICAgICAgdGhpcy5ldldpbiAmJiBhZGRFdmVudExpc3RlbmVycyhnZXRXaW5kb3dGb3JFbGVtZW50KHRoaXMuZWxlbWVudCksIHRoaXMuZXZXaW4sIHRoaXMuZG9tSGFuZGxlcik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHVuYmluZCB0aGUgZXZlbnRzXG4gICAgICovXG4gICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZXZFbCAmJiByZW1vdmVFdmVudExpc3RlbmVycyh0aGlzLmVsZW1lbnQsIHRoaXMuZXZFbCwgdGhpcy5kb21IYW5kbGVyKTtcbiAgICAgICAgdGhpcy5ldlRhcmdldCAmJiByZW1vdmVFdmVudExpc3RlbmVycyh0aGlzLnRhcmdldCwgdGhpcy5ldlRhcmdldCwgdGhpcy5kb21IYW5kbGVyKTtcbiAgICAgICAgdGhpcy5ldldpbiAmJiByZW1vdmVFdmVudExpc3RlbmVycyhnZXRXaW5kb3dGb3JFbGVtZW50KHRoaXMuZWxlbWVudCksIHRoaXMuZXZXaW4sIHRoaXMuZG9tSGFuZGxlcik7XG4gICAgfVxufTtcblxuLyoqXG4gKiBjcmVhdGUgbmV3IGlucHV0IHR5cGUgbWFuYWdlclxuICogY2FsbGVkIGJ5IHRoZSBNYW5hZ2VyIGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0hhbW1lcn0gbWFuYWdlclxuICogQHJldHVybnMge0lucHV0fVxuICovXG5mdW5jdGlvbiBjcmVhdGVJbnB1dEluc3RhbmNlKG1hbmFnZXIpIHtcbiAgICB2YXIgVHlwZTtcbiAgICB2YXIgaW5wdXRDbGFzcyA9IG1hbmFnZXIub3B0aW9ucy5pbnB1dENsYXNzO1xuXG4gICAgaWYgKGlucHV0Q2xhc3MpIHtcbiAgICAgICAgVHlwZSA9IGlucHV0Q2xhc3M7XG4gICAgfSBlbHNlIGlmIChTVVBQT1JUX1BPSU5URVJfRVZFTlRTKSB7XG4gICAgICAgIFR5cGUgPSBQb2ludGVyRXZlbnRJbnB1dDtcbiAgICB9IGVsc2UgaWYgKFNVUFBPUlRfT05MWV9UT1VDSCkge1xuICAgICAgICBUeXBlID0gVG91Y2hJbnB1dDtcbiAgICB9IGVsc2UgaWYgKCFTVVBQT1JUX1RPVUNIKSB7XG4gICAgICAgIFR5cGUgPSBNb3VzZUlucHV0O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIFR5cGUgPSBUb3VjaE1vdXNlSW5wdXQ7XG4gICAgfVxuICAgIHJldHVybiBuZXcgKFR5cGUpKG1hbmFnZXIsIGlucHV0SGFuZGxlcik7XG59XG5cbi8qKlxuICogaGFuZGxlIGlucHV0IGV2ZW50c1xuICogQHBhcmFtIHtNYW5hZ2VyfSBtYW5hZ2VyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRUeXBlXG4gKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAqL1xuZnVuY3Rpb24gaW5wdXRIYW5kbGVyKG1hbmFnZXIsIGV2ZW50VHlwZSwgaW5wdXQpIHtcbiAgICB2YXIgcG9pbnRlcnNMZW4gPSBpbnB1dC5wb2ludGVycy5sZW5ndGg7XG4gICAgdmFyIGNoYW5nZWRQb2ludGVyc0xlbiA9IGlucHV0LmNoYW5nZWRQb2ludGVycy5sZW5ndGg7XG4gICAgdmFyIGlzRmlyc3QgPSAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQgJiYgKHBvaW50ZXJzTGVuIC0gY2hhbmdlZFBvaW50ZXJzTGVuID09PSAwKSk7XG4gICAgdmFyIGlzRmluYWwgPSAoZXZlbnRUeXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkgJiYgKHBvaW50ZXJzTGVuIC0gY2hhbmdlZFBvaW50ZXJzTGVuID09PSAwKSk7XG5cbiAgICBpbnB1dC5pc0ZpcnN0ID0gISFpc0ZpcnN0O1xuICAgIGlucHV0LmlzRmluYWwgPSAhIWlzRmluYWw7XG5cbiAgICBpZiAoaXNGaXJzdCkge1xuICAgICAgICBtYW5hZ2VyLnNlc3Npb24gPSB7fTtcbiAgICB9XG5cbiAgICAvLyBzb3VyY2UgZXZlbnQgaXMgdGhlIG5vcm1hbGl6ZWQgdmFsdWUgb2YgdGhlIGRvbUV2ZW50c1xuICAgIC8vIGxpa2UgJ3RvdWNoc3RhcnQsIG1vdXNldXAsIHBvaW50ZXJkb3duJ1xuICAgIGlucHV0LmV2ZW50VHlwZSA9IGV2ZW50VHlwZTtcblxuICAgIC8vIGNvbXB1dGUgc2NhbGUsIHJvdGF0aW9uIGV0Y1xuICAgIGNvbXB1dGVJbnB1dERhdGEobWFuYWdlciwgaW5wdXQpO1xuXG4gICAgLy8gZW1pdCBzZWNyZXQgZXZlbnRcbiAgICBtYW5hZ2VyLmVtaXQoJ2hhbW1lci5pbnB1dCcsIGlucHV0KTtcblxuICAgIG1hbmFnZXIucmVjb2duaXplKGlucHV0KTtcbiAgICBtYW5hZ2VyLnNlc3Npb24ucHJldklucHV0ID0gaW5wdXQ7XG59XG5cbi8qKlxuICogZXh0ZW5kIHRoZSBkYXRhIHdpdGggc29tZSB1c2FibGUgcHJvcGVydGllcyBsaWtlIHNjYWxlLCByb3RhdGUsIHZlbG9jaXR5IGV0Y1xuICogQHBhcmFtIHtPYmplY3R9IG1hbmFnZXJcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICovXG5mdW5jdGlvbiBjb21wdXRlSW5wdXREYXRhKG1hbmFnZXIsIGlucHV0KSB7XG4gICAgdmFyIHNlc3Npb24gPSBtYW5hZ2VyLnNlc3Npb247XG4gICAgdmFyIHBvaW50ZXJzID0gaW5wdXQucG9pbnRlcnM7XG4gICAgdmFyIHBvaW50ZXJzTGVuZ3RoID0gcG9pbnRlcnMubGVuZ3RoO1xuXG4gICAgLy8gc3RvcmUgdGhlIGZpcnN0IGlucHV0IHRvIGNhbGN1bGF0ZSB0aGUgZGlzdGFuY2UgYW5kIGRpcmVjdGlvblxuICAgIGlmICghc2Vzc2lvbi5maXJzdElucHV0KSB7XG4gICAgICAgIHNlc3Npb24uZmlyc3RJbnB1dCA9IHNpbXBsZUNsb25lSW5wdXREYXRhKGlucHV0KTtcbiAgICB9XG5cbiAgICAvLyB0byBjb21wdXRlIHNjYWxlIGFuZCByb3RhdGlvbiB3ZSBuZWVkIHRvIHN0b3JlIHRoZSBtdWx0aXBsZSB0b3VjaGVzXG4gICAgaWYgKHBvaW50ZXJzTGVuZ3RoID4gMSAmJiAhc2Vzc2lvbi5maXJzdE11bHRpcGxlKSB7XG4gICAgICAgIHNlc3Npb24uZmlyc3RNdWx0aXBsZSA9IHNpbXBsZUNsb25lSW5wdXREYXRhKGlucHV0KTtcbiAgICB9IGVsc2UgaWYgKHBvaW50ZXJzTGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHNlc3Npb24uZmlyc3RNdWx0aXBsZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBmaXJzdElucHV0ID0gc2Vzc2lvbi5maXJzdElucHV0O1xuICAgIHZhciBmaXJzdE11bHRpcGxlID0gc2Vzc2lvbi5maXJzdE11bHRpcGxlO1xuICAgIHZhciBvZmZzZXRDZW50ZXIgPSBmaXJzdE11bHRpcGxlID8gZmlyc3RNdWx0aXBsZS5jZW50ZXIgOiBmaXJzdElucHV0LmNlbnRlcjtcblxuICAgIHZhciBjZW50ZXIgPSBpbnB1dC5jZW50ZXIgPSBnZXRDZW50ZXIocG9pbnRlcnMpO1xuICAgIGlucHV0LnRpbWVTdGFtcCA9IG5vdygpO1xuICAgIGlucHV0LmRlbHRhVGltZSA9IGlucHV0LnRpbWVTdGFtcCAtIGZpcnN0SW5wdXQudGltZVN0YW1wO1xuXG4gICAgaW5wdXQuYW5nbGUgPSBnZXRBbmdsZShvZmZzZXRDZW50ZXIsIGNlbnRlcik7XG4gICAgaW5wdXQuZGlzdGFuY2UgPSBnZXREaXN0YW5jZShvZmZzZXRDZW50ZXIsIGNlbnRlcik7XG5cbiAgICBjb21wdXRlRGVsdGFYWShzZXNzaW9uLCBpbnB1dCk7XG4gICAgaW5wdXQub2Zmc2V0RGlyZWN0aW9uID0gZ2V0RGlyZWN0aW9uKGlucHV0LmRlbHRhWCwgaW5wdXQuZGVsdGFZKTtcblxuICAgIHZhciBvdmVyYWxsVmVsb2NpdHkgPSBnZXRWZWxvY2l0eShpbnB1dC5kZWx0YVRpbWUsIGlucHV0LmRlbHRhWCwgaW5wdXQuZGVsdGFZKTtcbiAgICBpbnB1dC5vdmVyYWxsVmVsb2NpdHlYID0gb3ZlcmFsbFZlbG9jaXR5Lng7XG4gICAgaW5wdXQub3ZlcmFsbFZlbG9jaXR5WSA9IG92ZXJhbGxWZWxvY2l0eS55O1xuICAgIGlucHV0Lm92ZXJhbGxWZWxvY2l0eSA9IChhYnMob3ZlcmFsbFZlbG9jaXR5LngpID4gYWJzKG92ZXJhbGxWZWxvY2l0eS55KSkgPyBvdmVyYWxsVmVsb2NpdHkueCA6IG92ZXJhbGxWZWxvY2l0eS55O1xuXG4gICAgaW5wdXQuc2NhbGUgPSBmaXJzdE11bHRpcGxlID8gZ2V0U2NhbGUoZmlyc3RNdWx0aXBsZS5wb2ludGVycywgcG9pbnRlcnMpIDogMTtcbiAgICBpbnB1dC5yb3RhdGlvbiA9IGZpcnN0TXVsdGlwbGUgPyBnZXRSb3RhdGlvbihmaXJzdE11bHRpcGxlLnBvaW50ZXJzLCBwb2ludGVycykgOiAwO1xuXG4gICAgaW5wdXQubWF4UG9pbnRlcnMgPSAhc2Vzc2lvbi5wcmV2SW5wdXQgPyBpbnB1dC5wb2ludGVycy5sZW5ndGggOiAoKGlucHV0LnBvaW50ZXJzLmxlbmd0aCA+XG4gICAgICAgIHNlc3Npb24ucHJldklucHV0Lm1heFBvaW50ZXJzKSA/IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA6IHNlc3Npb24ucHJldklucHV0Lm1heFBvaW50ZXJzKTtcblxuICAgIGNvbXB1dGVJbnRlcnZhbElucHV0RGF0YShzZXNzaW9uLCBpbnB1dCk7XG5cbiAgICAvLyBmaW5kIHRoZSBjb3JyZWN0IHRhcmdldFxuICAgIHZhciB0YXJnZXQgPSBtYW5hZ2VyLmVsZW1lbnQ7XG4gICAgaWYgKGhhc1BhcmVudChpbnB1dC5zcmNFdmVudC50YXJnZXQsIHRhcmdldCkpIHtcbiAgICAgICAgdGFyZ2V0ID0gaW5wdXQuc3JjRXZlbnQudGFyZ2V0O1xuICAgIH1cbiAgICBpbnB1dC50YXJnZXQgPSB0YXJnZXQ7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVEZWx0YVhZKHNlc3Npb24sIGlucHV0KSB7XG4gICAgdmFyIGNlbnRlciA9IGlucHV0LmNlbnRlcjtcbiAgICB2YXIgb2Zmc2V0ID0gc2Vzc2lvbi5vZmZzZXREZWx0YSB8fCB7fTtcbiAgICB2YXIgcHJldkRlbHRhID0gc2Vzc2lvbi5wcmV2RGVsdGEgfHwge307XG4gICAgdmFyIHByZXZJbnB1dCA9IHNlc3Npb24ucHJldklucHV0IHx8IHt9O1xuXG4gICAgaWYgKGlucHV0LmV2ZW50VHlwZSA9PT0gSU5QVVRfU1RBUlQgfHwgcHJldklucHV0LmV2ZW50VHlwZSA9PT0gSU5QVVRfRU5EKSB7XG4gICAgICAgIHByZXZEZWx0YSA9IHNlc3Npb24ucHJldkRlbHRhID0ge1xuICAgICAgICAgICAgeDogcHJldklucHV0LmRlbHRhWCB8fCAwLFxuICAgICAgICAgICAgeTogcHJldklucHV0LmRlbHRhWSB8fCAwXG4gICAgICAgIH07XG5cbiAgICAgICAgb2Zmc2V0ID0gc2Vzc2lvbi5vZmZzZXREZWx0YSA9IHtcbiAgICAgICAgICAgIHg6IGNlbnRlci54LFxuICAgICAgICAgICAgeTogY2VudGVyLnlcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBpbnB1dC5kZWx0YVggPSBwcmV2RGVsdGEueCArIChjZW50ZXIueCAtIG9mZnNldC54KTtcbiAgICBpbnB1dC5kZWx0YVkgPSBwcmV2RGVsdGEueSArIChjZW50ZXIueSAtIG9mZnNldC55KTtcbn1cblxuLyoqXG4gKiB2ZWxvY2l0eSBpcyBjYWxjdWxhdGVkIGV2ZXJ5IHggbXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBzZXNzaW9uXG4gKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAqL1xuZnVuY3Rpb24gY29tcHV0ZUludGVydmFsSW5wdXREYXRhKHNlc3Npb24sIGlucHV0KSB7XG4gICAgdmFyIGxhc3QgPSBzZXNzaW9uLmxhc3RJbnRlcnZhbCB8fCBpbnB1dCxcbiAgICAgICAgZGVsdGFUaW1lID0gaW5wdXQudGltZVN0YW1wIC0gbGFzdC50aW1lU3RhbXAsXG4gICAgICAgIHZlbG9jaXR5LCB2ZWxvY2l0eVgsIHZlbG9jaXR5WSwgZGlyZWN0aW9uO1xuXG4gICAgaWYgKGlucHV0LmV2ZW50VHlwZSAhPSBJTlBVVF9DQU5DRUwgJiYgKGRlbHRhVGltZSA+IENPTVBVVEVfSU5URVJWQUwgfHwgbGFzdC52ZWxvY2l0eSA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICB2YXIgZGVsdGFYID0gaW5wdXQuZGVsdGFYIC0gbGFzdC5kZWx0YVg7XG4gICAgICAgIHZhciBkZWx0YVkgPSBpbnB1dC5kZWx0YVkgLSBsYXN0LmRlbHRhWTtcblxuICAgICAgICB2YXIgdiA9IGdldFZlbG9jaXR5KGRlbHRhVGltZSwgZGVsdGFYLCBkZWx0YVkpO1xuICAgICAgICB2ZWxvY2l0eVggPSB2Lng7XG4gICAgICAgIHZlbG9jaXR5WSA9IHYueTtcbiAgICAgICAgdmVsb2NpdHkgPSAoYWJzKHYueCkgPiBhYnModi55KSkgPyB2LnggOiB2Lnk7XG4gICAgICAgIGRpcmVjdGlvbiA9IGdldERpcmVjdGlvbihkZWx0YVgsIGRlbHRhWSk7XG5cbiAgICAgICAgc2Vzc2lvbi5sYXN0SW50ZXJ2YWwgPSBpbnB1dDtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyB1c2UgbGF0ZXN0IHZlbG9jaXR5IGluZm8gaWYgaXQgZG9lc24ndCBvdmVydGFrZSBhIG1pbmltdW0gcGVyaW9kXG4gICAgICAgIHZlbG9jaXR5ID0gbGFzdC52ZWxvY2l0eTtcbiAgICAgICAgdmVsb2NpdHlYID0gbGFzdC52ZWxvY2l0eVg7XG4gICAgICAgIHZlbG9jaXR5WSA9IGxhc3QudmVsb2NpdHlZO1xuICAgICAgICBkaXJlY3Rpb24gPSBsYXN0LmRpcmVjdGlvbjtcbiAgICB9XG5cbiAgICBpbnB1dC52ZWxvY2l0eSA9IHZlbG9jaXR5O1xuICAgIGlucHV0LnZlbG9jaXR5WCA9IHZlbG9jaXR5WDtcbiAgICBpbnB1dC52ZWxvY2l0eVkgPSB2ZWxvY2l0eVk7XG4gICAgaW5wdXQuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xufVxuXG4vKipcbiAqIGNyZWF0ZSBhIHNpbXBsZSBjbG9uZSBmcm9tIHRoZSBpbnB1dCB1c2VkIGZvciBzdG9yYWdlIG9mIGZpcnN0SW5wdXQgYW5kIGZpcnN0TXVsdGlwbGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICogQHJldHVybnMge09iamVjdH0gY2xvbmVkSW5wdXREYXRhXG4gKi9cbmZ1bmN0aW9uIHNpbXBsZUNsb25lSW5wdXREYXRhKGlucHV0KSB7XG4gICAgLy8gbWFrZSBhIHNpbXBsZSBjb3B5IG9mIHRoZSBwb2ludGVycyBiZWNhdXNlIHdlIHdpbGwgZ2V0IGEgcmVmZXJlbmNlIGlmIHdlIGRvbid0XG4gICAgLy8gd2Ugb25seSBuZWVkIGNsaWVudFhZIGZvciB0aGUgY2FsY3VsYXRpb25zXG4gICAgdmFyIHBvaW50ZXJzID0gW107XG4gICAgdmFyIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgaW5wdXQucG9pbnRlcnMubGVuZ3RoKSB7XG4gICAgICAgIHBvaW50ZXJzW2ldID0ge1xuICAgICAgICAgICAgY2xpZW50WDogcm91bmQoaW5wdXQucG9pbnRlcnNbaV0uY2xpZW50WCksXG4gICAgICAgICAgICBjbGllbnRZOiByb3VuZChpbnB1dC5wb2ludGVyc1tpXS5jbGllbnRZKVxuICAgICAgICB9O1xuICAgICAgICBpKys7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGltZVN0YW1wOiBub3coKSxcbiAgICAgICAgcG9pbnRlcnM6IHBvaW50ZXJzLFxuICAgICAgICBjZW50ZXI6IGdldENlbnRlcihwb2ludGVycyksXG4gICAgICAgIGRlbHRhWDogaW5wdXQuZGVsdGFYLFxuICAgICAgICBkZWx0YVk6IGlucHV0LmRlbHRhWVxuICAgIH07XG59XG5cbi8qKlxuICogZ2V0IHRoZSBjZW50ZXIgb2YgYWxsIHRoZSBwb2ludGVyc1xuICogQHBhcmFtIHtBcnJheX0gcG9pbnRlcnNcbiAqIEByZXR1cm4ge09iamVjdH0gY2VudGVyIGNvbnRhaW5zIGB4YCBhbmQgYHlgIHByb3BlcnRpZXNcbiAqL1xuZnVuY3Rpb24gZ2V0Q2VudGVyKHBvaW50ZXJzKSB7XG4gICAgdmFyIHBvaW50ZXJzTGVuZ3RoID0gcG9pbnRlcnMubGVuZ3RoO1xuXG4gICAgLy8gbm8gbmVlZCB0byBsb29wIHdoZW4gb25seSBvbmUgdG91Y2hcbiAgICBpZiAocG9pbnRlcnNMZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IHJvdW5kKHBvaW50ZXJzWzBdLmNsaWVudFgpLFxuICAgICAgICAgICAgeTogcm91bmQocG9pbnRlcnNbMF0uY2xpZW50WSlcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgeCA9IDAsIHkgPSAwLCBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHBvaW50ZXJzTGVuZ3RoKSB7XG4gICAgICAgIHggKz0gcG9pbnRlcnNbaV0uY2xpZW50WDtcbiAgICAgICAgeSArPSBwb2ludGVyc1tpXS5jbGllbnRZO1xuICAgICAgICBpKys7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogcm91bmQoeCAvIHBvaW50ZXJzTGVuZ3RoKSxcbiAgICAgICAgeTogcm91bmQoeSAvIHBvaW50ZXJzTGVuZ3RoKVxuICAgIH07XG59XG5cbi8qKlxuICogY2FsY3VsYXRlIHRoZSB2ZWxvY2l0eSBiZXR3ZWVuIHR3byBwb2ludHMuIHVuaXQgaXMgaW4gcHggcGVyIG1zLlxuICogQHBhcmFtIHtOdW1iZXJ9IGRlbHRhVGltZVxuICogQHBhcmFtIHtOdW1iZXJ9IHhcbiAqIEBwYXJhbSB7TnVtYmVyfSB5XG4gKiBAcmV0dXJuIHtPYmplY3R9IHZlbG9jaXR5IGB4YCBhbmQgYHlgXG4gKi9cbmZ1bmN0aW9uIGdldFZlbG9jaXR5KGRlbHRhVGltZSwgeCwgeSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHg6IHggLyBkZWx0YVRpbWUgfHwgMCxcbiAgICAgICAgeTogeSAvIGRlbHRhVGltZSB8fCAwXG4gICAgfTtcbn1cblxuLyoqXG4gKiBnZXQgdGhlIGRpcmVjdGlvbiBiZXR3ZWVuIHR3byBwb2ludHNcbiAqIEBwYXJhbSB7TnVtYmVyfSB4XG4gKiBAcGFyYW0ge051bWJlcn0geVxuICogQHJldHVybiB7TnVtYmVyfSBkaXJlY3Rpb25cbiAqL1xuZnVuY3Rpb24gZ2V0RGlyZWN0aW9uKHgsIHkpIHtcbiAgICBpZiAoeCA9PT0geSkge1xuICAgICAgICByZXR1cm4gRElSRUNUSU9OX05PTkU7XG4gICAgfVxuXG4gICAgaWYgKGFicyh4KSA+PSBhYnMoeSkpIHtcbiAgICAgICAgcmV0dXJuIHggPCAwID8gRElSRUNUSU9OX0xFRlQgOiBESVJFQ1RJT05fUklHSFQ7XG4gICAgfVxuICAgIHJldHVybiB5IDwgMCA/IERJUkVDVElPTl9VUCA6IERJUkVDVElPTl9ET1dOO1xufVxuXG4vKipcbiAqIGNhbGN1bGF0ZSB0aGUgYWJzb2x1dGUgZGlzdGFuY2UgYmV0d2VlbiB0d28gcG9pbnRzXG4gKiBAcGFyYW0ge09iamVjdH0gcDEge3gsIHl9XG4gKiBAcGFyYW0ge09iamVjdH0gcDIge3gsIHl9XG4gKiBAcGFyYW0ge0FycmF5fSBbcHJvcHNdIGNvbnRhaW5pbmcgeCBhbmQgeSBrZXlzXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IGRpc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIGdldERpc3RhbmNlKHAxLCBwMiwgcHJvcHMpIHtcbiAgICBpZiAoIXByb3BzKSB7XG4gICAgICAgIHByb3BzID0gUFJPUFNfWFk7XG4gICAgfVxuICAgIHZhciB4ID0gcDJbcHJvcHNbMF1dIC0gcDFbcHJvcHNbMF1dLFxuICAgICAgICB5ID0gcDJbcHJvcHNbMV1dIC0gcDFbcHJvcHNbMV1dO1xuXG4gICAgcmV0dXJuIE1hdGguc3FydCgoeCAqIHgpICsgKHkgKiB5KSk7XG59XG5cbi8qKlxuICogY2FsY3VsYXRlIHRoZSBhbmdsZSBiZXR3ZWVuIHR3byBjb29yZGluYXRlc1xuICogQHBhcmFtIHtPYmplY3R9IHAxXG4gKiBAcGFyYW0ge09iamVjdH0gcDJcbiAqIEBwYXJhbSB7QXJyYXl9IFtwcm9wc10gY29udGFpbmluZyB4IGFuZCB5IGtleXNcbiAqIEByZXR1cm4ge051bWJlcn0gYW5nbGVcbiAqL1xuZnVuY3Rpb24gZ2V0QW5nbGUocDEsIHAyLCBwcm9wcykge1xuICAgIGlmICghcHJvcHMpIHtcbiAgICAgICAgcHJvcHMgPSBQUk9QU19YWTtcbiAgICB9XG4gICAgdmFyIHggPSBwMltwcm9wc1swXV0gLSBwMVtwcm9wc1swXV0sXG4gICAgICAgIHkgPSBwMltwcm9wc1sxXV0gLSBwMVtwcm9wc1sxXV07XG4gICAgcmV0dXJuIE1hdGguYXRhbjIoeSwgeCkgKiAxODAgLyBNYXRoLlBJO1xufVxuXG4vKipcbiAqIGNhbGN1bGF0ZSB0aGUgcm90YXRpb24gZGVncmVlcyBiZXR3ZWVuIHR3byBwb2ludGVyc2V0c1xuICogQHBhcmFtIHtBcnJheX0gc3RhcnQgYXJyYXkgb2YgcG9pbnRlcnNcbiAqIEBwYXJhbSB7QXJyYXl9IGVuZCBhcnJheSBvZiBwb2ludGVyc1xuICogQHJldHVybiB7TnVtYmVyfSByb3RhdGlvblxuICovXG5mdW5jdGlvbiBnZXRSb3RhdGlvbihzdGFydCwgZW5kKSB7XG4gICAgcmV0dXJuIGdldEFuZ2xlKGVuZFsxXSwgZW5kWzBdLCBQUk9QU19DTElFTlRfWFkpICsgZ2V0QW5nbGUoc3RhcnRbMV0sIHN0YXJ0WzBdLCBQUk9QU19DTElFTlRfWFkpO1xufVxuXG4vKipcbiAqIGNhbGN1bGF0ZSB0aGUgc2NhbGUgZmFjdG9yIGJldHdlZW4gdHdvIHBvaW50ZXJzZXRzXG4gKiBubyBzY2FsZSBpcyAxLCBhbmQgZ29lcyBkb3duIHRvIDAgd2hlbiBwaW5jaGVkIHRvZ2V0aGVyLCBhbmQgYmlnZ2VyIHdoZW4gcGluY2hlZCBvdXRcbiAqIEBwYXJhbSB7QXJyYXl9IHN0YXJ0IGFycmF5IG9mIHBvaW50ZXJzXG4gKiBAcGFyYW0ge0FycmF5fSBlbmQgYXJyYXkgb2YgcG9pbnRlcnNcbiAqIEByZXR1cm4ge051bWJlcn0gc2NhbGVcbiAqL1xuZnVuY3Rpb24gZ2V0U2NhbGUoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBnZXREaXN0YW5jZShlbmRbMF0sIGVuZFsxXSwgUFJPUFNfQ0xJRU5UX1hZKSAvIGdldERpc3RhbmNlKHN0YXJ0WzBdLCBzdGFydFsxXSwgUFJPUFNfQ0xJRU5UX1hZKTtcbn1cblxudmFyIE1PVVNFX0lOUFVUX01BUCA9IHtcbiAgICBtb3VzZWRvd246IElOUFVUX1NUQVJULFxuICAgIG1vdXNlbW92ZTogSU5QVVRfTU9WRSxcbiAgICBtb3VzZXVwOiBJTlBVVF9FTkRcbn07XG5cbnZhciBNT1VTRV9FTEVNRU5UX0VWRU5UUyA9ICdtb3VzZWRvd24nO1xudmFyIE1PVVNFX1dJTkRPV19FVkVOVFMgPSAnbW91c2Vtb3ZlIG1vdXNldXAnO1xuXG4vKipcbiAqIE1vdXNlIGV2ZW50cyBpbnB1dFxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBJbnB1dFxuICovXG5mdW5jdGlvbiBNb3VzZUlucHV0KCkge1xuICAgIHRoaXMuZXZFbCA9IE1PVVNFX0VMRU1FTlRfRVZFTlRTO1xuICAgIHRoaXMuZXZXaW4gPSBNT1VTRV9XSU5ET1dfRVZFTlRTO1xuXG4gICAgdGhpcy5wcmVzc2VkID0gZmFsc2U7IC8vIG1vdXNlZG93biBzdGF0ZVxuXG4gICAgSW5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuaW5oZXJpdChNb3VzZUlucHV0LCBJbnB1dCwge1xuICAgIC8qKlxuICAgICAqIGhhbmRsZSBtb3VzZSBldmVudHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZcbiAgICAgKi9cbiAgICBoYW5kbGVyOiBmdW5jdGlvbiBNRWhhbmRsZXIoZXYpIHtcbiAgICAgICAgdmFyIGV2ZW50VHlwZSA9IE1PVVNFX0lOUFVUX01BUFtldi50eXBlXTtcblxuICAgICAgICAvLyBvbiBzdGFydCB3ZSB3YW50IHRvIGhhdmUgdGhlIGxlZnQgbW91c2UgYnV0dG9uIGRvd25cbiAgICAgICAgaWYgKGV2ZW50VHlwZSAmIElOUFVUX1NUQVJUICYmIGV2LmJ1dHRvbiA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5wcmVzc2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9NT1ZFICYmIGV2LndoaWNoICE9PSAxKSB7XG4gICAgICAgICAgICBldmVudFR5cGUgPSBJTlBVVF9FTkQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtb3VzZSBtdXN0IGJlIGRvd25cbiAgICAgICAgaWYgKCF0aGlzLnByZXNzZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9FTkQpIHtcbiAgICAgICAgICAgIHRoaXMucHJlc3NlZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsIGV2ZW50VHlwZSwge1xuICAgICAgICAgICAgcG9pbnRlcnM6IFtldl0sXG4gICAgICAgICAgICBjaGFuZ2VkUG9pbnRlcnM6IFtldl0sXG4gICAgICAgICAgICBwb2ludGVyVHlwZTogSU5QVVRfVFlQRV9NT1VTRSxcbiAgICAgICAgICAgIHNyY0V2ZW50OiBldlxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxudmFyIFBPSU5URVJfSU5QVVRfTUFQID0ge1xuICAgIHBvaW50ZXJkb3duOiBJTlBVVF9TVEFSVCxcbiAgICBwb2ludGVybW92ZTogSU5QVVRfTU9WRSxcbiAgICBwb2ludGVydXA6IElOUFVUX0VORCxcbiAgICBwb2ludGVyY2FuY2VsOiBJTlBVVF9DQU5DRUwsXG4gICAgcG9pbnRlcm91dDogSU5QVVRfQ0FOQ0VMXG59O1xuXG4vLyBpbiBJRTEwIHRoZSBwb2ludGVyIHR5cGVzIGlzIGRlZmluZWQgYXMgYW4gZW51bVxudmFyIElFMTBfUE9JTlRFUl9UWVBFX0VOVU0gPSB7XG4gICAgMjogSU5QVVRfVFlQRV9UT1VDSCxcbiAgICAzOiBJTlBVVF9UWVBFX1BFTixcbiAgICA0OiBJTlBVVF9UWVBFX01PVVNFLFxuICAgIDU6IElOUFVUX1RZUEVfS0lORUNUIC8vIHNlZSBodHRwczovL3R3aXR0ZXIuY29tL2phY29icm9zc2kvc3RhdHVzLzQ4MDU5NjQzODQ4OTg5MDgxNlxufTtcblxudmFyIFBPSU5URVJfRUxFTUVOVF9FVkVOVFMgPSAncG9pbnRlcmRvd24nO1xudmFyIFBPSU5URVJfV0lORE9XX0VWRU5UUyA9ICdwb2ludGVybW92ZSBwb2ludGVydXAgcG9pbnRlcmNhbmNlbCc7XG5cbi8vIElFMTAgaGFzIHByZWZpeGVkIHN1cHBvcnQsIGFuZCBjYXNlLXNlbnNpdGl2ZVxuaWYgKHdpbmRvdy5NU1BvaW50ZXJFdmVudCAmJiAhd2luZG93LlBvaW50ZXJFdmVudCkge1xuICAgIFBPSU5URVJfRUxFTUVOVF9FVkVOVFMgPSAnTVNQb2ludGVyRG93bic7XG4gICAgUE9JTlRFUl9XSU5ET1dfRVZFTlRTID0gJ01TUG9pbnRlck1vdmUgTVNQb2ludGVyVXAgTVNQb2ludGVyQ2FuY2VsJztcbn1cblxuLyoqXG4gKiBQb2ludGVyIGV2ZW50cyBpbnB1dFxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBJbnB1dFxuICovXG5mdW5jdGlvbiBQb2ludGVyRXZlbnRJbnB1dCgpIHtcbiAgICB0aGlzLmV2RWwgPSBQT0lOVEVSX0VMRU1FTlRfRVZFTlRTO1xuICAgIHRoaXMuZXZXaW4gPSBQT0lOVEVSX1dJTkRPV19FVkVOVFM7XG5cbiAgICBJbnB1dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdGhpcy5zdG9yZSA9ICh0aGlzLm1hbmFnZXIuc2Vzc2lvbi5wb2ludGVyRXZlbnRzID0gW10pO1xufVxuXG5pbmhlcml0KFBvaW50ZXJFdmVudElucHV0LCBJbnB1dCwge1xuICAgIC8qKlxuICAgICAqIGhhbmRsZSBtb3VzZSBldmVudHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZcbiAgICAgKi9cbiAgICBoYW5kbGVyOiBmdW5jdGlvbiBQRWhhbmRsZXIoZXYpIHtcbiAgICAgICAgdmFyIHN0b3JlID0gdGhpcy5zdG9yZTtcbiAgICAgICAgdmFyIHJlbW92ZVBvaW50ZXIgPSBmYWxzZTtcblxuICAgICAgICB2YXIgZXZlbnRUeXBlTm9ybWFsaXplZCA9IGV2LnR5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCdtcycsICcnKTtcbiAgICAgICAgdmFyIGV2ZW50VHlwZSA9IFBPSU5URVJfSU5QVVRfTUFQW2V2ZW50VHlwZU5vcm1hbGl6ZWRdO1xuICAgICAgICB2YXIgcG9pbnRlclR5cGUgPSBJRTEwX1BPSU5URVJfVFlQRV9FTlVNW2V2LnBvaW50ZXJUeXBlXSB8fCBldi5wb2ludGVyVHlwZTtcblxuICAgICAgICB2YXIgaXNUb3VjaCA9IChwb2ludGVyVHlwZSA9PSBJTlBVVF9UWVBFX1RPVUNIKTtcblxuICAgICAgICAvLyBnZXQgaW5kZXggb2YgdGhlIGV2ZW50IGluIHRoZSBzdG9yZVxuICAgICAgICB2YXIgc3RvcmVJbmRleCA9IGluQXJyYXkoc3RvcmUsIGV2LnBvaW50ZXJJZCwgJ3BvaW50ZXJJZCcpO1xuXG4gICAgICAgIC8vIHN0YXJ0IGFuZCBtb3VzZSBtdXN0IGJlIGRvd25cbiAgICAgICAgaWYgKGV2ZW50VHlwZSAmIElOUFVUX1NUQVJUICYmIChldi5idXR0b24gPT09IDAgfHwgaXNUb3VjaCkpIHtcbiAgICAgICAgICAgIGlmIChzdG9yZUluZGV4IDwgMCkge1xuICAgICAgICAgICAgICAgIHN0b3JlLnB1c2goZXYpO1xuICAgICAgICAgICAgICAgIHN0b3JlSW5kZXggPSBzdG9yZS5sZW5ndGggLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50VHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpKSB7XG4gICAgICAgICAgICByZW1vdmVQb2ludGVyID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGl0IG5vdCBmb3VuZCwgc28gdGhlIHBvaW50ZXIgaGFzbid0IGJlZW4gZG93biAoc28gaXQncyBwcm9iYWJseSBhIGhvdmVyKVxuICAgICAgICBpZiAoc3RvcmVJbmRleCA8IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgZXZlbnQgaW4gdGhlIHN0b3JlXG4gICAgICAgIHN0b3JlW3N0b3JlSW5kZXhdID0gZXY7XG5cbiAgICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsIGV2ZW50VHlwZSwge1xuICAgICAgICAgICAgcG9pbnRlcnM6IHN0b3JlLFxuICAgICAgICAgICAgY2hhbmdlZFBvaW50ZXJzOiBbZXZdLFxuICAgICAgICAgICAgcG9pbnRlclR5cGU6IHBvaW50ZXJUeXBlLFxuICAgICAgICAgICAgc3JjRXZlbnQ6IGV2XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChyZW1vdmVQb2ludGVyKSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgZnJvbSB0aGUgc3RvcmVcbiAgICAgICAgICAgIHN0b3JlLnNwbGljZShzdG9yZUluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG52YXIgU0lOR0xFX1RPVUNIX0lOUFVUX01BUCA9IHtcbiAgICB0b3VjaHN0YXJ0OiBJTlBVVF9TVEFSVCxcbiAgICB0b3VjaG1vdmU6IElOUFVUX01PVkUsXG4gICAgdG91Y2hlbmQ6IElOUFVUX0VORCxcbiAgICB0b3VjaGNhbmNlbDogSU5QVVRfQ0FOQ0VMXG59O1xuXG52YXIgU0lOR0xFX1RPVUNIX1RBUkdFVF9FVkVOVFMgPSAndG91Y2hzdGFydCc7XG52YXIgU0lOR0xFX1RPVUNIX1dJTkRPV19FVkVOVFMgPSAndG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWwnO1xuXG4vKipcbiAqIFRvdWNoIGV2ZW50cyBpbnB1dFxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBJbnB1dFxuICovXG5mdW5jdGlvbiBTaW5nbGVUb3VjaElucHV0KCkge1xuICAgIHRoaXMuZXZUYXJnZXQgPSBTSU5HTEVfVE9VQ0hfVEFSR0VUX0VWRU5UUztcbiAgICB0aGlzLmV2V2luID0gU0lOR0xFX1RPVUNIX1dJTkRPV19FVkVOVFM7XG4gICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG5cbiAgICBJbnB1dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KFNpbmdsZVRvdWNoSW5wdXQsIElucHV0LCB7XG4gICAgaGFuZGxlcjogZnVuY3Rpb24gVEVoYW5kbGVyKGV2KSB7XG4gICAgICAgIHZhciB0eXBlID0gU0lOR0xFX1RPVUNIX0lOUFVUX01BUFtldi50eXBlXTtcblxuICAgICAgICAvLyBzaG91bGQgd2UgaGFuZGxlIHRoZSB0b3VjaCBldmVudHM/XG4gICAgICAgIGlmICh0eXBlID09PSBJTlBVVF9TVEFSVCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdG91Y2hlcyA9IG5vcm1hbGl6ZVNpbmdsZVRvdWNoZXMuY2FsbCh0aGlzLCBldiwgdHlwZSk7XG5cbiAgICAgICAgLy8gd2hlbiBkb25lLCByZXNldCB0aGUgc3RhcnRlZCBzdGF0ZVxuICAgICAgICBpZiAodHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpICYmIHRvdWNoZXNbMF0ubGVuZ3RoIC0gdG91Y2hlc1sxXS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsIHR5cGUsIHtcbiAgICAgICAgICAgIHBvaW50ZXJzOiB0b3VjaGVzWzBdLFxuICAgICAgICAgICAgY2hhbmdlZFBvaW50ZXJzOiB0b3VjaGVzWzFdLFxuICAgICAgICAgICAgcG9pbnRlclR5cGU6IElOUFVUX1RZUEVfVE9VQ0gsXG4gICAgICAgICAgICBzcmNFdmVudDogZXZcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQHRoaXMge1RvdWNoSW5wdXR9XG4gKiBAcGFyYW0ge09iamVjdH0gZXZcbiAqIEBwYXJhbSB7TnVtYmVyfSB0eXBlIGZsYWdcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR8QXJyYXl9IFthbGwsIGNoYW5nZWRdXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZVNpbmdsZVRvdWNoZXMoZXYsIHR5cGUpIHtcbiAgICB2YXIgYWxsID0gdG9BcnJheShldi50b3VjaGVzKTtcbiAgICB2YXIgY2hhbmdlZCA9IHRvQXJyYXkoZXYuY2hhbmdlZFRvdWNoZXMpO1xuXG4gICAgaWYgKHR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSkge1xuICAgICAgICBhbGwgPSB1bmlxdWVBcnJheShhbGwuY29uY2F0KGNoYW5nZWQpLCAnaWRlbnRpZmllcicsIHRydWUpO1xuICAgIH1cblxuICAgIHJldHVybiBbYWxsLCBjaGFuZ2VkXTtcbn1cblxudmFyIFRPVUNIX0lOUFVUX01BUCA9IHtcbiAgICB0b3VjaHN0YXJ0OiBJTlBVVF9TVEFSVCxcbiAgICB0b3VjaG1vdmU6IElOUFVUX01PVkUsXG4gICAgdG91Y2hlbmQ6IElOUFVUX0VORCxcbiAgICB0b3VjaGNhbmNlbDogSU5QVVRfQ0FOQ0VMXG59O1xuXG52YXIgVE9VQ0hfVEFSR0VUX0VWRU5UUyA9ICd0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCB0b3VjaGNhbmNlbCc7XG5cbi8qKlxuICogTXVsdGktdXNlciB0b3VjaCBldmVudHMgaW5wdXRcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgSW5wdXRcbiAqL1xuZnVuY3Rpb24gVG91Y2hJbnB1dCgpIHtcbiAgICB0aGlzLmV2VGFyZ2V0ID0gVE9VQ0hfVEFSR0VUX0VWRU5UUztcbiAgICB0aGlzLnRhcmdldElkcyA9IHt9O1xuXG4gICAgSW5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuaW5oZXJpdChUb3VjaElucHV0LCBJbnB1dCwge1xuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIE1URWhhbmRsZXIoZXYpIHtcbiAgICAgICAgdmFyIHR5cGUgPSBUT1VDSF9JTlBVVF9NQVBbZXYudHlwZV07XG4gICAgICAgIHZhciB0b3VjaGVzID0gZ2V0VG91Y2hlcy5jYWxsKHRoaXMsIGV2LCB0eXBlKTtcbiAgICAgICAgaWYgKCF0b3VjaGVzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgdHlwZSwge1xuICAgICAgICAgICAgcG9pbnRlcnM6IHRvdWNoZXNbMF0sXG4gICAgICAgICAgICBjaGFuZ2VkUG9pbnRlcnM6IHRvdWNoZXNbMV0sXG4gICAgICAgICAgICBwb2ludGVyVHlwZTogSU5QVVRfVFlQRV9UT1VDSCxcbiAgICAgICAgICAgIHNyY0V2ZW50OiBldlxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBAdGhpcyB7VG91Y2hJbnB1dH1cbiAqIEBwYXJhbSB7T2JqZWN0fSBldlxuICogQHBhcmFtIHtOdW1iZXJ9IHR5cGUgZmxhZ1xuICogQHJldHVybnMge3VuZGVmaW5lZHxBcnJheX0gW2FsbCwgY2hhbmdlZF1cbiAqL1xuZnVuY3Rpb24gZ2V0VG91Y2hlcyhldiwgdHlwZSkge1xuICAgIHZhciBhbGxUb3VjaGVzID0gdG9BcnJheShldi50b3VjaGVzKTtcbiAgICB2YXIgdGFyZ2V0SWRzID0gdGhpcy50YXJnZXRJZHM7XG5cbiAgICAvLyB3aGVuIHRoZXJlIGlzIG9ubHkgb25lIHRvdWNoLCB0aGUgcHJvY2VzcyBjYW4gYmUgc2ltcGxpZmllZFxuICAgIGlmICh0eXBlICYgKElOUFVUX1NUQVJUIHwgSU5QVVRfTU9WRSkgJiYgYWxsVG91Y2hlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgdGFyZ2V0SWRzW2FsbFRvdWNoZXNbMF0uaWRlbnRpZmllcl0gPSB0cnVlO1xuICAgICAgICByZXR1cm4gW2FsbFRvdWNoZXMsIGFsbFRvdWNoZXNdO1xuICAgIH1cblxuICAgIHZhciBpLFxuICAgICAgICB0YXJnZXRUb3VjaGVzLFxuICAgICAgICBjaGFuZ2VkVG91Y2hlcyA9IHRvQXJyYXkoZXYuY2hhbmdlZFRvdWNoZXMpLFxuICAgICAgICBjaGFuZ2VkVGFyZ2V0VG91Y2hlcyA9IFtdLFxuICAgICAgICB0YXJnZXQgPSB0aGlzLnRhcmdldDtcblxuICAgIC8vIGdldCB0YXJnZXQgdG91Y2hlcyBmcm9tIHRvdWNoZXNcbiAgICB0YXJnZXRUb3VjaGVzID0gYWxsVG91Y2hlcy5maWx0ZXIoZnVuY3Rpb24odG91Y2gpIHtcbiAgICAgICAgcmV0dXJuIGhhc1BhcmVudCh0b3VjaC50YXJnZXQsIHRhcmdldCk7XG4gICAgfSk7XG5cbiAgICAvLyBjb2xsZWN0IHRvdWNoZXNcbiAgICBpZiAodHlwZSA9PT0gSU5QVVRfU1RBUlQpIHtcbiAgICAgICAgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgdGFyZ2V0VG91Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRhcmdldElkc1t0YXJnZXRUb3VjaGVzW2ldLmlkZW50aWZpZXJdID0gdHJ1ZTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGZpbHRlciBjaGFuZ2VkIHRvdWNoZXMgdG8gb25seSBjb250YWluIHRvdWNoZXMgdGhhdCBleGlzdCBpbiB0aGUgY29sbGVjdGVkIHRhcmdldCBpZHNcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGNoYW5nZWRUb3VjaGVzLmxlbmd0aCkge1xuICAgICAgICBpZiAodGFyZ2V0SWRzW2NoYW5nZWRUb3VjaGVzW2ldLmlkZW50aWZpZXJdKSB7XG4gICAgICAgICAgICBjaGFuZ2VkVGFyZ2V0VG91Y2hlcy5wdXNoKGNoYW5nZWRUb3VjaGVzW2ldKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNsZWFudXAgcmVtb3ZlZCB0b3VjaGVzXG4gICAgICAgIGlmICh0eXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXRJZHNbY2hhbmdlZFRvdWNoZXNbaV0uaWRlbnRpZmllcl07XG4gICAgICAgIH1cbiAgICAgICAgaSsrO1xuICAgIH1cblxuICAgIGlmICghY2hhbmdlZFRhcmdldFRvdWNoZXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gW1xuICAgICAgICAvLyBtZXJnZSB0YXJnZXRUb3VjaGVzIHdpdGggY2hhbmdlZFRhcmdldFRvdWNoZXMgc28gaXQgY29udGFpbnMgQUxMIHRvdWNoZXMsIGluY2x1ZGluZyAnZW5kJyBhbmQgJ2NhbmNlbCdcbiAgICAgICAgdW5pcXVlQXJyYXkodGFyZ2V0VG91Y2hlcy5jb25jYXQoY2hhbmdlZFRhcmdldFRvdWNoZXMpLCAnaWRlbnRpZmllcicsIHRydWUpLFxuICAgICAgICBjaGFuZ2VkVGFyZ2V0VG91Y2hlc1xuICAgIF07XG59XG5cbi8qKlxuICogQ29tYmluZWQgdG91Y2ggYW5kIG1vdXNlIGlucHV0XG4gKlxuICogVG91Y2ggaGFzIGEgaGlnaGVyIHByaW9yaXR5IHRoZW4gbW91c2UsIGFuZCB3aGlsZSB0b3VjaGluZyBubyBtb3VzZSBldmVudHMgYXJlIGFsbG93ZWQuXG4gKiBUaGlzIGJlY2F1c2UgdG91Y2ggZGV2aWNlcyBhbHNvIGVtaXQgbW91c2UgZXZlbnRzIHdoaWxlIGRvaW5nIGEgdG91Y2guXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBJbnB1dFxuICovXG5cbnZhciBERURVUF9USU1FT1VUID0gMjUwMDtcbnZhciBERURVUF9ESVNUQU5DRSA9IDI1O1xuXG5mdW5jdGlvbiBUb3VjaE1vdXNlSW5wdXQoKSB7XG4gICAgSW5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIHZhciBoYW5kbGVyID0gYmluZEZuKHRoaXMuaGFuZGxlciwgdGhpcyk7XG4gICAgdGhpcy50b3VjaCA9IG5ldyBUb3VjaElucHV0KHRoaXMubWFuYWdlciwgaGFuZGxlcik7XG4gICAgdGhpcy5tb3VzZSA9IG5ldyBNb3VzZUlucHV0KHRoaXMubWFuYWdlciwgaGFuZGxlcik7XG5cbiAgICB0aGlzLnByaW1hcnlUb3VjaCA9IG51bGw7XG4gICAgdGhpcy5sYXN0VG91Y2hlcyA9IFtdO1xufVxuXG5pbmhlcml0KFRvdWNoTW91c2VJbnB1dCwgSW5wdXQsIHtcbiAgICAvKipcbiAgICAgKiBoYW5kbGUgbW91c2UgYW5kIHRvdWNoIGV2ZW50c1xuICAgICAqIEBwYXJhbSB7SGFtbWVyfSBtYW5hZ2VyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlucHV0RXZlbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXREYXRhXG4gICAgICovXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gVE1FaGFuZGxlcihtYW5hZ2VyLCBpbnB1dEV2ZW50LCBpbnB1dERhdGEpIHtcbiAgICAgICAgdmFyIGlzVG91Y2ggPSAoaW5wdXREYXRhLnBvaW50ZXJUeXBlID09IElOUFVUX1RZUEVfVE9VQ0gpLFxuICAgICAgICAgICAgaXNNb3VzZSA9IChpbnB1dERhdGEucG9pbnRlclR5cGUgPT0gSU5QVVRfVFlQRV9NT1VTRSk7XG5cbiAgICAgICAgaWYgKGlzTW91c2UgJiYgaW5wdXREYXRhLnNvdXJjZUNhcGFiaWxpdGllcyAmJiBpbnB1dERhdGEuc291cmNlQ2FwYWJpbGl0aWVzLmZpcmVzVG91Y2hFdmVudHMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHdoZW4gd2UncmUgaW4gYSB0b3VjaCBldmVudCwgcmVjb3JkIHRvdWNoZXMgdG8gIGRlLWR1cGUgc3ludGhldGljIG1vdXNlIGV2ZW50XG4gICAgICAgIGlmIChpc1RvdWNoKSB7XG4gICAgICAgICAgICByZWNvcmRUb3VjaGVzLmNhbGwodGhpcywgaW5wdXRFdmVudCwgaW5wdXREYXRhKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc01vdXNlICYmIGlzU3ludGhldGljRXZlbnQuY2FsbCh0aGlzLCBpbnB1dERhdGEpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhbGxiYWNrKG1hbmFnZXIsIGlucHV0RXZlbnQsIGlucHV0RGF0YSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHJlbW92ZSB0aGUgZXZlbnQgbGlzdGVuZXJzXG4gICAgICovXG4gICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy50b3VjaC5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMubW91c2UuZGVzdHJveSgpO1xuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiByZWNvcmRUb3VjaGVzKGV2ZW50VHlwZSwgZXZlbnREYXRhKSB7XG4gICAgaWYgKGV2ZW50VHlwZSAmIElOUFVUX1NUQVJUKSB7XG4gICAgICAgIHRoaXMucHJpbWFyeVRvdWNoID0gZXZlbnREYXRhLmNoYW5nZWRQb2ludGVyc1swXS5pZGVudGlmaWVyO1xuICAgICAgICBzZXRMYXN0VG91Y2guY2FsbCh0aGlzLCBldmVudERhdGEpO1xuICAgIH0gZWxzZSBpZiAoZXZlbnRUeXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkpIHtcbiAgICAgICAgc2V0TGFzdFRvdWNoLmNhbGwodGhpcywgZXZlbnREYXRhKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNldExhc3RUb3VjaChldmVudERhdGEpIHtcbiAgICB2YXIgdG91Y2ggPSBldmVudERhdGEuY2hhbmdlZFBvaW50ZXJzWzBdO1xuXG4gICAgaWYgKHRvdWNoLmlkZW50aWZpZXIgPT09IHRoaXMucHJpbWFyeVRvdWNoKSB7XG4gICAgICAgIHZhciBsYXN0VG91Y2ggPSB7eDogdG91Y2guY2xpZW50WCwgeTogdG91Y2guY2xpZW50WX07XG4gICAgICAgIHRoaXMubGFzdFRvdWNoZXMucHVzaChsYXN0VG91Y2gpO1xuICAgICAgICB2YXIgbHRzID0gdGhpcy5sYXN0VG91Y2hlcztcbiAgICAgICAgdmFyIHJlbW92ZUxhc3RUb3VjaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGkgPSBsdHMuaW5kZXhPZihsYXN0VG91Y2gpO1xuICAgICAgICAgICAgaWYgKGkgPiAtMSkge1xuICAgICAgICAgICAgICAgIGx0cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHNldFRpbWVvdXQocmVtb3ZlTGFzdFRvdWNoLCBERURVUF9USU1FT1VUKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzU3ludGhldGljRXZlbnQoZXZlbnREYXRhKSB7XG4gICAgdmFyIHggPSBldmVudERhdGEuc3JjRXZlbnQuY2xpZW50WCwgeSA9IGV2ZW50RGF0YS5zcmNFdmVudC5jbGllbnRZO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sYXN0VG91Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdCA9IHRoaXMubGFzdFRvdWNoZXNbaV07XG4gICAgICAgIHZhciBkeCA9IE1hdGguYWJzKHggLSB0LngpLCBkeSA9IE1hdGguYWJzKHkgLSB0LnkpO1xuICAgICAgICBpZiAoZHggPD0gREVEVVBfRElTVEFOQ0UgJiYgZHkgPD0gREVEVVBfRElTVEFOQ0UpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxudmFyIFBSRUZJWEVEX1RPVUNIX0FDVElPTiA9IHByZWZpeGVkKFRFU1RfRUxFTUVOVC5zdHlsZSwgJ3RvdWNoQWN0aW9uJyk7XG52YXIgTkFUSVZFX1RPVUNIX0FDVElPTiA9IFBSRUZJWEVEX1RPVUNIX0FDVElPTiAhPT0gdW5kZWZpbmVkO1xuXG4vLyBtYWdpY2FsIHRvdWNoQWN0aW9uIHZhbHVlXG52YXIgVE9VQ0hfQUNUSU9OX0NPTVBVVEUgPSAnY29tcHV0ZSc7XG52YXIgVE9VQ0hfQUNUSU9OX0FVVE8gPSAnYXV0byc7XG52YXIgVE9VQ0hfQUNUSU9OX01BTklQVUxBVElPTiA9ICdtYW5pcHVsYXRpb24nOyAvLyBub3QgaW1wbGVtZW50ZWRcbnZhciBUT1VDSF9BQ1RJT05fTk9ORSA9ICdub25lJztcbnZhciBUT1VDSF9BQ1RJT05fUEFOX1ggPSAncGFuLXgnO1xudmFyIFRPVUNIX0FDVElPTl9QQU5fWSA9ICdwYW4teSc7XG52YXIgVE9VQ0hfQUNUSU9OX01BUCA9IGdldFRvdWNoQWN0aW9uUHJvcHMoKTtcblxuLyoqXG4gKiBUb3VjaCBBY3Rpb25cbiAqIHNldHMgdGhlIHRvdWNoQWN0aW9uIHByb3BlcnR5IG9yIHVzZXMgdGhlIGpzIGFsdGVybmF0aXZlXG4gKiBAcGFyYW0ge01hbmFnZXJ9IG1hbmFnZXJcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIFRvdWNoQWN0aW9uKG1hbmFnZXIsIHZhbHVlKSB7XG4gICAgdGhpcy5tYW5hZ2VyID0gbWFuYWdlcjtcbiAgICB0aGlzLnNldCh2YWx1ZSk7XG59XG5cblRvdWNoQWN0aW9uLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBzZXQgdGhlIHRvdWNoQWN0aW9uIHZhbHVlIG9uIHRoZSBlbGVtZW50IG9yIGVuYWJsZSB0aGUgcG9seWZpbGxcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAgICAgKi9cbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIC8vIGZpbmQgb3V0IHRoZSB0b3VjaC1hY3Rpb24gYnkgdGhlIGV2ZW50IGhhbmRsZXJzXG4gICAgICAgIGlmICh2YWx1ZSA9PSBUT1VDSF9BQ1RJT05fQ09NUFVURSkge1xuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmNvbXB1dGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChOQVRJVkVfVE9VQ0hfQUNUSU9OICYmIHRoaXMubWFuYWdlci5lbGVtZW50LnN0eWxlICYmIFRPVUNIX0FDVElPTl9NQVBbdmFsdWVdKSB7XG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIuZWxlbWVudC5zdHlsZVtQUkVGSVhFRF9UT1VDSF9BQ1RJT05dID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY3Rpb25zID0gdmFsdWUudG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGp1c3QgcmUtc2V0IHRoZSB0b3VjaEFjdGlvbiB2YWx1ZVxuICAgICAqL1xuICAgIHVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0KHRoaXMubWFuYWdlci5vcHRpb25zLnRvdWNoQWN0aW9uKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogY29tcHV0ZSB0aGUgdmFsdWUgZm9yIHRoZSB0b3VjaEFjdGlvbiBwcm9wZXJ0eSBiYXNlZCBvbiB0aGUgcmVjb2duaXplcidzIHNldHRpbmdzXG4gICAgICogQHJldHVybnMge1N0cmluZ30gdmFsdWVcbiAgICAgKi9cbiAgICBjb21wdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFjdGlvbnMgPSBbXTtcbiAgICAgICAgZWFjaCh0aGlzLm1hbmFnZXIucmVjb2duaXplcnMsIGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgIGlmIChib29sT3JGbihyZWNvZ25pemVyLm9wdGlvbnMuZW5hYmxlLCBbcmVjb2duaXplcl0pKSB7XG4gICAgICAgICAgICAgICAgYWN0aW9ucyA9IGFjdGlvbnMuY29uY2F0KHJlY29nbml6ZXIuZ2V0VG91Y2hBY3Rpb24oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY2xlYW5Ub3VjaEFjdGlvbnMoYWN0aW9ucy5qb2luKCcgJykpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgb24gZWFjaCBpbnB1dCBjeWNsZSBhbmQgcHJvdmlkZXMgdGhlIHByZXZlbnRpbmcgb2YgdGhlIGJyb3dzZXIgYmVoYXZpb3JcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAgICAgKi9cbiAgICBwcmV2ZW50RGVmYXVsdHM6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBzcmNFdmVudCA9IGlucHV0LnNyY0V2ZW50O1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gaW5wdXQub2Zmc2V0RGlyZWN0aW9uO1xuXG4gICAgICAgIC8vIGlmIHRoZSB0b3VjaCBhY3Rpb24gZGlkIHByZXZlbnRlZCBvbmNlIHRoaXMgc2Vzc2lvblxuICAgICAgICBpZiAodGhpcy5tYW5hZ2VyLnNlc3Npb24ucHJldmVudGVkKSB7XG4gICAgICAgICAgICBzcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFjdGlvbnMgPSB0aGlzLmFjdGlvbnM7XG4gICAgICAgIHZhciBoYXNOb25lID0gaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX05PTkUpICYmICFUT1VDSF9BQ1RJT05fTUFQW1RPVUNIX0FDVElPTl9OT05FXTtcbiAgICAgICAgdmFyIGhhc1BhblkgPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fUEFOX1kpICYmICFUT1VDSF9BQ1RJT05fTUFQW1RPVUNIX0FDVElPTl9QQU5fWV07XG4gICAgICAgIHZhciBoYXNQYW5YID0gaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX1BBTl9YKSAmJiAhVE9VQ0hfQUNUSU9OX01BUFtUT1VDSF9BQ1RJT05fUEFOX1hdO1xuXG4gICAgICAgIGlmIChoYXNOb25lKSB7XG4gICAgICAgICAgICAvL2RvIG5vdCBwcmV2ZW50IGRlZmF1bHRzIGlmIHRoaXMgaXMgYSB0YXAgZ2VzdHVyZVxuXG4gICAgICAgICAgICB2YXIgaXNUYXBQb2ludGVyID0gaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSAxO1xuICAgICAgICAgICAgdmFyIGlzVGFwTW92ZW1lbnQgPSBpbnB1dC5kaXN0YW5jZSA8IDI7XG4gICAgICAgICAgICB2YXIgaXNUYXBUb3VjaFRpbWUgPSBpbnB1dC5kZWx0YVRpbWUgPCAyNTA7XG5cbiAgICAgICAgICAgIGlmIChpc1RhcFBvaW50ZXIgJiYgaXNUYXBNb3ZlbWVudCAmJiBpc1RhcFRvdWNoVGltZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNQYW5YICYmIGhhc1BhblkpIHtcbiAgICAgICAgICAgIC8vIGBwYW4teCBwYW4teWAgbWVhbnMgYnJvd3NlciBoYW5kbGVzIGFsbCBzY3JvbGxpbmcvcGFubmluZywgZG8gbm90IHByZXZlbnRcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNOb25lIHx8XG4gICAgICAgICAgICAoaGFzUGFuWSAmJiBkaXJlY3Rpb24gJiBESVJFQ1RJT05fSE9SSVpPTlRBTCkgfHxcbiAgICAgICAgICAgIChoYXNQYW5YICYmIGRpcmVjdGlvbiAmIERJUkVDVElPTl9WRVJUSUNBTCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByZXZlbnRTcmMoc3JjRXZlbnQpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGNhbGwgcHJldmVudERlZmF1bHQgdG8gcHJldmVudCB0aGUgYnJvd3NlcidzIGRlZmF1bHQgYmVoYXZpb3IgKHNjcm9sbGluZyBpbiBtb3N0IGNhc2VzKVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzcmNFdmVudFxuICAgICAqL1xuICAgIHByZXZlbnRTcmM6IGZ1bmN0aW9uKHNyY0V2ZW50KSB7XG4gICAgICAgIHRoaXMubWFuYWdlci5zZXNzaW9uLnByZXZlbnRlZCA9IHRydWU7XG4gICAgICAgIHNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxufTtcblxuLyoqXG4gKiB3aGVuIHRoZSB0b3VjaEFjdGlvbnMgYXJlIGNvbGxlY3RlZCB0aGV5IGFyZSBub3QgYSB2YWxpZCB2YWx1ZSwgc28gd2UgbmVlZCB0byBjbGVhbiB0aGluZ3MgdXAuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25zXG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuZnVuY3Rpb24gY2xlYW5Ub3VjaEFjdGlvbnMoYWN0aW9ucykge1xuICAgIC8vIG5vbmVcbiAgICBpZiAoaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX05PTkUpKSB7XG4gICAgICAgIHJldHVybiBUT1VDSF9BQ1RJT05fTk9ORTtcbiAgICB9XG5cbiAgICB2YXIgaGFzUGFuWCA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9QQU5fWCk7XG4gICAgdmFyIGhhc1BhblkgPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fUEFOX1kpO1xuXG4gICAgLy8gaWYgYm90aCBwYW4teCBhbmQgcGFuLXkgYXJlIHNldCAoZGlmZmVyZW50IHJlY29nbml6ZXJzXG4gICAgLy8gZm9yIGRpZmZlcmVudCBkaXJlY3Rpb25zLCBlLmcuIGhvcml6b250YWwgcGFuIGJ1dCB2ZXJ0aWNhbCBzd2lwZT8pXG4gICAgLy8gd2UgbmVlZCBub25lIChhcyBvdGhlcndpc2Ugd2l0aCBwYW4teCBwYW4teSBjb21iaW5lZCBub25lIG9mIHRoZXNlXG4gICAgLy8gcmVjb2duaXplcnMgd2lsbCB3b3JrLCBzaW5jZSB0aGUgYnJvd3NlciB3b3VsZCBoYW5kbGUgYWxsIHBhbm5pbmdcbiAgICBpZiAoaGFzUGFuWCAmJiBoYXNQYW5ZKSB7XG4gICAgICAgIHJldHVybiBUT1VDSF9BQ1RJT05fTk9ORTtcbiAgICB9XG5cbiAgICAvLyBwYW4teCBPUiBwYW4teVxuICAgIGlmIChoYXNQYW5YIHx8IGhhc1BhblkpIHtcbiAgICAgICAgcmV0dXJuIGhhc1BhblggPyBUT1VDSF9BQ1RJT05fUEFOX1ggOiBUT1VDSF9BQ1RJT05fUEFOX1k7XG4gICAgfVxuXG4gICAgLy8gbWFuaXB1bGF0aW9uXG4gICAgaWYgKGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9NQU5JUFVMQVRJT04pKSB7XG4gICAgICAgIHJldHVybiBUT1VDSF9BQ1RJT05fTUFOSVBVTEFUSU9OO1xuICAgIH1cblxuICAgIHJldHVybiBUT1VDSF9BQ1RJT05fQVVUTztcbn1cblxuZnVuY3Rpb24gZ2V0VG91Y2hBY3Rpb25Qcm9wcygpIHtcbiAgICBpZiAoIU5BVElWRV9UT1VDSF9BQ1RJT04pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgdG91Y2hNYXAgPSB7fTtcbiAgICB2YXIgY3NzU3VwcG9ydHMgPSB3aW5kb3cuQ1NTICYmIHdpbmRvdy5DU1Muc3VwcG9ydHM7XG4gICAgWydhdXRvJywgJ21hbmlwdWxhdGlvbicsICdwYW4teScsICdwYW4teCcsICdwYW4teCBwYW4teScsICdub25lJ10uZm9yRWFjaChmdW5jdGlvbih2YWwpIHtcblxuICAgICAgICAvLyBJZiBjc3Muc3VwcG9ydHMgaXMgbm90IHN1cHBvcnRlZCBidXQgdGhlcmUgaXMgbmF0aXZlIHRvdWNoLWFjdGlvbiBhc3N1bWUgaXQgc3VwcG9ydHNcbiAgICAgICAgLy8gYWxsIHZhbHVlcy4gVGhpcyBpcyB0aGUgY2FzZSBmb3IgSUUgMTAgYW5kIDExLlxuICAgICAgICB0b3VjaE1hcFt2YWxdID0gY3NzU3VwcG9ydHMgPyB3aW5kb3cuQ1NTLnN1cHBvcnRzKCd0b3VjaC1hY3Rpb24nLCB2YWwpIDogdHJ1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdG91Y2hNYXA7XG59XG5cbi8qKlxuICogUmVjb2duaXplciBmbG93IGV4cGxhaW5lZDsgKlxuICogQWxsIHJlY29nbml6ZXJzIGhhdmUgdGhlIGluaXRpYWwgc3RhdGUgb2YgUE9TU0lCTEUgd2hlbiBhIGlucHV0IHNlc3Npb24gc3RhcnRzLlxuICogVGhlIGRlZmluaXRpb24gb2YgYSBpbnB1dCBzZXNzaW9uIGlzIGZyb20gdGhlIGZpcnN0IGlucHV0IHVudGlsIHRoZSBsYXN0IGlucHV0LCB3aXRoIGFsbCBpdCdzIG1vdmVtZW50IGluIGl0LiAqXG4gKiBFeGFtcGxlIHNlc3Npb24gZm9yIG1vdXNlLWlucHV0OiBtb3VzZWRvd24gLT4gbW91c2Vtb3ZlIC0+IG1vdXNldXBcbiAqXG4gKiBPbiBlYWNoIHJlY29nbml6aW5nIGN5Y2xlIChzZWUgTWFuYWdlci5yZWNvZ25pemUpIHRoZSAucmVjb2duaXplKCkgbWV0aG9kIGlzIGV4ZWN1dGVkXG4gKiB3aGljaCBkZXRlcm1pbmVzIHdpdGggc3RhdGUgaXQgc2hvdWxkIGJlLlxuICpcbiAqIElmIHRoZSByZWNvZ25pemVyIGhhcyB0aGUgc3RhdGUgRkFJTEVELCBDQU5DRUxMRUQgb3IgUkVDT0dOSVpFRCAoZXF1YWxzIEVOREVEKSwgaXQgaXMgcmVzZXQgdG9cbiAqIFBPU1NJQkxFIHRvIGdpdmUgaXQgYW5vdGhlciBjaGFuZ2Ugb24gdGhlIG5leHQgY3ljbGUuXG4gKlxuICogICAgICAgICAgICAgICBQb3NzaWJsZVxuICogICAgICAgICAgICAgICAgICB8XG4gKiAgICAgICAgICAgICstLS0tLSstLS0tLS0tLS0tLS0tLS0rXG4gKiAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICB8XG4gKiAgICAgICstLS0tLSstLS0tLSsgICAgICAgICAgICAgICB8XG4gKiAgICAgIHwgICAgICAgICAgIHwgICAgICAgICAgICAgICB8XG4gKiAgIEZhaWxlZCAgICAgIENhbmNlbGxlZCAgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0rLS0tLS0tK1xuICogICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICAgIFJlY29nbml6ZWQgICAgICAgQmVnYW5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hhbmdlZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVuZGVkL1JlY29nbml6ZWRcbiAqL1xudmFyIFNUQVRFX1BPU1NJQkxFID0gMTtcbnZhciBTVEFURV9CRUdBTiA9IDI7XG52YXIgU1RBVEVfQ0hBTkdFRCA9IDQ7XG52YXIgU1RBVEVfRU5ERUQgPSA4O1xudmFyIFNUQVRFX1JFQ09HTklaRUQgPSBTVEFURV9FTkRFRDtcbnZhciBTVEFURV9DQU5DRUxMRUQgPSAxNjtcbnZhciBTVEFURV9GQUlMRUQgPSAzMjtcblxuLyoqXG4gKiBSZWNvZ25pemVyXG4gKiBFdmVyeSByZWNvZ25pemVyIG5lZWRzIHRvIGV4dGVuZCBmcm9tIHRoaXMgY2xhc3MuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cbmZ1bmN0aW9uIFJlY29nbml6ZXIob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IGFzc2lnbih7fSwgdGhpcy5kZWZhdWx0cywgb3B0aW9ucyB8fCB7fSk7XG5cbiAgICB0aGlzLmlkID0gdW5pcXVlSWQoKTtcblxuICAgIHRoaXMubWFuYWdlciA9IG51bGw7XG5cbiAgICAvLyBkZWZhdWx0IGlzIGVuYWJsZSB0cnVlXG4gICAgdGhpcy5vcHRpb25zLmVuYWJsZSA9IGlmVW5kZWZpbmVkKHRoaXMub3B0aW9ucy5lbmFibGUsIHRydWUpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1BPU1NJQkxFO1xuXG4gICAgdGhpcy5zaW11bHRhbmVvdXMgPSB7fTtcbiAgICB0aGlzLnJlcXVpcmVGYWlsID0gW107XG59XG5cblJlY29nbml6ZXIucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIEB2aXJ0dWFsXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cbiAgICBkZWZhdWx0czoge30sXG5cbiAgICAvKipcbiAgICAgKiBzZXQgb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICogQHJldHVybiB7UmVjb2duaXplcn1cbiAgICAgKi9cbiAgICBzZXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG5cbiAgICAgICAgLy8gYWxzbyB1cGRhdGUgdGhlIHRvdWNoQWN0aW9uLCBpbiBjYXNlIHNvbWV0aGluZyBjaGFuZ2VkIGFib3V0IHRoZSBkaXJlY3Rpb25zL2VuYWJsZWQgc3RhdGVcbiAgICAgICAgdGhpcy5tYW5hZ2VyICYmIHRoaXMubWFuYWdlci50b3VjaEFjdGlvbi51cGRhdGUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHJlY29nbml6ZSBzaW11bHRhbmVvdXMgd2l0aCBhbiBvdGhlciByZWNvZ25pemVyLlxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ9IHRoaXNcbiAgICAgKi9cbiAgICByZWNvZ25pemVXaXRoOiBmdW5jdGlvbihvdGhlclJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKG90aGVyUmVjb2duaXplciwgJ3JlY29nbml6ZVdpdGgnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2ltdWx0YW5lb3VzID0gdGhpcy5zaW11bHRhbmVvdXM7XG4gICAgICAgIG90aGVyUmVjb2duaXplciA9IGdldFJlY29nbml6ZXJCeU5hbWVJZk1hbmFnZXIob3RoZXJSZWNvZ25pemVyLCB0aGlzKTtcbiAgICAgICAgaWYgKCFzaW11bHRhbmVvdXNbb3RoZXJSZWNvZ25pemVyLmlkXSkge1xuICAgICAgICAgICAgc2ltdWx0YW5lb3VzW290aGVyUmVjb2duaXplci5pZF0gPSBvdGhlclJlY29nbml6ZXI7XG4gICAgICAgICAgICBvdGhlclJlY29nbml6ZXIucmVjb2duaXplV2l0aCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZHJvcCB0aGUgc2ltdWx0YW5lb3VzIGxpbmsuIGl0IGRvZXNudCByZW1vdmUgdGhlIGxpbmsgb24gdGhlIG90aGVyIHJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcn0gdGhpc1xuICAgICAqL1xuICAgIGRyb3BSZWNvZ25pemVXaXRoOiBmdW5jdGlvbihvdGhlclJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKG90aGVyUmVjb2duaXplciwgJ2Ryb3BSZWNvZ25pemVXaXRoJywgdGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuICAgICAgICBkZWxldGUgdGhpcy5zaW11bHRhbmVvdXNbb3RoZXJSZWNvZ25pemVyLmlkXTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHJlY29nbml6ZXIgY2FuIG9ubHkgcnVuIHdoZW4gYW4gb3RoZXIgaXMgZmFpbGluZ1xuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ9IHRoaXNcbiAgICAgKi9cbiAgICByZXF1aXJlRmFpbHVyZTogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG4gICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhvdGhlclJlY29nbml6ZXIsICdyZXF1aXJlRmFpbHVyZScsIHRoaXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXF1aXJlRmFpbCA9IHRoaXMucmVxdWlyZUZhaWw7XG4gICAgICAgIG90aGVyUmVjb2duaXplciA9IGdldFJlY29nbml6ZXJCeU5hbWVJZk1hbmFnZXIob3RoZXJSZWNvZ25pemVyLCB0aGlzKTtcbiAgICAgICAgaWYgKGluQXJyYXkocmVxdWlyZUZhaWwsIG90aGVyUmVjb2duaXplcikgPT09IC0xKSB7XG4gICAgICAgICAgICByZXF1aXJlRmFpbC5wdXNoKG90aGVyUmVjb2duaXplcik7XG4gICAgICAgICAgICBvdGhlclJlY29nbml6ZXIucmVxdWlyZUZhaWx1cmUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGRyb3AgdGhlIHJlcXVpcmVGYWlsdXJlIGxpbmsuIGl0IGRvZXMgbm90IHJlbW92ZSB0aGUgbGluayBvbiB0aGUgb3RoZXIgcmVjb2duaXplci5cbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfSB0aGlzXG4gICAgICovXG4gICAgZHJvcFJlcXVpcmVGYWlsdXJlOiBmdW5jdGlvbihvdGhlclJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKG90aGVyUmVjb2duaXplciwgJ2Ryb3BSZXF1aXJlRmFpbHVyZScsIHRoaXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIG90aGVyUmVjb2duaXplciA9IGdldFJlY29nbml6ZXJCeU5hbWVJZk1hbmFnZXIob3RoZXJSZWNvZ25pemVyLCB0aGlzKTtcbiAgICAgICAgdmFyIGluZGV4ID0gaW5BcnJheSh0aGlzLnJlcXVpcmVGYWlsLCBvdGhlclJlY29nbml6ZXIpO1xuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5yZXF1aXJlRmFpbC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBoYXMgcmVxdWlyZSBmYWlsdXJlcyBib29sZWFuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgaGFzUmVxdWlyZUZhaWx1cmVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWlyZUZhaWwubGVuZ3RoID4gMDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogaWYgdGhlIHJlY29nbml6ZXIgY2FuIHJlY29nbml6ZSBzaW11bHRhbmVvdXMgd2l0aCBhbiBvdGhlciByZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBjYW5SZWNvZ25pemVXaXRoOiBmdW5jdGlvbihvdGhlclJlY29nbml6ZXIpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5zaW11bHRhbmVvdXNbb3RoZXJSZWNvZ25pemVyLmlkXTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogWW91IHNob3VsZCB1c2UgYHRyeUVtaXRgIGluc3RlYWQgb2YgYGVtaXRgIGRpcmVjdGx5IHRvIGNoZWNrXG4gICAgICogdGhhdCBhbGwgdGhlIG5lZWRlZCByZWNvZ25pemVycyBoYXMgZmFpbGVkIGJlZm9yZSBlbWl0dGluZy5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAgICAgKi9cbiAgICBlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGU7XG5cbiAgICAgICAgZnVuY3Rpb24gZW1pdChldmVudCkge1xuICAgICAgICAgICAgc2VsZi5tYW5hZ2VyLmVtaXQoZXZlbnQsIGlucHV0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vICdwYW5zdGFydCcgYW5kICdwYW5tb3ZlJ1xuICAgICAgICBpZiAoc3RhdGUgPCBTVEFURV9FTkRFRCkge1xuICAgICAgICAgICAgZW1pdChzZWxmLm9wdGlvbnMuZXZlbnQgKyBzdGF0ZVN0cihzdGF0ZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZW1pdChzZWxmLm9wdGlvbnMuZXZlbnQpOyAvLyBzaW1wbGUgJ2V2ZW50TmFtZScgZXZlbnRzXG5cbiAgICAgICAgaWYgKGlucHV0LmFkZGl0aW9uYWxFdmVudCkgeyAvLyBhZGRpdGlvbmFsIGV2ZW50KHBhbmxlZnQsIHBhbnJpZ2h0LCBwaW5jaGluLCBwaW5jaG91dC4uLilcbiAgICAgICAgICAgIGVtaXQoaW5wdXQuYWRkaXRpb25hbEV2ZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHBhbmVuZCBhbmQgcGFuY2FuY2VsXG4gICAgICAgIGlmIChzdGF0ZSA+PSBTVEFURV9FTkRFRCkge1xuICAgICAgICAgICAgZW1pdChzZWxmLm9wdGlvbnMuZXZlbnQgKyBzdGF0ZVN0cihzdGF0ZSkpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENoZWNrIHRoYXQgYWxsIHRoZSByZXF1aXJlIGZhaWx1cmUgcmVjb2duaXplcnMgaGFzIGZhaWxlZCxcbiAgICAgKiBpZiB0cnVlLCBpdCBlbWl0cyBhIGdlc3R1cmUgZXZlbnQsXG4gICAgICogb3RoZXJ3aXNlLCBzZXR1cCB0aGUgc3RhdGUgdG8gRkFJTEVELlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICAgICAqL1xuICAgIHRyeUVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLmNhbkVtaXQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW1pdChpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaXQncyBmYWlsaW5nIGFueXdheVxuICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRkFJTEVEO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBjYW4gd2UgZW1pdD9cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBjYW5FbWl0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHRoaXMucmVxdWlyZUZhaWwubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoISh0aGlzLnJlcXVpcmVGYWlsW2ldLnN0YXRlICYgKFNUQVRFX0ZBSUxFRCB8IFNUQVRFX1BPU1NJQkxFKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHVwZGF0ZSB0aGUgcmVjb2duaXplclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dERhdGFcbiAgICAgKi9cbiAgICByZWNvZ25pemU6IGZ1bmN0aW9uKGlucHV0RGF0YSkge1xuICAgICAgICAvLyBtYWtlIGEgbmV3IGNvcHkgb2YgdGhlIGlucHV0RGF0YVxuICAgICAgICAvLyBzbyB3ZSBjYW4gY2hhbmdlIHRoZSBpbnB1dERhdGEgd2l0aG91dCBtZXNzaW5nIHVwIHRoZSBvdGhlciByZWNvZ25pemVyc1xuICAgICAgICB2YXIgaW5wdXREYXRhQ2xvbmUgPSBhc3NpZ24oe30sIGlucHV0RGF0YSk7XG5cbiAgICAgICAgLy8gaXMgaXMgZW5hYmxlZCBhbmQgYWxsb3cgcmVjb2duaXppbmc/XG4gICAgICAgIGlmICghYm9vbE9yRm4odGhpcy5vcHRpb25zLmVuYWJsZSwgW3RoaXMsIGlucHV0RGF0YUNsb25lXSkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GQUlMRUQ7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZXNldCB3aGVuIHdlJ3ZlIHJlYWNoZWQgdGhlIGVuZFxuICAgICAgICBpZiAodGhpcy5zdGF0ZSAmIChTVEFURV9SRUNPR05JWkVEIHwgU1RBVEVfQ0FOQ0VMTEVEIHwgU1RBVEVfRkFJTEVEKSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1BPU1NJQkxFO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMucHJvY2VzcyhpbnB1dERhdGFDbG9uZSk7XG5cbiAgICAgICAgLy8gdGhlIHJlY29nbml6ZXIgaGFzIHJlY29nbml6ZWQgYSBnZXN0dXJlXG4gICAgICAgIC8vIHNvIHRyaWdnZXIgYW4gZXZlbnRcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgJiAoU1RBVEVfQkVHQU4gfCBTVEFURV9DSEFOR0VEIHwgU1RBVEVfRU5ERUQgfCBTVEFURV9DQU5DRUxMRUQpKSB7XG4gICAgICAgICAgICB0aGlzLnRyeUVtaXQoaW5wdXREYXRhQ2xvbmUpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHJldHVybiB0aGUgc3RhdGUgb2YgdGhlIHJlY29nbml6ZXJcbiAgICAgKiB0aGUgYWN0dWFsIHJlY29nbml6aW5nIGhhcHBlbnMgaW4gdGhpcyBtZXRob2RcbiAgICAgKiBAdmlydHVhbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dERhdGFcbiAgICAgKiBAcmV0dXJucyB7Q29uc3R9IFNUQVRFXG4gICAgICovXG4gICAgcHJvY2VzczogZnVuY3Rpb24oaW5wdXREYXRhKSB7IH0sIC8vIGpzaGludCBpZ25vcmU6bGluZVxuXG4gICAgLyoqXG4gICAgICogcmV0dXJuIHRoZSBwcmVmZXJyZWQgdG91Y2gtYWN0aW9uXG4gICAgICogQHZpcnR1YWxcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9XG4gICAgICovXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkgeyB9LFxuXG4gICAgLyoqXG4gICAgICogY2FsbGVkIHdoZW4gdGhlIGdlc3R1cmUgaXNuJ3QgYWxsb3dlZCB0byByZWNvZ25pemVcbiAgICAgKiBsaWtlIHdoZW4gYW5vdGhlciBpcyBiZWluZyByZWNvZ25pemVkIG9yIGl0IGlzIGRpc2FibGVkXG4gICAgICogQHZpcnR1YWxcbiAgICAgKi9cbiAgICByZXNldDogZnVuY3Rpb24oKSB7IH1cbn07XG5cbi8qKlxuICogZ2V0IGEgdXNhYmxlIHN0cmluZywgdXNlZCBhcyBldmVudCBwb3N0Zml4XG4gKiBAcGFyYW0ge0NvbnN0fSBzdGF0ZVxuICogQHJldHVybnMge1N0cmluZ30gc3RhdGVcbiAqL1xuZnVuY3Rpb24gc3RhdGVTdHIoc3RhdGUpIHtcbiAgICBpZiAoc3RhdGUgJiBTVEFURV9DQU5DRUxMRUQpIHtcbiAgICAgICAgcmV0dXJuICdjYW5jZWwnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUgJiBTVEFURV9FTkRFRCkge1xuICAgICAgICByZXR1cm4gJ2VuZCc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZSAmIFNUQVRFX0NIQU5HRUQpIHtcbiAgICAgICAgcmV0dXJuICdtb3ZlJztcbiAgICB9IGVsc2UgaWYgKHN0YXRlICYgU1RBVEVfQkVHQU4pIHtcbiAgICAgICAgcmV0dXJuICdzdGFydCc7XG4gICAgfVxuICAgIHJldHVybiAnJztcbn1cblxuLyoqXG4gKiBkaXJlY3Rpb24gY29ucyB0byBzdHJpbmdcbiAqIEBwYXJhbSB7Q29uc3R9IGRpcmVjdGlvblxuICogQHJldHVybnMge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZGlyZWN0aW9uU3RyKGRpcmVjdGlvbikge1xuICAgIGlmIChkaXJlY3Rpb24gPT0gRElSRUNUSU9OX0RPV04pIHtcbiAgICAgICAgcmV0dXJuICdkb3duJztcbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBESVJFQ1RJT05fVVApIHtcbiAgICAgICAgcmV0dXJuICd1cCc7XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gRElSRUNUSU9OX0xFRlQpIHtcbiAgICAgICAgcmV0dXJuICdsZWZ0JztcbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBESVJFQ1RJT05fUklHSFQpIHtcbiAgICAgICAgcmV0dXJuICdyaWdodCc7XG4gICAgfVxuICAgIHJldHVybiAnJztcbn1cblxuLyoqXG4gKiBnZXQgYSByZWNvZ25pemVyIGJ5IG5hbWUgaWYgaXQgaXMgYm91bmQgdG8gYSBtYW5hZ2VyXG4gKiBAcGFyYW0ge1JlY29nbml6ZXJ8U3RyaW5nfSBvdGhlclJlY29nbml6ZXJcbiAqIEBwYXJhbSB7UmVjb2duaXplcn0gcmVjb2duaXplclxuICogQHJldHVybnMge1JlY29nbml6ZXJ9XG4gKi9cbmZ1bmN0aW9uIGdldFJlY29nbml6ZXJCeU5hbWVJZk1hbmFnZXIob3RoZXJSZWNvZ25pemVyLCByZWNvZ25pemVyKSB7XG4gICAgdmFyIG1hbmFnZXIgPSByZWNvZ25pemVyLm1hbmFnZXI7XG4gICAgaWYgKG1hbmFnZXIpIHtcbiAgICAgICAgcmV0dXJuIG1hbmFnZXIuZ2V0KG90aGVyUmVjb2duaXplcik7XG4gICAgfVxuICAgIHJldHVybiBvdGhlclJlY29nbml6ZXI7XG59XG5cbi8qKlxuICogVGhpcyByZWNvZ25pemVyIGlzIGp1c3QgdXNlZCBhcyBhIGJhc2UgZm9yIHRoZSBzaW1wbGUgYXR0cmlidXRlIHJlY29nbml6ZXJzLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBSZWNvZ25pemVyXG4gKi9cbmZ1bmN0aW9uIEF0dHJSZWNvZ25pemVyKCkge1xuICAgIFJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuaW5oZXJpdChBdHRyUmVjb2duaXplciwgUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgQXR0clJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge051bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMVxuICAgICAgICAgKi9cbiAgICAgICAgcG9pbnRlcnM6IDFcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVXNlZCB0byBjaGVjayBpZiBpdCB0aGUgcmVjb2duaXplciByZWNlaXZlcyB2YWxpZCBpbnB1dCwgbGlrZSBpbnB1dC5kaXN0YW5jZSA+IDEwLlxuICAgICAqIEBtZW1iZXJvZiBBdHRyUmVjb2duaXplclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufSByZWNvZ25pemVkXG4gICAgICovXG4gICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBvcHRpb25Qb2ludGVycyA9IHRoaXMub3B0aW9ucy5wb2ludGVycztcbiAgICAgICAgcmV0dXJuIG9wdGlvblBvaW50ZXJzID09PSAwIHx8IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA9PT0gb3B0aW9uUG9pbnRlcnM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFByb2Nlc3MgdGhlIGlucHV0IGFuZCByZXR1cm4gdGhlIHN0YXRlIGZvciB0aGUgcmVjb2duaXplclxuICAgICAqIEBtZW1iZXJvZiBBdHRyUmVjb2duaXplclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICAgICAqIEByZXR1cm5zIHsqfSBTdGF0ZVxuICAgICAqL1xuICAgIHByb2Nlc3M6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIHZhciBldmVudFR5cGUgPSBpbnB1dC5ldmVudFR5cGU7XG5cbiAgICAgICAgdmFyIGlzUmVjb2duaXplZCA9IHN0YXRlICYgKFNUQVRFX0JFR0FOIHwgU1RBVEVfQ0hBTkdFRCk7XG4gICAgICAgIHZhciBpc1ZhbGlkID0gdGhpcy5hdHRyVGVzdChpbnB1dCk7XG5cbiAgICAgICAgLy8gb24gY2FuY2VsIGlucHV0IGFuZCB3ZSd2ZSByZWNvZ25pemVkIGJlZm9yZSwgcmV0dXJuIFNUQVRFX0NBTkNFTExFRFxuICAgICAgICBpZiAoaXNSZWNvZ25pemVkICYmIChldmVudFR5cGUgJiBJTlBVVF9DQU5DRUwgfHwgIWlzVmFsaWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUgfCBTVEFURV9DQU5DRUxMRUQ7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNSZWNvZ25pemVkIHx8IGlzVmFsaWQpIHtcbiAgICAgICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9FTkQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGUgfCBTVEFURV9FTkRFRDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIShzdGF0ZSAmIFNUQVRFX0JFR0FOKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBTVEFURV9CRUdBTjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdGF0ZSB8IFNUQVRFX0NIQU5HRUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFNUQVRFX0ZBSUxFRDtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBQYW5cbiAqIFJlY29nbml6ZWQgd2hlbiB0aGUgcG9pbnRlciBpcyBkb3duIGFuZCBtb3ZlZCBpbiB0aGUgYWxsb3dlZCBkaXJlY3Rpb24uXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIEF0dHJSZWNvZ25pemVyXG4gKi9cbmZ1bmN0aW9uIFBhblJlY29nbml6ZXIoKSB7XG4gICAgQXR0clJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIHRoaXMucFggPSBudWxsO1xuICAgIHRoaXMucFkgPSBudWxsO1xufVxuXG5pbmhlcml0KFBhblJlY29nbml6ZXIsIEF0dHJSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBQYW5SZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZXZlbnQ6ICdwYW4nLFxuICAgICAgICB0aHJlc2hvbGQ6IDEwLFxuICAgICAgICBwb2ludGVyczogMSxcbiAgICAgICAgZGlyZWN0aW9uOiBESVJFQ1RJT05fQUxMXG4gICAgfSxcblxuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHRoaXMub3B0aW9ucy5kaXJlY3Rpb247XG4gICAgICAgIHZhciBhY3Rpb25zID0gW107XG4gICAgICAgIGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fSE9SSVpPTlRBTCkge1xuICAgICAgICAgICAgYWN0aW9ucy5wdXNoKFRPVUNIX0FDVElPTl9QQU5fWSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRpcmVjdGlvbiAmIERJUkVDVElPTl9WRVJUSUNBTCkge1xuICAgICAgICAgICAgYWN0aW9ucy5wdXNoKFRPVUNIX0FDVElPTl9QQU5fWCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjdGlvbnM7XG4gICAgfSxcblxuICAgIGRpcmVjdGlvblRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICB2YXIgaGFzTW92ZWQgPSB0cnVlO1xuICAgICAgICB2YXIgZGlzdGFuY2UgPSBpbnB1dC5kaXN0YW5jZTtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGlucHV0LmRpcmVjdGlvbjtcbiAgICAgICAgdmFyIHggPSBpbnB1dC5kZWx0YVg7XG4gICAgICAgIHZhciB5ID0gaW5wdXQuZGVsdGFZO1xuXG4gICAgICAgIC8vIGxvY2sgdG8gYXhpcz9cbiAgICAgICAgaWYgKCEoZGlyZWN0aW9uICYgb3B0aW9ucy5kaXJlY3Rpb24pKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kaXJlY3Rpb24gJiBESVJFQ1RJT05fSE9SSVpPTlRBTCkge1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9ICh4ID09PSAwKSA/IERJUkVDVElPTl9OT05FIDogKHggPCAwKSA/IERJUkVDVElPTl9MRUZUIDogRElSRUNUSU9OX1JJR0hUO1xuICAgICAgICAgICAgICAgIGhhc01vdmVkID0geCAhPSB0aGlzLnBYO1xuICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gTWF0aC5hYnMoaW5wdXQuZGVsdGFYKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gKHkgPT09IDApID8gRElSRUNUSU9OX05PTkUgOiAoeSA8IDApID8gRElSRUNUSU9OX1VQIDogRElSRUNUSU9OX0RPV047XG4gICAgICAgICAgICAgICAgaGFzTW92ZWQgPSB5ICE9IHRoaXMucFk7XG4gICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBNYXRoLmFicyhpbnB1dC5kZWx0YVkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlucHV0LmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbiAgICAgICAgcmV0dXJuIGhhc01vdmVkICYmIGRpc3RhbmNlID4gb3B0aW9ucy50aHJlc2hvbGQgJiYgZGlyZWN0aW9uICYgb3B0aW9ucy5kaXJlY3Rpb247XG4gICAgfSxcblxuICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICByZXR1cm4gQXR0clJlY29nbml6ZXIucHJvdG90eXBlLmF0dHJUZXN0LmNhbGwodGhpcywgaW5wdXQpICYmXG4gICAgICAgICAgICAodGhpcy5zdGF0ZSAmIFNUQVRFX0JFR0FOIHx8ICghKHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTikgJiYgdGhpcy5kaXJlY3Rpb25UZXN0KGlucHV0KSkpO1xuICAgIH0sXG5cbiAgICBlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuXG4gICAgICAgIHRoaXMucFggPSBpbnB1dC5kZWx0YVg7XG4gICAgICAgIHRoaXMucFkgPSBpbnB1dC5kZWx0YVk7XG5cbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGRpcmVjdGlvblN0cihpbnB1dC5kaXJlY3Rpb24pO1xuXG4gICAgICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGlucHV0LmFkZGl0aW9uYWxFdmVudCA9IHRoaXMub3B0aW9ucy5ldmVudCArIGRpcmVjdGlvbjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zdXBlci5lbWl0LmNhbGwodGhpcywgaW5wdXQpO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFBpbmNoXG4gKiBSZWNvZ25pemVkIHdoZW4gdHdvIG9yIG1vcmUgcG9pbnRlcnMgYXJlIG1vdmluZyB0b3dhcmQgKHpvb20taW4pIG9yIGF3YXkgZnJvbSBlYWNoIG90aGVyICh6b29tLW91dCkuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIEF0dHJSZWNvZ25pemVyXG4gKi9cbmZ1bmN0aW9uIFBpbmNoUmVjb2duaXplcigpIHtcbiAgICBBdHRyUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KFBpbmNoUmVjb2duaXplciwgQXR0clJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFBpbmNoUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIGV2ZW50OiAncGluY2gnLFxuICAgICAgICB0aHJlc2hvbGQ6IDAsXG4gICAgICAgIHBvaW50ZXJzOiAyXG4gICAgfSxcblxuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFtUT1VDSF9BQ1RJT05fTk9ORV07XG4gICAgfSxcblxuICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLCBpbnB1dCkgJiZcbiAgICAgICAgICAgIChNYXRoLmFicyhpbnB1dC5zY2FsZSAtIDEpID4gdGhpcy5vcHRpb25zLnRocmVzaG9sZCB8fCB0aGlzLnN0YXRlICYgU1RBVEVfQkVHQU4pO1xuICAgIH0sXG5cbiAgICBlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQuc2NhbGUgIT09IDEpIHtcbiAgICAgICAgICAgIHZhciBpbk91dCA9IGlucHV0LnNjYWxlIDwgMSA/ICdpbicgOiAnb3V0JztcbiAgICAgICAgICAgIGlucHV0LmFkZGl0aW9uYWxFdmVudCA9IHRoaXMub3B0aW9ucy5ldmVudCArIGluT3V0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLCBpbnB1dCk7XG4gICAgfVxufSk7XG5cbi8qKlxuICogUHJlc3NcbiAqIFJlY29nbml6ZWQgd2hlbiB0aGUgcG9pbnRlciBpcyBkb3duIGZvciB4IG1zIHdpdGhvdXQgYW55IG1vdmVtZW50LlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBSZWNvZ25pemVyXG4gKi9cbmZ1bmN0aW9uIFByZXNzUmVjb2duaXplcigpIHtcbiAgICBSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICB0aGlzLl90aW1lciA9IG51bGw7XG4gICAgdGhpcy5faW5wdXQgPSBudWxsO1xufVxuXG5pbmhlcml0KFByZXNzUmVjb2duaXplciwgUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgUHJlc3NSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZXZlbnQ6ICdwcmVzcycsXG4gICAgICAgIHBvaW50ZXJzOiAxLFxuICAgICAgICB0aW1lOiAyNTEsIC8vIG1pbmltYWwgdGltZSBvZiB0aGUgcG9pbnRlciB0byBiZSBwcmVzc2VkXG4gICAgICAgIHRocmVzaG9sZDogOSAvLyBhIG1pbmltYWwgbW92ZW1lbnQgaXMgb2ssIGJ1dCBrZWVwIGl0IGxvd1xuICAgIH0sXG5cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBbVE9VQ0hfQUNUSU9OX0FVVE9dO1xuICAgIH0sXG5cbiAgICBwcm9jZXNzOiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgdmFyIHZhbGlkUG9pbnRlcnMgPSBpbnB1dC5wb2ludGVycy5sZW5ndGggPT09IG9wdGlvbnMucG9pbnRlcnM7XG4gICAgICAgIHZhciB2YWxpZE1vdmVtZW50ID0gaW5wdXQuZGlzdGFuY2UgPCBvcHRpb25zLnRocmVzaG9sZDtcbiAgICAgICAgdmFyIHZhbGlkVGltZSA9IGlucHV0LmRlbHRhVGltZSA+IG9wdGlvbnMudGltZTtcblxuICAgICAgICB0aGlzLl9pbnB1dCA9IGlucHV0O1xuXG4gICAgICAgIC8vIHdlIG9ubHkgYWxsb3cgbGl0dGxlIG1vdmVtZW50XG4gICAgICAgIC8vIGFuZCB3ZSd2ZSByZWFjaGVkIGFuIGVuZCBldmVudCwgc28gYSB0YXAgaXMgcG9zc2libGVcbiAgICAgICAgaWYgKCF2YWxpZE1vdmVtZW50IHx8ICF2YWxpZFBvaW50ZXJzIHx8IChpbnB1dC5ldmVudFR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSAmJiAhdmFsaWRUaW1lKSkge1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX1NUQVJUKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgICAgICB0aGlzLl90aW1lciA9IHNldFRpbWVvdXRDb250ZXh0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9SRUNPR05JWkVEO1xuICAgICAgICAgICAgICAgIHRoaXMudHJ5RW1pdCgpO1xuICAgICAgICAgICAgfSwgb3B0aW9ucy50aW1lLCB0aGlzKTtcbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dC5ldmVudFR5cGUgJiBJTlBVVF9FTkQpIHtcbiAgICAgICAgICAgIHJldHVybiBTVEFURV9SRUNPR05JWkVEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTVEFURV9GQUlMRUQ7XG4gICAgfSxcblxuICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKTtcbiAgICB9LFxuXG4gICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFNUQVRFX1JFQ09HTklaRUQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbnB1dCAmJiAoaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfRU5EKSkge1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50ICsgJ3VwJywgaW5wdXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faW5wdXQudGltZVN0YW1wID0gbm93KCk7XG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQsIHRoaXMuX2lucHV0KTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG4vKipcbiAqIFJvdGF0ZVxuICogUmVjb2duaXplZCB3aGVuIHR3byBvciBtb3JlIHBvaW50ZXIgYXJlIG1vdmluZyBpbiBhIGNpcmN1bGFyIG1vdGlvbi5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgQXR0clJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gUm90YXRlUmVjb2duaXplcigpIHtcbiAgICBBdHRyUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KFJvdGF0ZVJlY29nbml6ZXIsIEF0dHJSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBSb3RhdGVSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZXZlbnQ6ICdyb3RhdGUnLFxuICAgICAgICB0aHJlc2hvbGQ6IDAsXG4gICAgICAgIHBvaW50ZXJzOiAyXG4gICAgfSxcblxuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFtUT1VDSF9BQ1RJT05fTk9ORV07XG4gICAgfSxcblxuICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLCBpbnB1dCkgJiZcbiAgICAgICAgICAgIChNYXRoLmFicyhpbnB1dC5yb3RhdGlvbikgPiB0aGlzLm9wdGlvbnMudGhyZXNob2xkIHx8IHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTik7XG4gICAgfVxufSk7XG5cbi8qKlxuICogU3dpcGVcbiAqIFJlY29nbml6ZWQgd2hlbiB0aGUgcG9pbnRlciBpcyBtb3ZpbmcgZmFzdCAodmVsb2NpdHkpLCB3aXRoIGVub3VnaCBkaXN0YW5jZSBpbiB0aGUgYWxsb3dlZCBkaXJlY3Rpb24uXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIEF0dHJSZWNvZ25pemVyXG4gKi9cbmZ1bmN0aW9uIFN3aXBlUmVjb2duaXplcigpIHtcbiAgICBBdHRyUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KFN3aXBlUmVjb2duaXplciwgQXR0clJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFN3aXBlUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIGV2ZW50OiAnc3dpcGUnLFxuICAgICAgICB0aHJlc2hvbGQ6IDEwLFxuICAgICAgICB2ZWxvY2l0eTogMC4zLFxuICAgICAgICBkaXJlY3Rpb246IERJUkVDVElPTl9IT1JJWk9OVEFMIHwgRElSRUNUSU9OX1ZFUlRJQ0FMLFxuICAgICAgICBwb2ludGVyczogMVxuICAgIH0sXG5cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBQYW5SZWNvZ25pemVyLnByb3RvdHlwZS5nZXRUb3VjaEFjdGlvbi5jYWxsKHRoaXMpO1xuICAgIH0sXG5cbiAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHRoaXMub3B0aW9ucy5kaXJlY3Rpb247XG4gICAgICAgIHZhciB2ZWxvY2l0eTtcblxuICAgICAgICBpZiAoZGlyZWN0aW9uICYgKERJUkVDVElPTl9IT1JJWk9OVEFMIHwgRElSRUNUSU9OX1ZFUlRJQ0FMKSkge1xuICAgICAgICAgICAgdmVsb2NpdHkgPSBpbnB1dC5vdmVyYWxsVmVsb2NpdHk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uICYgRElSRUNUSU9OX0hPUklaT05UQUwpIHtcbiAgICAgICAgICAgIHZlbG9jaXR5ID0gaW5wdXQub3ZlcmFsbFZlbG9jaXR5WDtcbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fVkVSVElDQUwpIHtcbiAgICAgICAgICAgIHZlbG9jaXR5ID0gaW5wdXQub3ZlcmFsbFZlbG9jaXR5WTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsIGlucHV0KSAmJlxuICAgICAgICAgICAgZGlyZWN0aW9uICYgaW5wdXQub2Zmc2V0RGlyZWN0aW9uICYmXG4gICAgICAgICAgICBpbnB1dC5kaXN0YW5jZSA+IHRoaXMub3B0aW9ucy50aHJlc2hvbGQgJiZcbiAgICAgICAgICAgIGlucHV0Lm1heFBvaW50ZXJzID09IHRoaXMub3B0aW9ucy5wb2ludGVycyAmJlxuICAgICAgICAgICAgYWJzKHZlbG9jaXR5KSA+IHRoaXMub3B0aW9ucy52ZWxvY2l0eSAmJiBpbnB1dC5ldmVudFR5cGUgJiBJTlBVVF9FTkQ7XG4gICAgfSxcblxuICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBkaXJlY3Rpb25TdHIoaW5wdXQub2Zmc2V0RGlyZWN0aW9uKTtcbiAgICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50ICsgZGlyZWN0aW9uLCBpbnB1dCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQsIGlucHV0KTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBBIHRhcCBpcyBlY29nbml6ZWQgd2hlbiB0aGUgcG9pbnRlciBpcyBkb2luZyBhIHNtYWxsIHRhcC9jbGljay4gTXVsdGlwbGUgdGFwcyBhcmUgcmVjb2duaXplZCBpZiB0aGV5IG9jY3VyXG4gKiBiZXR3ZWVuIHRoZSBnaXZlbiBpbnRlcnZhbCBhbmQgcG9zaXRpb24uIFRoZSBkZWxheSBvcHRpb24gY2FuIGJlIHVzZWQgdG8gcmVjb2duaXplIG11bHRpLXRhcHMgd2l0aG91dCBmaXJpbmdcbiAqIGEgc2luZ2xlIHRhcC5cbiAqXG4gKiBUaGUgZXZlbnREYXRhIGZyb20gdGhlIGVtaXR0ZWQgZXZlbnQgY29udGFpbnMgdGhlIHByb3BlcnR5IGB0YXBDb3VudGAsIHdoaWNoIGNvbnRhaW5zIHRoZSBhbW91bnQgb2ZcbiAqIG11bHRpLXRhcHMgYmVpbmcgcmVjb2duaXplZC5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBUYXBSZWNvZ25pemVyKCkge1xuICAgIFJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIC8vIHByZXZpb3VzIHRpbWUgYW5kIGNlbnRlcixcbiAgICAvLyB1c2VkIGZvciB0YXAgY291bnRpbmdcbiAgICB0aGlzLnBUaW1lID0gZmFsc2U7XG4gICAgdGhpcy5wQ2VudGVyID0gZmFsc2U7XG5cbiAgICB0aGlzLl90aW1lciA9IG51bGw7XG4gICAgdGhpcy5faW5wdXQgPSBudWxsO1xuICAgIHRoaXMuY291bnQgPSAwO1xufVxuXG5pbmhlcml0KFRhcFJlY29nbml6ZXIsIFJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFBpbmNoUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIGV2ZW50OiAndGFwJyxcbiAgICAgICAgcG9pbnRlcnM6IDEsXG4gICAgICAgIHRhcHM6IDEsXG4gICAgICAgIGludGVydmFsOiAzMDAsIC8vIG1heCB0aW1lIGJldHdlZW4gdGhlIG11bHRpLXRhcCB0YXBzXG4gICAgICAgIHRpbWU6IDI1MCwgLy8gbWF4IHRpbWUgb2YgdGhlIHBvaW50ZXIgdG8gYmUgZG93biAobGlrZSBmaW5nZXIgb24gdGhlIHNjcmVlbilcbiAgICAgICAgdGhyZXNob2xkOiA5LCAvLyBhIG1pbmltYWwgbW92ZW1lbnQgaXMgb2ssIGJ1dCBrZWVwIGl0IGxvd1xuICAgICAgICBwb3NUaHJlc2hvbGQ6IDEwIC8vIGEgbXVsdGktdGFwIGNhbiBiZSBhIGJpdCBvZmYgdGhlIGluaXRpYWwgcG9zaXRpb25cbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9NQU5JUFVMQVRJT05dO1xuICAgIH0sXG5cbiAgICBwcm9jZXNzOiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcblxuICAgICAgICB2YXIgdmFsaWRQb2ludGVycyA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA9PT0gb3B0aW9ucy5wb2ludGVycztcbiAgICAgICAgdmFyIHZhbGlkTW92ZW1lbnQgPSBpbnB1dC5kaXN0YW5jZSA8IG9wdGlvbnMudGhyZXNob2xkO1xuICAgICAgICB2YXIgdmFsaWRUb3VjaFRpbWUgPSBpbnB1dC5kZWx0YVRpbWUgPCBvcHRpb25zLnRpbWU7XG5cbiAgICAgICAgdGhpcy5yZXNldCgpO1xuXG4gICAgICAgIGlmICgoaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQpICYmICh0aGlzLmNvdW50ID09PSAwKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmFpbFRpbWVvdXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHdlIG9ubHkgYWxsb3cgbGl0dGxlIG1vdmVtZW50XG4gICAgICAgIC8vIGFuZCB3ZSd2ZSByZWFjaGVkIGFuIGVuZCBldmVudCwgc28gYSB0YXAgaXMgcG9zc2libGVcbiAgICAgICAgaWYgKHZhbGlkTW92ZW1lbnQgJiYgdmFsaWRUb3VjaFRpbWUgJiYgdmFsaWRQb2ludGVycykge1xuICAgICAgICAgICAgaWYgKGlucHV0LmV2ZW50VHlwZSAhPSBJTlBVVF9FTkQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdmFsaWRJbnRlcnZhbCA9IHRoaXMucFRpbWUgPyAoaW5wdXQudGltZVN0YW1wIC0gdGhpcy5wVGltZSA8IG9wdGlvbnMuaW50ZXJ2YWwpIDogdHJ1ZTtcbiAgICAgICAgICAgIHZhciB2YWxpZE11bHRpVGFwID0gIXRoaXMucENlbnRlciB8fCBnZXREaXN0YW5jZSh0aGlzLnBDZW50ZXIsIGlucHV0LmNlbnRlcikgPCBvcHRpb25zLnBvc1RocmVzaG9sZDtcblxuICAgICAgICAgICAgdGhpcy5wVGltZSA9IGlucHV0LnRpbWVTdGFtcDtcbiAgICAgICAgICAgIHRoaXMucENlbnRlciA9IGlucHV0LmNlbnRlcjtcblxuICAgICAgICAgICAgaWYgKCF2YWxpZE11bHRpVGFwIHx8ICF2YWxpZEludGVydmFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY291bnQgKz0gMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5faW5wdXQgPSBpbnB1dDtcblxuICAgICAgICAgICAgLy8gaWYgdGFwIGNvdW50IG1hdGNoZXMgd2UgaGF2ZSByZWNvZ25pemVkIGl0LFxuICAgICAgICAgICAgLy8gZWxzZSBpdCBoYXMgYmVnYW4gcmVjb2duaXppbmcuLi5cbiAgICAgICAgICAgIHZhciB0YXBDb3VudCA9IHRoaXMuY291bnQgJSBvcHRpb25zLnRhcHM7XG4gICAgICAgICAgICBpZiAodGFwQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAvLyBubyBmYWlsaW5nIHJlcXVpcmVtZW50cywgaW1tZWRpYXRlbHkgdHJpZ2dlciB0aGUgdGFwIGV2ZW50XG4gICAgICAgICAgICAgICAgLy8gb3Igd2FpdCBhcyBsb25nIGFzIHRoZSBtdWx0aXRhcCBpbnRlcnZhbCB0byB0cmlnZ2VyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmhhc1JlcXVpcmVGYWlsdXJlcygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTVEFURV9SRUNPR05JWkVEO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3RpbWVyID0gc2V0VGltZW91dENvbnRleHQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUkVDT0dOSVpFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJ5RW1pdCgpO1xuICAgICAgICAgICAgICAgICAgICB9LCBvcHRpb25zLmludGVydmFsLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNUQVRFX0JFR0FOO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU1RBVEVfRkFJTEVEO1xuICAgIH0sXG5cbiAgICBmYWlsVGltZW91dDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuX3RpbWVyID0gc2V0VGltZW91dENvbnRleHQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRkFJTEVEO1xuICAgICAgICB9LCB0aGlzLm9wdGlvbnMuaW50ZXJ2YWwsIHRoaXMpO1xuICAgICAgICByZXR1cm4gU1RBVEVfRkFJTEVEO1xuICAgIH0sXG5cbiAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lcik7XG4gICAgfSxcblxuICAgIGVtaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSBTVEFURV9SRUNPR05JWkVEKSB7XG4gICAgICAgICAgICB0aGlzLl9pbnB1dC50YXBDb3VudCA9IHRoaXMuY291bnQ7XG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQsIHRoaXMuX2lucHV0KTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG4vKipcbiAqIFNpbXBsZSB3YXkgdG8gY3JlYXRlIGEgbWFuYWdlciB3aXRoIGEgZGVmYXVsdCBzZXQgb2YgcmVjb2duaXplcnMuXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gSGFtbWVyKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBvcHRpb25zLnJlY29nbml6ZXJzID0gaWZVbmRlZmluZWQob3B0aW9ucy5yZWNvZ25pemVycywgSGFtbWVyLmRlZmF1bHRzLnByZXNldCk7XG4gICAgcmV0dXJuIG5ldyBNYW5hZ2VyKGVsZW1lbnQsIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIEBjb25zdCB7c3RyaW5nfVxuICovXG5IYW1tZXIuVkVSU0lPTiA9ICcyLjAuNyc7XG5cbi8qKlxuICogZGVmYXVsdCBzZXR0aW5nc1xuICogQG5hbWVzcGFjZVxuICovXG5IYW1tZXIuZGVmYXVsdHMgPSB7XG4gICAgLyoqXG4gICAgICogc2V0IGlmIERPTSBldmVudHMgYXJlIGJlaW5nIHRyaWdnZXJlZC5cbiAgICAgKiBCdXQgdGhpcyBpcyBzbG93ZXIgYW5kIHVudXNlZCBieSBzaW1wbGUgaW1wbGVtZW50YXRpb25zLCBzbyBkaXNhYmxlZCBieSBkZWZhdWx0LlxuICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgZG9tRXZlbnRzOiBmYWxzZSxcblxuICAgIC8qKlxuICAgICAqIFRoZSB2YWx1ZSBmb3IgdGhlIHRvdWNoQWN0aW9uIHByb3BlcnR5L2ZhbGxiYWNrLlxuICAgICAqIFdoZW4gc2V0IHRvIGBjb21wdXRlYCBpdCB3aWxsIG1hZ2ljYWxseSBzZXQgdGhlIGNvcnJlY3QgdmFsdWUgYmFzZWQgb24gdGhlIGFkZGVkIHJlY29nbml6ZXJzLlxuICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICogQGRlZmF1bHQgY29tcHV0ZVxuICAgICAqL1xuICAgIHRvdWNoQWN0aW9uOiBUT1VDSF9BQ1RJT05fQ09NUFVURSxcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAqIEBkZWZhdWx0IHRydWVcbiAgICAgKi9cbiAgICBlbmFibGU6IHRydWUsXG5cbiAgICAvKipcbiAgICAgKiBFWFBFUklNRU5UQUwgRkVBVFVSRSAtLSBjYW4gYmUgcmVtb3ZlZC9jaGFuZ2VkXG4gICAgICogQ2hhbmdlIHRoZSBwYXJlbnQgaW5wdXQgdGFyZ2V0IGVsZW1lbnQuXG4gICAgICogSWYgTnVsbCwgdGhlbiBpdCBpcyBiZWluZyBzZXQgdGhlIHRvIG1haW4gZWxlbWVudC5cbiAgICAgKiBAdHlwZSB7TnVsbHxFdmVudFRhcmdldH1cbiAgICAgKiBAZGVmYXVsdCBudWxsXG4gICAgICovXG4gICAgaW5wdXRUYXJnZXQ6IG51bGwsXG5cbiAgICAvKipcbiAgICAgKiBmb3JjZSBhbiBpbnB1dCBjbGFzc1xuICAgICAqIEB0eXBlIHtOdWxsfEZ1bmN0aW9ufVxuICAgICAqIEBkZWZhdWx0IG51bGxcbiAgICAgKi9cbiAgICBpbnB1dENsYXNzOiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogRGVmYXVsdCByZWNvZ25pemVyIHNldHVwIHdoZW4gY2FsbGluZyBgSGFtbWVyKClgXG4gICAgICogV2hlbiBjcmVhdGluZyBhIG5ldyBNYW5hZ2VyIHRoZXNlIHdpbGwgYmUgc2tpcHBlZC5cbiAgICAgKiBAdHlwZSB7QXJyYXl9XG4gICAgICovXG4gICAgcHJlc2V0OiBbXG4gICAgICAgIC8vIFJlY29nbml6ZXJDbGFzcywgb3B0aW9ucywgW3JlY29nbml6ZVdpdGgsIC4uLl0sIFtyZXF1aXJlRmFpbHVyZSwgLi4uXVxuICAgICAgICBbUm90YXRlUmVjb2duaXplciwge2VuYWJsZTogZmFsc2V9XSxcbiAgICAgICAgW1BpbmNoUmVjb2duaXplciwge2VuYWJsZTogZmFsc2V9LCBbJ3JvdGF0ZSddXSxcbiAgICAgICAgW1N3aXBlUmVjb2duaXplciwge2RpcmVjdGlvbjogRElSRUNUSU9OX0hPUklaT05UQUx9XSxcbiAgICAgICAgW1BhblJlY29nbml6ZXIsIHtkaXJlY3Rpb246IERJUkVDVElPTl9IT1JJWk9OVEFMfSwgWydzd2lwZSddXSxcbiAgICAgICAgW1RhcFJlY29nbml6ZXJdLFxuICAgICAgICBbVGFwUmVjb2duaXplciwge2V2ZW50OiAnZG91YmxldGFwJywgdGFwczogMn0sIFsndGFwJ11dLFxuICAgICAgICBbUHJlc3NSZWNvZ25pemVyXVxuICAgIF0sXG5cbiAgICAvKipcbiAgICAgKiBTb21lIENTUyBwcm9wZXJ0aWVzIGNhbiBiZSB1c2VkIHRvIGltcHJvdmUgdGhlIHdvcmtpbmcgb2YgSGFtbWVyLlxuICAgICAqIEFkZCB0aGVtIHRvIHRoaXMgbWV0aG9kIGFuZCB0aGV5IHdpbGwgYmUgc2V0IHdoZW4gY3JlYXRpbmcgYSBuZXcgTWFuYWdlci5cbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICovXG4gICAgY3NzUHJvcHM6IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc2FibGVzIHRleHQgc2VsZWN0aW9uIHRvIGltcHJvdmUgdGhlIGRyYWdnaW5nIGdlc3R1cmUuIE1haW5seSBmb3IgZGVza3RvcCBicm93c2Vycy5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICogQGRlZmF1bHQgJ25vbmUnXG4gICAgICAgICAqL1xuICAgICAgICB1c2VyU2VsZWN0OiAnbm9uZScsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc2FibGUgdGhlIFdpbmRvd3MgUGhvbmUgZ3JpcHBlcnMgd2hlbiBwcmVzc2luZyBhbiBlbGVtZW50LlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcbiAgICAgICAgICovXG4gICAgICAgIHRvdWNoU2VsZWN0OiAnbm9uZScsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc2FibGVzIHRoZSBkZWZhdWx0IGNhbGxvdXQgc2hvd24gd2hlbiB5b3UgdG91Y2ggYW5kIGhvbGQgYSB0b3VjaCB0YXJnZXQuXG4gICAgICAgICAqIE9uIGlPUywgd2hlbiB5b3UgdG91Y2ggYW5kIGhvbGQgYSB0b3VjaCB0YXJnZXQgc3VjaCBhcyBhIGxpbmssIFNhZmFyaSBkaXNwbGF5c1xuICAgICAgICAgKiBhIGNhbGxvdXQgY29udGFpbmluZyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbGluay4gVGhpcyBwcm9wZXJ0eSBhbGxvd3MgeW91IHRvIGRpc2FibGUgdGhhdCBjYWxsb3V0LlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcbiAgICAgICAgICovXG4gICAgICAgIHRvdWNoQ2FsbG91dDogJ25vbmUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgd2hldGhlciB6b29taW5nIGlzIGVuYWJsZWQuIFVzZWQgYnkgSUUxMD5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICogQGRlZmF1bHQgJ25vbmUnXG4gICAgICAgICAqL1xuICAgICAgICBjb250ZW50Wm9vbWluZzogJ25vbmUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhhdCBhbiBlbnRpcmUgZWxlbWVudCBzaG91bGQgYmUgZHJhZ2dhYmxlIGluc3RlYWQgb2YgaXRzIGNvbnRlbnRzLiBNYWlubHkgZm9yIGRlc2t0b3AgYnJvd3NlcnMuXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdub25lJ1xuICAgICAgICAgKi9cbiAgICAgICAgdXNlckRyYWc6ICdub25lJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogT3ZlcnJpZGVzIHRoZSBoaWdobGlnaHQgY29sb3Igc2hvd24gd2hlbiB0aGUgdXNlciB0YXBzIGEgbGluayBvciBhIEphdmFTY3JpcHRcbiAgICAgICAgICogY2xpY2thYmxlIGVsZW1lbnQgaW4gaU9TLiBUaGlzIHByb3BlcnR5IG9iZXlzIHRoZSBhbHBoYSB2YWx1ZSwgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKiBAZGVmYXVsdCAncmdiYSgwLDAsMCwwKSdcbiAgICAgICAgICovXG4gICAgICAgIHRhcEhpZ2hsaWdodENvbG9yOiAncmdiYSgwLDAsMCwwKSdcbiAgICB9XG59O1xuXG52YXIgU1RPUCA9IDE7XG52YXIgRk9SQ0VEX1NUT1AgPSAyO1xuXG4vKipcbiAqIE1hbmFnZXJcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBNYW5hZ2VyKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBhc3NpZ24oe30sIEhhbW1lci5kZWZhdWx0cywgb3B0aW9ucyB8fCB7fSk7XG5cbiAgICB0aGlzLm9wdGlvbnMuaW5wdXRUYXJnZXQgPSB0aGlzLm9wdGlvbnMuaW5wdXRUYXJnZXQgfHwgZWxlbWVudDtcblxuICAgIHRoaXMuaGFuZGxlcnMgPSB7fTtcbiAgICB0aGlzLnNlc3Npb24gPSB7fTtcbiAgICB0aGlzLnJlY29nbml6ZXJzID0gW107XG4gICAgdGhpcy5vbGRDc3NQcm9wcyA9IHt9O1xuXG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLmlucHV0ID0gY3JlYXRlSW5wdXRJbnN0YW5jZSh0aGlzKTtcbiAgICB0aGlzLnRvdWNoQWN0aW9uID0gbmV3IFRvdWNoQWN0aW9uKHRoaXMsIHRoaXMub3B0aW9ucy50b3VjaEFjdGlvbik7XG5cbiAgICB0b2dnbGVDc3NQcm9wcyh0aGlzLCB0cnVlKTtcblxuICAgIGVhY2godGhpcy5vcHRpb25zLnJlY29nbml6ZXJzLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgIHZhciByZWNvZ25pemVyID0gdGhpcy5hZGQobmV3IChpdGVtWzBdKShpdGVtWzFdKSk7XG4gICAgICAgIGl0ZW1bMl0gJiYgcmVjb2duaXplci5yZWNvZ25pemVXaXRoKGl0ZW1bMl0pO1xuICAgICAgICBpdGVtWzNdICYmIHJlY29nbml6ZXIucmVxdWlyZUZhaWx1cmUoaXRlbVszXSk7XG4gICAgfSwgdGhpcyk7XG59XG5cbk1hbmFnZXIucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIHNldCBvcHRpb25zXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7TWFuYWdlcn1cbiAgICAgKi9cbiAgICBzZXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG5cbiAgICAgICAgLy8gT3B0aW9ucyB0aGF0IG5lZWQgYSBsaXR0bGUgbW9yZSBzZXR1cFxuICAgICAgICBpZiAob3B0aW9ucy50b3VjaEFjdGlvbikge1xuICAgICAgICAgICAgdGhpcy50b3VjaEFjdGlvbi51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5pbnB1dFRhcmdldCkge1xuICAgICAgICAgICAgLy8gQ2xlYW4gdXAgZXhpc3RpbmcgZXZlbnQgbGlzdGVuZXJzIGFuZCByZWluaXRpYWxpemVcbiAgICAgICAgICAgIHRoaXMuaW5wdXQuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dC50YXJnZXQgPSBvcHRpb25zLmlucHV0VGFyZ2V0O1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5pbml0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHN0b3AgcmVjb2duaXppbmcgZm9yIHRoaXMgc2Vzc2lvbi5cbiAgICAgKiBUaGlzIHNlc3Npb24gd2lsbCBiZSBkaXNjYXJkZWQsIHdoZW4gYSBuZXcgW2lucHV0XXN0YXJ0IGV2ZW50IGlzIGZpcmVkLlxuICAgICAqIFdoZW4gZm9yY2VkLCB0aGUgcmVjb2duaXplciBjeWNsZSBpcyBzdG9wcGVkIGltbWVkaWF0ZWx5LlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2ZvcmNlXVxuICAgICAqL1xuICAgIHN0b3A6IGZ1bmN0aW9uKGZvcmNlKSB7XG4gICAgICAgIHRoaXMuc2Vzc2lvbi5zdG9wcGVkID0gZm9yY2UgPyBGT1JDRURfU1RPUCA6IFNUT1A7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHJ1biB0aGUgcmVjb2duaXplcnMhXG4gICAgICogY2FsbGVkIGJ5IHRoZSBpbnB1dEhhbmRsZXIgZnVuY3Rpb24gb24gZXZlcnkgbW92ZW1lbnQgb2YgdGhlIHBvaW50ZXJzICh0b3VjaGVzKVxuICAgICAqIGl0IHdhbGtzIHRocm91Z2ggYWxsIHRoZSByZWNvZ25pemVycyBhbmQgdHJpZXMgdG8gZGV0ZWN0IHRoZSBnZXN0dXJlIHRoYXQgaXMgYmVpbmcgbWFkZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dERhdGFcbiAgICAgKi9cbiAgICByZWNvZ25pemU6IGZ1bmN0aW9uKGlucHV0RGF0YSkge1xuICAgICAgICB2YXIgc2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbjtcbiAgICAgICAgaWYgKHNlc3Npb24uc3RvcHBlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcnVuIHRoZSB0b3VjaC1hY3Rpb24gcG9seWZpbGxcbiAgICAgICAgdGhpcy50b3VjaEFjdGlvbi5wcmV2ZW50RGVmYXVsdHMoaW5wdXREYXRhKTtcblxuICAgICAgICB2YXIgcmVjb2duaXplcjtcbiAgICAgICAgdmFyIHJlY29nbml6ZXJzID0gdGhpcy5yZWNvZ25pemVycztcblxuICAgICAgICAvLyB0aGlzIGhvbGRzIHRoZSByZWNvZ25pemVyIHRoYXQgaXMgYmVpbmcgcmVjb2duaXplZC5cbiAgICAgICAgLy8gc28gdGhlIHJlY29nbml6ZXIncyBzdGF0ZSBuZWVkcyB0byBiZSBCRUdBTiwgQ0hBTkdFRCwgRU5ERUQgb3IgUkVDT0dOSVpFRFxuICAgICAgICAvLyBpZiBubyByZWNvZ25pemVyIGlzIGRldGVjdGluZyBhIHRoaW5nLCBpdCBpcyBzZXQgdG8gYG51bGxgXG4gICAgICAgIHZhciBjdXJSZWNvZ25pemVyID0gc2Vzc2lvbi5jdXJSZWNvZ25pemVyO1xuXG4gICAgICAgIC8vIHJlc2V0IHdoZW4gdGhlIGxhc3QgcmVjb2duaXplciBpcyByZWNvZ25pemVkXG4gICAgICAgIC8vIG9yIHdoZW4gd2UncmUgaW4gYSBuZXcgc2Vzc2lvblxuICAgICAgICBpZiAoIWN1clJlY29nbml6ZXIgfHwgKGN1clJlY29nbml6ZXIgJiYgY3VyUmVjb2duaXplci5zdGF0ZSAmIFNUQVRFX1JFQ09HTklaRUQpKSB7XG4gICAgICAgICAgICBjdXJSZWNvZ25pemVyID0gc2Vzc2lvbi5jdXJSZWNvZ25pemVyID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCByZWNvZ25pemVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJlY29nbml6ZXIgPSByZWNvZ25pemVyc1tpXTtcblxuICAgICAgICAgICAgLy8gZmluZCBvdXQgaWYgd2UgYXJlIGFsbG93ZWQgdHJ5IHRvIHJlY29nbml6ZSB0aGUgaW5wdXQgZm9yIHRoaXMgb25lLlxuICAgICAgICAgICAgLy8gMS4gICBhbGxvdyBpZiB0aGUgc2Vzc2lvbiBpcyBOT1QgZm9yY2VkIHN0b3BwZWQgKHNlZSB0aGUgLnN0b3AoKSBtZXRob2QpXG4gICAgICAgICAgICAvLyAyLiAgIGFsbG93IGlmIHdlIHN0aWxsIGhhdmVuJ3QgcmVjb2duaXplZCBhIGdlc3R1cmUgaW4gdGhpcyBzZXNzaW9uLCBvciB0aGUgdGhpcyByZWNvZ25pemVyIGlzIHRoZSBvbmVcbiAgICAgICAgICAgIC8vICAgICAgdGhhdCBpcyBiZWluZyByZWNvZ25pemVkLlxuICAgICAgICAgICAgLy8gMy4gICBhbGxvdyBpZiB0aGUgcmVjb2duaXplciBpcyBhbGxvd2VkIHRvIHJ1biBzaW11bHRhbmVvdXMgd2l0aCB0aGUgY3VycmVudCByZWNvZ25pemVkIHJlY29nbml6ZXIuXG4gICAgICAgICAgICAvLyAgICAgIHRoaXMgY2FuIGJlIHNldHVwIHdpdGggdGhlIGByZWNvZ25pemVXaXRoKClgIG1ldGhvZCBvbiB0aGUgcmVjb2duaXplci5cbiAgICAgICAgICAgIGlmIChzZXNzaW9uLnN0b3BwZWQgIT09IEZPUkNFRF9TVE9QICYmICggLy8gMVxuICAgICAgICAgICAgICAgICAgICAhY3VyUmVjb2duaXplciB8fCByZWNvZ25pemVyID09IGN1clJlY29nbml6ZXIgfHwgLy8gMlxuICAgICAgICAgICAgICAgICAgICByZWNvZ25pemVyLmNhblJlY29nbml6ZVdpdGgoY3VyUmVjb2duaXplcikpKSB7IC8vIDNcbiAgICAgICAgICAgICAgICByZWNvZ25pemVyLnJlY29nbml6ZShpbnB1dERhdGEpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWNvZ25pemVyLnJlc2V0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmIHRoZSByZWNvZ25pemVyIGhhcyBiZWVuIHJlY29nbml6aW5nIHRoZSBpbnB1dCBhcyBhIHZhbGlkIGdlc3R1cmUsIHdlIHdhbnQgdG8gc3RvcmUgdGhpcyBvbmUgYXMgdGhlXG4gICAgICAgICAgICAvLyBjdXJyZW50IGFjdGl2ZSByZWNvZ25pemVyLiBidXQgb25seSBpZiB3ZSBkb24ndCBhbHJlYWR5IGhhdmUgYW4gYWN0aXZlIHJlY29nbml6ZXJcbiAgICAgICAgICAgIGlmICghY3VyUmVjb2duaXplciAmJiByZWNvZ25pemVyLnN0YXRlICYgKFNUQVRFX0JFR0FOIHwgU1RBVEVfQ0hBTkdFRCB8IFNUQVRFX0VOREVEKSkge1xuICAgICAgICAgICAgICAgIGN1clJlY29nbml6ZXIgPSBzZXNzaW9uLmN1clJlY29nbml6ZXIgPSByZWNvZ25pemVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGdldCBhIHJlY29nbml6ZXIgYnkgaXRzIGV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfFN0cmluZ30gcmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfE51bGx9XG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbihyZWNvZ25pemVyKSB7XG4gICAgICAgIGlmIChyZWNvZ25pemVyIGluc3RhbmNlb2YgUmVjb2duaXplcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlY29nbml6ZXI7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVjb2duaXplcnMgPSB0aGlzLnJlY29nbml6ZXJzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlY29nbml6ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAocmVjb2duaXplcnNbaV0ub3B0aW9ucy5ldmVudCA9PSByZWNvZ25pemVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlY29nbml6ZXJzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBhZGQgYSByZWNvZ25pemVyIHRvIHRoZSBtYW5hZ2VyXG4gICAgICogZXhpc3RpbmcgcmVjb2duaXplcnMgd2l0aCB0aGUgc2FtZSBldmVudCBuYW1lIHdpbGwgYmUgcmVtb3ZlZFxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gcmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfE1hbmFnZXJ9XG4gICAgICovXG4gICAgYWRkOiBmdW5jdGlvbihyZWNvZ25pemVyKSB7XG4gICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhyZWNvZ25pemVyLCAnYWRkJywgdGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVtb3ZlIGV4aXN0aW5nXG4gICAgICAgIHZhciBleGlzdGluZyA9IHRoaXMuZ2V0KHJlY29nbml6ZXIub3B0aW9ucy5ldmVudCk7XG4gICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUoZXhpc3RpbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZWNvZ25pemVycy5wdXNoKHJlY29nbml6ZXIpO1xuICAgICAgICByZWNvZ25pemVyLm1hbmFnZXIgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMudG91Y2hBY3Rpb24udXBkYXRlKCk7XG4gICAgICAgIHJldHVybiByZWNvZ25pemVyO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiByZW1vdmUgYSByZWNvZ25pemVyIGJ5IG5hbWUgb3IgaW5zdGFuY2VcbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ8U3RyaW5nfSByZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge01hbmFnZXJ9XG4gICAgICovXG4gICAgcmVtb3ZlOiBmdW5jdGlvbihyZWNvZ25pemVyKSB7XG4gICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhyZWNvZ25pemVyLCAncmVtb3ZlJywgdGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVjb2duaXplciA9IHRoaXMuZ2V0KHJlY29nbml6ZXIpO1xuXG4gICAgICAgIC8vIGxldCdzIG1ha2Ugc3VyZSB0aGlzIHJlY29nbml6ZXIgZXhpc3RzXG4gICAgICAgIGlmIChyZWNvZ25pemVyKSB7XG4gICAgICAgICAgICB2YXIgcmVjb2duaXplcnMgPSB0aGlzLnJlY29nbml6ZXJzO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gaW5BcnJheShyZWNvZ25pemVycywgcmVjb2duaXplcik7XG5cbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZWNvZ25pemVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIHRoaXMudG91Y2hBY3Rpb24udXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogYmluZCBldmVudFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudHNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gICAgICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gdGhpc1xuICAgICAqL1xuICAgIG9uOiBmdW5jdGlvbihldmVudHMsIGhhbmRsZXIpIHtcbiAgICAgICAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhbmRsZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycztcbiAgICAgICAgZWFjaChzcGxpdFN0cihldmVudHMpLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaGFuZGxlcnNbZXZlbnRdID0gaGFuZGxlcnNbZXZlbnRdIHx8IFtdO1xuICAgICAgICAgICAgaGFuZGxlcnNbZXZlbnRdLnB1c2goaGFuZGxlcik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdW5iaW5kIGV2ZW50LCBsZWF2ZSBlbWl0IGJsYW5rIHRvIHJlbW92ZSBhbGwgaGFuZGxlcnNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRzXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2hhbmRsZXJdXG4gICAgICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gdGhpc1xuICAgICAqL1xuICAgIG9mZjogZnVuY3Rpb24oZXZlbnRzLCBoYW5kbGVyKSB7XG4gICAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycztcbiAgICAgICAgZWFjaChzcGxpdFN0cihldmVudHMpLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGhhbmRsZXJzW2V2ZW50XTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlcnNbZXZlbnRdICYmIGhhbmRsZXJzW2V2ZW50XS5zcGxpY2UoaW5BcnJheShoYW5kbGVyc1tldmVudF0sIGhhbmRsZXIpLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBlbWl0IGV2ZW50IHRvIHRoZSBsaXN0ZW5lcnNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgICAqL1xuICAgIGVtaXQ6IGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XG4gICAgICAgIC8vIHdlIGFsc28gd2FudCB0byB0cmlnZ2VyIGRvbSBldmVudHNcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kb21FdmVudHMpIHtcbiAgICAgICAgICAgIHRyaWdnZXJEb21FdmVudChldmVudCwgZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBubyBoYW5kbGVycywgc28gc2tpcCBpdCBhbGxcbiAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVyc1tldmVudF0gJiYgdGhpcy5oYW5kbGVyc1tldmVudF0uc2xpY2UoKTtcbiAgICAgICAgaWYgKCFoYW5kbGVycyB8fCAhaGFuZGxlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBkYXRhLnR5cGUgPSBldmVudDtcbiAgICAgICAgZGF0YS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZGF0YS5zcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCBoYW5kbGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGhhbmRsZXJzW2ldKGRhdGEpO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGRlc3Ryb3kgdGhlIG1hbmFnZXIgYW5kIHVuYmluZHMgYWxsIGV2ZW50c1xuICAgICAqIGl0IGRvZXNuJ3QgdW5iaW5kIGRvbSBldmVudHMsIHRoYXQgaXMgdGhlIHVzZXIgb3duIHJlc3BvbnNpYmlsaXR5XG4gICAgICovXG4gICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCAmJiB0b2dnbGVDc3NQcm9wcyh0aGlzLCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IHt9O1xuICAgICAgICB0aGlzLnNlc3Npb24gPSB7fTtcbiAgICAgICAgdGhpcy5pbnB1dC5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IG51bGw7XG4gICAgfVxufTtcblxuLyoqXG4gKiBhZGQvcmVtb3ZlIHRoZSBjc3MgcHJvcGVydGllcyBhcyBkZWZpbmVkIGluIG1hbmFnZXIub3B0aW9ucy5jc3NQcm9wc1xuICogQHBhcmFtIHtNYW5hZ2VyfSBtYW5hZ2VyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGFkZFxuICovXG5mdW5jdGlvbiB0b2dnbGVDc3NQcm9wcyhtYW5hZ2VyLCBhZGQpIHtcbiAgICB2YXIgZWxlbWVudCA9IG1hbmFnZXIuZWxlbWVudDtcbiAgICBpZiAoIWVsZW1lbnQuc3R5bGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcHJvcDtcbiAgICBlYWNoKG1hbmFnZXIub3B0aW9ucy5jc3NQcm9wcywgZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgcHJvcCA9IHByZWZpeGVkKGVsZW1lbnQuc3R5bGUsIG5hbWUpO1xuICAgICAgICBpZiAoYWRkKSB7XG4gICAgICAgICAgICBtYW5hZ2VyLm9sZENzc1Byb3BzW3Byb3BdID0gZWxlbWVudC5zdHlsZVtwcm9wXTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGVbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGVbcHJvcF0gPSBtYW5hZ2VyLm9sZENzc1Byb3BzW3Byb3BdIHx8ICcnO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKCFhZGQpIHtcbiAgICAgICAgbWFuYWdlci5vbGRDc3NQcm9wcyA9IHt9O1xuICAgIH1cbn1cblxuLyoqXG4gKiB0cmlnZ2VyIGRvbSBldmVudFxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICovXG5mdW5jdGlvbiB0cmlnZ2VyRG9tRXZlbnQoZXZlbnQsIGRhdGEpIHtcbiAgICB2YXIgZ2VzdHVyZUV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgZ2VzdHVyZUV2ZW50LmluaXRFdmVudChldmVudCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgZ2VzdHVyZUV2ZW50Lmdlc3R1cmUgPSBkYXRhO1xuICAgIGRhdGEudGFyZ2V0LmRpc3BhdGNoRXZlbnQoZ2VzdHVyZUV2ZW50KTtcbn1cblxuYXNzaWduKEhhbW1lciwge1xuICAgIElOUFVUX1NUQVJUOiBJTlBVVF9TVEFSVCxcbiAgICBJTlBVVF9NT1ZFOiBJTlBVVF9NT1ZFLFxuICAgIElOUFVUX0VORDogSU5QVVRfRU5ELFxuICAgIElOUFVUX0NBTkNFTDogSU5QVVRfQ0FOQ0VMLFxuXG4gICAgU1RBVEVfUE9TU0lCTEU6IFNUQVRFX1BPU1NJQkxFLFxuICAgIFNUQVRFX0JFR0FOOiBTVEFURV9CRUdBTixcbiAgICBTVEFURV9DSEFOR0VEOiBTVEFURV9DSEFOR0VELFxuICAgIFNUQVRFX0VOREVEOiBTVEFURV9FTkRFRCxcbiAgICBTVEFURV9SRUNPR05JWkVEOiBTVEFURV9SRUNPR05JWkVELFxuICAgIFNUQVRFX0NBTkNFTExFRDogU1RBVEVfQ0FOQ0VMTEVELFxuICAgIFNUQVRFX0ZBSUxFRDogU1RBVEVfRkFJTEVELFxuXG4gICAgRElSRUNUSU9OX05PTkU6IERJUkVDVElPTl9OT05FLFxuICAgIERJUkVDVElPTl9MRUZUOiBESVJFQ1RJT05fTEVGVCxcbiAgICBESVJFQ1RJT05fUklHSFQ6IERJUkVDVElPTl9SSUdIVCxcbiAgICBESVJFQ1RJT05fVVA6IERJUkVDVElPTl9VUCxcbiAgICBESVJFQ1RJT05fRE9XTjogRElSRUNUSU9OX0RPV04sXG4gICAgRElSRUNUSU9OX0hPUklaT05UQUw6IERJUkVDVElPTl9IT1JJWk9OVEFMLFxuICAgIERJUkVDVElPTl9WRVJUSUNBTDogRElSRUNUSU9OX1ZFUlRJQ0FMLFxuICAgIERJUkVDVElPTl9BTEw6IERJUkVDVElPTl9BTEwsXG5cbiAgICBNYW5hZ2VyOiBNYW5hZ2VyLFxuICAgIElucHV0OiBJbnB1dCxcbiAgICBUb3VjaEFjdGlvbjogVG91Y2hBY3Rpb24sXG5cbiAgICBUb3VjaElucHV0OiBUb3VjaElucHV0LFxuICAgIE1vdXNlSW5wdXQ6IE1vdXNlSW5wdXQsXG4gICAgUG9pbnRlckV2ZW50SW5wdXQ6IFBvaW50ZXJFdmVudElucHV0LFxuICAgIFRvdWNoTW91c2VJbnB1dDogVG91Y2hNb3VzZUlucHV0LFxuICAgIFNpbmdsZVRvdWNoSW5wdXQ6IFNpbmdsZVRvdWNoSW5wdXQsXG5cbiAgICBSZWNvZ25pemVyOiBSZWNvZ25pemVyLFxuICAgIEF0dHJSZWNvZ25pemVyOiBBdHRyUmVjb2duaXplcixcbiAgICBUYXA6IFRhcFJlY29nbml6ZXIsXG4gICAgUGFuOiBQYW5SZWNvZ25pemVyLFxuICAgIFN3aXBlOiBTd2lwZVJlY29nbml6ZXIsXG4gICAgUGluY2g6IFBpbmNoUmVjb2duaXplcixcbiAgICBSb3RhdGU6IFJvdGF0ZVJlY29nbml6ZXIsXG4gICAgUHJlc3M6IFByZXNzUmVjb2duaXplcixcblxuICAgIG9uOiBhZGRFdmVudExpc3RlbmVycyxcbiAgICBvZmY6IHJlbW92ZUV2ZW50TGlzdGVuZXJzLFxuICAgIGVhY2g6IGVhY2gsXG4gICAgbWVyZ2U6IG1lcmdlLFxuICAgIGV4dGVuZDogZXh0ZW5kLFxuICAgIGFzc2lnbjogYXNzaWduLFxuICAgIGluaGVyaXQ6IGluaGVyaXQsXG4gICAgYmluZEZuOiBiaW5kRm4sXG4gICAgcHJlZml4ZWQ6IHByZWZpeGVkXG59KTtcblxuLy8gdGhpcyBwcmV2ZW50cyBlcnJvcnMgd2hlbiBIYW1tZXIgaXMgbG9hZGVkIGluIHRoZSBwcmVzZW5jZSBvZiBhbiBBTURcbi8vICBzdHlsZSBsb2FkZXIgYnV0IGJ5IHNjcmlwdCB0YWcsIG5vdCBieSB0aGUgbG9hZGVyLlxudmFyIGZyZWVHbG9iYWwgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9KSk7IC8vIGpzaGludCBpZ25vcmU6bGluZVxuZnJlZUdsb2JhbC5IYW1tZXIgPSBIYW1tZXI7XG5cbmlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBIYW1tZXI7XG4gICAgfSk7XG59IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IEhhbW1lcjtcbn0gZWxzZSB7XG4gICAgd2luZG93W2V4cG9ydE5hbWVdID0gSGFtbWVyO1xufVxuXG59KSh3aW5kb3csIGRvY3VtZW50LCAnSGFtbWVyJyk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9oYW1tZXJqcy9oYW1tZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXRcbiAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAvLyBsaWtlIE5vZGUuXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcbiAgICB3aW5kb3cucHJvcGFnYXRpbmcgPSBmYWN0b3J5KCk7XG4gIH1cbn0oZnVuY3Rpb24gKCkge1xuICB2YXIgX2ZpcnN0VGFyZ2V0ID0gbnVsbDsgLy8gc2luZ2xldG9uLCB3aWxsIGNvbnRhaW4gdGhlIHRhcmdldCBlbGVtZW50IHdoZXJlIHRoZSB0b3VjaCBldmVudCBzdGFydGVkXG5cbiAgLyoqXG4gICAqIEV4dGVuZCBhbiBIYW1tZXIuanMgaW5zdGFuY2Ugd2l0aCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICpcbiAgICogRmVhdHVyZXM6XG4gICAqIC0gRXZlbnRzIGVtaXR0ZWQgYnkgaGFtbWVyIHdpbGwgcHJvcGFnYXRlIGluIG9yZGVyIGZyb20gY2hpbGQgdG8gcGFyZW50XG4gICAqICAgZWxlbWVudHMuXG4gICAqIC0gRXZlbnRzIGFyZSBleHRlbmRlZCB3aXRoIGEgZnVuY3Rpb24gYGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpYCB0byBzdG9wXG4gICAqICAgcHJvcGFnYXRpb24gdG8gcGFyZW50IGVsZW1lbnRzLlxuICAgKiAtIEFuIG9wdGlvbiBgcHJldmVudERlZmF1bHRgIHRvIHN0b3AgYWxsIGRlZmF1bHQgYnJvd3NlciBiZWhhdmlvci5cbiAgICpcbiAgICogVXNhZ2U6XG4gICAqICAgdmFyIGhhbW1lciA9IHByb3BhZ2F0aW5nSGFtbWVyKG5ldyBIYW1tZXIoZWxlbWVudCkpO1xuICAgKiAgIHZhciBoYW1tZXIgPSBwcm9wYWdhdGluZ0hhbW1lcihuZXcgSGFtbWVyKGVsZW1lbnQpLCB7cHJldmVudERlZmF1bHQ6IHRydWV9KTtcbiAgICpcbiAgICogQHBhcmFtIHtIYW1tZXIuTWFuYWdlcn0gaGFtbWVyICAgQW4gaGFtbWVyIGluc3RhbmNlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdICAgICAgICBBdmFpbGFibGUgb3B0aW9uczpcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLSBgcHJldmVudERlZmF1bHQ6IHRydWUgfCBmYWxzZSB8ICdtb3VzZScgfCAndG91Y2gnIHwgJ3BlbidgLlxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVuZm9yY2UgcHJldmVudGluZyB0aGUgZGVmYXVsdCBicm93c2VyIGJlaGF2aW9yLlxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhbm5vdCBiZSBzZXQgdG8gYGZhbHNlYC5cbiAgICogQHJldHVybiB7SGFtbWVyLk1hbmFnZXJ9IFJldHVybnMgdGhlIHNhbWUgaGFtbWVyIGluc3RhbmNlIHdpdGggZXh0ZW5kZWRcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uYWxpdHlcbiAgICovXG4gIHJldHVybiBmdW5jdGlvbiBwcm9wYWdhdGluZyhoYW1tZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgX29wdGlvbnMgPSBvcHRpb25zIHx8IHtcbiAgICAgIHByZXZlbnREZWZhdWx0OiBmYWxzZVxuICAgIH07XG5cbiAgICBpZiAoaGFtbWVyLk1hbmFnZXIpIHtcbiAgICAgIC8vIFRoaXMgbG9va3MgbGlrZSB0aGUgSGFtbWVyIGNvbnN0cnVjdG9yLlxuICAgICAgLy8gT3ZlcmxvYWQgdGhlIGNvbnN0cnVjdG9ycyB3aXRoIG91ciBvd24uXG4gICAgICB2YXIgSGFtbWVyID0gaGFtbWVyO1xuXG4gICAgICB2YXIgUHJvcGFnYXRpbmdIYW1tZXIgPSBmdW5jdGlvbihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBvID0gT2JqZWN0LmNyZWF0ZShfb3B0aW9ucyk7XG4gICAgICAgIGlmIChvcHRpb25zKSBIYW1tZXIuYXNzaWduKG8sIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gcHJvcGFnYXRpbmcobmV3IEhhbW1lcihlbGVtZW50LCBvKSwgbyk7XG4gICAgICB9O1xuICAgICAgSGFtbWVyLmFzc2lnbihQcm9wYWdhdGluZ0hhbW1lciwgSGFtbWVyKTtcblxuICAgICAgUHJvcGFnYXRpbmdIYW1tZXIuTWFuYWdlciA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBvID0gT2JqZWN0LmNyZWF0ZShfb3B0aW9ucyk7XG4gICAgICAgIGlmIChvcHRpb25zKSBIYW1tZXIuYXNzaWduKG8sIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gcHJvcGFnYXRpbmcobmV3IEhhbW1lci5NYW5hZ2VyKGVsZW1lbnQsIG8pLCBvKTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBQcm9wYWdhdGluZ0hhbW1lcjtcbiAgICB9XG5cbiAgICAvLyBjcmVhdGUgYSB3cmFwcGVyIG9iamVjdCB3aGljaCB3aWxsIG92ZXJyaWRlIHRoZSBmdW5jdGlvbnNcbiAgICAvLyBgb25gLCBgb2ZmYCwgYGRlc3Ryb3lgLCBhbmQgYGVtaXRgIG9mIHRoZSBoYW1tZXIgaW5zdGFuY2VcbiAgICB2YXIgd3JhcHBlciA9IE9iamVjdC5jcmVhdGUoaGFtbWVyKTtcblxuICAgIC8vIGF0dGFjaCB0byBET00gZWxlbWVudFxuICAgIHZhciBlbGVtZW50ID0gaGFtbWVyLmVsZW1lbnQ7XG5cbiAgICBpZighZWxlbWVudC5oYW1tZXIpIGVsZW1lbnQuaGFtbWVyID0gW107XG4gICAgZWxlbWVudC5oYW1tZXIucHVzaCh3cmFwcGVyKTtcblxuICAgIC8vIHJlZ2lzdGVyIGFuIGV2ZW50IHRvIGNhdGNoIHRoZSBzdGFydCBvZiBhIGdlc3R1cmUgYW5kIHN0b3JlIHRoZVxuICAgIC8vIHRhcmdldCBpbiBhIHNpbmdsZXRvblxuICAgIGhhbW1lci5vbignaGFtbWVyLmlucHV0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoX29wdGlvbnMucHJldmVudERlZmF1bHQgPT09IHRydWUgfHwgKF9vcHRpb25zLnByZXZlbnREZWZhdWx0ID09PSBldmVudC5wb2ludGVyVHlwZSkpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICAgIGlmIChldmVudC5pc0ZpcnN0KSB7XG4gICAgICAgIF9maXJzdFRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKiBAdHlwZSB7T2JqZWN0LjxTdHJpbmcsIEFycmF5LjxmdW5jdGlvbj4+fSAqL1xuICAgIHdyYXBwZXIuX2hhbmRsZXJzID0ge307XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBhIGhhbmRsZXIgZm9yIG9uZSBvciBtdWx0aXBsZSBldmVudHNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRzICAgIEEgc3BhY2Ugc2VwYXJhdGVkIHN0cmluZyB3aXRoIGV2ZW50c1xuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGhhbmRsZXIgQSBjYWxsYmFjayBmdW5jdGlvbiwgY2FsbGVkIGFzIGhhbmRsZXIoZXZlbnQpXG4gICAgICogQHJldHVybnMge0hhbW1lci5NYW5hZ2VyfSBSZXR1cm5zIHRoZSBoYW1tZXIgaW5zdGFuY2VcbiAgICAgKi9cbiAgICB3cmFwcGVyLm9uID0gZnVuY3Rpb24gKGV2ZW50cywgaGFuZGxlcikge1xuICAgICAgLy8gcmVnaXN0ZXIgdGhlIGhhbmRsZXJcbiAgICAgIHNwbGl0KGV2ZW50cykuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIF9oYW5kbGVycyA9IHdyYXBwZXIuX2hhbmRsZXJzW2V2ZW50XTtcbiAgICAgICAgaWYgKCFfaGFuZGxlcnMpIHtcbiAgICAgICAgICB3cmFwcGVyLl9oYW5kbGVyc1tldmVudF0gPSBfaGFuZGxlcnMgPSBbXTtcblxuICAgICAgICAgIC8vIHJlZ2lzdGVyIHRoZSBzdGF0aWMsIHByb3BhZ2F0ZWQgaGFuZGxlclxuICAgICAgICAgIGhhbW1lci5vbihldmVudCwgcHJvcGFnYXRlZEhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIF9oYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB3cmFwcGVyO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBVbnJlZ2lzdGVyIGEgaGFuZGxlciBmb3Igb25lIG9yIG11bHRpcGxlIGV2ZW50c1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudHMgICAgICBBIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmcgd2l0aCBldmVudHNcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbaGFuZGxlcl0gT3B0aW9uYWwuIFRoZSByZWdpc3RlcmVkIGhhbmRsZXIuIElmIG5vdFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlZCwgYWxsIGhhbmRsZXJzIGZvciBnaXZlbiBldmVudHNcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJlIHJlbW92ZWQuXG4gICAgICogQHJldHVybnMge0hhbW1lci5NYW5hZ2VyfSAgIFJldHVybnMgdGhlIGhhbW1lciBpbnN0YW5jZVxuICAgICAqL1xuICAgIHdyYXBwZXIub2ZmID0gZnVuY3Rpb24gKGV2ZW50cywgaGFuZGxlcikge1xuICAgICAgLy8gdW5yZWdpc3RlciB0aGUgaGFuZGxlclxuICAgICAgc3BsaXQoZXZlbnRzKS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgX2hhbmRsZXJzID0gd3JhcHBlci5faGFuZGxlcnNbZXZlbnRdO1xuICAgICAgICBpZiAoX2hhbmRsZXJzKSB7XG4gICAgICAgICAgX2hhbmRsZXJzID0gaGFuZGxlciA/IF9oYW5kbGVycy5maWx0ZXIoZnVuY3Rpb24gKGgpIHtcbiAgICAgICAgICAgIHJldHVybiBoICE9PSBoYW5kbGVyO1xuICAgICAgICAgIH0pIDogW107XG5cbiAgICAgICAgICBpZiAoX2hhbmRsZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHdyYXBwZXIuX2hhbmRsZXJzW2V2ZW50XSA9IF9oYW5kbGVycztcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgc3RhdGljLCBwcm9wYWdhdGVkIGhhbmRsZXJcbiAgICAgICAgICAgIGhhbW1lci5vZmYoZXZlbnQsIHByb3BhZ2F0ZWRIYW5kbGVyKTtcbiAgICAgICAgICAgIGRlbGV0ZSB3cmFwcGVyLl9oYW5kbGVyc1tldmVudF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHdyYXBwZXI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVtaXQgdG8gdGhlIGV2ZW50IGxpc3RlbmVyc1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGVcbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICAgICAqL1xuICAgIHdyYXBwZXIuZW1pdCA9IGZ1bmN0aW9uKGV2ZW50VHlwZSwgZXZlbnQpIHtcbiAgICAgIF9maXJzdFRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAgIGhhbW1lci5lbWl0KGV2ZW50VHlwZSwgZXZlbnQpO1xuICAgIH07XG5cbiAgICB3cmFwcGVyLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBEZXRhY2ggZnJvbSBET00gZWxlbWVudFxuICAgICAgdmFyIGhhbW1lcnMgPSBoYW1tZXIuZWxlbWVudC5oYW1tZXI7XG4gICAgICB2YXIgaWR4ID0gaGFtbWVycy5pbmRleE9mKHdyYXBwZXIpO1xuICAgICAgaWYoaWR4ICE9PSAtMSkgaGFtbWVycy5zcGxpY2UoaWR4LDEpO1xuICAgICAgaWYoIWhhbW1lcnMubGVuZ3RoKSBkZWxldGUgaGFtbWVyLmVsZW1lbnQuaGFtbWVyO1xuXG4gICAgICAvLyBjbGVhciBhbGwgaGFuZGxlcnNcbiAgICAgIHdyYXBwZXIuX2hhbmRsZXJzID0ge307XG5cbiAgICAgIC8vIGNhbGwgb3JpZ2luYWwgaGFtbWVyIGRlc3Ryb3lcbiAgICAgIGhhbW1lci5kZXN0cm95KCk7XG4gICAgfTtcblxuICAgIC8vIHNwbGl0IGEgc3RyaW5nIHdpdGggc3BhY2Ugc2VwYXJhdGVkIHdvcmRzXG4gICAgZnVuY3Rpb24gc3BsaXQoZXZlbnRzKSB7XG4gICAgICByZXR1cm4gZXZlbnRzLm1hdGNoKC9bXiBdKy9nKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHN0YXRpYyBldmVudCBoYW5kbGVyLCBhcHBseWluZyBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwcm9wYWdhdGVkSGFuZGxlcihldmVudCkge1xuICAgICAgLy8gbGV0IG9ubHkgYSBzaW5nbGUgaGFtbWVyIGluc3RhbmNlIGhhbmRsZSB0aGlzIGV2ZW50XG4gICAgICBpZiAoZXZlbnQudHlwZSAhPT0gJ2hhbW1lci5pbnB1dCcpIHtcbiAgICAgICAgLy8gaXQgaXMgcG9zc2libGUgdGhhdCB0aGUgc2FtZSBzcmNFdmVudCBpcyB1c2VkIHdpdGggbXVsdGlwbGUgaGFtbWVyIGV2ZW50cyxcbiAgICAgICAgLy8gd2Uga2VlcCB0cmFjayBvbiB3aGljaCBldmVudHMgYXJlIGhhbmRsZWQgaW4gYW4gb2JqZWN0IF9oYW5kbGVkXG4gICAgICAgIGlmICghZXZlbnQuc3JjRXZlbnQuX2hhbmRsZWQpIHtcbiAgICAgICAgICBldmVudC5zcmNFdmVudC5faGFuZGxlZCA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LnNyY0V2ZW50Ll9oYW5kbGVkW2V2ZW50LnR5cGVdKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGV2ZW50LnNyY0V2ZW50Ll9oYW5kbGVkW2V2ZW50LnR5cGVdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBhdHRhY2ggYSBzdG9wUHJvcGFnYXRpb24gZnVuY3Rpb24gdG8gdGhlIGV2ZW50XG4gICAgICB2YXIgc3RvcHBlZCA9IGZhbHNlO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzdG9wcGVkID0gdHJ1ZTtcbiAgICAgIH07XG5cbiAgICAgIC8vd3JhcCB0aGUgc3JjRXZlbnQncyBzdG9wUHJvcGFnYXRpb24gdG8gYWxzbyBzdG9wIGhhbW1lciBwcm9wYWdhdGlvbjpcbiAgICAgIHZhciBzcmNTdG9wID0gZXZlbnQuc3JjRXZlbnQuc3RvcFByb3BhZ2F0aW9uLmJpbmQoZXZlbnQuc3JjRXZlbnQpO1xuICAgICAgaWYodHlwZW9mIHNyY1N0b3AgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGV2ZW50LnNyY0V2ZW50LnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgc3JjU3RvcCgpO1xuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGF0dGFjaCBmaXJzdFRhcmdldCBwcm9wZXJ0eSB0byB0aGUgZXZlbnRcbiAgICAgIGV2ZW50LmZpcnN0VGFyZ2V0ID0gX2ZpcnN0VGFyZ2V0O1xuXG4gICAgICAvLyBwcm9wYWdhdGUgb3ZlciBhbGwgZWxlbWVudHMgKHVudGlsIHN0b3BwZWQpXG4gICAgICB2YXIgZWxlbSA9IF9maXJzdFRhcmdldDtcbiAgICAgIHdoaWxlIChlbGVtICYmICFzdG9wcGVkKSB7XG4gICAgICAgIHZhciBlbGVtSGFtbWVyID0gZWxlbS5oYW1tZXI7XG4gICAgICAgIGlmKGVsZW1IYW1tZXIpe1xuICAgICAgICAgIHZhciBfaGFuZGxlcnM7XG4gICAgICAgICAgZm9yKHZhciBrID0gMDsgayA8IGVsZW1IYW1tZXIubGVuZ3RoOyBrKyspe1xuICAgICAgICAgICAgX2hhbmRsZXJzID0gZWxlbUhhbW1lcltrXS5faGFuZGxlcnNbZXZlbnQudHlwZV07XG4gICAgICAgICAgICBpZihfaGFuZGxlcnMpIGZvciAodmFyIGkgPSAwOyBpIDwgX2hhbmRsZXJzLmxlbmd0aCAmJiAhc3RvcHBlZDsgaSsrKSB7XG4gICAgICAgICAgICAgIF9oYW5kbGVyc1tpXShldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsZW0gPSBlbGVtLnBhcmVudE5vZGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHdyYXBwZXI7XG4gIH07XG59KSk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9wcm9wYWdhdGluZy1oYW1tZXJqcy9wcm9wYWdhdGluZy5qc1xuICoqIG1vZHVsZSBpZCA9IDEzMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc291cmNlLW1hcC1sb2FkZXIvaW5kZXguanMhLi9jdXJ2ZS1lZGl0b3IucG9zdGNzcy5jc3NcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAtbG9hZGVyL2luZGV4LmpzIS4vY3VydmUtZWRpdG9yLnBvc3Rjc3MuY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAtbG9hZGVyL2luZGV4LmpzIS4vY3VydmUtZWRpdG9yLnBvc3Rjc3MuY3NzXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXBwL2Nzcy9ibG9ja3MvY3VydmUtZWRpdG9yLnBvc3Rjc3MuY3NzXG4gKiogbW9kdWxlIGlkID0gMTMyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5fY3VydmUtZWRpdG9yXzF2cTZsXzR7cG9zaXRpb246Zml4ZWQ7bGVmdDowO3RvcDowO3dpZHRoOjQwM3B4O2hlaWdodDozNzhweDtib3JkZXItcmFkaXVzOjEycHg7YmFja2dyb3VuZDpyZ2JhKDU4LDgsNTgsLjg1KTt6LWluZGV4OjEwMDtib3gtc2hhZG93OjJweCAycHggMnB4IHJnYmEoMCwwLDAsLjM4KX0uX2N1cnZlLWVkaXRvcl9fbGVmdF8xdnE2bF8xe3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjQycHg7bGVmdDowO3RvcDowO2JvdHRvbTowO3BhZGRpbmc6MTBweH0uX2N1cnZlLWVkaXRvcl9fbGVmdF8xdnE2bF8xIGljb24tZGl2aWRlcnttYXJnaW46MTBweCBhdXRvfS5fY3VydmUtZWRpdG9yX19yaWdodF8xdnE2bF8xe3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6NDNweDt0b3A6MDtyaWdodDowO2JvdHRvbTowfS5fY3VydmUtZWRpdG9yX19yaWdodF8xdnE2bF8xIHJlc2l6ZS1oYW5kbGV7cG9zaXRpb246YWJzb2x1dGV9Ll9jdXJ2ZS1lZGl0b3JfX3JpZ2h0XzF2cTZsXzEgcmVzaXplLWhhbmRsZVt0eXBlPXRvcF17dG9wOi0xNnB4fS5fY3VydmUtZWRpdG9yX19yaWdodF8xdnE2bF8xIHJlc2l6ZS1oYW5kbGVbdHlwZT1ib3R0b21de2JvdHRvbTowfS5fY3VydmUtZWRpdG9yX19yaWdodF8xdnE2bF8xIHJlc2l6ZS1oYW5kbGVbdHlwZT1ib3R0b21dLC5fY3VydmUtZWRpdG9yX19yaWdodF8xdnE2bF8xIHJlc2l6ZS1oYW5kbGVbdHlwZT10b3Bde2xlZnQ6NTAlO21hcmdpbi1sZWZ0Oi0yMXB4fS5fY3VydmUtZWRpdG9yX19yaWdodF8xdnE2bF8xIHJlc2l6ZS1oYW5kbGVbdHlwZT1yaWdodF17cmlnaHQ6LTE2cHg7dG9wOjUwJTttYXJnaW4tdG9wOi0xNnB4fS5fY3VydmUtZWRpdG9yX19hbmNob3ItYnV0dG9uc18xdnE2bF8xe21hcmdpbi10b3A6MTBweH0uX2N1cnZlLWVkaXRvcl9fYW5jaG9yLWJ1dHRvbnNfMXZxNmxfMSBpY29uLWJ1dHRvbnttYXJnaW4tYm90dG9tOjVweH0uX2N1cnZlLWVkaXRvcl9fbW9qcy1sb2dvXzF2cTZsXzF7cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjE3cHg7bGVmdDo1MCU7bWFyZ2luLWxlZnQ6MXB4Oy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSl9Ll9jdXJ2ZS1lZGl0b3JfX21vanMtbG9nb18xdnE2bF8xIGljb257ZmlsbDojZmY1MTJmO3dpZHRoOjEycHg7aGVpZ2h0OjEycHh9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vcG9zdGNzcy1sb2FkZXIhLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vYXBwL2Nzcy9ibG9ja3MvY3VydmUtZWRpdG9yLnBvc3Rjc3MuY3NzXG4gKiogbW9kdWxlIGlkID0gMTMzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKlxyXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG4qL1xyXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciBsaXN0ID0gW107XHJcblxyXG5cdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcclxuXHRsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XHJcblx0XHR2YXIgcmVzdWx0ID0gW107XHJcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgaXRlbSA9IHRoaXNbaV07XHJcblx0XHRcdGlmKGl0ZW1bMl0pIHtcclxuXHRcdFx0XHRyZXN1bHQucHVzaChcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGl0ZW1bMV0gKyBcIn1cIik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmVzdWx0LnB1c2goaXRlbVsxXSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiByZXN1bHQuam9pbihcIlwiKTtcclxuXHR9O1xyXG5cclxuXHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxyXG5cdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcclxuXHRcdGlmKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKVxyXG5cdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XHJcblx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcclxuXHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxyXG5cdFx0XHRcdGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSBtb2R1bGVzW2ldO1xyXG5cdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXHJcblx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXHJcblx0XHRcdC8vICB3aGVuIGEgbW9kdWxlIGlzIGltcG9ydGVkIG11bHRpcGxlIHRpbWVzIHdpdGggZGlmZmVyZW50IG1lZGlhIHF1ZXJpZXMuXHJcblx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXHJcblx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XHJcblx0XHRcdFx0aWYobWVkaWFRdWVyeSAmJiAhaXRlbVsyXSkge1xyXG5cdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XHJcblx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0XHRcdGl0ZW1bMl0gPSBcIihcIiArIGl0ZW1bMl0gKyBcIikgYW5kIChcIiArIG1lZGlhUXVlcnkgKyBcIilcIjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHRyZXR1cm4gbGlzdDtcclxufTtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qXHJcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcclxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXHJcbiovXHJcbnZhciBzdHlsZXNJbkRvbSA9IHt9LFxyXG5cdG1lbW9pemUgPSBmdW5jdGlvbihmbikge1xyXG5cdFx0dmFyIG1lbW87XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG5cdFx0XHRyZXR1cm4gbWVtbztcclxuXHRcdH07XHJcblx0fSxcclxuXHRpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAvbXNpZSBbNi05XVxcYi8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTtcclxuXHR9KSxcclxuXHRnZXRIZWFkRWxlbWVudCA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xyXG5cdFx0cmV0dXJuIGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO1xyXG5cdH0pLFxyXG5cdHNpbmdsZXRvbkVsZW1lbnQgPSBudWxsLFxyXG5cdHNpbmdsZXRvbkNvdW50ZXIgPSAwLFxyXG5cdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wID0gW107XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHtcclxuXHRpZih0eXBlb2YgREVCVUcgIT09IFwidW5kZWZpbmVkXCIgJiYgREVCVUcpIHtcclxuXHRcdGlmKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xyXG5cdH1cclxuXHJcblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcblx0Ly8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XHJcblx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxyXG5cdGlmICh0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xyXG5cclxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgPGhlYWQ+LlxyXG5cdGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ1bmRlZmluZWRcIikgb3B0aW9ucy5pbnNlcnRBdCA9IFwiYm90dG9tXCI7XHJcblxyXG5cdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCk7XHJcblx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcclxuXHJcblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XHJcblx0XHR2YXIgbWF5UmVtb3ZlID0gW107XHJcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xyXG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcclxuXHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xyXG5cdFx0XHRtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XHJcblx0XHR9XHJcblx0XHRpZihuZXdMaXN0KSB7XHJcblx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCk7XHJcblx0XHRcdGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XHJcblx0XHR9XHJcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXTtcclxuXHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xyXG5cdFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKylcclxuXHRcdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKCk7XHJcblx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucykge1xyXG5cdGZvcih2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xyXG5cdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XHJcblx0XHRpZihkb21TdHlsZSkge1xyXG5cdFx0XHRkb21TdHlsZS5yZWZzKys7XHJcblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHZhciBwYXJ0cyA9IFtdO1xyXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gbGlzdFRvU3R5bGVzKGxpc3QpIHtcclxuXHR2YXIgc3R5bGVzID0gW107XHJcblx0dmFyIG5ld1N0eWxlcyA9IHt9O1xyXG5cdGZvcih2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XHJcblx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XHJcblx0XHR2YXIgaWQgPSBpdGVtWzBdO1xyXG5cdFx0dmFyIGNzcyA9IGl0ZW1bMV07XHJcblx0XHR2YXIgbWVkaWEgPSBpdGVtWzJdO1xyXG5cdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XHJcblx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XHJcblx0XHRpZighbmV3U3R5bGVzW2lkXSlcclxuXHRcdFx0c3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcclxuXHRcdGVsc2VcclxuXHRcdFx0bmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xyXG5cdH1cclxuXHRyZXR1cm4gc3R5bGVzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGVFbGVtZW50KSB7XHJcblx0dmFyIGhlYWQgPSBnZXRIZWFkRWxlbWVudCgpO1xyXG5cdHZhciBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wW3N0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xyXG5cdGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcInRvcFwiKSB7XHJcblx0XHRpZighbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3ApIHtcclxuXHRcdFx0aGVhZC5pbnNlcnRCZWZvcmUoc3R5bGVFbGVtZW50LCBoZWFkLmZpcnN0Q2hpbGQpO1xyXG5cdFx0fSBlbHNlIGlmKGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKSB7XHJcblx0XHRcdGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlRWxlbWVudCwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xyXG5cdFx0fVxyXG5cdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AucHVzaChzdHlsZUVsZW1lbnQpO1xyXG5cdH0gZWxzZSBpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJib3R0b21cIikge1xyXG5cdFx0aGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgJ2luc2VydEF0Jy4gTXVzdCBiZSAndG9wJyBvciAnYm90dG9tJy5cIik7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KSB7XHJcblx0c3R5bGVFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50KTtcclxuXHR2YXIgaWR4ID0gc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZUVsZW1lbnQpO1xyXG5cdGlmKGlkeCA+PSAwKSB7XHJcblx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSB7XHJcblx0dmFyIHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcclxuXHRzdHlsZUVsZW1lbnQudHlwZSA9IFwidGV4dC9jc3NcIjtcclxuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGVFbGVtZW50KTtcclxuXHRyZXR1cm4gc3R5bGVFbGVtZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKSB7XHJcblx0dmFyIGxpbmtFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcblx0bGlua0VsZW1lbnQucmVsID0gXCJzdHlsZXNoZWV0XCI7XHJcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIGxpbmtFbGVtZW50KTtcclxuXHRyZXR1cm4gbGlua0VsZW1lbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xyXG5cdHZhciBzdHlsZUVsZW1lbnQsIHVwZGF0ZSwgcmVtb3ZlO1xyXG5cclxuXHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcclxuXHRcdHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xyXG5cdFx0c3R5bGVFbGVtZW50ID0gc2luZ2xldG9uRWxlbWVudCB8fCAoc2luZ2xldG9uRWxlbWVudCA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSk7XHJcblx0XHR1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCBmYWxzZSk7XHJcblx0XHRyZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCB0cnVlKTtcclxuXHR9IGVsc2UgaWYob2JqLnNvdXJjZU1hcCAmJlxyXG5cdFx0dHlwZW9mIFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXHJcblx0XHR0eXBlb2YgVVJMLmNyZWF0ZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXHJcblx0XHR0eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXHJcblx0XHR0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiICYmXHJcblx0XHR0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcblx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKTtcclxuXHRcdHVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpO1xyXG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpO1xyXG5cdFx0XHRpZihzdHlsZUVsZW1lbnQuaHJlZilcclxuXHRcdFx0XHRVUkwucmV2b2tlT2JqZWN0VVJMKHN0eWxlRWxlbWVudC5ocmVmKTtcclxuXHRcdH07XHJcblx0fSBlbHNlIHtcclxuXHRcdHN0eWxlRWxlbWVudCA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKTtcclxuXHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpO1xyXG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpO1xyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdHVwZGF0ZShvYmopO1xyXG5cclxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XHJcblx0XHRpZihuZXdPYmopIHtcclxuXHRcdFx0aWYobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKVxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZW1vdmUoKTtcclxuXHRcdH1cclxuXHR9O1xyXG59XHJcblxyXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xyXG5cdHZhciB0ZXh0U3RvcmUgPSBbXTtcclxuXHJcblx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcclxuXHRcdHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcclxuXHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xyXG5cdH07XHJcbn0pKCk7XHJcblxyXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlRWxlbWVudCwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XHJcblx0dmFyIGNzcyA9IHJlbW92ZSA/IFwiXCIgOiBvYmouY3NzO1xyXG5cclxuXHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcclxuXHRcdHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xyXG5cdFx0dmFyIGNoaWxkTm9kZXMgPSBzdHlsZUVsZW1lbnQuY2hpbGROb2RlcztcclxuXHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcclxuXHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xyXG5cdFx0XHRzdHlsZUVsZW1lbnQuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChjc3NOb2RlKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGVFbGVtZW50LCBvYmopIHtcclxuXHR2YXIgY3NzID0gb2JqLmNzcztcclxuXHR2YXIgbWVkaWEgPSBvYmoubWVkaWE7XHJcblxyXG5cdGlmKG1lZGlhKSB7XHJcblx0XHRzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpXHJcblx0fVxyXG5cclxuXHRpZihzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xyXG5cdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcclxuXHR9IGVsc2Uge1xyXG5cdFx0d2hpbGUoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcclxuXHRcdFx0c3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcclxuXHRcdH1cclxuXHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZUxpbmsobGlua0VsZW1lbnQsIG9iaikge1xyXG5cdHZhciBjc3MgPSBvYmouY3NzO1xyXG5cdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xyXG5cclxuXHRpZihzb3VyY2VNYXApIHtcclxuXHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XHJcblx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XHJcblx0fVxyXG5cclxuXHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcclxuXHJcblx0dmFyIG9sZFNyYyA9IGxpbmtFbGVtZW50LmhyZWY7XHJcblxyXG5cdGxpbmtFbGVtZW50LmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG5cclxuXHRpZihvbGRTcmMpXHJcblx0XHRVUkwucmV2b2tlT2JqZWN0VVJMKG9sZFNyYyk7XHJcbn1cclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1xuICoqIG1vZHVsZSBpZCA9IDEzNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSB7XG5cdFwiY3VydmUtZWRpdG9yXCI6IFwiX2N1cnZlLWVkaXRvcl8xdnE2bF80XCIsXG5cdFwiY3VydmUtZWRpdG9yX19sZWZ0XCI6IFwiX2N1cnZlLWVkaXRvcl9fbGVmdF8xdnE2bF8xXCIsXG5cdFwiY3VydmUtZWRpdG9yX19yaWdodFwiOiBcIl9jdXJ2ZS1lZGl0b3JfX3JpZ2h0XzF2cTZsXzFcIixcblx0XCJjdXJ2ZS1lZGl0b3JfX2FuY2hvci1idXR0b25zXCI6IFwiX2N1cnZlLWVkaXRvcl9fYW5jaG9yLWJ1dHRvbnNfMXZxNmxfMVwiLFxuXHRcImN1cnZlLWVkaXRvcl9fbW9qcy1sb2dvXCI6IFwiX2N1cnZlLWVkaXRvcl9fbW9qcy1sb2dvXzF2cTZsXzFcIlxufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXBwL2Nzcy9ibG9ja3MvY3VydmUtZWRpdG9yLnBvc3Rjc3MuY3NzLmpzb25cbiAqKiBtb2R1bGUgaWQgPSAxMzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAtbG9hZGVyL2luZGV4LmpzIS4vbWFpbi5wb3N0Y3NzLmNzc1wiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi9ub2RlX21vZHVsZXMvc291cmNlLW1hcC1sb2FkZXIvaW5kZXguanMhLi9tYWluLnBvc3Rjc3MuY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAtbG9hZGVyL2luZGV4LmpzIS4vbWFpbi5wb3N0Y3NzLmNzc1wiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2FwcC9jc3MvbWFpbi5wb3N0Y3NzLmNzc1xuICoqIG1vZHVsZSBpZCA9IDEzN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJib2R5LGh0bWx7bWFyZ2luOjA7cGFkZGluZzowO2JhY2tncm91bmQ6I2ZmZjVlNH0qe2JveC1zaXppbmc6Ym9yZGVyLWJveH1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vfi9wb3N0Y3NzLWxvYWRlciEuL34vc291cmNlLW1hcC1sb2FkZXIhLi9hcHAvY3NzL21haW4ucG9zdGNzcy5jc3NcbiAqKiBtb2R1bGUgaWQgPSAxMzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlxuXG5pbXBvcnQgQyBmcm9tICcuLi9jb25zdGFudHMnO1xuXG5jb25zdCBZX1NJWkUgPSBDLkNVUlZFX1NJWkU7XG5jb25zdCBtb2QgPSAoIHRlbXBSZXNpemVfdG9wLCBjb2VmID0gMSApID0+IHtcbiAgY29uc3QgTU9EID0gTWF0aC5hYnModGVtcFJlc2l6ZV90b3AgJSBZX1NJWkUpLFxuICAgICAgICBESVYgPSBwYXJzZUludCh0ZW1wUmVzaXplX3RvcCAvIFlfU0laRSksXG4gICAgICAgIEdBUCA9IDE1O1xuXG4gIGlmIChNT0QgPCBHQVAgKSB7IHRlbXBSZXNpemVfdG9wID0gRElWKllfU0laRTsgfVxuICBlbHNlIGlmICggTU9EID4gWV9TSVpFIC0gR0FQICkgeyB0ZW1wUmVzaXplX3RvcCA9IGNvZWYqKERJVisxKSpZX1NJWkU7IH1cblxuICByZXR1cm4gdGVtcFJlc2l6ZV90b3A7XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vZDtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9qcy9oZWxwZXJzL3Jlc2l6ZS1tb2QuYmFiZWwuanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9